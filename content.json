{"meta":{"title":"ğŸ›«Qifei's Blog","subtitle":"SCI.CI","description":"Life matters","author":"Qifei","url":"https://sci.ci","root":"/"},"pages":[{"title":"","date":"2023-12-02T00:05:56.277Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":".well-known/nostr.json","permalink":"https://sci.ci/.well-known/nostr.json","excerpt":"","text":"{\"names\":{\"qifei\":\"39ce739ce1ba7e1d6ce3a7fe2dc751d8c21c96de4b2fdd9729878766a9b3fc3e\"}}"},{"title":"å…³äº","date":"2019-10-24T08:41:10.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"about/index.html","permalink":"https://sci.ci/about/index.html","excerpt":"","text":"Work and Internship Accenture - Duesseldorf, Germany 2023/09-present IT Consultant ISEA RWTH Aachen 2023/03-2023/07Student Assistant Education M.Sc 2020/04 - 2023/03RWTH AachenSustainable Energy Supply B.Eng 2015/09 - 2019/06China University of Petroleum(East China)Mechanical Design, Manufactory, and its Automation Contact Email&#x71;&#x69;&#102;&#101;&#105;&#x2e;&#x78;&#105;&#101;&#64;&#115;&#x63;&#x69;&#46;&#x63;&#105; WeChatxie_qifei"},{"title":"archives","date":"2019-07-19T08:39:20.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"archives/index.html","permalink":"https://sci.ci/archives/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2019-07-19T08:39:20.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"categories/index.html","permalink":"https://sci.ci/categories/index.html","excerpt":"","text":""},{"title":"contact","date":"2019-07-26T09:17:02.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"contact/index.html","permalink":"https://sci.ci/contact/index.html","excerpt":"","text":"æ¬¢è¿ç•™è¨€å¤§å®¶æœ‰ä»»ä½•é—®é¢˜ï¼Œéƒ½å¯ä»¥åœ¨è¯„è®ºåŒºç»™æˆ‘ç•™è¨€ï¼Œæˆ–è€…åŠ æˆ‘è”ç³»æ–¹å¼ï¼š QQï¼š975322731 å¾®ä¿¡ï¼šTakeOff_Xie æˆ‘å¾ˆå¿™å•¦ï¼Œå¦‚æœä¸æ˜¯å¾ˆéº»çƒ¦çš„é—®é¢˜å°±ç›´æ¥åœ¨è¯„è®ºåŒºç•™è¨€å•¦ã€‚å½“ç„¶ä¸ä»‹æ„ä½ åŠ æˆ‘~~ å‹é“¾äº¤æ¢æƒ³è¦äº¤æ¢å‹é“¾çš„å°ä¼™ä¼´ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œç•™è¨€æ ¼å¼ï¼š åç§°ï¼šä½ çš„åšå®¢åç§° åœ°å€ï¼šä½ çš„åšå®¢åœ°å€ ç®€ä»‹ï¼šä¸€å¥è¯ç®€ä»‹ å¤´åƒï¼šä½ çš„å¤´åƒåœ°å€ ä¾‹å¦‚æˆ‘çš„åšå®¢å‹é“¾ï¼Œå¤§å®¶å¯ä»¥åŠ åˆ°è‡ªå·±åšå®¢é‡Œå“¦ï¼š åç§°ï¼šé£å§ åœ°å€ï¼šhttps://fei.bar ç®€ä»‹ï¼šåˆ†äº«ç”Ÿæ´»å’Œå­¦ä¹ ã€‚ å¤´åƒï¼šhttps://fei.bar/medias/avatars/profile.jpg"},{"title":"æˆ‘çš„æœ‹å‹ä»¬","date":"2019-07-19T08:42:10.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"friends/index-DESKTOP-N8PHHQN.html","permalink":"https://sci.ci/friends/index-DESKTOP-N8PHHQN.html","excerpt":"","text":"å‹é“¾äº¤æ¢æƒ³è¦äº¤æ¢å‹é“¾çš„å°ä¼™ä¼´ï¼Œæ¬¢è¿åœ¨ç•™è¨€æ¿ç•™è¨€ï¼Œç•™è¨€æ ¼å¼ï¼š åç§°ï¼šä½ çš„åšå®¢åç§° åœ°å€ï¼šä½ çš„åšå®¢åœ°å€ ç®€ä»‹ï¼šä¸€å¥è¯ç®€ä»‹ å¤´åƒï¼šä½ çš„å¤´åƒåœ°å€ ä¾‹å¦‚æˆ‘çš„åšå®¢å‹é“¾ï¼Œå¤§å®¶å¯ä»¥åŠ åˆ°è‡ªå·±åšå®¢é‡Œå“¦ï¼š åç§°ï¼šé£å§ åœ°å€ï¼šhttps://fei.bar ç®€ä»‹ï¼šåˆ†äº«ç”Ÿæ´»å’Œå­¦ä¹  å¤´åƒï¼šhttps://fei.bar/medias/avatars/profile.jpg"},{"title":"å‹é“¾","date":"2019-07-19T08:42:10.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"friends/index.html","permalink":"https://sci.ci/friends/index.html","excerpt":"","text":"loadQexoFriends(\"friend-content\", \"https://blog-admin.sci.ci\") å‹é“¾ç”³è¯· qexo_friend_api(\"friends-api\",\"https://blog-admin.sci.ci\",\"\");"},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2019-07-19T08:40:27.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"tags/index.html","permalink":"https://sci.ci/tags/index.html","excerpt":"","text":""},{"title":"è¯´è¯´","date":"2023-12-01T23:46:11.738Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"talks/index.html","permalink":"https://sci.ci/talks/index.html","excerpt":"","text":"showQexoTalks(\"qexot\", \"https://blog-admin.sci.ci\", 5)"}],"posts":[{"title":"åˆ©ç”¨å›½å†…æœåŠ¡å™¨åŠ é€Ÿv2rayè®¿é—®é€Ÿåº¦å’Œè§„é¿æ£€æŸ¥","slug":"yuque/dg4x1y8qy3sv2kud","date":"2023-11-19T14:23:25.000Z","updated":"2023-12-02T00:06:38.230Z","comments":true,"path":"2023/11/19/yuque/dg4x1y8qy3sv2kud/","link":"","permalink":"https://sci.ci/2023/11/19/yuque/dg4x1y8qy3sv2kud/","excerpt":"","text":"ç®€ä»‹ä¸ºä»€ä¹ˆç”¨å›½å†…æœåŠ¡å™¨ï¼Ÿå›½å†…è¿æ¥å¤–ç½‘æ—¶ï¼Œæœ¬åœ°çš„è¥è¿å•†å’Œç½‘ç»œæœåŠ¡ä¼šæå¤§å½±å“æˆ‘ä»¬è¿æ¥å¤–ç½‘çš„èƒ½åŠ›ã€‚æ­¤æ—¶å¤–ç½‘æœåŠ¡å™¨çš„è·¯ç”±é…ç½®å°±åŠå…¶é‡è¦ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šé€‰åœ¨è·¯ç”±è¾ƒå¥½çš„æœºæˆ¿ï¼Œæ¯”å¦‚ä½¿ç”¨äº† CN2 ä¹‹ç±»çº¿è·¯çš„æœºæˆ¿ã€‚ä½†æ˜¯ï¼Œè¿™ç§æœºæˆ¿çš„æˆæœ¬é€šå¸¸æ˜¯æ¯”è¾ƒé«˜çš„ã€‚åˆ©ç”¨å›½å†…çš„æœåŠ¡å™¨ï¼Œå¯ä»¥é€‚å½“çš„æé«˜æˆ‘ä»¬è¿æ¥å¤–ç½‘çš„é€Ÿåº¦ï¼ŒåŒæ—¶ä¹Ÿèƒ½è§„é¿æ‰æµé‡å®¡æŸ¥ã€‚å›½å†…æœåŠ¡å™¨åœ¨ä¼ä¸šç½‘ç»œä¸‹ï¼Œä¸€æ–¹é¢è¢«ç›‘æ§æµé‡çš„å¯èƒ½æ€§æ¯”è¾ƒå°ï¼Œå¦ä¸€æ–¹é¢å»¶è¿Ÿä¹Ÿä¼šç›¸å¯¹æ¯”è¾ƒä½ã€‚è¿™æ ·å¯ä»¥æœ‰æ•ˆä¿æŠ¤å›½å¤–æœåŠ¡å™¨ ip å’Œç«¯å£ï¼Œå…å—å°é”ã€‚æ­¤æ–¹æ³•ä¸æ­¢é€‚ç”¨äº v2rayï¼Œå…¶ä»–åè®®æ¯”å¦‚ ssrï¼Œssï¼Œtrojan éƒ½é€‚ç”¨æ­¤æ–¹æ³•ã€‚ å¦‚ä½•åŠ é€Ÿè®¿é—® v2rayï¼Ÿé€šè¿‡ stunnel è½¯ä»¶ï¼Œåœ¨å›½å†…æœåŠ¡å™¨ä¸Šå®‰è£… stunnel åšå®¢æˆ·ç«¯ï¼Œå®‰è£…äº† v2ray çš„å›½å¤–æœåŠ¡å™¨ä¸Šå®‰è£… stunnel ä½œä¸ºæœåŠ¡ç«¯ã€‚åŸæ¥è®¿é—® v2ray æ¥å®ç°è¿æ¥å¤–ç½‘ï¼Œç°åœ¨æ˜¯å°† v2ray çš„è¯·æ±‚å…ˆå‘é€ç»™å›½å†…æœåŠ¡å™¨ï¼Œç„¶åå›½å†…æœåŠ¡å™¨é€šè¿‡ stunnel å°†è¯·æ±‚è½¬å‘ç»™å›½å¤–æœåŠ¡å™¨ï¼Œå†è¿æ¥ v2ray æœåŠ¡å™¨è®¿é—®å¤–ç½‘ã€‚ è°é€‚åˆé˜…è¯»æ­¤æ–‡ï¼Ÿè¿™ç¯‡æ•™ç¨‹é€‚åˆæœ‰ linux åŸºç¡€çš„æœ‹å‹é˜…è¯»ï¼Œå¯¹äºå®‰è£…å¥½ v2ray ç­‰åŠ é€Ÿå™¨ä¹‹åï¼Œæƒ³è¦è¿›ä¸€æ­¥ä¼˜åŒ–è®¿é—®çš„æœ‹å‹ï¼Œå¯ä»¥è¯•è¯•å»æ“ä½œã€‚å¾ˆå¤šæœ‹å‹ä½¿ç”¨ä¸€é”®å®‰è£… v2rayï¼Œå› æ­¤å¯¹ linux æŒ‡ä»¤ä¹Ÿä¸æ˜¯å¾ˆäº†è§£ï¼Œå°±ä¸å»ºè®®é˜…è¯»äº†ï¼Œè¿™ä¸æ˜¯ä¸€ç¯‡å‚»ç“œæ•™ç¨‹ï¼Œé‡åˆ°çš„ä¸€äº›é—®é¢˜éœ€è¦è‡ªè¡Œè§£å†³ã€‚ å›½å†…æœåŠ¡å™¨çš„é…ç½®2.1. æœåŠ¡å™¨çš„é€‰æ‹©å›½å†…æœåŠ¡å™¨çš„ä»·æ ¼éƒ½æ˜¯æ¯”è¾ƒæ˜‚è´µçš„ï¼Œåœ¨è¿™é‡Œç”¨åˆ°çš„æœåŠ¡å™¨é…ç½®ä¸ç”¨å¤ªé«˜ï¼Œä¸»è¦éœ€è¦æ³¨æ„çš„æ˜¯å¸¦å®½å¯ä»¥æœ‰ 2M ä»¥ä¸Šçš„ã€‚é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ï¼Œæœ€ä¾¿å®œçš„ä¸€æ¬¾æ–°äººåªè¦ä¸€å¹´ 100 å·¦å³ï¼Œè…¾è®¯äº‘ä¹Ÿæœ‰ç±»ä¼¼ä¼˜æƒ ã€‚å¦‚æœæ²¡æœ‰ä¼˜æƒ äº†å¯ä»¥å»æ·˜å®è¯•è¯•èƒ½ä¸èƒ½ä¹°åˆ°ä½ä»·çš„ã€‚ 2.2. é˜²ç«å¢™è®¾ç½®åœ¨è´­ä¹°å¥½æœåŠ¡å™¨ä¹‹åï¼Œéœ€è¦åœ¨æœåŠ¡å•†åå°å¼€å¯é˜²ç«å¢™ï¼Œåªç”¨å¼€å¯ä¸€ä¸ªå°±è¡Œï¼Œæˆ‘è¿™é‡Œå¼€å¯çš„æ˜¯ 8888æ­¤å¤–ï¼Œéœ€è¦åœ¨ç™»å½• linux ç³»ç»Ÿä¹‹åé€šè¿‡ firewall-cmd å‘½ä»¤åœ¨ linux æœºå™¨ä¸Šæ¥å¼€å¯ 8888 ç«¯å£ã€‚å¦‚æœæ²¡æœ‰ firewall-cmd å¯ä»¥ç”¨ apt æˆ–è€… yum æŒ‡ä»¤å®‰è£…ã€‚å¼€å¯ç«¯å£æ­¥éª¤å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ firewalld æœåŠ¡çš„çŠ¶æ€ï¼š 1sudo systemctl status firewalld å¦‚æœçŠ¶æ€æ˜¾ç¤ºä¸ºâ€activeâ€ï¼Œåˆ™è¡¨ç¤º firewalld æœåŠ¡æ­£åœ¨è¿è¡Œã€‚å¦‚æœçŠ¶æ€æ˜¾ç¤ºä¸ºâ€inactiveâ€ï¼Œåˆ™éœ€è¦å¯åŠ¨ firewalld æœåŠ¡ï¼š 1sudo systemctl start firewalld ç¡®è®¤ firewall-cmd å·¥å…·å¯ç”¨ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ firewall-cmd æ˜¯å¦å¯ç”¨ï¼š 1firewall-cmd --version ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ æˆ–æ‰“å¼€ 8888 ç«¯å£ï¼š 1sudo firewall-cmd --add-port=8888/tcp --permanent è¿™å°†åœ¨é˜²ç«å¢™è§„åˆ™ä¸­æ°¸ä¹…æ€§åœ°æ·»åŠ  8888 ç«¯å£ã€‚ é‡æ–°åŠ è½½é˜²ç«å¢™ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š 1sudo firewall-cmd --reload ç°åœ¨ï¼Œ8888 ç«¯å£å·²ç»é€šè¿‡ firewall-cmd æˆåŠŸåœ°æ‰“å¼€äº†ã€‚è¯·æ³¨æ„ï¼Œä½¿ç”¨ sudo å‘½ä»¤æ¥è·å–ç®¡ç†å‘˜æƒé™æ‰§è¡Œä¸Šè¿°å‘½ä»¤ã€‚ 2.3. å®‰è£…å’Œé…ç½® stunnel å®‰è£… stunnelï¼Œå¯¹äº Debian å’Œ Ubuntuï¼š 1apt install stunnel å¯¹äº Centosï¼š 1yum install stunnel ç”Ÿæˆ pem è¯ä¹¦ è¯ä¹¦ç”¨æ¥å»ºç«‹ TSL è¿æ¥ï¼Œåœ¨ stunnel æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä½¿ç”¨ç›¸åŒçš„è¯ä¹¦ï¼Œç”ŸæˆæŒ‡ä»¤ 1openssl req -new -x509 -days 3650 -nodes -out stunnel.pem -keyout stunnel.pem å°†è¯ä¹¦ç§»åˆ°/etc/stunnel/ ç›®å½•ä¸‹ï¼Œ 1mv stunnel.pem /etc/stunnel/ é…ç½® stunnelï¼Œé…ç½®æ–‡ä»¶éœ€è¦æ‰‹åŠ¨åœ¨æ–‡ä»¶ä¸­ç¼–è¾‘ï¼Œé…ç½®æ–‡ä»¶å‚¨å­˜åœ¨/etc/stunnel/stunnel.conf ä¸­ï¼Œæ²¡æœ‰çš„è¯ç›´æ¥æ–°å»ºä¸€ä¸ªå°±è¡Œï¼Œstunnel ä¼šè‡ªåŠ¨è¯»å–æ­¤æ–‡ä»¶ã€‚ é€šè¿‡ vim æ‰“å¼€æ­¤æ–‡ä»¶ 1vim /etc/stunnel/stunnel.conf å¹¶ç¼–è¾‘å†…å®¹å¦‚ä¸‹ï¼š 12345client = yes[v2ray]accept = 8888connect = 123.123.123.123:8888CAfile = /etc/stunnel/stunnel.pem accept åè·Ÿæˆ‘ä»¬ä¹‹å‰å¼€å¯çš„ç«¯å£ï¼Œç”¨äºç›‘å¬è¯·æ±‚ï¼Œè¯·æ±‚å°†è¢«è½¬å‘åˆ° connect åé¢çš„ ip å’Œç«¯å£ï¼Œconnect çš„ ip ä¸º v2ray çš„ ipï¼Œç«¯å£æ˜¯ stunnel æœåŠ¡ç«¯çš„ç«¯å£ï¼ŒæœåŠ¡ç«¯ä¹Ÿå¼€å¯ 8888 ä½œä¸ºæ¥å—å®¢æˆ·ç«¯è¯·æ±‚ã€‚ä¾æ¬¡æŒ‰ ESCï¼Œå†’å·å’Œ wqï¼Œé€€å‡ºç¼–è¾‘å™¨å¹¶ä¿å­˜å†…å®¹ã€‚ è¾“å…¥æŒ‡ä»¤å¼€å¯ stunnel 1stunnel æ²¡æœ‰è¾“å‡ºå†…å®¹ï¼Œåˆ™å¯åŠ¨æˆåŠŸï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‡ä»¤ 1lsof -i :8888 æŸ¥çœ‹ç«¯å£æ˜¯å¦ä¸ stunnel ç»‘å®šæˆåŠŸã€‚ tipsï¼šå¯ä»¥åœ¨å¦ä¸€å° linux æœºå™¨ä¸Šï¼Œé€šè¿‡æŒ‡ä»¤ telnet ip 8888 æŸ¥çœ‹ç«¯å£æ˜¯å¦èƒ½å»ºç«‹è¿æ¥ï¼Œå¦‚æœä¸è¡Œï¼Œè¯´æ˜é˜²ç«å¢™æ²¡è®¾ç½®å¥½ å›½å¤–æœåŠ¡å™¨çš„é…ç½®åœ¨å®‰è£…äº† v2ray çš„æœºå™¨ä¸Šï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… stunenl æœåŠ¡ç«¯ï¼Œv2ray å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾ä¸€é”®å®‰è£…è„šæœ¬å®‰è£…ã€‚ é˜²ç«å¢™é…ç½®æ ¹æ® 2.2 ç« èŠ‚æè¿°ï¼Œä¿®æ”¹é˜²ç«å¢™è§„åˆ™ï¼Œå¼€å¯ 8888 ç«¯å£ å®‰è£…å’Œé…ç½® stunnel æœåŠ¡ç«¯ æŒ‰ç…§ 2.3 èŠ‚æŒ‡å¯¼ï¼Œå®‰è£… stunnel pem è¯ä¹¦éœ€è¦ä¸å®¢æˆ·ç«¯çš„ä¸€è‡´ï¼Œå› æ­¤éœ€è¦å°†å›½å†…æœåŠ¡å™¨ä¸Š /etc/stunnel/stunnel.pem æ–‡ä»¶æ‹·è´åˆ°å›½å¤–æœåŠ¡å™¨çš„/etc/stunnel/stunnel.pem æ–‡ä»¶é‡Œï¼Œå¯ä»¥é€šè¿‡ sftpï¼Œæˆ–è€… mac ç”µè„‘ä¸Šçš„ scp æŒ‡ä»¤æ‹·è´ã€‚ Mac ç”µè„‘æ‹·è´æ–¹æ³•æ˜¯ï¼Œå…ˆå°†æ–‡ä»¶æ‹·è´åˆ°æœ¬åœ°ï¼Œå†ä¸Šä¼ å¦ä¸€å°æœåŠ¡å™¨ã€‚å‚è€ƒæŒ‡ä»¤ï¼š 1scp root@china_server_ip:/etc/stunnel/stunnel.pem /Users/username/ è¿™é‡Œ root æ˜¯è¿œç¨‹æœåŠ¡å™¨çš„ç”¨æˆ·åï¼Œchina_server_ip æ˜¯ IP åœ°å€ï¼Œ/Users/username æ˜¯æœ¬åœ°è·¯å¾„ã€‚è¿è¡ŒæŒ‡ä»¤åï¼Œæ ¹æ®è¦æ±‚è¾“å…¥å¯†ç å°±è¡Œå†å°†æœ¬åœ°ä¿å­˜çš„æ–‡ä»¶ï¼Œä¸Šä¼ åˆ°å›½å¤–æœåŠ¡å™¨ã€‚ 1scp /Users/username/stunnel.pem root@oversea_server_ip:/etc/stunnel/stunnel.pem vim æ‰“å¼€å¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶ 12345cert = /etc/stunnel/stunnel.pemkey = /etc/stunnel/stunnel.pem[v2ray]accept = 8888connect = localhost:443 è¿™é‡Œçš„ accept=8888 æ‰¿æ¥å›½å†…æœåŠ¡å™¨çš„ connect æŒ‡ä»¤ä¸­çš„ç«¯å£é…ç½®ã€‚connect çš„åœ°å€æ˜¯æœ¬åœ°çš„ 443 ç«¯å£ï¼Œç”±äº v2ray é…ç½®çš„ç«¯å£æ˜¯ 443ï¼Œå› æ­¤è¿™é‡Œå¡«å†™ 443. é€šè¿‡ stunnel æŒ‡ä»¤è¿è¡Œ stunnel æœåŠ¡ç«¯ æ€»ç»“åœ¨é…ç½®å¥½ stunnel å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹åï¼Œç°åœ¨éœ€è¦ä¿®æ”¹ v2ray å®¢æˆ·ç«¯ä¸­çš„åŸæœ‰é…ç½®ï¼Œå°†æœåŠ¡å™¨åœ°å€ï¼Œä»åŸæ¥çš„å›½å¤–æœåŠ¡å™¨ä¿®æ”¹ä¸ºå›½å†…æœåŠ¡å™¨åœ°å€ï¼Œå°†ç«¯å£å·ç”±åŸæ¥ v2ray é…ç½®çš„ 443 ä¿®æ”¹ä¸º stunnel å®¢æˆ·ç«¯çš„ accept ç«¯å£ 8888ã€‚è‡³æ­¤ï¼Œstunnel çš„é…ç½®å°±å®Œæˆäº†ã€‚ æ­¤æ•™ç¨‹æ˜¯åŸºäºåŸæ¥å›½å¤–æœåŠ¡å™¨å·²ç»å®‰è£…å¥½äº† v2ray, ssr ç­‰åŠ é€Ÿå™¨çš„å‰æï¼Œå¹¶ä¸” IP åœ¨å›½å†…æ˜¯å¯ä»¥ ping é€šçš„ã€‚å¦åˆ™å›½å†…æœåŠ¡å™¨ä¹Ÿæ— æ³•è¿æ¥ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"Stunnel","slug":"Stunnel","permalink":"https://sci.ci/tags/Stunnel/"},{"name":"V2ray","slug":"V2ray","permalink":"https://sci.ci/tags/V2ray/"}]},{"title":"æœºå™¨å­¦ä¹ å¸¸ç”¨ä»£ç ","slug":"yuque/bycwx191g5l09r4h","date":"2023-10-24T13:21:12.000Z","updated":"2023-12-02T00:06:38.278Z","comments":true,"path":"2023/10/24/yuque/bycwx191g5l09r4h/","link":"","permalink":"https://sci.ci/2023/10/24/yuque/bycwx191g5l09r4h/","excerpt":"","text":"æ•°æ®åˆ†æå’Œå¯è§†åŒ–åœ¨åšæ•°æ®æ¨¡å‹çš„é€‰æ‹©ä¹‹å‰ï¼Œé€šå¸¸éœ€è¦å¯¹æ•°æ®è¿›è¡Œå¯è§†åŒ–ï¼Œä»¥å¯»æ‰¾æ•°æ®ä¹‹é—´çš„å¯è§å…³ç³»ï¼Œæ¯”å¦‚ä¸¤ä¸ªæ•°æ®æ˜¯å¦å­˜åœ¨çº¿æ€§å…³ç³»ã€‚è¿™é‡Œåˆ—ä¸¾æ–¹ä¾¿å¿«æ·çš„å¯è§†åŒ–æ“ä½œï¼Œæ¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿæ‰¾åˆ°æ•°æ®ä¹‹é—´çš„å…³ç³»ã€‚ å•å˜é‡ç®±å›¾123# datasetä¸ºdataframedataset.plot(kind=&#x27;box&#x27;, subplots=True, layout=(2,2), sharex=False, sharey=False)plt.show() ä¸‹å›¾æ˜¯ç»˜åˆ¶å‡ºçš„ box å›¾ï¼Œå›¾å½¢ä¸­ï¼Œç»¿çº¿ä¸ºå¹³å‡å€¼ï¼Œæ–¹æ¡†ä¸º 25%ä¸ 75%æ•°å€¼èŒƒå›´ï¼Œä¸Šä¸‹è¾¹ç•Œå€¼ï¼Œåœ†åœˆæ ‡è®°å¼‚å¸¸å€¼ã€‚ æŸ±çŠ¶å›¾1234...# histogramsdataset.hist()plt.show() ç»˜åˆ¶æŸ±çŠ¶å›¾ å¤šå˜é‡å˜é‡ä¹‹é—´çš„æ•°æ®åˆ†å¸ƒ12345from pandas.plotting import scatter_matrix...# scatter plot matrixscatter_matrix(dataset)plt.show() ç»˜åˆ¶å…³ç³»å›¾ å˜é‡ç›¸å…³æ€§æ˜¾ç¤ºç›¸å…³æ€§æ•°æ®åŠçƒ­å›¾ï¼Œæ•°è¶Šå¤§ç›¸å…³ 1234567import matplotlib.pyplot as pltimport seaborn as sns# dataset is dataframecorrelation = dataset.corr()# display(correlation)plt.figure(figsize=(14, 12))heatmap = sns.heatmap(correlation, annot=True, linewidths=0, vmin=-1, cmap=&quot;RdBu_r&quot;) ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„å¯¹æ¯”12345678910111213#Visualize the co-relation between pH and fixed Acidity#Create a new dataframe containing only pH and fixed acidity columns to visualize their co-relationsfixedAcidity_pH = dataset[[&#x27;pH&#x27;, &#x27;fixed acidity&#x27;]]#Initialize a joint-grid with the dataframe, using seaborn librarygridA = sns.JointGrid(x=&quot;fixed acidity&quot;, y=&quot;pH&quot;, data=fixedAcidity_pH, size=6)#Draws a regression plot in the gridgridA = gridA.plot_joint(sns.regplot, scatter_kws=&#123;&quot;s&quot;: 10&#125;)#Draws a distribution plot in the same gridgridA = gridA.plot_marginals(sns.distplot) æ¨¡å‹é€‰æ‹©sklearn æè®¸å¤šæ¨¡å‹ï¼Œå¯¹äºä¸åŒçš„æ•°æ®é›†ï¼Œä¸åŒçš„æ¨¡å‹è®­ç»ƒä¹‹åä¼šäº§ç”Ÿä¸åŒçš„ç»“æœã€‚å¸¸ç”¨çš„æ¨¡å‹å’Œå¯¼å…¥æ–¹å¼ 1234567from sklearn.linear_model import LogisticRegressionfrom sklearn.tree import DecisionTreeClassifierfrom sklearn.neighbors import KNeighborsClassifierfrom sklearn.discriminant_analysis import LinearDiscriminantAnalysisfrom sklearn.naive_bayes import GaussianNBfrom sklearn.svm import SVC æ¨¡å‹è®­ç»ƒå¯¹äºä¸€ä¸ªé€‰æ‹©çš„æ¨¡å‹ï¼Œè¦å¯¹å…¶è¿›è¡Œè®­ç»ƒã€‚é¦–å…ˆï¼Œéœ€è¦å°†æ•°æ®é›†åˆ†ä¸ºè®­ç»ƒé›†å’ŒéªŒè¯é›†ï¼Œç„¶åè®­ç»ƒæ¨¡å‹ï¼Œè¾“å‡ºç²¾ç¡®åº¦ã€‚ 123456789from sklearn.model_selection import train_test_split...#æ•°æ®é›†æå–xå’Œyï¼Œxå¯¹åº”å±æ€§ï¼Œyå¯¹åº”åˆ†ç±»X_array = dataset.values[:,:4]y_array = dataset.values[:,4]#æŒ‰ç…§1:4è·å–éªŒè¯é›†å’Œè®­ç»ƒé›†X_train,X_test,y_train,y_test = train_test_split(X_array,y_array,test_size=0.2,shuffle=True)model= SVC()model.fit(X_train,y_train) æ¨¡å‹æ‰“åˆ†ï¼Œé¢„æµ‹ï¼Œå’Œä¿å­˜123456789101112print(model.score(X_test,y_test))prediction = model.predict(X_test)import joblib# save the model to diskfilename = &#x27;finalized_model.sav&#x27;joblib.dump(model, filename)# some time later...# load the model from diskloaded_model = joblib.load(filename) å‚è€ƒã€ŠYour First Machine Learning Project in Python Step-By-Stepã€‹ã€ŠHow to Use Data Science to Understand What Makes Wine Taste Goodã€‹ã€ŠSave and Load Machine Learning Models in Python with scikit-learnã€‹","categories":[{"name":"Machine Learning","slug":"Machine-Learning","permalink":"https://sci.ci/categories/Machine-Learning/"}],"tags":[{"name":"Data Science","slug":"Data-Science","permalink":"https://sci.ci/tags/Data-Science/"},{"name":"Machine Learning","slug":"Machine-Learning","permalink":"https://sci.ci/tags/Machine-Learning/"}]},{"title":"Matplotlib Bar3dç»˜åˆ¶å½©è‰²å¸¦é¢œè‰²æ ‡å°ºçš„3DæŸ±å½¢å›¾","slug":"yuque/aha72bh3a4clcgmn","date":"2023-02-16T14:43:35.000Z","updated":"2023-12-02T00:06:38.338Z","comments":true,"path":"2023/02/16/yuque/aha72bh3a4clcgmn/","link":"","permalink":"https://sci.ci/2023/02/16/yuque/aha72bh3a4clcgmn/","excerpt":"","text":"Bar3d çš„å®˜æ–¹ç¤ºä¾‹å¹¶ä¸å¥½çœ‹ï¼Œå› ä¸ºå®ƒä¸èƒ½æ ¹æ®æŸ±çš„é«˜åº¦æ¥æ˜¾ç¤ºä¸åŒçš„é¢œè‰²ã€‚è™½ç„¶ bar3d å‡½æ•°å¯ä»¥è®¾ç½®æ¯ä¸ªæŸ±å­çš„é¢œè‰²ï¼Œä½†å¦‚ä½•è®¾ç½®å‘¢ï¼Ÿå³ä¾§çš„é¢œè‰²æ ‡å°ºåˆå¦‚ä½•æ·»åŠ ï¼Ÿæœ¬æ–‡å°†è¯¦ç»†ä»‹ç»ä»£ç å’Œå¿…è¦çš„è§£é‡Šã€‚ Matplotlib æ˜¯ä¸€ä¸ªæµè¡Œçš„ Python å¯è§†åŒ–åº“ï¼Œå®ƒå¯ä»¥ç”¨æ¥åˆ›å»ºå„ç§å›¾è¡¨ï¼ŒåŒ…æ‹¬ 3D æŸ±å½¢å›¾ã€‚bar3d å‡½æ•°å¯ä»¥ç”¨æ¥åˆ›å»º 3D æŸ±å½¢å›¾ï¼Œå…¶ä¸­æ¯ä¸ªæŸ±å­ç”±å…¶é•¿åº¦ã€å®½åº¦å’Œé«˜åº¦å®šä¹‰ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨ Matplotlib åˆ›å»º 3D æŸ±å½¢å›¾çš„åŸºæœ¬æ­¥éª¤ï¼š 1.å¯¼å…¥ Matplotlib å’Œ Numpy åº“ 123import matplotlib.pyplot as pltimport numpy as npfrom matplotlib.colors import LightSource 2.å‡†å¤‡æ•°æ® ä¸ºäº†åˆ›å»º 3D æŸ±å½¢å›¾ï¼Œéœ€è¦å‡†å¤‡ä»¥ä¸‹æ•°æ®ï¼š x,y,zï¼šæ¯ä¸ªæŸ±å­çš„åº•é¢ä¸­å¿ƒåæ ‡ã€‚ dx, dy, dzï¼šæ¯ä¸ªæŸ±å­çš„å®½åº¦ã€é•¿åº¦å’Œé«˜åº¦ã€‚ colorsï¼šæ¯ä¸ªæŸ±å­çš„é¢œè‰²ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹æ•°æ®ï¼š 12345678910111213_x = np.arange(4) \\\\ç”Ÿæˆ0åˆ°3çš„list_y = np.arange(5) \\\\ç”Ÿæˆ0åˆ°4çš„list_xx, _yy = np.meshgrid(_x, _y) \\\\åˆ›å»ºä¸€ä¸ª4è¡Œ5åˆ—çš„ç½‘æ ¼åæ ‡é˜µåˆ—ï¼Œæ¯ä¸ªåæ ‡ä¸ºä¸€ä¸ªå…ƒç»„(_x,_y)ã€‚_xxï¼Œå’Œ_yyåˆ™åˆ†åˆ«ä¸ºå¯¹åº”çš„4è¡Œ5åˆ—åæ ‡çš„xè½´å’Œyè½´å€¼ã€‚x, y = _xx.ravel(), _yy.ravel() \\\\å°†xè½´å’Œyè½´çš„4è¡Œ5åˆ—ç½‘æ ¼çš„å±•å¼€ä¸ºä¸€ç»´åˆ—è¡¨ã€‚dz = x + y \\\\æŸ±å­é«˜åº¦ä¸ºx+yz = np.zeros_like(dz)dx = dy = 1 \\\\æŸ±å­é•¿å®½ä¸º1ï¼Œå¦‚æœxæˆ–è€…yçš„ticksä¸åŒï¼Œæ¯”å¦‚xä¸º[1,3,5]ï¼Œdxè®¾ç½®ä¸º2æ‰èƒ½ä½¿æŸ±å­ç›¸äº’ä¹‹é—´æ²¡æœ‰é—´è·\\\\è®¾ç½®æ¯æ ¹æŸ±å­çš„é¢œè‰²ï¼Œæœ€å°å€¼ä¸ºè“è‰²ï¼Œæœ€å¤§å€¼ä¸ºçº¢è‰²ï¼Œä¸­é—´å€¼æ¸å˜ã€‚if((dz.max() - dz.min()) != 0): colors = plt.cm.jet((dz.flatten() - dz.min()) / (dz.max() - dz.min()))else: colors = plt.cm.jet((dz.flatten() - dz.min())) 3.åˆ›å»ºå›¾å½¢å¯¹è±¡å¹¶ç»˜åˆ¶æŸ±å½¢å›¾ 1234fig = plt.figure(figsize=(6, 5),dpi=300)ax = fig.add_subplot(111, projection=&#x27;3d&#x27;)ax.bar3d(x, y, z, dx, dy, dz, color=colors,shade=True)plt.show() è¿™å°†åˆ›å»ºä¸€ä¸ª 3D æŸ±å½¢å›¾ï¼Œå…¶ä¸­æ¯ä¸ªæŸ±å­çš„é¢œè‰²æ ¹æ®æŸ±å­çš„é«˜åº¦ä¸åŒè€Œå˜åŒ–ã€‚å¦‚æœæƒ³è¦æ·»åŠ ä¸€ä¸ªé¢œè‰²æ ‡å°ºï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š 12345678fig = plt.figure(figsize=(6, 5),dpi=300)ax = fig.add_subplot(111, projection=&#x27;3d&#x27;)ax.bar3d(x, y, z, dx, dy, dz, color=colors,shade=True)cbar = fig.colorbar(plt.cm.ScalarMappable(cmap = &#x27;jet&#x27;), ax = ax,ticks=[0, 0.5, 1], pad=0.1)\\\\ ticksè®¾å®šäº†æ ‡å°ºçš„æ ‡é‡åˆ»åº¦ï¼Œ0ä¸ºæœ€å°åˆ»åº¦ï¼Œ1ä¸ºæ»¡åˆ»åº¦ï¼Œè¿™é‡Œåªæ˜¾ç¤ºä¸‰ä¸ªåˆ»åº¦ã€‚cbar.ax.set_yticklabels([round(dz.min(),2),round((dz.min()+dz.max())/2,2),round(dz.max(),2)])\\\\è®¾ç½®åˆ»åº¦çš„æ˜¾ç¤ºå€¼ï¼Œåˆ†åˆ«ä¸ºæŸ±å­é«˜åº¦çš„æœ€ä½å€¼ï¼Œä¸­é—´å€¼å’Œæœ€å¤§å€¼ã€‚plt.show() 4.å¯é€‰çš„æ ·å¼å’Œæ ¼å¼ å¯ä»¥ä½¿ç”¨ bar3d å‡½æ•°çš„å…¶ä»–å‚æ•°æ¥è°ƒæ•´æŸ±å½¢å›¾çš„æ ·å¼å’Œæ ¼å¼ï¼Œä¾‹å¦‚ï¼šalphaã€edgecolorã€linewidth ç­‰ã€‚ 5.å¦‚æœå›¾å½¢é¢œè‰²æ¯”è¾ƒæš—æˆ–è€…æ¯”è¾ƒäº®ï¼Œå¯ä»¥ä½¿ç”¨ lightsource å‚æ•°è°ƒèŠ‚å…‰æºçš„ä½ç½®ã€‚ 123lightsource = LightSource(azdeg=45)ax.bar3d(x, y, z, dx, dy, dz, color=colors,shade=Trueï¼Œlightsource=lightsource) LightSource æœ‰å‡ ä¸ªå‚æ•°ï¼Œå…¶ä¸­ç”¨åˆ°æ¯”è¾ƒå¤šçš„å°±æ˜¯ azdegï¼Œè¿™ä¸ªå€¼æ˜¯å…‰æºä»ä¸‰ç»´å›¾ä¿¯è§†è§’åº¦ä¸Šçœ‹ä¸‹å»åœ¨å›¾é‡Œçš„ä½ç½®ï¼Œé»˜è®¤ä¸º 315Â°ï¼Œè¡¨ç¤ºï¼Œå…‰æºå¤„åœ¨ä¿¯è§†å›¾ä¸Šï¼Œè¥¿åŒ—æ–¹å‘ã€‚æ­£åŒ—æ–¹ä¸º 0Â°ï¼ŒæŒ‰é¡ºæ—¶é’ˆæ–¹å‘è§’åº¦å¢åŠ ã€‚å¦‚æœé»˜è®¤å…‰æºä¸åˆé€‚ï¼Œå¯ä»¥å°† azdeg è®¾ç½®ä¸º 45Â°ã€‚ 6.é™¤äº†å…‰æºé—®é¢˜ï¼Œè¿˜æœ‰æŸ±å­å †ç§¯æ–¹å‘çš„é—®é¢˜ï¼Œç”±äº x è½´å’Œ y è½´æ˜¯å›ºå®šä»å°åˆ°å¤§æ’åˆ—ï¼ŒæŸ±å­é«˜åº¦å¯èƒ½ä¼šåœ¨ y è½´è¾ƒå°æ—¶æ¯”è¾ƒå¤§ï¼Œå¯¼è‡´çŸ®çš„æŸ±å­è¢«é«˜çš„æŸ±å­é®æŒ¡ï¼Œæ­¤æ—¶å¯ä»¥å°è¯•åè½¬è½´æ’åˆ—æ–¹å‘ï¼Œè®© y è½´ä»å¤§åˆ°å°æ’åˆ—ã€‚ 123ax.set_ylim(max(y),min(y)) \\\\yè½´ä»å¤§åˆ°å°æ’åˆ—ax.set_xlim(max(x),min(x)) \\\\xè½´ä»å¤§åˆ°å°æ’åˆ—ax.bar3d(x, y, z, dx, dy, dz, color=colors,shade=Trueï¼Œlightsource=lightsource) 7.æŸ±å­é«˜åº¦å˜åŒ–å€¼ç›¸å¯¹äºæŸ±å­é«˜åº¦å€¼å¤ªå°ï¼Œæ¯”å¦‚ dz åœ¨(666666,666699)ä¹‹é—´ã€‚å‘ˆç°å‡ºæ¥çš„ç»“æœå¯èƒ½æ—¶ï¼ŒæŸ±å­é«˜åº¦å‡ ä¹ç›¸åŒï¼Œä½†æ˜¯é¢œè‰²å´å˜åŒ–å¾ˆå¤§ã€‚ä¸ºäº†é¿å…æ­¤é—®é¢˜ï¼Œå¯ä»¥å°†æŸ±å­é«˜åº¦çš„èŒƒå›´ç¼©å°åˆ°(0,33)ä¹‹é—´ï¼Œè€Œåˆ»åº¦å€¼æ˜¾ç¤ºå…¶çœŸæ˜¯å¤§å°ã€‚ 123z = min(dz)dz=np.array(dz)-zax.bar3d(x, y, z, dx, dy, dz, color=colors,shade=Trueï¼Œlightsource=lightsource) z æ˜¯æŸ±å­åº•é¢ä¸­å¿ƒçš„åæ ‡ï¼ŒåŸæ¥å…¨ä¸º 0ï¼Œç°åœ¨æ”¹ä¸ºæŸ±å­é«˜åº¦æœ€å°çš„å€¼ï¼Œdz ä¸ºæŸ±å­çš„é«˜åº¦ï¼Œç°åœ¨æ”¹ä¸ºåŸæ¥çš„é«˜åº¦-é«˜åº¦æœ€å°å€¼ã€‚é‚£ä¹ˆæ¯ä¸ªæŸ±å­çš„é«˜åº¦ï¼Œå°±æ˜¯å½“å‰æŸ±å­ä¸æœ€çŸ­æŸ±å­çš„å·®ã€‚è¿™å°±æ˜¯ä½¿ç”¨ Matplotlib åˆ›å»º 3D æŸ±å½¢å›¾çš„åŸºæœ¬æ­¥éª¤ã€‚é€šè¿‡è°ƒæ•´æ•°æ®å’Œå‚æ•°ï¼Œå¯ä»¥åˆ›å»ºå‡ºå„ç§æ ·å¼å’Œæ ¼å¼çš„ 3D æŸ±å½¢å›¾ã€‚ä¸‹é¢æ˜¯æˆ‘çš„æ•°æ®ç»˜åˆ¶å‡ºçš„ä¸€ä¸ªä¾‹å­ã€‚ç‚¹å‡»å¯æŸ¥çœ‹","categories":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/categories/Python/"}],"tags":[{"name":"Matplotlib","slug":"Matplotlib","permalink":"https://sci.ci/tags/Matplotlib/"},{"name":"Bar3d","slug":"Bar3d","permalink":"https://sci.ci/tags/Bar3d/"}]},{"title":"Linuxåå°è¿è¡Œnostrè™šè£å…¬é’¥çš„æŒ–æ˜","slug":"yuque/se6yw51mvmka3c85","date":"2023-02-12T12:52:49.000Z","updated":"2023-12-02T00:06:38.358Z","comments":true,"path":"2023/02/12/yuque/se6yw51mvmka3c85/","link":"","permalink":"https://sci.ci/2023/02/12/yuque/se6yw51mvmka3c85/","excerpt":"","text":"æŒ–æ˜ 6 ä½ä»¥ä¸Šçš„ npub1 å…¬é’¥è¿å·éœ€è¦è€—è´¹å¾ˆé•¿çš„æ—¶é—´ã€‚åœ¨ä¸»åŠ›ç”µè„‘ä¸Šæ‰§è¡ŒæŒ–æ˜ç¨‹åºï¼Œå¯¹æ­£å¸¸å·¥ä½œå½±å“å¾ˆå¤§ã€‚ä¸ºäº†èƒ½å¤Ÿæ›´å¿«çš„æŒ–æ˜å…¬é’¥ï¼Œå¹¶ä¸”ä¸å½±å“æˆ‘çš„å·¥ä½œï¼Œæˆ‘åœ¨è°·æ­Œäº‘ä¸Šå¼€äº†ä¸€å°è™šæ‹Ÿæœºï¼Œä¸“é—¨ç”¨æ¥æŒ–å…¬é’¥ã€‚åœ¨ Linux ç»ˆç«¯ä¸Šæ‰§è¡Œç¨‹åºï¼Œç»ˆç«¯ä¸€æ—¦å…³é—­ï¼Œåœ¨æ­¤ç»ˆç«¯ä¸Šçš„ç¨‹åºä¹Ÿä¼šéšä¹‹è¢«ç»ˆæ­¢ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ nohup æŒ‡ä»¤æ¥ä½¿å…¶åå°ç»§ç»­æ‰§è¡Œã€‚cmd1: 1nohup rana -n=8888888&amp; æ­¤å‘½ä»¤å°†åœ¨æ‰§è¡Œç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª nohup.out æ–‡ä»¶ç”¨äºå‚¨å­˜è¾“å‡ºã€‚å…³é—­ç»ˆç«¯åï¼Œrana ç¨‹åºä»ç„¶ä¼šåœ¨åå°æ‰§è¡Œã€‚ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå¯ä»¥é€šè¿‡ 1vi nohup.out æŸ¥çœ‹ nohup.out å†…å®¹ï¼Œæ£€æŸ¥è™šè£å…¬é’¥æ˜¯å¦ç”Ÿæˆã€‚ä½¿ç”¨ 1ps -aux | grep &quot;rana&quot; æœç´¢ rana è¿›ç¨‹ç¼–å· pidã€‚ä¾‹å¦‚ pid ä¸º 9980ä½¿ç”¨ 1kill -9 9980 æ€æ­» rana è¿›ç¨‹ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/tags/Linux/"},{"name":"nohup","slug":"nohup","permalink":"https://sci.ci/tags/nohup/"}]},{"title":"Hexoåšå®¢æ·»åŠ Nostr NIP-05è®¤è¯","slug":"yuque/yws2f9r5gek9mpxe","date":"2023-02-06T13:12:38.000Z","updated":"2023-12-02T00:06:38.446Z","comments":true,"path":"2023/02/06/yuque/yws2f9r5gek9mpxe/","link":"","permalink":"https://sci.ci/2023/02/06/yuque/yws2f9r5gek9mpxe/","excerpt":"","text":"Hexo åšå®¢éƒ¨ç½²ä¹‹åå¯ä»¥ç”Ÿæˆä¸€ä¸ªé™æ€ç½‘ç«™ï¼ŒNostr NIP-05 è®¤è¯ï¼Œè¦æ±‚æˆ‘ä»¬åœ¨ç½‘ç«™æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªè·¯å¾„ä¸º/.well-known/nostr.json çš„æ–‡ä»¶ï¼Œå¹¶å°†è®¤è¯ä¿¡æ¯æ”¾å…¥å…¶ä¸­ã€‚ä¸ºäº†åœ¨ Hexo åšå®¢ public ç›®å½•ï¼ˆé™æ€ç½‘ç«™æ ¹ç›®å½•ï¼‰ä¸‹åœ¨ç”Ÿæˆè®¤è¯è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è®¾ç½®ï¼Œ åœ¨ hexo æ ¹ç›®å½•ä¸‹çš„ sources æ–‡ä»¶å¤¹ä¸­æ–°å»ºæ–‡ä»¶å¤¹**.well-known** åœ¨æ–‡ä»¶å¤¹å†…æ–°å»ºæ–‡ä»¶nostr.json å°†å½¢å¦‚ä»¥ä¸‹å†…å®¹çš„ json æ•°æ®æ”¾å…¥nostr.jsonï¼Œæ³¨æ„ï¼Œä¸‹é¢ dca å¼€å¤´çš„å†…å®¹ä¸º hex æ ¼å¼çš„ public keyï¼Œå®¢æˆ·ç«¯æ˜¾ç¤ºçš„ key éƒ½æ˜¯ä»¥ npub å¼€å¤´ï¼Œä½ éœ€è¦å°†å®ƒåœ¨ç½‘ç«™https://damus.io/key/ ä¸­è¿›è¡Œè½¬æ¢ã€‚ä¸‹é¢çš„ name ä¹Ÿå¯ä»¥æ¢æˆä½ å–œæ¬¢çš„å­—ç¬¦ã€‚ 12345&#123; &quot;names&quot;: &#123; &quot;name&quot;: &quot;dca5a66fed9db68c042d40e944619d1be0a6c14147f6aa54b5f02efea5551d90&quot; &#125;&#125; ä¿®æ”¹åšå®¢æ ¹ç›®å½•ä¸‹çš„_config.ymlæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š 1234# Include / Exclude file(s)## include:/exclude: options only apply to the &#x27;source/&#x27; folderinclude: - .well-known/nostr.json è‡³æ­¤ï¼Œå½“ä½ ä½¿ç”¨hexo gå‘½ä»¤ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œåœ¨ public æ–‡ä»¶å¤¹ä¸‹ä¼šè‡ªåŠ¨ç”Ÿæˆ.well-known æ–‡ä»¶å¤¹ã€‚ åœ¨ Nostr å®¢æˆ·ç«¯çš„ NIP-05 è®¾ç½®ä¸­ï¼Œæ·»åŠ å½¢å¦‚&#110;&#x61;&#109;&#x65;&#x40;&#121;&#x6f;&#x75;&#114;&#100;&#111;&#109;&#97;&#x69;&#x6e;&#46;&#99;&#x6f;&#109;çš„é…ç½®ï¼Œå³å¯éªŒè¯æˆåŠŸã€‚","categories":[{"name":"Nostr","slug":"Nostr","permalink":"https://sci.ci/categories/Nostr/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://sci.ci/tags/Hexo/"},{"name":"Nostr","slug":"Nostr","permalink":"https://sci.ci/tags/Nostr/"},{"name":"NIP-05","slug":"NIP-05","permalink":"https://sci.ci/tags/NIP-05/"}]},{"title":"Nostr NIP-05è®¤è¯æœåŠ¡ç®€ä»‹å’Œé…ç½®","slug":"yuque/glm9gga3y0gu8wdr","date":"2023-02-06T10:57:51.000Z","updated":"2023-12-02T00:06:38.490Z","comments":true,"path":"2023/02/06/yuque/glm9gga3y0gu8wdr/","link":"","permalink":"https://sci.ci/2023/02/06/yuque/glm9gga3y0gu8wdr/","excerpt":"","text":"1. NIP-05 ç®€ä»‹NIP-05 è®¤è¯æœåŠ¡ï¼Œé€šè¿‡éªŒè¯åŸŸåçš„æŒæœ‰èº«ä»½ï¼Œå°±å¯ä»¥åœ¨æ”¯æŒ NIP-05 çš„å®¢æˆ·ç«¯é‡Œå±•ç¤ºä¸€ä¸ªå’Œå¾®åš Twitter è®¤è¯ç±»ä¼¼çš„ V çš„å°å›¾æ ‡ã€‚å…¶åŸºæœ¬åŸç†æ˜¯ï¼ŒåŸŸåæŒæœ‰è€…ï¼Œåœ¨åŸŸåè·¯å¾„ä¸‹è¿”å›ä¸€ä¸ª json æ ¼å¼çš„æ•°æ®å†…å®¹ï¼ŒåŸŸåè·¯å¾„ç±»ä¼¼äºï¼šhttps://sci.ci/.well-known/nostr.json?name=qifeiï¼Œç‚¹å‡»æ­¤é“¾æ¥ï¼Œä½ èƒ½çœ‹åˆ°è¿”å›çš„ json æ–‡æœ¬ä¸ºï¼Œ 12345&#123; &quot;names&quot;: &#123; &quot;qifei&quot;: &quot;dca5a66fed9db68c042d40e944619d1be0a6c14147f6aa54b5f02efea5551d90&quot; &#125;&#125; åœ¨ Nostr å®¢æˆ·ç«¯ä¸­ï¼Œä¾‹å¦‚ Damusï¼Œé…ç½® nip05 è®¤è¯çš„æ ¼å¼ä¸º &#x71;&#105;&#102;&#x65;&#x69;&#64;&#115;&#x63;&#105;&#x2e;&#x63;&#x69;ï¼Œè¿™é‡Œçš„ qifei æˆ‘ä»¬å«åš nameï¼Œsci.ci ä¸ºåŸŸåã€‚è¿™æ˜¯æˆ‘çš„ Nostr è´¦æˆ·çš„è®¤è¯ä¾‹å­ã€‚ 2. å…è´¹è®¤è¯æœåŠ¡å¦‚æœä½ æ²¡æœ‰è‡ªå·±çš„åŸŸåæˆ–è€…ä¸æƒ³æ›´æ”¹ä½ çš„ web æœåŠ¡å™¨å†…å®¹ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ç°æœ‰çš„å…è´¹è®¤è¯æœåŠ¡ï¼Œnost.vip æä¾›äº†è¿™é¡¹æœåŠ¡ï¼Œåœ¨ nip05 è®¤è¯ä¿¡æ¯ä¸­ç›´æ¥å¡«å†™å½¢å¦‚ä»¥ä¸‹å­—ç¬¦çš„å†…å®¹ï¼Œ &#110;&#x70;&#x75;&#x62;&#x2e;&#46;&#46;&#x2e;&#x2e;&#64;&#x6e;&#111;&#x73;&#x74;&#46;&#x76;&#105;&#x70; è¿™é‡Œ npub å¼€å¤´çš„å­—ç¬¦ä¸²æ˜¯ä½ çš„ nostr è´¦æˆ· idï¼Œæ¯”å¦‚æˆ‘çš„è´¦æˆ· id æ˜¯ npub1mjj6vmldnkmgcppdgr55gcvar0s2ds2pglm254947qh0af24rkgqwelkyhå¯¹åº”è®¤è¯ä¿¡æ¯ä¸º &#x6e;&#112;&#117;&#x62;&#x31;&#109;&#106;&#x6a;&#54;&#118;&#109;&#x6c;&#100;&#110;&#x6b;&#x6d;&#103;&#99;&#x70;&#112;&#x64;&#x67;&#x72;&#53;&#53;&#x67;&#x63;&#118;&#97;&#114;&#48;&#x73;&#50;&#100;&#x73;&#x32;&#112;&#103;&#108;&#109;&#x32;&#x35;&#x34;&#57;&#x34;&#x37;&#x71;&#x68;&#x30;&#x61;&#102;&#x32;&#52;&#114;&#107;&#103;&#x71;&#x77;&#101;&#x6c;&#107;&#x79;&#104;&#x40;&#110;&#111;&#115;&#116;&#x2e;&#118;&#x69;&#112; è¿™æ ·æˆ‘å°±æœ‰äº† nost.vip çš„è®¤è¯ 3. Github Pages è®¤è¯å¦‚æœä½ æ²¡æœ‰åŸŸåï¼Œæˆ–è€…æœ‰è‡ªå·±çš„åŸŸåä½†æ²¡æœ‰æœåŠ¡å™¨ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ github pages çš„åŸŸåï¼Œä¾‹å¦‚æˆ‘çš„ github page ä¸º xieqifei.github.ioï¼Œæˆ‘å°±å¯ä»¥è®¤è¯åˆ°è¿™ä¸ªåŸŸåä¸‹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åœ¨ github è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸåã€‚ è¿™é‡Œé»˜è®¤ä½ å·²ç»äº†è§£ github pages å¹¶ç”¨å®ƒåˆ›å»ºè¿‡è‡ªå·±çš„åšå®¢é¡µé¢ã€‚å¦‚æœä½ ä¸äº†è§£ github pageï¼Œä½ å¯èƒ½éœ€è¦å…¶ä»–çš„åŠŸè¯¾ã€‚ä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼Œgithub pages å¯ä»¥å°†ä½ å‘½åå½¢å¦‚ä¸º your-username.github.io çš„ä»“åº“è½¬ä¸ºç½‘ç«™ç›®å½•ï¼Œä½ åœ¨é‡Œé¢é˜²æ­¢çš„ä»»ä½•æ–‡ä»¶éƒ½å¯ä»¥ä»¥ your-username.github.io åŠ è·¯å¾„çš„æ–¹å¼è®¿é—®ã€‚ ç°åœ¨å¼€å§‹åˆ›å»ºä¸€ä¸ªï¼Œä»¥ä½ ç”¨æˆ·åå¼€å¤´å¹¶ä»¥.github.io ç»“å°¾çš„ä»“åº“ï¼Œå¦‚æœå·²æœ‰å¯ä»¥å¿½ç•¥ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š åœ¨ä»“åº“é‡Œæ–°å»ºä¸€ä¸ª**.well-known**çš„æ–‡ä»¶å¤¹ well-knownæ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ªnostr.jsonæ–‡ä»¶ è¿›å…¥ç½‘é¡µhttps://damus.io/key/ å°†ä½ ä»¥ npub å¼€å¤´çš„ damus key è½¬ä¸º hex æ ¼å¼çš„ hex key åœ¨nostr.jsonæ–‡ä»¶ä¸­æ”¾å…¥ä»¥ä¸‹å†…å®¹ 12345&#123; &quot;names&quot;: &#123; &quot;yourname&quot;: &quot;hex key&quot; &#125;&#125; ä¿®æ”¹ yourname ä¸ºä»»æ„å­—ç¬¦ä¸²ï¼Œhex key ä¸ºç¬¬ä¸‰æ­¥è½¬æ¢çš„ç»“æœã€‚ä¿å­˜nostr.json åœ¨ä»“åº“çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶åä¸º**.nojekyllçš„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶.nojekyll**å°†å…è®¸ GitHub é¡µé¢ä¸ºé™æ€ json æ–‡ä»¶æä¾›æœåŠ¡ã€‚ ä¹‹åå‰å¾€ GitHub å­˜å‚¨åº“è®¾ç½®ä»¥å¯ç”¨ GitHub é¡µé¢ã€‚ ç°åœ¨ä½ åº”è¯¥å¯ä»¥é€šè¿‡è®¿é—® your-username.github.io/.web-known/nostr.json è·å–åˆ°ç”¨äº nip05 è®¤è¯çš„ json ä¿¡æ¯äº†ã€‚åœ¨ nostr å®¢æˆ·ç«¯ä¸­è®¾ç½®å½¢å¦‚&#121;&#x6f;&#117;&#x72;&#x6e;&#x61;&#109;&#101;&#64;&#x79;&#x6f;&#x75;&#114;&#x2d;&#117;&#115;&#101;&#114;&#x6e;&#x61;&#109;&#101;&#46;&#103;&#x69;&#x74;&#104;&#x75;&#98;&#46;&#105;&#x6f;ä½ å°±æ‹¥æœ‰äº† V è®¤è¯ã€‚ä½ ä¹Ÿå¯ä»¥åœ¨ github page ä¸­é…ç½®è‡ªå·±çš„åŸŸåï¼Œå¹¶é€šè¿‡è®¾ç½® &#121;&#111;&#x75;&#114;&#x6e;&#x61;&#109;&#101;&#x40;&#121;&#x6f;&#x75;&#x72;&#100;&#x6f;&#x6d;&#x61;&#105;&#110;&#46;&#99;&#111;&#x6d;ï¼Œåœ¨å®¢æˆ·ç«¯ä¸­å±•ç¤ºä½ è‡ªå·±åŸŸåçš„è®¤è¯ã€‚","categories":[{"name":"Nostr","slug":"Nostr","permalink":"https://sci.ci/categories/Nostr/"}],"tags":[{"name":"Nostr","slug":"Nostr","permalink":"https://sci.ci/tags/Nostr/"},{"name":"NIP-05","slug":"NIP-05","permalink":"https://sci.ci/tags/NIP-05/"}]},{"title":"Onedrive APIå¤§æ–‡ä»¶ä¸Šä¼ è®°å½•","slug":"yuque/xl9i86wz2ibmvgzz","date":"2022-12-07T21:01:53.000Z","updated":"2023-12-02T00:06:38.618Z","comments":true,"path":"2022/12/08/yuque/xl9i86wz2ibmvgzz/","link":"","permalink":"https://sci.ci/2022/12/08/yuque/xl9i86wz2ibmvgzz/","excerpt":"","text":"1. è·å– UploadSessionåœ¨å·²ç»è·å–åˆ° AccessToken çš„æ¡ä»¶ä¸‹ï¼Œå‘é€ post è¯·æ±‚ï¼Œè·å– uploadsession 12345POSThttps://graph.microsoft.com/v1.0/me/drive/root:/FolderA/FolderB/FileC.txt:/createUploadSessionContent-Type: application/json &#123; &quot;item&quot;: &#123; &quot;@odata.type&quot;:&quot;microsoft.graph.driveItemUploadableProperties&quot;,&quot;@microsoft.graph.conflictBehavior&quot;: &quot;rename&quot;, &quot;name&quot;: &quot;FileC.txt&quot; &#125; &#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†æ–‡ä»¶ FileC.txt ä¸Šä¼ åˆ°/FolderA/FolderB/è·¯å¾„ä¸‹ã€‚renameï¼ŒåŒåæ—¶å°†æ–‡ä»¶é‡å‘½åã€‚çœ‹ä»£ç  1234567891011121314151617const requestUrl = `$&#123;driveApi&#125;/root$&#123;encodePath( cleanPath)&#125;/$&#123;filename&#125;:/createUploadSession`;const reqConfig = &#123; headers: &#123; Authorization: `Bearer $&#123;accessToken&#125;`, &quot;Content-Type&quot;: &quot;application/json&quot;, &#125;,&#125;;const reqData = JSON.stringify(&#123; item: &#123; &quot;@odata.type&quot;: &quot;microsoft.graph.driveItemUploadableProperties&quot;, &quot;@microsoft.graph.conflictBehavior&quot;: &quot;rename&quot;, name: filename, &#125;,&#125;);const &#123; data, status &#125; = await axios.post(requestUrl, reqData, reqConfig); è¿”å›çš„ data 123456&#123; &quot;@odata.context&quot;: &quot;https://graph.microsoft.com/v1.0/$metadata#microsoft.graph.uploadSession&quot;, &quot;expirationDateTime&quot;: &quot;2022-12-12T20:59:36.57Z&quot;, &quot;nextExpectedRanges&quot;: [&quot;0-&quot;], &quot;uploadUrl&quot;: &quot;https://api.onedrive.com/rup/58719e3298535c9/eyJSZXNvdXJjZUlEIjoiNTg3MTlFMzI5ODUzNUM5ITE3ODU3MSIsIlJlbGF0aW9uc2hpcE5hbWUiOiJhYmMudHh0In0/4mZis-sabj24PL04uRIPxFu8jB1QNaqhHn3eEq-i__MpQWp4mF6nKvusl4Fox5Ft0yLsU_7QiHhK-NI--fVAOFYkn9UJNhSnhmm4RKzmdOYtQ/eyJuYW1lIjoiYWJjLnR4dCIsIkBuYW1lLmNvbmZsaWN0QmVoYXZpb3IiOiJyZW5hbWUifQ/4whWhy7zc-wazWcDSDucdkL6f5fEKVs3OonVBriho3EeaCue1gPmUTmqeHSsDsRaAvWjXqVN_337TlMGrEqJvIp-DK8aZsnw-1sB_fGObZ9cZAhBUT4O8Qh5EgWvr_GQLI9WBj94gFUEQxpTpHHGs6jpPcAJJJMHY1mB7iHzDbgsSuIjeDnMG7Cta7P0fGUWPVBXXYh6A9GdgEPkixGymS6LKbhbezFnDDoG4edG1IeOtqyYc372sEmERWDPdqkIdEbJ20LFKaGxGfposh4jkzTpWlNW8ga3KeiL8GwNJDZngOIER1NI-qJ1R_fFlU5yQTzM87zZCNUW52GGZT4k7qD7ghQzfrghgZJbxrVX2w1FNKXUhp3K9UXSNYfC6ITyboCPPOEd8iJ4Bp4Vgo5lCKTLHb9zG2-fmLun5swOTE1aB2Bt98KvOlho5uNMbArfM8bOrtUFAodtp_0ZeHoj6BPixKxKgkuxXwd3ArDpGLnVJpTnOaIvw3GnUClPM0IK6KPWufVf7f6iL9M7ih5LNMJ31u84ey9DHFXso-2LvMkC-lXbS7LrILZ-oRzvq19oZTSg3lvNczxJUuuRQqpDLkSA&quot;&#125; é€šè¿‡ data.uploadUrl æå–ä¸Šä¼  urlã€‚ 2. è·å–å¤šä¸ªæ–‡ä»¶1234&lt;input type=&quot;file&quot; ref=&#123;uploadInput&#125; multiple className=&quot;hidden&quot; onChange=&#123;handleFileEvent&#125; /&gt;&lt;FloatButton tooltip=&#123;&lt;div&gt;&#123;t(&#x27;Upload files&#x27;)&#125;&lt;/div&gt;&#125; icon=&#123;&lt;UploadOutlined /&gt;&#125; onClick=&#123;() =&gt; &#123; uploadInput.current?.click()&#125;&#125; /&gt; åœ¨ input æ ‡ç­¾ä¸­é€šè¿‡ multiple æŒ‡å®šæ–‡ä»¶å¯ä»¥ä¸ºå¤šä¸ªï¼Œå¹¶åœ¨ onChange ä¸­æŒ‡å®šæ–‡ä»¶é€‰æ‹©å®Œåçš„è¿è¡Œçš„å‡½æ•°ï¼Œè¿™é‡Œæ˜¯ handleFileEventã€‚ref ç”¨äºæ‰¾åˆ° input æ ‡ç­¾ï¼Œæˆ‘ä»¬å°†å®ƒéšè—ï¼Œç”¨ä¸€ä¸ªæŒ‰é’®æ›¿ä»£å®ƒï¼Œä½¿å®ƒæ›´åŠ ç¾è§‚ã€‚å½“æ–‡ä»¶é€‰æ‹©å®Œåï¼Œåœ¨ handleFileEvent å‡½æ•°ä¸­è·å–å¹¶å¤„ç†å®ƒã€‚ 123const handleFileEvent = (e: &#123; target: &#123; files: any &#125; &#125;) =&gt; &#123; const chosenFiles = Array.prototype.slice.call(e.target.files);&#125;; e æ˜¯ input å¯¹è±¡ï¼Œæˆ‘ä»¬ä½¿ç”¨ Array.prototype.slice.call(e.target.files)æ¥è·å–å¤šä¸ªæ–‡ä»¶ï¼Œå¹¶å°†æ¯ä¸ªæ–‡ä»¶åˆ†å¼€æ”¾å…¥åˆ—è¡¨ä¸­ï¼Œä¹‹åå¯ä»¥é€šè¿‡å¾ªç¯è·å–ã€‚ 3. åˆ‡ç‰‡æ¯ä¸ªæ–‡ä»¶éƒ½å¾ˆå¤§ï¼Œç”±äº onedrive api æŒ‡å®šæˆ‘ä»¬æ¯æ¬¡ä¸Šä¼ çš„æ–‡ä»¶ä¸èƒ½è¶…è¿‡ 60MB ä¸”æ¯å—éƒ½å¿…é¡»æ˜¯ 327680B çš„å€æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆéœ€è¦å°†æ–‡ä»¶åˆ‡å— 123456789101112131415161718192021const sliceFile = (file: File, pieceSize = 5 * 256 * 256 * 30) =&gt; &#123; let totalSize = file.size; //total size of file let start = 0; // start byte let end = start + pieceSize; // end byte if (end &gt; file.size) &#123; end = file.size; &#125; let chunks: &#123;&#125;[] = new Array(); while (start &lt; totalSize) &#123; // slice the length // File inhert Blob, so it can use slice function. let blob = file.slice(start, end); chunks.push(&#123; start: start, end: end - 1, blob: blob &#125;); start = end; end = start + pieceSize; if (end &gt; file.size) &#123; end = file.size; &#125; &#125; return chunks;&#125;; ä¸Šè¿°å°†æ–‡ä»¶åˆ‡å—ä¸º 5 _ 256 _ 256 * 30B å¤§å°çš„å—ï¼Œæ‰€æœ‰å—æ”¾å…¥ chunks åˆ—è¡¨ä¸­ã€‚åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªæ•°ç»„{ â€˜startâ€™: start, â€˜endâ€™: end - 1, â€˜blobâ€™: blob }ï¼Œåˆ†åˆ«è¡¨ç¤ºï¼Œå¼€å§‹çš„ Byteï¼Œç»“æŸ Byteï¼Œä»¥åŠè¿™äº› Byte çš„äºŒè¿›åˆ¶å†…å®¹ã€‚ 4. åˆ†æ®µä¸Šä¼ 123456789101112131415161718192021222324252627282930313233343536373839async () =&gt; &#123; try &#123; let chunks = sliceFile(file, pieceSize); while (getFileStatus(isUploadDone, file) === &quot;uploading&quot;) &#123; let chunk = chunks[start / pieceSize]; let reqConfig = &#123; headers: &#123; &quot;Content-Range&quot;: `bytes $&#123;chunk[&quot;start&quot;]&#125;-$&#123;chunk[&quot;end&quot;]&#125;/$&#123;file.size&#125;`, &#125;, &#125;; //DO NOT use access token here. let res = await axios.put(uploadUrl, chunk[&quot;blob&quot;], reqConfig); // res.status is 202, last chunk upload success //get next range and redict if (res.status === 202) &#123; let &#123; nextExpectedRanges &#125; = res.data; // &quot;nextExpectedRanges&quot;: [ // &quot;12345-55232&quot;, // &quot;77829-99375&quot; // ] start = parseInt(nextExpectedRanges[0].split(&quot;-&quot;)[0]); isUploadDone = false; &#125; //all upload done else if (res.status === 201) &#123; resolve(res.data); &#125; //file conflict else if (res.status === 409) &#123; //if error, upload url need to be delete from onedrive server reject( file.name + &quot;: file name conflict. You upload two file with same name&quot; ); &#125; &#125; &#125; catch (err) &#123; reject(file.name + &quot;:upload failed, msg:&quot; + err); &#125;&#125;; ä¸Šè¿°ä»£ç çœç•¥äº†è®¸å¤šä¸œè¥¿ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯çœ‹å®ƒçš„åŠŸèƒ½å®ç°ï¼Œé¦–å…ˆæ˜¯åˆ©ç”¨ sliceFile å‡½æ•°å°†æ–‡ä»¶åˆ‡ç‰‡ï¼Œç„¶åå¾ªç¯ä¸Šä¼ ç‰‡æ®µï¼Œç”±äº onedrive åœ¨æ¯æ¬¡ä¸Šä¼ ç»“æŸéƒ½ä¼šè¿”å›ä¸‹æ¬¡éœ€è¦å¼€å§‹ Byte çš„ä½ç½®ï¼Œè€Œä¸”ä¸å…è®¸åŒæ—¶ä¸Šä¼ å¤šä¸ªç‰‡æ®µï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç­‰å¾…ä¸Šä¸€ä¸ªç‰‡æ®µä¸Šä¼ å®Œæ¯•ï¼Œè·å–åˆ°ä¸‹ä¸€ä¸ªå¼€å§‹ä½ç½®ï¼Œå†å¼€å§‹ä¸Šä¼ æ–°çš„å—ã€‚ä¸Šä¼ ä½¿ç”¨ putï¼Œå¯¹åº” url ä¸ºæœ€å¼€å§‹æˆ‘ä»¬è·å–çš„ upload sessionã€‚å“åº”ä»£ç ä¸º 202 è¡¨ç¤ºï¼Œæ²¡ä¸Šä¼ å®Œï¼Œ201 è¡¨ç¤ºä¸Šä¼ ç»“æŸï¼Œå…¶ä»–åˆ™ä¸ºé”™è¯¯ä»£ç ã€‚ 5. æš‚åœé”™è¯¯å’Œæ–­ç‚¹ç»­ä¼ åœ¨ä¸Šä¼ è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½é‡åˆ°ç½‘ç»œé”™è¯¯ï¼Œæˆ–è€…ä¸»åŠ¨æš‚åœä¸Šä¼ ï¼Œè¿™æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æŠ¥é”™æˆ–è€…æš‚åœé€»è¾‘ä¸­ï¼Œä¿å­˜ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå¹¶ç­‰å¾…ç”¨æˆ·ç‚¹å‡»é‡æ–°ä¸Šä¼ æˆ–ç»§ç»­ä¸Šä¼ ï¼ˆè¿™ä¸¤ä¸ªé€»è¾‘å¯¹åº”ç›¸åŒå¤„ç†æ–¹æ³•ï¼‰å¯¹äºæŠ¥é”™åçš„å¤„ç†ï¼Œæ˜¯å°†æ–‡ä»¶ç›´æ¥ä¿å­˜åˆ°ä¸€ä¸ª js å¸¸é‡ä¸­ 123456789101112const pausedFiles = new Array&lt;File&gt;const push2PausedFiles = (file: File) =&gt; &#123; let isSameFile = pausedFiles.some((f) =&gt; &#123; if (f.name === file.name) &#123; return true &#125; &#125;) if (!isSameFile) &#123; pausedFiles.push(file) &#125;&#125; è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ pausedFiles æ¥å‚¨å­˜æš‚åœçš„æ–‡ä»¶ç„¶ååœ¨ç”¨æˆ·ç‚¹å‡»é‡æ–°ä¸Šä¼ æ—¶ï¼Œé€šè¿‡ get ä¸Šä¼ ä¼šè¯è¿æ¥è·å–ä¸‹ä¸€ä¸ªå¼€å§‹çš„ Byte ç‚¹ï¼Œå¹¶æŒ‰ç…§åˆ†æ®µä¸Šä¼ çš„é€»è¾‘ï¼Œå¯¹æ–‡ä»¶åˆ‡ç‰‡ï¼Œå¹¶ä»å¼€å§‹çš„ byte ç‚¹å¼€å§‹ä¸Šä¼ ã€‚ 123const rep = await axios.get(uploadUrl);let &#123; nextExpectedRanges &#125; = rep.data;let start = parseInt(nextExpectedRanges[0].split(&quot;-&quot;)[0]); è¯¦ç»†çš„ä»£ç é€»è¾‘åœ¨github/xieqifei/onedrive-vercel-manage","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"onedrive","slug":"onedrive","permalink":"https://sci.ci/tags/onedrive/"},{"name":"api","slug":"api","permalink":"https://sci.ci/tags/api/"}]},{"title":"åçˆ¬è™«-å¦‚ä½•æ£€æµ‹æœ‰æ²¡æœ‰ä½¿ç”¨Puppeteer","slug":"yuque/sarv0k","date":"2021-10-15T12:41:58.000Z","updated":"2023-12-02T00:06:38.642Z","comments":true,"path":"2021/10/15/yuque/sarv0k/","link":"","permalink":"https://sci.ci/2021/10/15/yuque/sarv0k/","excerpt":"","text":"ç°åœ¨æ£€æµ‹ Puppeteer è¶Šæ¥è¶Šéš¾äº†ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ js å¯¹æ— å¤´æµè§ˆå™¨è¿›è¡Œå„ç§ä¼ªè£…ï¼Œwebdriverã€webglã€plugins éƒ½å¾ˆéš¾æ£€æµ‹åˆ°çˆ¬è™«ï¼Œåœ¨è¿™é‡Œæœ‰ä¸€ä¸ªæ–°æ€è·¯ã€‚è®¸å¤šç½‘é¡µéƒ½æœ‰æ£€æµ‹æ§åˆ¶å°æ˜¯å¦å¼€å¯çš„åŠŸèƒ½ï¼Œå…¶ä¸­å¤§å¤šæ•°ç½‘é¡µä¼šç›´æ¥ç¦ç”¨ F12 å’Œå³é”®ï¼Œä½†è¿™ä¼¼ä¹å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨å¤„ï¼Œå› ä¸ºæµè§ˆå™¨ä¹Ÿæœ‰å…¶ä»–åŠæ³•å¼€å¯æ§åˆ¶å°ï¼Œå¶ç„¶çš„æœºä¼šï¼Œæˆ‘çœ‹åˆ°è¿™ç¯‡æ–‡ç« ã€Šåˆ¤æ–­æ§åˆ¶å°æ˜¯å¦å¼€å¯(chrome)ã€‹ã€‚å…¶ä¸­æä¾›äº†ä¸€ä¸ªæ€è·¯æ¥æ£€æµ‹æ§åˆ¶å°æ˜¯å¦å¼€å¯ï¼Œä¹Ÿå°±æ˜¯é‡å†™æŸä¸ªå‡½æ•°çš„ toString æ–¹æ³•ã€‚å½“æ§åˆ¶å°å¼€å¯æ—¶ä½¿ç”¨ console.log æ—¶è¿™ä¸ªæ–¹æ³•å°†è¢«è°ƒç”¨ï¼Œä»è€Œæ£€æµ‹åˆ°ç”¨æˆ·å¼€å¯äº†æ§åˆ¶å°ã€‚ 123456function checkOpen() &#123;&#125;checkOpen.toString = function () &#123; this.opened = true;&#125;;console.log(&quot;%c&quot;, checkOpen);// checkOpen.opened will become true if/when the console is opened å¶ç„¶çš„æœºä¼šï¼Œæˆ‘å‘ç°å½“ç”¨æˆ·ä½¿ç”¨ Puppeteer è®¿é—®ç½‘é¡µæ—¶ï¼Œå³ä¾¿æ§åˆ¶å°æ²¡æœ‰è¢«å¼€å¯ï¼Œè¿™ä¸ªæ–¹æ³•çš„ this.opened ä¹Ÿä¼šè¢«ç½®ä¸º trueï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªæ–¹æ³•ä¸ä»…å¯ä»¥æ£€æµ‹åˆ°ç”¨æˆ·æ˜¯å¦æ‰“å¼€äº†æ§åˆ¶å°ï¼Œç”¨æˆ·åœ¨ä½¿ç”¨ Puppeteer æ²¡æœ‰å¼€å¯æ§åˆ¶å°çš„æƒ…å†µä¸‹ä¹Ÿä¼šè¢«æ£€æµ‹åˆ°ã€‚è¿™é‡Œçš„ä¸€ä¸ªç®€å•å°å®éªŒæ˜¯ï¼Œåˆ«äººæä¾›çš„ä¸€ä¸ªæ£€æµ‹æ§åˆ¶å°å¼€å¯ Demoï¼Œé€šè¿‡ Puppeteer æµ‹è¯•å¼€å¯å¹¶æˆªå›¾åï¼Œçœ‹åˆ°æ§åˆ¶å°æ˜¯å¼€å¯çŠ¶æ€ã€‚ 12await this.page.goto(&quot;https://blog.aepkill.com/demos/devtools-detector/&quot;);await this.page.screenshot(&#123; path: &quot;aaa.png&quot; &#125;); åˆšæ‰æåˆ°çš„é‚£ç¯‡æ–‡ç« çš„ä½œè€…ï¼Œæä¾›äº†ä¸€ä¸ªå¼€æºçš„æ£€æµ‹æ§åˆ¶å°æ¨¡å—ï¼Œdevtools-detectorï¼Œå¯ä»¥ç”¨åš Puppeteer æ£€æµ‹ã€‚","categories":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/categories/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"åçˆ¬è™«","slug":"åçˆ¬è™«","permalink":"https://sci.ci/tags/%E5%8F%8D%E7%88%AC%E8%99%AB/"},{"name":"Puppeteer","slug":"Puppeteer","permalink":"https://sci.ci/tags/Puppeteer/"}]},{"title":"Vuejså­¦ä¹ ç¬”è®°","slug":"yuque/tzxsoy","date":"2021-08-11T20:51:52.000Z","updated":"2023-12-02T00:06:38.778Z","comments":true,"path":"2021/08/12/yuque/tzxsoy/","link":"","permalink":"https://sci.ci/2021/08/12/yuque/tzxsoy/","excerpt":"","text":"1ï¼šç®€ä»‹ä»ä¸¤å¹´å‰æˆ‘å­¦ä¹  web ç¼–ç¨‹å¼€å§‹ï¼Œæˆ‘å‚ä¸æˆ–å®Œæˆäº†å¥½å‡ ä¸ª web é¡¹ç›®ï¼Œè¿™å‡ ä¸ª web é¡¹ç›®éƒ½æ˜¯æ¯”è¾ƒç®€å•çš„ã€ç»™è‡ªå·±ç»ƒä¹ ç”¨çš„ï¼Œè€Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸€ç›´ä½¿ç”¨ js+html+css+mduiã€‚ä½¿ç”¨å•çº¯çš„åŸç”Ÿè¯­è¨€å’Œæœ€åŸºç¡€çš„ä¸€ä¸ª css åº“å¼€å‘ï¼Œä½“éªŒæ˜¯å¾ˆä¸å¥½çš„ï¼Œæˆ‘ä¸€ç›´æƒ³æ‰¾ä¸€ä¸ªå¥½ç”¨çš„å‰ç«¯å¼€å‘æ–¹æ¡ˆï¼Œè®©å¼€å‘å˜å¾—ç®€å•ï¼Œç›´åˆ°è®¤è¯†äº† vueã€‚è¿™ä¸æ˜¯æˆ‘ç¬¬ä¸€æ¬¡å­¦ä¹  vueï¼Œæ—©åœ¨ä¸€å¹´å‰ï¼Œæˆ‘å°±å­¦ä¹ è¿‡ä¸€æ®µæ—¶é—´ï¼Œå¯æƒœå½“æ—¶æ²¡æœ‰å¥½çš„ web ç»ƒæ‰‹é¡¹ç›®ã€‚å¯¼è‡´ vue åœ¨å­¦ä¹ ä¹‹åå°±è’åºŸäº†ï¼Œåæ¥çš„é¡¹ç›®å¼€å‘ä¹Ÿæ²¡æœ‰å»ä½¿ç”¨å®ƒã€‚ç»è¿‡äº†å‡ ä¸ªé¡¹ç›®å¼€å‘ï¼Œæ‰æ„Ÿè§‰åˆ°ï¼Œæˆ‘çœŸçš„éœ€è¦å°† vue å¥½å¥½çš„åˆ©ç”¨èµ·æ¥ã€‚äºæ˜¯åœ¨æˆ‘å¤‡è€ƒä¹‹ä½™ï¼Œé‡æ–°æ¥å­¦ä¹  vueã€‚ä¹‹åå¯èƒ½è¿˜ä¼šå­¦ä¹  Vue Dev-uiã€‚å®ƒæä¾›çš„ç»„ä»¶å¾ˆä¸°å¯Œï¼Œæˆ‘è§‰å¾—å¯ä»¥å®Œå…¨æ›¿ä»£ mduiã€‚ 2ï¼šHello Worldvue ä½¿ç”¨ script æ ‡ç­¾å¼•å…¥ä¸€ä¸ªç®€å•çš„ html å®ä¾‹ï¼š 123456789101112131415&lt;div id=&quot;box&quot;&gt; &#123;&#123;1+1&#125;&#125; &#123;&#123;myname&#125;&#125; &#123;&#123;myhtml&#125;&#125; &lt;!-- v-æŒ‡ä»¤ --&gt; &lt;div v-html=&quot;myhtml&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el: &quot;#box&quot;, data: &#123; myname: &quot;qifei&quot;, myjob: &quot;student&quot;, myhtml: &quot;&lt;b&gt;hello world&lt;/b&gt;&quot;, &#125;, &#125;);&lt;/script&gt; 3ï¼šv if å’Œ v showv-ifï¼šåˆ›å»ºå’Œåˆ é™¤èŠ‚ç‚¹v-showï¼šæ˜¾ç¤ºå’Œéšè—èŠ‚ç‚¹ 123456789101112131415&lt;div id=&quot;box&quot;&gt; &lt;div v-show=&quot;isShow&quot;&gt;&lt;/div&gt; &lt;div v-if=&quot;isCreated&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt; vm = new Vue(&#123; el: &quot;#box&quot;, data: &#123; isShow: true, isCreated: true, &#125;, &#125;); vm.isShow = false; //æ§ä»¶æ˜¾ç¤ºéšè— vm.isCreated = false; //æ§ä»¶åˆ›å»ºå’Œåˆ é™¤&lt;/script&gt; 4ï¼šclass ç»‘å®šå’ŒæŒ‰é’®12345678910111213141516171819202122232425&lt;div id=&quot;box&quot;&gt; &lt;button @click=&quot;handleClick()&quot;&gt;&lt;/button&gt; &lt;div :class=&quot;isActive?&#x27;red&#x27;:&#x27;yellow&#x27;&quot;&gt;åŠ¨æ€class-ä¸‰ç›®å†™æ³•&lt;/div&gt; &lt;div :class=&quot;classObj&quot;&gt;åŠ¨æ€class-å­—å…¸å†™æ³•&lt;/div&gt; &lt;div :class=&quot;classArr&quot;&gt;åŠ¨æ€class-æ•°ç»„å†™æ³•&lt;/div&gt;&lt;/div&gt;&lt;script&gt; vm = new Vue(&#123; el: &quot;#box&quot;, data: &#123; isActive: true, classObj: &#123; a: true, b: true, &#125;, classArr: [&quot;a&quot;, &quot;b&quot;], &#125;, methods: &#123; handleClick() &#123; this.isActive = !this.isActive; &#125;, &#125;, &#125;); vm.classObj.a = false;&lt;/script&gt; å­—å…¸å†™æ³•ï¼Œä¸èƒ½é€šè¿‡æ·»åŠ é”®å€¼å¯¹æ¥å¢åŠ  classã€‚è€Œæ•°ç»„å†™æ³•ï¼Œå¯ä»¥é€šè¿‡ pop()ï¼Œpush()æ–¹æ³•æ·»åŠ å…ƒç´ æ¥æ€åŠ  class 5ï¼šstyle ç»‘å®š123456789101112131415161718192021&lt;div id=&quot;box&quot;&gt; &lt;div :style=&quot;&#x27;background:&#x27;+(isActive?&#x27;red&#x27;:&#x27;yellow&#x27;)&quot;&gt; åŠ¨æ€ç»‘å®šstyle-ä¸‰ç›®å†™æ³• &lt;/div&gt; &lt;div :style=&quot;styleObj&quot;&gt;åŠ¨æ€ç»‘å®šstyle-å¯¹è±¡å†™æ³•&lt;/div&gt; &lt;div :style=&quot;styleArr&quot;&gt;åŠ¨æ€ç»‘å®šstyle-æ•°ç»„å†™æ³•&lt;/div&gt;&lt;/div&gt;&lt;script&gt; vm = new Vue(&#123; el: &quot;#box&quot;, data: &#123; isActive: true, styleObj: &#123; background: &quot;red&quot;, backgroundColor: &quot;red&quot;, &#125;, styleArr: [&#123; backgroud: &quot;red&quot; &#125;], &#125;, &#125;); vm.classObj.a = false;&lt;/script&gt; æ•°ç»„å†™æ³•ï¼Œå¯ä»¥é€šè¿‡ push()æ·»åŠ æ–°çš„æ ·å¼ï¼Œå­—å…¸å†™æ³•ä¸èƒ½æ–°åŠ ã€‚ 6ï¼šæ¡ä»¶æ¸²æŸ“123456789101112131415161718&lt;div id=&quot;box&quot;&gt; &lt;div v-if=&quot;isCreated&quot;&gt;åŠ¨æ€åˆ›å»º&lt;/div&gt; &lt;div v-else&gt;åŠ¨æ€åˆ›å»º&lt;/div&gt; &lt;div v-if=&quot;datalist.length&quot;&gt; &lt;li v-for=&quot;data in datalist&quot;&gt;&#123;&#123;data&#125;&#125;&#125;&lt;/li&gt; &lt;/div&gt; &lt;div v-else-if=&quot;datalist.length &gt;=3&quot;&gt;if lager than 2&lt;/div&gt; &lt;div&gt;empty&lt;/div&gt;&lt;/div&gt;&lt;script&gt; vm = new Vue(&#123; el: &quot;#box&quot;, data: &#123; isCreated: true, datalist: [&quot;111&quot;, &quot;222&quot;, &quot;333&quot;], &#125;, &#125;);&lt;/script&gt; 7ï¼šåˆ—è¡¨æ¸²æŸ“12345678910111213141516&lt;div id=&quot;box&quot;&gt; &lt;li v-for=&quot;data in datalist&quot; key=&quot;data.id&quot;&gt;&#123;&#123;data&#125;&#125;&#125;&lt;/li&gt; &lt;li v-for=&quot;(data,key) in dataObj&quot;&gt;&#123;&#123;data&#125;&#125;&#125; ---&#123;&#123;key&#125;&#125;&lt;/li&gt;&lt;/div&gt;&lt;script&gt; vm = new Vue(&#123; el: &quot;#box&quot;, data: &#123; datalist: [&quot;111&quot;, &quot;222&quot;, &quot;333&quot;], dataObj: &#123; abc: &quot;abio&quot;, &#125;, &#125;, &#125;); vm.datalist.push(&quot;666&quot;);&lt;/script&gt; å…³é”®å­—å¯ä»¥æ˜¯ in ä¹Ÿå¯ä»¥æ˜¯ of 8ï¼šåˆ—è¡¨æ•°ç»„æ£€æµ‹filter(),contact(),map()æ–¹æ³•å¯¹åŸæ•°ç»„æ²¡æœ‰å½±å“ï¼Œè§†å›¾ä¸ä¼šæ›´æ–°ã€‚é€šè¿‡ç´¢å¼•å€¼ä¿®æ”¹æ•°ç»„ï¼Œè§†å›¾ä¸ä¼šæ›´æ–°ã€‚é€šè¿‡ splice æˆ–è€…ï¼ŒVue.set(datalist,0,â€™111â€™) 9ï¼šåˆ—è¡¨è¿‡æ»¤å¼•ç”¨12345678910111213141516171819202122&lt;div id=&quot;box&quot;&gt; &lt;input type=&quot;text&quot; @input=&quot;handleInput()&quot; v-model=&quot;mytext&quot; /&gt; &lt;li v-for=&quot;data in datalist&quot; key=&quot;data.id&quot;&gt;&#123;&#123;data&#125;&#125;&#125;&lt;/li&gt;&lt;/div&gt;&lt;script&gt; vm = new Vue(&#123; el: &quot;#box&quot;, data: &#123; mytext: &quot;&quot;, datalist: [&quot;111&quot;, &quot;222&quot;, &quot;333&quot;], list: [&quot;111&quot;, &quot;222&quot;, &quot;333&quot;], &#125;, methods: &#123; handleInput() &#123; var datalist = this.list.filter( (item) =&gt; item.indexOf(this.mytext) &gt; -1 ); &#125;, &#125;, &#125;); vm.datalist.push(&quot;666&quot;);&lt;/script&gt; 10ï¼šäº‹ä»¶å¤„ç†123456789101112131415&lt;div id=&quot;box&quot;&gt; &lt;button @click=&quot;handleClick&quot;&gt;&lt;/button&gt; &lt;button @click=&quot;handleClick()&quot;&gt;&lt;/button&gt; &lt;button @click=&quot;javascript:&quot;&gt;&lt;/button&gt;&lt;/div&gt;&lt;script&gt; vm = new Vue(&#123; el: &quot;#box&quot;, data: &#123;&#125;, methods: &#123; handleClick() &#123;&#125;, &#125;, &#125;); vm.datalist.push(&quot;666&quot;);&lt;/script&gt;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Vuejs","slug":"Vuejs","permalink":"https://sci.ci/tags/Vuejs/"}]},{"title":"OpenOfficeè¿æ¥Mysqlæ•°æ®åº“","slug":"yuque/sbv265","date":"2021-08-02T15:53:55.000Z","updated":"2023-12-02T00:06:38.798Z","comments":true,"path":"2021/08/02/yuque/sbv265/","link":"","permalink":"https://sci.ci/2021/08/02/yuque/sbv265/","excerpt":"","text":"ä½¿ç”¨ Openoffice è¿æ¥ mysql æ•°æ®åº“æ€»ä½“ä½“éªŒä¸æ˜¯å¾ˆå¥½ï¼Œè½¯ä»¶é•¿æ—¶é—´å¤„äºæœªå“åº”çŠ¶æ€ï¼Œå¹¶ä¸å»ºè®®ä½¿ç”¨å®ƒæ¥æ“ä½œ mysql æ•°æ®åº“ï¼Œå…¶ä»–çš„æ•°æ®åº“æš‚æ—¶ä¸çŸ¥é“ã€‚è¿™é‡Œç®€å•è¯´ä¸‹ä½¿ç”¨è¿‡ç¨‹ä¸­çš„ä¸€äº›é—®é¢˜å’Œè§£å†³åŠæ³•ã€‚ Java ç¯å¢ƒã€‚openoffice èƒ½å¤Ÿè¯†åˆ«çš„ java ç¯å¢ƒå¿…é¡»æ˜¯ 32 ä½çš„ï¼Œå› æ­¤å‘çˆ¹çš„å°±æ˜¯ï¼Œæˆ‘ 64 ä½çš„ä¸€ç›´æ²¡æ³•è¢«è¯†åˆ«å‡ºæ¥ï¼Œäºæ˜¯ä¸‹äº†ä¸€ä¸ª 32 ä½çš„ï¼Œé€šè¿‡è½¯ä»¶ä¸Šæ–¹çš„ï¼Œå·¥å…·-&gt;é€‰é¡¹-&gt;openoffice-&gt;Java æ¥æ‰‹åŠ¨é€‰æ‹© 32 ä½ jre çš„æ–‡ä»¶ä½ç½®ã€‚ mysql-Java é©±åŠ¨ã€‚é©±åŠ¨æ˜¯ä¸åŒ…å«åœ¨ java ç¯å¢ƒæˆ–è€… openoffice è½¯ä»¶é‡Œçš„ï¼Œéœ€å¦å¤–ä¸‹è½½: mysql-connectorã€‚é€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬çš„ï¼Œä¸‹è½½ä»¥.jar ç»“å°¾çš„æ–‡ä»¶ã€‚å°†é©±åŠ¨æ”¾åœ¨ jre æ–‡ä»¶å¤¹é‡Œ lib/ext ç›®å½•ä¸‹ã€‚ ç°åœ¨å°±å¯ä»¥æ˜¯å“¦é‚£ä¸ª openoffice è¿æ¥æ•°æ®åº“äº†ã€‚å¯èƒ½æ˜¯åŒæ—¶è·å–çš„æ•°æ®åº“æ¡ç›®è¿‡å¤šï¼Œè½¯ä»¶çš„æ€§èƒ½å¹¶ä¸å¥½ï¼Œè¿˜æ˜¯æ¨èä½¿ç”¨ phpmyadmin è¿æ¥ mysql æ•°æ®åº“ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://sci.ci/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"Openoffice","slug":"Openoffice","permalink":"https://sci.ci/tags/Openoffice/"}]},{"title":"å®‰å“ToyVPNæœåŠ¡ç«¯ä»é›¶å¼€å§‹è¯»","slug":"yuque/dm1gpv","date":"2021-07-26T16:20:17.000Z","updated":"2023-12-02T00:06:38.930Z","comments":true,"path":"2021/07/27/yuque/dm1gpv/","link":"","permalink":"https://sci.ci/2021/07/27/yuque/dm1gpv/","excerpt":"","text":"0ï¼šå¯¼è¯»è¿™ä¸ªç¨‹åºæ˜¯åŸºäº c++å®ç°çš„ä¸€ä¸ªç®€å• VPN æœåŠ¡å™¨ï¼Œæ­é… ToyVPN å®‰å“å®¢æˆ·ç«¯é£Ÿç”¨ã€‚ä¸ºäº†ä»é›¶å¼€å§‹äº†è§£ VPN çš„åŸç†ï¼Œæˆ‘å†³å®šèŠ±æ—¶é—´æ¥è§£è¯»æœåŠ¡ç«¯çš„ä»£ç ï¼Œå¹¶åœ¨æ­¤è®°å½•ã€‚ä»£ç åŸå€ï¼šToyVPNServer.cpp 1ï¼šåº“è¯´æ˜1234567891011121314151617#include &lt;stdio.h&gt; //æ ‡å‡†è¾“å…¥è¾“å‡ºåº“ï¼Œä¾‹å¦‚printfå’Œscanfå‡½æ•°#include &lt;stdlib.h&gt; //æ ‡å‡†åº“ï¼Œå°†å­—ç¬¦ä¸²å˜é‡è½¬ä¸ºå…¶ä»–ç±»å‹å˜é‡#include &lt;string.h&gt; //å­—ç¬¦ä¸²åº“#include &lt;unistd.h&gt; //Unixæ ‡å‡†åº“ï¼Œæä¾›é€šç”¨çš„æ–‡ä»¶ã€ç›®å½•ã€ç¨‹åºåŠè¿›ç¨‹æ“ä½œçš„å‡½æ•°#include &lt;arpa/inet.h&gt; //æä¾›IPåœ°å€è½¬æ¢å‡½æ•°#include &lt;netinet/in.h&gt; //å®šä¹‰æ•°æ®ç»“æ„sockaddr_in#include &lt;sys/ioctl.h&gt; //æä¾›å¯¹I/Oæ§åˆ¶çš„å‡½æ•°#include &lt;sys/socket.h&gt; //æä¾›socketå‡½æ•°åŠæ•°æ®ç»“æ„#include &lt;sys/stat.h&gt; //unix/linuxç³»ç»Ÿå®šä¹‰æ–‡ä»¶çŠ¶æ€æ‰€åœ¨çš„ä¼ªæ ‡å‡†å¤´æ–‡ä»¶#include &lt;sys/types.h&gt; //æ•°æ®ç±»å‹å®šä¹‰#include &lt;errno.h&gt; //æä¾›é”™è¯¯å·errnoçš„å®šä¹‰ï¼Œç”¨äºé”™è¯¯å¤„ç†#include &lt;fcntl.h&gt; //æä¾›å¯¹æ–‡ä»¶æ§åˆ¶çš„å‡½æ•°#ifdef __linux__ //å¦‚æœ__linux__è¢«å®šä¹‰äº†#include &lt;net/if.h&gt; //å¥—æ¥å­—æœ¬åœ°æ¥å£ï¼Œ#include &lt;linux/if_tun.h&gt; //ç”¨äºå»ºç«‹Tunï¼Œè™šæ‹Ÿç½‘å¡ 2ï¼šè·å–æ¥å£1234567891011121314//æ­¤æ–¹æ³•ä¸­ç”¨åˆ°çš„å‡½æ•°ï¼Œå‡åœ¨linux/if_tun.hä¸­static int get_interface(char *name)&#123; int interface = open(&quot;/dev/net/tun&quot;, O_RDWR | O_NONBLOCK); //æ‰“å¼€tunå­—ç¬¦è®¾å¤‡ ifreq ifr; //åˆå§‹åŒ–ä¸€ä¸ªifreqç»“æ„ä½“ï¼Œè§2ï¼Œ1èŠ‚ memset(í”¦, 0, sizeof(ifr)); //æ¸…ç©ºç»“æ„ä½“ifræˆå‘˜å˜é‡çš„å€¼ï¼Œæˆ–è€…å«åˆå§‹åŒ– ifr.ifr_flags = IFF_TUN | IFF_NO_PI; //æŒ‡å®šç½‘ç»œè®¾å¤‡çš„ä¸€äº›ç‰¹æ€§ strncpy(ifr.ifr_name, name, sizeof(ifr.ifr_name)); //æŠŠnameå¤åˆ¶ç»™ifr.ifr_nameï¼ŒæŒ‡å®šè™šæ‹Ÿç½‘ç»œè®¾å¤‡åç§° if (ioctl(interface, TUNSETIFF, í”¦)) &#123; //ç®¡ç†IOè®¾å¤‡å‡½æ•°ioctlï¼Œåˆ›å»ºæˆ–æ‰“å¼€ä¸€ä¸ªè™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œè¿”å›å€¼&lt;0åˆ™å‡ºé”™ã€‚è§2.2èŠ‚ perror(&quot;Cannot get TUN interface&quot;); exit(1); &#125; return interface; //è¿”å›æ¥å£&#125; åœ¨ linux æ“ä½œç³»ç»Ÿä¸­ï¼Œå¯ä»¥ç›´æ¥å‘**/dev/net/tun**å­—ç¬¦è®¾å¤‡å†™å…¥æˆ–è¯»å– IP æ•°æ®åŒ…ï¼Œå†™å…¥çš„ IP æ•°æ®åŒ…ï¼Œå°†è¢«ç›´æ¥é€åˆ° TCP/IP åè®®æ ˆå¹¶è¿›è¡Œå‘é€ï¼Œè€Œæ¥æ”¶åˆ°çš„ IP æ•°æ®åŒ…ä¹Ÿå¯ä»¥ä» tun æ–‡ä»¶ä¸­è¯»å–ã€‚ O_RDWR ä»¥å¯è¯»å†™æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼› O_NONBLOCK ä»¥ä¸å¯é˜»æ–­çš„æ–¹å¼æ‰“å¼€æ–‡ä»¶, ä¹Ÿå°±æ˜¯æ— è®ºæœ‰æ— æ•°æ®è¯»å–æˆ–ç­‰å¾…, éƒ½ä¼šç«‹å³è¿”å›è¿›ç¨‹ä¹‹ä¸­ã€‚ 2.1 ifreq ç»“æ„ä½“å¯¹äºç»“æ„ä½“ ifrï¼Œæˆ‘ä»¬åªå…³å¿ƒå…¶ä¸­çš„ä¸¤ä¸ªæˆå‘˜ ifr_name, ifr_flagsã€‚ifr_name å®šä¹‰äº†è¦åˆ›å»ºæˆ–è€…æ‰“å¼€çš„è™šæ‹Ÿè®¾å¤‡åå­—ï¼Œå¦‚æœæ²¡æœ‰æ­¤åç§°çš„è®¾å¤‡æˆ–è€…ä¸ºç©ºï¼Œåˆ™æ–°å»ºä¸€ä¸ªè™šæ‹Ÿè®¾å¤‡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°å»ºçš„è™šæ‹Ÿç½‘ç»œä¸Šè®¾å¤‡åç§°ã€‚ifr_flags ç”¨æ¥æè¿°è®¾å¤‡çš„ä¸€äº›å±æ€§ï¼š IFF_TUN: åˆ›å»ºä¸€ä¸ªç‚¹å¯¹ç‚¹è®¾å¤‡ IFF_TAP: åˆ›å»ºä¸€ä¸ªä»¥å¤ªç½‘è®¾å¤‡ IFF_NO_PI: ä¸åŒ…å«åŒ…ä¿¡æ¯ï¼Œé»˜è®¤çš„æ¯ä¸ªæ•°æ®åŒ…å½“ä¼ åˆ°ç”¨æˆ·ç©ºé—´æ—¶ï¼Œéƒ½å°†åŒ…å«ä¸€ä¸ªé™„åŠ çš„åŒ…å¤´æ¥ä¿å­˜åŒ…ä¿¡æ¯ IFF_ONE_QUEUE: é‡‡ç”¨å•ä¸€é˜Ÿåˆ—æ¨¡å¼ï¼Œå³å½“æ•°æ®åŒ…é˜Ÿåˆ—æ»¡çš„æ—¶å€™ï¼Œç”±è™šæ‹Ÿç½‘ç»œè®¾å¤‡è‡ªå·²ä¸¢å¼ƒä»¥åçš„æ•°æ®åŒ…ç›´åˆ°æ•°æ®åŒ…é˜Ÿåˆ—å†æœ‰ç©ºé—² é…ç½®çš„æ—¶å€™ï¼ŒIFF_TUN å’Œ IFF_TAP å¿…é¡»æ‹©ä¸€ï¼Œå…¶ä»–é€‰é¡¹åˆ™å¯ä»»æ„ç»„åˆã€‚TAP ç­‰åŒäºä¸€ä¸ªä»¥å¤ªç½‘è®¾å¤‡ï¼Œå®ƒæ“ä½œç¬¬äºŒå±‚æ•°æ®åŒ…å¦‚ä»¥å¤ªç½‘æ•°æ®å¸§ã€‚TUN æ¨¡æ‹Ÿäº†ç½‘ç»œå±‚è®¾å¤‡ï¼Œæ“ä½œç¬¬ä¸‰å±‚æ•°æ®åŒ…æ¯”å¦‚ IP æ•°æ®åŒ…ã€‚å¯ä»¥ç†è§£ä¸º TAP æ¯” TUN å°è£…æ—¶å¤šäº†ä¸€ä¸ªç›®æ ‡å’Œæœ¬æœºçš„æœºå™¨åœ°å€(MAC)ã€‚IFF_NO_PI æ²¡æœ‰å¼€å¯æ—¶æ‰€é™„åŠ çš„åŒ…ä¿¡æ¯å¤´å¦‚ä¸‹: 1234struct tun_pi &#123; unsigned short flags; unsigned short proto;&#125;; ç›®å‰ï¼Œflags åªåœ¨æ”¶å–æ•°æ®åŒ…çš„æ—¶å€™æœ‰æ•ˆï¼Œå½“å®ƒçš„ TUN_PKT_STRIP æ ‡å¿—è¢«ç½®æ—¶ï¼Œè¡¨ç¤ºå½“å‰çš„ç”¨æˆ·ç©ºé—´ç¼“å†²åŒºå¤ªå°ï¼Œä»¥è‡´æ•°æ®åŒ…è¢«æˆªæ–­ã€‚proto æˆå‘˜è¡¨ç¤ºå‘é€/æ¥æ”¶çš„æ•°æ®åŒ…çš„åè®®ã€‚ 2.2 ioctl()å‡½æ•°ä¸Šé¢ä»£ç ä¸­çš„æ–‡ä»¶æè¿°ç¬¦ fd é™¤äº†æ”¯æŒ TUN_SETIFF å’Œå…¶ä»–çš„å¸¸è§„ ioctl å‘½ä»¤å¤–ï¼Œè¿˜æ”¯æŒä»¥ä¸‹å‘½ä»¤: TUNSETNOCSUM: ä¸åšæ ¡éªŒå’Œæ ¡éªŒã€‚å‚æ•°ä¸º int å‹çš„ bool å€¼ã€‚ TUNSETPERSIST: æŠŠå¯¹åº”ç½‘ç»œè®¾å¤‡è®¾ç½®æˆæŒç»­æ¨¡å¼ï¼Œé»˜è®¤çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œå½“å…¶ç›¸å…³çš„æ–‡ä»¶ç¬¦è¢«å…³é—­æ—¶ï¼Œä¹Ÿå°†ä¼šä¼´éšç€ä¸ä¹‹ç›¸å…³çš„è·¯ç”±ç­‰ä¿¡æ¯åŒæ—¶æ¶ˆå¤±ã€‚å¦‚æœè®¾ç½®æˆæŒç»­æ¨¡å¼ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«ä¿ç•™ä¾›ä»¥åä½¿ç”¨ã€‚å‚æ•°ä¸º int å‹çš„ bool å€¼ã€‚ TUNSETOWNER: è®¾ç½®ç½‘ç»œè®¾å¤‡çš„å±ä¸»ã€‚å‚æ•°ç±»å‹ä¸º uid_tã€‚ TUNSETLINK: è®¾ç½®ç½‘ç»œè®¾å¤‡çš„é“¾è·¯ç±»å‹ï¼Œæ­¤å‘½ä»¤åªæœ‰åœ¨è™šæ‹Ÿç½‘ç»œè®¾å¤‡å…³é—­çš„æƒ…å†µä¸‹æœ‰æ•ˆã€‚å‚æ•°ä¸º int å‹ã€‚ ioctl å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†æˆ‘ä»¬è¦æ±‚çš„é…ç½®ï¼Œè½¬æ¢ä¸º/dev/net/tun èƒ½å¤Ÿè¯†åˆ«çš„å­—ç¬¦å†™å…¥åˆ°å­—ç¬¦è®¾å¤‡ä¸­ã€‚æ¥å»ºç«‹ä¸€ä¸ª tun æ¥å£ã€‚ 3ï¼šè·å–éš§é“123456789101112131415161718192021222324252627282930313233343536static int get_tunnel(char *port, char *secret)&#123; // We use an IPv6 socket to cover both IPv4 and IPv6. int tunnel = socket(AF_INET6, SOCK_DGRAM, 0); //åˆ›å»ºä¸€ä¸ªsocketæè¿°ç¬¦ï¼Œè§3.1èŠ‚ int flag = 1; setsockopt(tunnel, SOL_SOCKET, SO_REUSEADDR, &amp;flag, sizeof(flag)); //æ‰“å¼€åœ°å€å¤ç”¨åŠŸèƒ½ flag = 0; setsockopt(tunnel, IPPROTO_IPV6, IPV6_V6ONLY, &amp;flag, sizeof(flag)); //åŒæ—¶å…è®¸ipv6å’Œipv4 // åªæ¥æ”¶æœ¬åœ°ç«¯å£æ¶ˆæ¯ sockaddr_in6 addr; //IPV6ç»“æ„ä½“ï¼Œæˆå‘˜åŒ…æ‹¬åœ°å€ï¼Œç«¯å£ï¼Œflow informationä»¥åŠscope-idç­‰ memset(&amp;addr, 0, sizeof(addr)); //åˆå§‹åŒ–addr addr.sin6_family = AF_INET6; addr.sin6_port = htons(atoi(port)); //atoi()å­—ç¬¦ä¸²è½¬æ•´æ•°ï¼Œhtons()å°†ä¸»æœºå­—èŠ‚é¡ºåºè½¬ä¸ºç½‘ç»œå­—èŠ‚é¡ºåº // Call bind(2) in a loop since Linux does not have SO_REUSEPORT. while (bind(tunnel, (sockaddr *)&amp;addr, sizeof(addr))) &#123; if (errno != EADDRINUSE) &#123; //é”™è¯¯å¦‚æœä¸æ˜¯ç«¯å£è¢«å ç”¨ï¼Œåˆ™é€€å‡ºã€‚å¦åˆ™ç»§ç»­å¾ªç¯ return -1; &#125; usleep(100000); //åœæ­¢0.1sï¼Œæ­¤å‡½æ•°åŒ…å«åœ¨unistd.hä¸­ &#125; // Receive packets till the secret matches. char packet[1024]; socklen_t addrlen; do &#123; addrlen = sizeof(addr); int n = recvfrom(tunnel, packet, sizeof(packet), 0, (sockaddr *)&amp;addr, &amp;addrlen); //æ¥æ”¶æ•°æ®ï¼ŒæˆåŠŸè¿”å›æ¥æ”¶åˆ°çš„å­—ç¬¦æ•° if (n &lt;= 0) &#123; return -1; &#125; packet[n] = 0; &#125; while (packet[0] != 0 || strcmp(secret, &amp;packet[1])); //strcmp å­—ç¬¦ä¸²æ¯”è¾ƒï¼Œç›¸ç­‰è¿”å›0ï¼Œå¦åˆ™ä¸ºæ­£æˆ–è€…è´Ÿæ•° // Connect to the client as we only handle one client at a time. connect(tunnel, (sockaddr *)&amp;addr, addrlen); //è¿æ¥å®¢æˆ·ç«¯ return tunnel;&#125; 3.1 socket å‡½æ•°int socket(int domain, int type, int protocol);å¯¹åº”æ™®é€šæ–‡ä»¶çš„æ‰“å¼€æ“ä½œï¼Œæ–‡ä»¶æ‰“å¼€è¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œ socket è¿”å› soket æè¿°ç¬¦ï¼Œå®ƒå”¯ä¸€æ ‡è¯†äº†ä¸€ä¸ª socketã€‚é€šè¿‡æŒ‡å®šä¸åŒçš„å‚æ•°ï¼Œæ¥åˆ›å»ºä¸åŒçš„ socketã€‚domainï¼šå³åè®®åŸŸï¼Œåˆç§°ä¸ºåè®®æ—ï¼ˆfamilyï¼‰ã€‚å¸¸ç”¨çš„åè®®æ—æœ‰ï¼ŒAF_INETã€AF_INET6ã€AF_LOCALï¼ˆæˆ–ç§° AF_UNIXï¼ŒUnix åŸŸ socketï¼‰ã€AF_ROUTE ç­‰ç­‰ã€‚åè®®æ—å†³å®šäº† socket çš„åœ°å€ç±»å‹ï¼Œåœ¨é€šä¿¡ä¸­å¿…é¡»é‡‡ç”¨å¯¹åº”çš„åœ°å€ã€‚ AF_INETï¼šå†³å®šäº†è¦ç”¨ ipv4 åœ°å€ hostï¼ˆ32 ä½çš„ï¼‰ä¸ç«¯å£å· portï¼ˆ16 ä½çš„ï¼‰çš„ç»„åˆã€‚host æ˜¯ä¸€ä¸ªè¡¨ç¤ºä¸ºäº’è”ç½‘åŸŸåè¡¨ç¤ºæ³•ä¹‹å†…çš„ä¸»æœºåæˆ–è€…ä¸€ä¸ª IPv4 åœ°å€çš„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ â€˜daring.cwi.nlâ€™ æˆ– â€˜100.50.200.5â€™ï¼Œport æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚å¯¹äº TCP/IP åè®®æ—ï¼Œè¯¥å‚æ•°ç½® AF_INETã€‚ AF_INET6ï¼šè¡¨ç¤ºä½¿ç”¨ ipv6 åœ°å€æˆ–è€… ipv4 åœ°å€å’Œç«¯å£ã€‚ AF_UNIXï¼šå†³å®šäº†è¦ç”¨ä¸€ä¸ªç»å¯¹è·¯å¾„åä½œä¸ºåœ°å€ã€‚ typeï¼šæŒ‡å®š socket ç±»å‹ã€‚å¸¸ç”¨çš„ socket ç±»å‹æœ‰ï¼Œæµå¥—æ¥å­—ç±»å‹ SOCK_STREAMã€æ•°æ®æŠ¥å¥—æ¥å­—ç±»å‹ SOCK_DGRAMã€åŸå§‹å¥—æ¥å­— SOCK_RAWã€SOCK_PACKETã€SOCK_SEQPACKET ç­‰ç­‰ã€‚protocolï¼šå°±æ˜¯æŒ‡å®šåè®®ã€‚å¸¸ç”¨çš„åè®®æœ‰ï¼ŒIPPROTO_TCPã€IPPROTO_UDPã€IPPROTO_SCTPã€IPPROTO_TIPC ç­‰ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹åº” TCP ä¼ è¾“åè®®ã€UDP ä¼ è¾“åè®®ã€STCP ä¼ è¾“åè®®ã€TIPC ä¼ è¾“åè®®ã€‚type å’Œ protocol æ˜¯ä¸èƒ½å¤Ÿéšæ„æ­é…çš„ï¼Œæ¯”å¦‚æµå¥—æ¥å­—ç±»å‹ä¸èƒ½é€‰ç”¨ UDP åè®®ã€‚å½“ protocol ä¸º 0 æ—¶ï¼Œä¼šè‡ªåŠ¨é€‰æ‹© type ç±»å‹å¯¹åº”çš„åè®®ã€‚è€Œä»¥ä¸‹ä¸¤å¥è¿”å›çš„è‚¯å®šæ˜¯æ— æ•ˆå¥—æ¥å­— INVALID_SOCKETï¼Œä½¿ç”¨ WSAGetLastError()è·å–çš„é”™è¯¯ä»£ç ä¸º 10043ï¼š 12SOCKET s = socket(AF_INET, SOCK_DGRAM,IPPROTO_TCP)SOCKET s = socket(AF_INET, SOCK_STREAM,IPPROTO_UDP) 3.2 setsockopt å‡½æ•°int setsockopt( int socket, int level, int option_name,const void *option_value, size_t option_len);ç¬¬ä¸€ä¸ªå‚æ•° socket æ˜¯å¥—æ¥å­—æè¿°ç¬¦ã€‚ç¬¬äºŒä¸ªå‚æ•° level æ˜¯è¢«è®¾ç½®çš„é€‰é¡¹çš„çº§åˆ«ã€‚level æŒ‡å®šæ§åˆ¶å¥—æ¥å­—çš„å±‚æ¬¡.å¯ä»¥å–ä¸‰ç§å€¼: SOL_SOCKET:é€šç”¨å¥—æ¥å­—é€‰é¡¹.. IPPROTO_IPV6:IPV6 é€‰é¡¹ IPPROTO_IP:IP é€‰é¡¹ IPPROTO_TCP:TCP é€‰é¡¹ å¦‚æœæƒ³è¦åœ¨å¥—æ¥å­—çº§åˆ«ä¸Šè®¾ç½®é€‰é¡¹ï¼Œå°±å¿…é¡»æŠŠ level è®¾ç½®ä¸º SOL_SOCKETã€‚ option_name æŒ‡å®šå‡†å¤‡è®¾ç½®çš„é€‰é¡¹ï¼Œoption_name å¯ä»¥æœ‰å“ªäº›å–å€¼ï¼Œè¿™å–å†³äº levelï¼Œä»¥ linux 2.6 å†…æ ¸ä¸ºä¾‹ï¼ˆåœ¨ä¸åŒçš„å¹³å°ä¸Šï¼Œè¿™ç§å…³ç³»å¯èƒ½ä¼šæœ‰ä¸åŒï¼‰ï¼Œåœ¨å¥—æ¥å­—çº§åˆ«ä¸Š(SOL_SOCKET)ï¼Œoption_name å¯ä»¥æœ‰ä»¥ä¸‹å– å€¼ï¼š SO_BROADCAST å…è®¸å‘é€å¹¿æ’­æ•°æ® int SO_DEBUG å…è®¸è°ƒè¯• int SO_DONTROUTE ä¸æŸ¥æ‰¾è·¯ç”± int SO_ERROR è·å¾—å¥—æ¥å­—é”™è¯¯ int SO_KEEPALIVE ä¿æŒè¿æ¥ int SO_LINGER å»¶è¿Ÿå…³é—­è¿æ¥ struct linger SO_OOBINLINE å¸¦å¤–æ•°æ®æ”¾å…¥æ­£å¸¸æ•°æ®æµ int SO_RCVBUF æ¥æ”¶ç¼“å†²åŒºå¤§å° int SO_SNDBUF å‘é€ç¼“å†²åŒºå¤§å° int SO_RCVLOWAT æ¥æ”¶ç¼“å†²åŒºä¸‹é™ int SO_SNDLOWAT å‘é€ç¼“å†²åŒºä¸‹é™ int SO_RCVTIMEO æ¥æ”¶è¶…æ—¶ struct timeval SO_SNDTIMEO å‘é€è¶…æ—¶ struct timeval SO_REUSERADDR å…è®¸é‡ç”¨æœ¬åœ°åœ°å€å’Œç«¯å£ int SO_TYPE è·å¾—å¥—æ¥å­—ç±»å‹ int SO_BSDCOMPAT ä¸ BSD ç³»ç»Ÿå…¼å®¹ int 3.3 htons å‡½æ•°å°†ä¸»æœºå­—èŠ‚é¡ºåºè½¬æ¢ä¸ºç½‘ç»œå­—èŠ‚é¡ºåºã€‚æ¯”å¦‚ï¼Œæ•°å­— 16 çš„ 16 è¿›åˆ¶è¡¨ç¤ºä¸º 0x0010ï¼Œæ•°å­— 4096 çš„ 16 è¿›åˆ¶è¡¨ç¤ºä¸º 0x1000ã€‚ ç”±äº Intel æœºå™¨æ˜¯å°å°¾ç«¯ï¼Œå­˜å‚¨æ•°å­— 16 æ—¶å®é™…é¡ºåºä¸º 1000ï¼Œå­˜å‚¨ 4096 æ—¶å®é™…é¡ºåºä¸º 0010ã€‚å› æ­¤åœ¨å‘é€ç½‘ç»œåŒ…æ—¶ä¸ºäº†æŠ¥æ–‡ä¸­æ•°æ®ä¸º 0010ï¼Œéœ€è¦ç»è¿‡ htons è¿›è¡Œå­—èŠ‚è½¬æ¢ã€‚å¦‚æœç”¨ IBM ç­‰å¤§å°¾ç«¯æœºå™¨ï¼Œåˆ™æ²¡æœ‰è¿™ç§å­—èŠ‚é¡ºåºè½¬æ¢ï¼Œä½†ä¸ºäº†ç¨‹åºçš„å¯ç§»æ¤æ€§ï¼Œä¹Ÿæœ€å¥½ç”¨è¿™ä¸ªå‡½æ•°ã€‚ 3.4 bind å‡½æ•°åœ¨å¥—æ¥å£ä¸­ï¼Œä¸€ä¸ªå¥—æ¥å­—åªæ˜¯ç”¨æˆ·ç¨‹åºä¸å†…æ ¸äº¤äº’ä¿¡æ¯çš„æ¢çº½ï¼Œå®ƒè‡ªèº«æ²¡æœ‰å¤ªå¤šçš„ä¿¡æ¯ï¼Œä¹Ÿæ²¡æœ‰ç½‘ç»œåè®®åœ°å€å’Œ ç«¯å£å·ç­‰ä¿¡æ¯ï¼Œåœ¨è¿›è¡Œç½‘ç»œé€šä¿¡çš„æ—¶å€™ï¼Œå¿…é¡»æŠŠä¸€ä¸ªå¥—æ¥å­—ä¸ä¸€ä¸ªåœ°å€ç›¸å…³è”ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯åœ°å€ç»‘å®šçš„è¿‡ç¨‹ã€‚è®¸å¤šæ—¶å€™å†…æ ¸ä¼šæˆ‘ä»¬è‡ªåŠ¨ç»‘å®šä¸€ä¸ªåœ°å€ï¼Œç„¶è€Œæœ‰æ—¶ç”¨ æˆ·å¯èƒ½éœ€è¦è‡ªå·±æ¥å®Œæˆè¿™ä¸ªç»‘å®šçš„è¿‡ç¨‹ï¼Œä»¥æ»¡è¶³å®é™…åº”ç”¨çš„éœ€è¦ï¼Œæœ€å…¸å‹çš„æƒ…å†µæ˜¯ä¸€ä¸ªæœåŠ¡å™¨è¿›ç¨‹éœ€è¦ç»‘å®šä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„åœ°å€æˆ–ç«¯å£ä»¥ç­‰å¾…å®¢æˆ·æ¥è¿æ¥ã€‚è¿™ä¸ªäº‹ç”± bind çš„å‡½æ•°å®Œæˆã€‚ 1int bind( int sockfd, struct sockaddr * addr, socklen_t addrlen ) æˆåŠŸè¿”å› 0ï¼Œå¤±è´¥è¿”å›-1. sockfd:æŒ‡å®šåœ°å€ä¸å“ªä¸ªå¥—æ¥å­—ç»‘å®šï¼Œè¿™æ˜¯ä¸€ä¸ªç”±ä¹‹å‰çš„ socket å‡½æ•°è°ƒç”¨è¿”å›çš„å¥—æ¥å­—ã€‚è°ƒç”¨ bind çš„å‡½æ•°ä¹‹åï¼Œè¯¥å¥—æ¥å­—ä¸ä¸€ä¸ªç›¸åº”çš„åœ°å€å…³è”ï¼Œå‘é€åˆ°è¿™ä¸ªåœ°å€çš„æ•°æ®å¯ä»¥é€šè¿‡è¿™ä¸ªå¥—æ¥å­—æ¥è¯»å–ä¸ä½¿ç”¨ã€‚ addr:æŒ‡å®šåœ°å€ã€‚è¿™æ˜¯ä¸€ä¸ªåœ°å€ç»“æ„ï¼Œå¹¶ä¸”æ˜¯ä¸€ä¸ªå·²ç»ç»è¿‡å¡«å†™çš„æœ‰æ•ˆçš„åœ°å€ç»“æ„ã€‚è°ƒç”¨ bind ä¹‹åè¿™ä¸ªåœ°å€ä¸å‚æ•° sockfd æŒ‡å®šçš„å¥—æ¥å­—å…³è”ï¼Œä»è€Œå®ç°ä¸Šé¢æ‰€è¯´çš„æ•ˆæœã€‚ addrlen:æ­£å¦‚å¤§å¤šæ•° socket æ¥å£ä¸€æ ·ï¼Œå†…æ ¸ä¸å…³å¿ƒåœ°å€ç»“æ„ï¼Œå½“å®ƒå¤åˆ¶æˆ–ä¼ é€’åœ°å€ç»™é©±åŠ¨çš„æ—¶å€™ï¼Œå®ƒä¾æ®è¿™ä¸ªå€¼æ¥ç¡®å®šéœ€è¦å¤åˆ¶å¤šå°‘æ•°æ®ã€‚è¿™å·²ç»æˆä¸º socket æ¥å£ä¸­æœ€å¸¸è§çš„å‚æ•°ä¹‹ä¸€äº† 3.5 recvfrom å‡½æ•°ç”¨æ¥æ¥æ”¶è¿œç¨‹ä¸»æœºç»æŒ‡å®šçš„ socket ä¼ æ¥çš„æ•°æ®, å¹¶æŠŠæ•°æ®å­˜åˆ°ç”±å‚æ•° buf æŒ‡å‘çš„å†…å­˜ç©ºé—´, å‚æ•° len ä¸ºå¯æ¥æ”¶æ•°æ®çš„æœ€å¤§é•¿åº¦. å‚æ•° flags ä¸€èˆ¬è®¾ 0, å…¶ä»–æ•°å€¼å®šä¹‰è¯·å‚è€ƒ recv(). å‚æ•° from ç”¨æ¥æŒ‡å®šæ¬²ä¼ é€çš„ç½‘ç»œåœ°å€, ç»“æ„ sockaddr è¯·å‚è€ƒ bind(). å‚æ•° fromlen ä¸º sockaddr çš„ç»“æ„é•¿åº¦. è¿”å›å€¼ï¼šæˆåŠŸåˆ™è¿”å›æ¥æ”¶åˆ°çš„å­—ç¬¦æ•°, å¤±è´¥åˆ™è¿”å›-1, é”™è¯¯åŸå› å­˜äº errno ä¸­.é”™è¯¯ä»£ç ï¼š EBADF å‚æ•° s éåˆæ³•çš„ socket å¤„ç†ä»£ç  EFAULT å‚æ•°ä¸­æœ‰ä¸€æŒ‡é’ˆæŒ‡å‘æ— æ³•å­˜å–çš„å†…å­˜ç©ºé—´. ENOTSOCK å‚æ•° s ä¸ºä¸€æ–‡ä»¶æè¿°è¯, é socket. EINTR è¢«ä¿¡å·æ‰€ä¸­æ–­. EAGAIN æ­¤åŠ¨ä½œä¼šä»¤è¿›ç¨‹é˜»æ–­, ä½†å‚æ•° s çš„ socket ä¸ºä¸å¯é˜»æ–­. ENOBUFS ç³»ç»Ÿçš„ç¼“å†²å†…å­˜ä¸è¶³ ENOMEM æ ¸å¿ƒå†…å­˜ä¸è¶³ EINVAL ä¼ ç»™ç³»ç»Ÿè°ƒç”¨çš„å‚æ•°ä¸æ­£ç¡®. 4ï¼šæ„å»ºå‚æ•°1234567891011121314151617181920212223242526272829static void build_parameters(char *parameters, int size, int argc, char **argv)&#123; // ä¸ºäº†ç®€å•ï¼Œåªæ˜¯ç›²ç›®çš„è¿æ¥å„ä¸ªå‚æ•° int offset = 0; for (int i = 4; i &lt; argc; ++i) &#123; char *parameter = argv[i]; int length = strlen(parameter); char delimiter = &#x27;,&#x27;; // If it looks like an option, prepend a space instead of a comma. if (length == 2 &amp;&amp; parameter[0] == &#x27;-&#x27;) &#123; ++parameter; --length; delimiter = &#x27; &#x27;; &#125; // This is just a demo app, really. if (offset + length &gt;= size) &#123; puts(&quot;Parameters are too large&quot;); exit(1); &#125; // Append the delimiter and the parameter. parameters[offset] = delimiter; memcpy(&amp;parameters[offset + 1], parameter, length); offset += 1 + length; &#125; // Fill the rest of the space with spaces. memset(&amp;parameters[offset], &#x27; &#x27;, size - offset); // Control messages always start with zero. parameters[0] = 0;&#125; 5ï¼šä¸»ç¨‹åº123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107int main(int argc, char **argv)&#123; if (argc &lt; 5) &#123; printf(&quot;Usage: %s &lt;tunN&gt; &lt;port&gt; &lt;secret&gt; options...\\n&quot; &quot;\\n&quot; &quot;Options:\\n&quot; &quot; -m &lt;MTU&gt; for the maximum transmission unit\\n&quot; &quot; -a &lt;address&gt; &lt;prefix-length&gt; for the private address\\n&quot; &quot; -r &lt;address&gt; &lt;prefix-length&gt; for the forwarding route\\n&quot; &quot; -d &lt;address&gt; for the domain name server\\n&quot; &quot; -s &lt;domain&gt; for the search domain\\n&quot; &quot;\\n&quot; &quot;Note that TUN interface needs to be configured properly\\n&quot; &quot;BEFORE running this program. For more information, please\\n&quot; &quot;read the comments in the source code.\\n\\n&quot;, argv[0]); exit(1); &#125; // Parse the arguments and set the parameters. char parameters[1024]; build_parameters(parameters, sizeof(parameters), argc, argv); // Get TUN interface. int interface = get_interface(argv[1]); // Wait for a tunnel. int tunnel; while ((tunnel = get_tunnel(argv[2], argv[3])) != -1) &#123; printf(&quot;%s: Here comes a new tunnel\\n&quot;, argv[1]); // On UN*X, there are many ways to deal with multiple file // descriptors, such as poll(2), select(2), epoll(7) on Linux, // kqueue(2) on FreeBSD, pthread(3), or even fork(2). Here we // mimic everything from the client, so their source code can // be easily compared side by side. // Put the tunnel into non-blocking mode. fcntl(tunnel, F_SETFL, O_NONBLOCK); // Send the parameters several times in case of packet loss. for (int i = 0; i &lt; 3; ++i) &#123; send(tunnel, parameters, sizeof(parameters), MSG_NOSIGNAL); &#125; // Allocate the buffer for a single packet. char packet[32767]; // We use a timer to determine the status of the tunnel. It // works on both sides. A positive value means sending, and // any other means receiving. We start with receiving. int timer = 0; // We keep forwarding packets till something goes wrong. while (true) &#123; // Assume that we did not make any progress in this iteration. bool idle = true; // Read the outgoing packet from the input stream. int length = read(interface, packet, sizeof(packet)); if (length &gt; 0) &#123; // Write the outgoing packet to the tunnel. send(tunnel, packet, length, MSG_NOSIGNAL); // There might be more outgoing packets. idle = false; // If we were receiving, switch to sending. if (timer &lt; 1) &#123; timer = 1; &#125; &#125; // Read the incoming packet from the tunnel. length = recv(tunnel, packet, sizeof(packet), 0); if (length == 0) &#123; break; &#125; if (length &gt; 0) &#123; // Ignore control messages, which start with zero. if (packet[0] != 0) &#123; // Write the incoming packet to the output stream. write(interface, packet, length); &#125; // There might be more incoming packets. idle = false; // If we were sending, switch to receiving. if (timer &gt; 0) &#123; timer = 0; &#125; &#125; // If we are idle or waiting for the network, sleep for a // fraction of time to avoid busy looping. if (idle) &#123; usleep(100000); // Increase the timer. This is inaccurate but good enough, // since everything is operated in non-blocking mode. timer += (timer &gt; 0) ? 100 : -100; // We are receiving for a long time but not sending. // Can you figure out why we use a different value? :) if (timer &lt; -16000) &#123; // Send empty control messages. packet[0] = 0; for (int i = 0; i &lt; 3; ++i) &#123; send(tunnel, packet, 1, MSG_NOSIGNAL); &#125; // Switch to sending. timer = 1; &#125; // We are sending for a long time but not receiving. if (timer &gt; 20000) &#123; break; &#125; &#125; &#125; printf(&quot;%s: The tunnel is broken\\n&quot;, argv[1]); close(tunnel); &#125; perror(&quot;Cannot create tunnels&quot;); exit(1);&#125; å‚è€ƒèµ„æ–™ã€ŠLinux çš„ TUN/TAP ç¼–ç¨‹ã€‹ã€Šlinux ioctl()å‡½æ•°è¯¦è§£ã€‹ã€Šmemset å‡½æ•°åŠå…¶ç”¨æ³•ï¼ŒC è¯­è¨€ memset å‡½æ•°è¯¦è§£ã€‹ã€ŠC++ socket å‡½æ•°è§£æã€‹ã€Šsetsockopt å‡½æ•°åŠŸèƒ½åŠå‚æ•°è¯¦è§£ã€‹ã€ŠLINUX ä¸‹ getsockopt å’Œ setsockopt å‡½æ•°ã€‹ã€Šç½‘ç»œç¼–ç¨‹ socket ä¹‹ bind å‡½æ•°ã€‹ã€ŠC++ â€”usleep()åŠŸèƒ½ã€‹ã€ŠC è¯­è¨€ recvfrom()å‡½æ•°ï¼šç» socket æ¥æ”¶æ•°æ®ã€‹","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"VPN","slug":"VPN","permalink":"https://sci.ci/tags/VPN/"}]},{"title":"åœ¨æ§åˆ¶å™¨ä¸­ç”¨JSéªŒè¯CSS Selectorå’ŒXpath","slug":"yuque/hzg0pr","date":"2021-07-25T09:44:34.000Z","updated":"2023-12-02T00:06:38.950Z","comments":true,"path":"2021/07/25/yuque/hzg0pr/","link":"","permalink":"https://sci.ci/2021/07/25/yuque/hzg0pr/","excerpt":"","text":"0ï¼šå¼•è¨€ä½¿ç”¨ Beautifulsoup å’Œ Selenuim ç­‰ç½‘é¡µåˆ†æå·¥å…·æ—¶ï¼Œç»å¸¸éœ€è¦è‡ªå·±æ„é€ ä¸€ä¸ªé€‰æ‹©å™¨ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ CSS é€‰æ‹©å™¨å’Œ Xpathã€‚å¦‚ä½•éªŒè¯é€‰æ‹©å™¨æ„é€ æ˜¯å¦æ­£ç¡®å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç½‘é¡µçš„å¼€å‘è€…å·¥å…· Console æ é‡Œä½¿ç”¨ JS ä»£ç æ¥éªŒè¯é€‰æ‹©å™¨çš„æ­£ç¡®æ€§ã€‚ 1ï¼šCSS Selector éªŒè¯12css_selector = &quot;#bs_form_main input[value=buchen]&quot;;document.querySelector(css_selector); JS æœ‰æä¾› querySelector æ–¹æ³•ï¼Œå¦‚æœè¿”å›å€¼ä¸ä¸º Nullï¼Œåˆ™è¯´æ˜é€‰æ‹©å™¨æ„é€ æ­£ç¡®ã€‚ 2ï¼šXpath éªŒè¯1234xpath = &#x27;//*[@id=&quot;bs_tr3FE6EE511403&quot;]/td[9]/input&#x27;;document .evaluate(xpath, document, null, XPathResult.ANY_TYPE, null) .iterateNext(); evaluate æ–¹æ³•è¿”å› XpathResult å¯¹è±¡ï¼Œé€šè¿‡ iterateNext å¯ä»¥ä¾æ¬¡è·å–ç¬¦åˆé€‰æ‹©çš„ Domã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸éœ€è¦ç¡®è®¤æ˜¯å¦æœ‰å¤šä¸ªç¬¦åˆæ¡ä»¶çš„è¿”å›å€¼ï¼Œæ‰€ä»¥å¦‚æœè¿”å›ä¸æ˜¯ nullï¼Œåˆ™ xpath æ„é€ æ­£ç¡®å¦‚æœéœ€è¦ç¡®è®¤ï¼Œè¿”å›ä¸€ä¸ªæˆ–è€…å¤šä¸ªç¬¦åˆ xpath çš„ domï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚ 1234567891011121314function x(xpath) &#123; var result = document.evaluate( xpath, document, null, XPathResult.ANY_TYPE, null ); var i = 0; while (result.iterateNext()) &#123; i++; &#125; return i;&#125; 3ï¼šå‚è€ƒã€ŠJavaScript æŠ€æœ¯ç¯‡-js é€šè¿‡ xpath è·å– dom èŠ‚ç‚¹ï¼Œjs æ ¡éªŒ xpath å”¯ä¸€æ€§ã€‚ã€‹","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"JS","slug":"JS","permalink":"https://sci.ci/tags/JS/"}]},{"title":"RWTHè‡ªä¹ å®¤è‡ªåŠ¨é¢„å®šç¨‹åº(RWTH Lernraum)","slug":"yuque/dbbkl1","date":"2021-07-21T13:20:37.000Z","updated":"2023-12-02T00:06:39.018Z","comments":true,"path":"2021/07/21/yuque/dbbkl1/","link":"","permalink":"https://sci.ci/2021/07/21/yuque/dbbkl1/","excerpt":"","text":"1.å¼€ç¯‡æŠ¢åº§ç¨‹åºåˆ†ä¸ºä¸¤ç§ï¼ŒåŸºäº selenium çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–ç¨‹åºï¼Œå’ŒåŸºäº requests åº“çš„ http æ¨¡æ‹Ÿè¯·æ±‚ç¨‹åºã€‚ ä¸ºäº†æˆåŠŸè¿è¡Œç¨‹åºï¼Œè¯·ç¡®ä¿ä½ çš„è®¡ç®—æœºå®‰è£…äº† Pythonã€‚å¦‚ä½•å®‰è£… Python å¯è‡ªè¡Œç½‘ä¸Šæœç´¢ã€‚ä¸¤ç§ç¨‹åºå‘½ä¸­ç‡å‡æ¯”è¾ƒé«˜ã€‚å¯ä»»é€‰ä¸€ç§è¿è¡Œã€‚é¡¹ç›®åœ°å€ï¼šhttps://github.com/xieqifei/AutoLernraum 2.åŸºäº Requests åº“çš„é¢„å®šç¨‹åº(æ­£åœ¨æµ‹è¯•å½“ä¸­ï¼Œä¸å¤ªç¨³å®šï¼Œå…³æ³¨ github æ›´æ–°) å®‰è£… Python ç¯å¢ƒ ç‚¹å‡» github ç½‘é¡µä¸Šé¢é‚£ä¸ªç»¿è‰²çš„CodeæŒ‰é’®ï¼Œé€‰æ‹©ä¸‹è½½ä¸º zipï¼Œå°†æ•´ä¸ªç¨‹åºæ–‡ä»¶ä» github ä¸‹è½½åˆ°æœ¬åœ°å¹¶è§£å‹ã€‚ ä½¿ç”¨ä»»æ„ç¼–è¾‘å™¨æ‰“å¼€test_requests.pyï¼Œä¿®æ”¹å˜é‡ buchung buchung = {â€˜ortâ€™: â€˜â€™, â€˜kursnrâ€™: â€˜08411027â€™,â€™infoâ€™:{ â€˜usernameâ€™: â€˜â€™, â€˜emailâ€™: â€˜example@gmail.comâ€™, â€˜sexâ€™: â€˜Mâ€™, â€˜vornameâ€™: â€˜Ivanâ€™, â€˜nameâ€™: â€˜Natanaelâ€™, â€˜strasseâ€™: â€˜Pontstr.23â€™, â€˜ortâ€™: â€˜52076 Aachenâ€™, â€˜statusâ€™: â€˜S-RWTHâ€™, â€˜matnrâ€™: â€˜468389â€™, â€˜telefonâ€™: â€˜00491748068847â€™}} åœ¨å˜é‡ buchung ä¸­,éœ€è¦ä¿®æ”¹çš„æ•°æ®å¦‚ä¸‹ï¼š kursnr:ä½ æƒ³é¢„å®šçš„è‡ªä¹ å®¤çš„ç¼–å·ã€‚ä¾‹å¦‚ 08411027 ä¸º Semi90ã€‚åœ¨å›¾ä¹¦é¦†çš„é¢„å®šç³»ç»Ÿä¸­ï¼Œå¾ˆå®¹æ˜“å°±å¯ä»¥æ‰¾åˆ°ã€‚å›¾ä¹¦é¦†ç³»ç»Ÿé“¾æ¥ï¼šhttps://buchung.hsz.rwth-aachen.de/angebote/aktueller_zeitraum/_Lernraumbuchung.html email:ä½ çš„é‚®ç®±ã€‚ sex:æ€§åˆ«ã€‚ç”·ï¼šMï¼›å¥³:W vorname:åå­—ã€‚é¦–å­—æ¯å¤§å†™ name:å§“ã€‚é¦–å­—æ¯å¤§å†™ strasse:è¡—é“å’Œå·ç  ort:é‚®ç¼–å’Œåœ°å€ï¼ŒåŠ¡å¿…æ³¨æ„æ ¼å¼æ˜¯ 52076 Aachen.é‚®ç¼–å’Œåœ°å€ä»¥ç©ºæ ¼éš”å¼€ matnr:å…­ä½å­¦å· telefon:å¸¦å‰ç¼€çš„æ‰‹æœºå· å…¶ä½™å†…å®¹å¯ä¸ä¿®æ”¹ã€‚åŠ¡å¿…æ³¨æ„åœ¨æ¯ä¸ªå­—ç¬¦ä¸²ä¸¤è¾¹éƒ½æœ‰å•å¼•å· ä¿å­˜æ–‡ä»¶ï¼Œå¹¶ç”¨ python è¿è¡Œtest_requests.pyæ–‡ä»¶ã€‚è‹¥ä½ ä¸çŸ¥é“å¦‚ä½•è¿è¡Œ python æ–‡ä»¶ï¼Œå»ºè®®ä¸Šç½‘æŸ¥è¯¢ã€‚ è¿è¡Œåï¼Œç¨‹åºä¼šåœ¨ä¸¤åˆ†é’Ÿä¹‹å†…ï¼Œä»¥ 2 ç§’ä¸ºé—´éš”åˆ·æ–°ï¼Œç›´åˆ°å‘ç°ä½ æŒ‡å®šçš„è‡ªä¹ å®¤å¯ä»¥é¢„å®šå¹¶å®Œæˆé¢„å®šï¼Œæˆ–ä¸¤åˆ†é’Ÿåä¾ç„¶æ²¡æœ‰å‘ç°å¯ä»¥é¢„å®šçš„ä½ç½®ä¸ºæ­¢ã€‚å¦‚æœä½ éœ€è¦æŠ¢çš„è‡ªä¹ å®¤åœ¨ 8 ç‚¹å¼€å§‹ï¼Œé‚£ä¹ˆå»ºè®®ä½ åœ¨ 7 ç‚¹ 59 çš„æ—¶å€™å¼€å§‹è¿è¡Œç¨‹åºã€‚ã€‚ç¨‹åºç»“æŸ 5 åˆ†é’Ÿåï¼Œä½ å°†æ”¶åˆ°æ¥è‡ªå­¦æ ¡é‚®ç®±çš„ï¼Œé¢„å®šæˆåŠŸé‚®ä»¶ã€‚è‹¥æ²¡æœ‰æ”¶åˆ°ï¼Œé‚£ä¹ˆæŠ¢åº§å¤±è´¥ã€‚ 3.åŸºäº Selenium åº“çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–ç¨‹åºé¡¾åæ€ä¹‰ï¼Œä½ é™¤äº†éœ€è¦åœ¨ä½ çš„ç”µè„‘ä¸­å®‰è£… Python ä»¥å¤–ï¼Œè¿˜è¦åœ¨ä½ çš„ç”µè„‘é‡Œå®‰è£… Chrome æµè§ˆå™¨ã€‚å¦‚æœä½ ä¸æƒ³å®‰è£… Chrome é‚£ä¹ˆä¸Šé¢çš„ç¨‹åºåº”è¯¥å°±å¯ä»¥æ»¡è¶³ä½ çš„éœ€æ±‚äº†ã€‚ä¹‹æ‰€ä»¥ä½¿ç”¨è‡ªåŠ¨åŒ–ï¼Œæ˜¯å› ä¸ºå®ƒå¯èƒ½ä¼šæ¯”æ¨¡æ‹Ÿ http è¯·æ±‚æ›´åŠ å¯é ï¼Œä½†ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå®ƒæ¯”ä¸Šé¢çš„ç¨‹åºä¼šæ…¢ä¸ªå‡ ç§’ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œç›¸æ¯”äºäººä¸ºæŠ¢åº§æ¥è¯´ï¼Œå®ƒåŒæ ·éå¸¸å¿«ã€‚é‚£ä¹ˆï¼Œ å®‰è£… Python ç¯å¢ƒ å®‰è£…ä»»æ„ç‰ˆæœ¬ Chrome æµè§ˆå™¨ æ‰“å¼€test_selenium.pyæ–‡ä»¶ï¼Œä¿®æ”¹buchungå˜é‡é‡Œçš„ä¸ªäººä¿¡æ¯å’Œéœ€è¦é¢„å®šçš„è‡ªä¹ å®¤ç¼–å·ï¼Œè¯¦æƒ…çœ‹ç¬¬ 2 ç«  3 èŠ‚ ä¿å­˜æ–‡ä»¶ï¼Œç”¨ Python è¿è¡Œtest_selenium.pyã€‚ åŒæ ·çš„ï¼Œå¦‚æœä½ é¢„å®šçš„ç¨‹åº 8 ç‚¹å¼€æŠ¢ï¼Œé‚£ä¹ˆå»ºè®®ä½  7:59 è¿è¡Œå®ƒã€‚å®ƒå°†åœ¨ä¸¤åˆ†é’Ÿä¹‹å†…åå¤åˆ·æ–°é¡µé¢ï¼Œç›´åˆ°ä½ æŒ‡å®šçš„è‡ªä¹ å®¤ä½ç½®å¯ä»¥è¢«é¢„å®šï¼Œå¹¶æ‰§è¡Œé¢„å®šç¨‹åºï¼Œæˆ–è€…ä¸¤åˆ†é’Ÿä¹‹åç»“æŸè¿è¡Œã€‚ 4.éšæœºæŠ¢åº§ä¹Ÿè®¸ä½ åœ¨æŠ¢åº§æ—¶å¤´ç ´è¡€æµï¼Œä¹Ÿæ²¡æœ‰æŠ¢åˆ°ä¸€ä¸ªä½ç½®ã€‚é‚£ä¹ˆäº¡ç¾Šè¡¥ç‰¢ï¼Œä½ å¯èƒ½éœ€è¦ä¸€ä¸ªç¨‹åºæ¥å°è¯•æ¡æ¼ï¼Œå¦‚æœæœ‰äººæ”¾å¼ƒäº†ä»–çš„é¢„å®šï¼Œå¹¶åœ¨å­¦æ ¡çš„é¢„å®šç³»ç»Ÿè¢«é‡Šæ”¾å‡ºæ¥ï¼Œé‚£ä¹ˆä½ å¯ä»¥ç”¨åˆ°è¿™ä¸ªç¨‹åºã€‚ä»–ä¼šé—´æ–­çš„åˆ·æ–°ï¼Œç›´åˆ°ä»å­¦æ ¡çš„ç½‘é¡µé‡Œæ‰¾åˆ°ä¸€ä¸ªå¯ä»¥é¢„å®šçš„ä½ç½®ï¼Œå¹¶é¢„å®šæˆåŠŸä¸ºæ­¢ã€‚æˆ–è€…ï¼Œé™¤éä½ æ‰‹åŠ¨ç»ˆæ­¢å®ƒï¼Œå¦åˆ™ä»–å°†ä¸ä¼šåœæ­¢è¿è¡Œã€‚ å®‰è£… Python ç¯å¢ƒ å®‰è£…ä»»æ„ç‰ˆæœ¬ Chrome æµè§ˆå™¨ æ‰“å¼€random_test.pyæ–‡ä»¶ï¼Œä¿®æ”¹buchungå˜é‡é‡Œçš„ä¸ªäººä¿¡æ¯ï¼Œè¯¦æƒ…çœ‹ç¬¬ 2 ç«  3 èŠ‚ã€‚è‡ªä¹ å®¤çš„ç¼–å·ä»»æ„å¡«å†™å³å¯ã€‚ ä¿å­˜æ–‡ä»¶ï¼Œç”¨ Python è¿è¡Œrandom_test.pyã€‚ ä½ å¯åœ¨ä»»æ„æ—¶å€™è¿è¡Œå®ƒã€‚å½“éœ€è¦ç»“æŸçš„æ—¶å€™ï¼ŒæŒ‰ä½ctrl+Cæˆ–å…³é—­ç»ˆç«¯å¯ç»ˆæ­¢ã€‚ è¿™ä¸ªç¨‹åºç›¸å½“é¸¡è‚‹ï¼Œå› ä¸ºå¾ˆå°‘èƒ½å¤Ÿé‡åˆ°å¯ä»¥æ¡æ¼çš„æœºä¼šï¼Œè€Œé‡åˆ°çš„æ—¶å€™ï¼Œä¹Ÿæ²¡æŠ¢åˆ°è¿‡ã€‚ 5.å®šæ—¶è¿è¡Œä¹Ÿè®¸ä½ æƒ³æ—©èµ·çš„æ—¶å€™ç¡ä¸ªæ‡’è§‰ã€‚é‚£ä¹ˆï¼Œä½ å¯ä»¥è¯•è¯•ä½¿ç”¨è®¡ç®—æœºå®šæ—¶è¿è¡Œ python ç¨‹åºã€‚ Windows å’Œ mac ç³»ç»Ÿçš„å®šæ—¶è¿è¡Œæ–¹æ³•ï¼Œä½ å¯ä»¥è‡ªè¡Œè°·æ­Œæœç´¢ã€‚å› ä¸ºæˆ‘ç”¨åˆ°è¿‡æ ‘è“æ´¾å’Œäº‘å‡½æ•°è¿›è¡Œå®šæ—¶æŠ¢åº§ï¼Œæ‰€ä»¥è¿™é‡Œåªè®² Linux å’ŒåŸºäºè…¾è®¯äº‘å‡½æ•°çš„å®šæ—¶æ–¹æ³•ã€‚ Linux ç³»ç»Ÿä¸‹çš„å®šæ—¶è¿è¡Œï¼š ä½ éœ€è¦ç”¨åˆ° linux è‡ªå¸¦çš„å®šæ—¶è½¯ä»¶ crontabã€‚éå¸¸ç®€å•ï¼Œ è¾“å…¥æŒ‡ä»¤,å¼€å§‹ç¼–è¾‘æ—¶é—´è¡¨ 1crontab -e æŒ‰ä¸‹iå¼€å§‹ç¼–è¾‘,ç¼–è¾‘å†…å®¹å¦‚ä¸‹ 10,30 8 * * * python -u /home/***/test_requests.py &gt;result.log 2&gt;&amp;1 å°†ä¸Šè¿°/home/***/test_requestes.pyæ”¹ä¸ºä½ æ”¾ç½®è¯¥æ–‡ä»¶çš„åœ°å€å³å¯ã€‚ æ­¤è¡Œä»£ç è¡¨ç¤ºã€‚å°†åœ¨æ¯æ—¥çš„ 8 ç‚¹å’Œå…«ç‚¹åŠæ‰§è¡Œ python æ­¤ç¨‹åºï¼Œå¹¶å°† python çš„è¾“å‡ºä¿å­˜åˆ°å®šæ—¶ç¨‹åºæ–‡ä»¶å¤¹é‡Œçš„ result.log æ–‡ä»¶é‡Œ æŒ‰ä¸‹:wqä¿å­˜é€€å‡º åˆ©ç”¨è…¾è®¯äº‘å‡½æ•° è…¾è®¯äº‘å‡½æ•°ï¼Œæœ‰éå¸¸å……è¶³çš„å…è´¹è¿è¡Œç©ºé—´ã€‚å¯ä»¥ç›´æ¥æŠŠç¨‹åºæ”¾åˆ°ä¸Šé¢æ‰§è¡Œï¼Œåº”è¯¥å¾ˆå°‘æœ‰äººä¼šç”¨åˆ°å§ï¼Œæ‰€ä»¥ç®€å•è®²è®²ã€‚ å»ºç«‹ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå°†å®Œæ•´çš„ç¨‹åºä¸Šä¼ ã€‚ æ–°å»ºå®šæ—¶è§¦å‘å™¨ï¼Œè‡ªå®šä¹‰è§¦å‘å‘¨æœŸå¦‚ä¸‹ï¼Œå› ä¸ºå®šæ—¶å™¨æ˜¯ä»¥åŒ—äº¬æ—¶é—´ä¸ºå‡†ï¼Œæ‰€ä»¥éœ€è¦è€ƒè™‘æ—¶å·®é—®é¢˜ã€‚ 10 0,30 14 * * * å‡½æ•°å…¥å£ä¸ºtest_serverless.main_handler 6.ç»“å°¾å¦‚æœä½ å¯¹ç¨‹åºçš„è¿è¡ŒåŸç†æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆä½ å¯ä»¥çœ‹çœ‹/myclass/lernraum.pyæ–‡ä»¶ï¼Œæ‰€æœ‰çš„æŠ¢åº§ç¨‹åºéƒ½åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå› ä¸ºæ–‡ä»¶ç»è¿‡äº†å¤šæ¬¡ä¿®æ”¹ï¼Œæ‰€ä»¥çœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹æ‚ä¹±æ— ç« ã€‚å¦å¤–ï¼ŒåŸºäºæ­¤ç¨‹åºæˆ‘å¼€å‘äº†ä¸€ä¸ªç½‘ç«™ï¼Œç”¨äºæ‰¹é‡è‡ªåŠ¨åŒ–æŠ¢åº§ï¼Œhttps://buchung.sci.ci åŠŸèƒ½ä»¥åŸºæœ¬å®ç°ï¼Œä½†ç”±äºåŸºäº Requests åº“ç¨‹åºè¿˜ä¸ç¨³å®šï¼Œæµè§ˆå™¨è‡ªåŠ¨åŒ–åˆé¢‡è€—å†…å­˜ï¼Œåªç»™æˆ‘çš„å¥½å‹æä¾›æœåŠ¡ï¼Œæš‚æ—¶æœªå¼€æ”¾æ³¨å†Œï¼Œæ•¬è¯·æœŸå¾…ã€‚","categories":[{"name":"python","slug":"python","permalink":"https://sci.ci/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://sci.ci/tags/python/"}]},{"title":"å¦‚ä½•åˆ©ç”¨Seleniumå®ç°æ›´åŠ é«˜æ•ˆçš„çˆ¬è™«","slug":"yuque/kdo456","date":"2021-07-09T16:59:45.000Z","updated":"2023-12-02T00:06:39.046Z","comments":true,"path":"2021/07/10/yuque/kdo456/","link":"","permalink":"https://sci.ci/2021/07/10/yuque/kdo456/","excerpt":"","text":"1. å¯¼è¯­Selenium ä½œä¸ºæµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”±äºå…¶å¯ä»¥ç›´æ¥æ‰§è¡Œ js ä»£ç çš„ä¼˜è¶Šæ€§ï¼Œç»å¸¸è¢«ç”¨åšçˆ¬è™«å·¥å…·ã€‚ä½†æ˜¯ï¼Œæ¯•ç«Ÿéœ€è¦æ§åˆ¶æµè§ˆå™¨ï¼Œä½æ•ˆç‡é«˜å†…å­˜å§‹ç»ˆæ˜¯å…¶éš¾ä»¥ç”©æ‰çš„æ ‡ç­¾ã€‚åœ¨æˆ‘ä¸ªäººçˆ¬è™«å¼€å‘ä¸­ï¼Œå¯¹å¦‚ä½•é«˜æ•ˆåˆ©ç”¨ selenium æœ‰äº†ä¸€å¥—ä¸ªäººçš„ç†è§£ã€‚ 2. ç”¨ js æ³¨å…¥ä»£æ›¿ selenium åŸç”Ÿæ“ä½œselenium åº“æä¾›çš„ execute_script æ–¹æ³•ä½¿ js æ³¨å…¥æˆä¸ºå¯èƒ½ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ª js æ³¨å…¥çš„ä¾‹å­ 12js=&quot;document.getElementsByClassName(&#x27;form-control&#x27;)[0].value=&#x27;%s&#x27;;&quot;%(requestCode[i][0].value)driver.execute_script(js) ä»¥ selenium å¡«å†™è¡¨å•ä¸ºä¾‹ï¼Œpython ä»£ç å¦‚ä¸‹ï¼š 12vorname = driver.find_element_by_name(&#x27;vorname&#x27;)vorname.send_keys(&#x27;vorname&#x27;) ä½¿ç”¨ selenium å¡«å†™è¡¨å•ï¼Œæ‰§è¡Œé€Ÿåº¦æ˜¯ç›¸å½“æ…¢çš„ï¼Œå½“ input æ ‡ç­¾å¾ˆå¤šçš„æ—¶å€™ï¼Œselenium ä¼šä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ‰§è¡Œè¡¨å•å¡«å†™ï¼Œè¿™å°±ä¼šå¯¼è‡´åœ¨å¡«å†™å®Œæ•´çš„è¡¨å•æ—¶ï¼Œå¡«å†™æ—¶é—´å…¶å®æ¯”äººä¸ºé€šè¿‡æµè§ˆå™¨ autocomplete å¿«ä¸äº†å¤šå°‘ï¼Œç”šè‡³æ›´æ…¢ã€‚ä½¿ç”¨ js æ¥æ‰§è¡Œè¡¨å•å¡«å†™ï¼Œå¦‚ä¸‹ä»£ç ï¼š 12fill_form_script = &quot;bsform.vorname.value=&#x27;vorname&#x27;;bsform.submit()&quot;driver.execute_script(fill_form_script) bsform ä¸º form æ ‡ç­¾çš„ name å±æ€§ï¼Œvorname ä¸º input æ ‡ç­¾çš„ name å±æ€§ï¼Œé€šè¿‡ bsform.vorname.value ä»£ç å¿«é€Ÿå¡«å†™è¡¨å•ï¼Œå¤šä¸ª input å‡ ä¹æ˜¯åŒæ—¶å®Œæˆï¼Œåœ¨è°ƒç”¨ submit()æ–¹æ³•æäº¤è¡¨å•ï¼Œç”šè‡³å¯ä»¥ç›´æ¥ç»•è¿‡æµè§ˆå™¨çš„è¡¨å•éªŒè¯ã€‚ç›¸æ¯” selenium æ¨¡æ‹Ÿæ“ä½œæ›´å¿«ï¼Œä»£ç ä¹Ÿæ›´åŠ ç®€ä»‹ã€‚ 3. åˆ©ç”¨ ajax ä»£æ›¿ selenium æ‰“å¼€å¤šä¸ªçª—å£æˆ‘ä»¬åœ¨ä½¿ç”¨ selenium æ—¶ï¼Œæœ€ä¸»è¦è¿˜æ˜¯çœ‹é‡ï¼Œå®ƒç›´æ¥å¯ä»¥æ‰§è¡Œç½‘é¡µä¸­çš„ jsï¼Œè€Œæ— éœ€åœ¨å»åˆ†æ js ä»£ç çš„ç‰¹ç‚¹ã€‚ä½†æ˜¯å—é™äºï¼Œå…¶é«˜å†…å­˜å ç”¨çš„ç¼ºç‚¹ï¼Œå¾ˆéš¾åœ¨å¤šçº¿ç¨‹æ—¶æ‰§è¡Œçˆ¬è™«ä»»åŠ¡ã€‚åˆ©ç”¨ js æ³¨å…¥å¯ä»¥åœ¨ç½‘é¡µä¸­æ‰§è¡Œ js ä»£ç ï¼Œæ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æ˜¯å¦å¯ä»¥æ³¨å…¥ js ç›´æ¥ç”¨ ajax æ¥è¯·æ±‚ç½‘é¡µï¼Œå¦‚æœå¯ä»¥ï¼Œç›¸æ¯”è¾ƒäºåˆ©ç”¨ requests åº“ï¼Œè¿™æ ·å¯ä»¥æå¤§çš„é¿å…è¢«ç½‘é¡µæœåŠ¡å™¨çš„åçˆ¬è™«æœºåˆ¶æ£€æµ‹åˆ°ï¼Œä¹Ÿèƒ½ç»•å¼€åˆ†æ js æ¥è·å–ä¸€äº›å‚æ•°ï¼Œç”šè‡³ ajax å¯ä»¥è‡ªåŠ¨çš„ä¸ºæˆ‘ä»¬çš„è¯·æ±‚æ·»åŠ  cookieï¼Œä¹Ÿé¿å…æ¯æ¬¡éƒ½éœ€è¦å»ä¿å­˜ cookie çš„çƒ¦æ¼ã€‚ã€‚äº‹å®ä¸Šï¼Œselenium ä¸ºäº†é¿å…å…¶è¢«æ»¥ç”¨ï¼Œå¹¶æ²¡æœ‰æä¾› ajax çš„æ‹¦æˆªåŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä¾¿æˆ‘ä»¬é€šè¿‡ js å‘èµ·äº†è¯·æ±‚ï¼Œä¹Ÿä¸èƒ½é€šè¿‡ selenium ç›´æ¥è·å–åˆ°è¿”å›çš„æ•°æ®ã€‚å¯¹æ­¤ï¼Œå¯ä»¥åˆ©ç”¨ js ä»£ç ï¼Œå°† ajax è¿”å›çš„æ•°æ®æ¸²æŸ“åˆ°ç½‘é¡µä¸­ï¼Œå†é€šè¿‡ selenium æå–ç½‘é¡µæ•°æ®æ¥è·å– ajax è¿”å›çš„æ•°æ®ï¼Œè·å–åå†å°†ç½‘é¡µæ¢å¤åŸçŠ¶ã€‚è¿™æ ·ç›¸æ¯”äºï¼Œæ¯æ‰“å¼€ä¸€ä¸ªç½‘é¡µå°±æ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨çª—å£ï¼Œå¯¹å†…å­˜çš„å ç”¨å°±å°äº†å¾ˆå¤šã€‚ã€‚","categories":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/categories/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"Selenium","slug":"Selenium","permalink":"https://sci.ci/tags/Selenium/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"Pythonå¦‚ä½•å‡†ç¡®çš„è®¡ç®—Httpè¯·æ±‚ä¸­çš„Content Length","slug":"yuque/bsbcfh","date":"2021-06-14T07:44:05.000Z","updated":"2023-12-02T00:06:39.054Z","comments":true,"path":"2021/06/14/yuque/bsbcfh/","link":"","permalink":"https://sci.ci/2021/06/14/yuque/bsbcfh/","excerpt":"","text":"Content Length è¡¨ç¤ºçš„æ˜¯ http è¯·æ±‚ä¸­çš„æ•°æ®é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯ requests ä¸­çš„ data å¯¹åº”é•¿åº¦ã€‚é€šå¸¸æˆ‘ä»¬ç»™ requests ä¼ é€’çš„ data æ˜¯å­—å…¸æ ¼å¼çš„ï¼Œé‚£ä¹ˆç›´æ¥ä½¿ç”¨ len(data)æ˜¯æ— æ³•è·å¾—å‡†ç¡®çš„ content length çš„ã€‚ åœ¨ http ä¸­ï¼Œdata æ˜¯ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ä¼ é€’çš„ã€‚é‚£ä¹ˆä»¥ä¸‹çš„å­—å…¸æ ¼å¼çš„ data å¯¹åº”çš„å­—ç¬¦ä¸²æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ 1234data = &#123;&#x27;fid&#x27;: &#x27;df05ef96b6407055f8690b5f30322b58db776ecc7ef099197f03353e&#x27;&#x27;BS_Termin_2021-06-14&#x27;: &#x27;buchen&#x27;&#125; å…¶å¯¹åº”çš„åœ¨ tcp ä¼ è¾“ä¸­çš„å­—ç¬¦ä¸²æ˜¯ fid=df05ef96b6407055f8690b5f30322b58db776ecc7ef099197f03353e&amp;BS_Termin_2021-06-14=buchen å¯ä»¥çœ‹åˆ°ï¼Œé”®å’Œå€¼ä»¥â€™=â€™è¿æ¥ï¼Œå¤šä¸ªå‚æ•°ä»¥â€™&amp;â€™è¿æ¥ã€‚ä¸‹é¢ä½¿ç”¨ python ä»£ç è®¡ç®—æ•´ä¸ªå­—ç¬¦ä¸²é•¿åº¦ 123456789def get_content_length(data): #è®¡ç®—=å’Œ&amp;çš„å­—èŠ‚æ•° length = len(data.keys()) * 2 - 1 #è®¡ç®—é”®å€¼çš„å­—èŠ‚æ•°ã€‚æœ€åçš„encodeæ˜¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œutfç¼–ç ï¼Œ #å¦‚æœé”®å€¼åŒ…å«ä¸­æ–‡ï¼Œé‚£ä¹ˆä¸€ä¸ªæ±‰å­—å­—ç¬¦å¯¹åº”ä¸‰ä¸ªå­—èŠ‚ï¼Œlen()æ–¹æ³•åªèƒ½è®¡ç®—å­—ç¬¦çš„ä¸ªæ•° #è€Œcontent lengthæ˜¯å­—èŠ‚æ•° total = &#x27;&#x27;.join(list(data.keys()) + list(data.values())).encode() length += len(total) return str(length)","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Content Length","slug":"Content-Length","permalink":"https://sci.ci/tags/Content-Length/"}]},{"title":"ç ´è§£å›¾ç‰‡ç­‰èµ„æºè·¨åŸŸå’Œé˜²ç›—é“¾é˜»æ‹¦","slug":"yuque/lupgvk","date":"2021-02-26T10:58:08.000Z","updated":"2023-12-02T00:06:39.086Z","comments":true,"path":"2021/02/26/yuque/lupgvk/","link":"","permalink":"https://sci.ci/2021/02/26/yuque/lupgvk/","excerpt":"","text":"å¦‚æœ A ç«™ç‚¹æƒ³å°† B ç«™ç‚¹çš„ img ç­‰èµ„æºæ”¾åˆ° A ç«™ç‚¹ï¼Œé€šå¸¸ä¼šå—åˆ°å¯¹æ–¹ç«™ç‚¹é˜²ç›—é“¾çš„é˜»æ‹¦ã€‚è¿™é‡Œæ˜¯æˆ‘æä¾›çš„ä¸€ä¸ªæ€è·¯ï¼Œåˆ©ç”¨è…¾è®¯äº‘å‡½æ•°çš„å…è´¹èµ„æºï¼Œå®Œç¾ç»•å¼€é˜²ç›—é“¾ã€‚å› ä¸ºå›¾ç‰‡ä¸ä¼šå—åˆ°æµè§ˆå™¨çš„è·¨åŸŸé˜»æ‹¦ï¼Œå…¶ä»–èµ„æºçš„è·¨åŸŸé—®é¢˜ä¹Ÿèƒ½é€šè¿‡è¿™ä¸ªæ–¹æ³•è§£å†³ã€‚ 1ï¼šä»€ä¹ˆæ˜¯é˜²ç›—é“¾ï¼Ÿé˜²ç›—é“¾æ˜¯ç”±å¯¹æ–¹ç«™ç‚¹è®¾ç½®çš„ï¼Œé˜²æ­¢æœªå—è®¸å¯çš„ç«™ç‚¹ç›´æ¥å¼•ç”¨å¯¹æ–¹ç«™ç‚¹çš„èµ„æºã€‚æ¯”å¦‚è¿™é‡Œæœ‰ä¸€ä¸ª https://www.baidu.com/abc.jpg å›¾ç‰‡é“¾æ¥ï¼Œå¦‚æœä½ æƒ³å°†å®ƒæ”¾åˆ° www.yourweb.com ç«™ç‚¹çš„ img æ ‡ç­¾ src ä¸­ï¼Œå°†å—åˆ°é˜²ç›—é“¾çš„é˜»æŒ¡ï¼Œæµè§ˆå™¨å°†æ— æ³•åŠ è½½æ­¤å›¾ç‰‡ã€‚é˜²ç›—é“¾æ˜¯å› ä¸ºæµè§ˆå™¨åœ¨å‘èµ·è·¨åŸŸè¯·æ±‚æ—¶æºå¸¦äº†ï¼Œreferrer è¯·æ±‚å¤´ï¼Œæ­¤è¯·æ±‚å¤´å«æœ‰ä½ çš„ç«™ç‚¹ä¸»æœºï¼Œå¯¹æ–¹è¯†åˆ«åˆ°ä½ éè®¸å¯ç«™ç‚¹ï¼Œå› æ­¤æ‹’ç»è¿”å›ç»™ä½ å›¾ç‰‡èµ„æºã€‚æˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›è§£å†³é˜²ç›—é“¾çš„åŠæ³•ï¼Œæ¯”å¦‚ï¼Œè®¾ç½® meta æ ‡ç­¾ä¸º no-referrerï¼Œä½¿ç”¨ iframeï¼Œåå‘ä»£ç†ç­‰ã€‚å…¶ä¸­ï¼Œé’ˆå¯¹ B ç«™é˜²ç›—é“¾çš„ meta æ ‡ç­¾æ— æ•ˆï¼Œiframe è¿‡äºè‡ƒè‚¿ï¼Œä¸é€‚åˆè®¾ç½®ï¼Œè€Œåå‘ä»£ç†åˆ™éœ€è¦ä¸€å°æœåŠ¡å™¨ï¼Œä»·æ ¼ä¸ç¾ä¸½ï¼Œæˆ‘ç›´æ¥ç”¨åˆ«äººç½‘ç«™ä¸Šçš„èµ„æºï¼Œä¸å°±æ˜¯ä¸ºäº†ç™½å«–å—ï¼Ÿå¯¹æ­¤æˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªï¼Œå…è´¹ç ´è§£é˜²ç›—é“¾çš„æ–¹æ³•ã€‚ 2ï¼šç ´è§£é˜²ç›—é“¾æˆ‘åœ¨è…¾è®¯äº‘å‡½æ•°ä¸Šå†™äº†ä¸€ä¸ª python ç¨‹åºï¼Œæ­¤ç¨‹åºï¼Œå°†å›¾ç‰‡èµ„æºç›´å¾„è½¬ä¸º base64 æ•°æ®ï¼Œç„¶åè¿”å›ç»™è¯·æ±‚è€…ã€‚ä¸ºä»€ä¹ˆè…¾è®¯äº‘å‡½æ•°ï¼Ÿè…¾è®¯äº‘å‡½æ•°æ¯ä¸ªæœˆæœ‰å…è´¹çš„é¢åº¦ï¼Œå…¶ä¸­ 100 ä¸‡æ¬¡ api è°ƒç”¨ï¼Œ40 ä¸‡ GBs çš„å‡½æ•°è¿è¡Œæ—¶é•¿(1GBs è¡¨ç¤ºï¼Œå†…å­˜ 1GB è¿è¡Œ 1 ç§’)ï¼Œè¿˜æœ‰å¤§æ¦‚å‡ ä¸ª G çš„å¤–ç½‘æµå‡ºæµé‡ã€‚è¿™ç¾ä¸½çš„å…è´¹é‡ï¼Œè¶³å¤Ÿæˆ‘ä»¬åšå›¾ç‰‡ä»£ç†äº†ã€‚ä¸ºä»€ä¹ˆè½¬ base64ï¼Ÿé¦–å…ˆï¼Œè…¾è®¯äº‘å‡½æ•°ä¸æ”¯æŒç›´æ¥è¿”å›äºŒè¿›åˆ¶æˆ–è€…å›¾ç‰‡èµ„æºï¼Œå®ƒåªèƒ½è¿”å›çº¯å­—ç¬¦ä¸²æ–‡æœ¬ï¼Œæˆ–è€… json æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚python å¯ä»¥åˆ©ç”¨ base64 åº“ï¼Œå°†å›¾ç‰‡è½¬ä¸º base64 å­—èŠ‚æµï¼Œç„¶åå¯¹å…¶è§£ç ç”Ÿæˆå­—ç¬¦ä¸²ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œbase64 æ ¼å¼çš„å­—ç¬¦ä¸²å¯ä»¥ç›´æ¥æ”¾å…¥ img æ ‡ç­¾çš„ src ä¸­ï¼Œè€Œæ— éœ€å†è½¬ä¸º blobã€‚python ä»£ç ï¼š 123456789101112import requestsimport base64from io import BytesIOimport os#è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¯ç›´æ¥æ”¾åˆ°imgæ ‡ç­¾srcä¸­#img_urlå›¾ç‰‡çš„urldef getImgtoBase64(img_url): resp = requests.get(img_url) img_bytes=base64.b64encode(BytesIO(resp.content).read()) img_str = img_bytes.decode() return &#x27;data:image/&#x27;+os.path.basename(img_url)+&#x27;;base64,&#x27;+img_str è¿™é‡Œåªæœ‰å…³é”®ä»£ç ï¼Œå¦‚ä½•é€šè¿‡äº‘å‡½æ•° api å‘äº‘å‡½æ•°ä¸­ä¼ å…¥ imgurlï¼Œéœ€è¦é¢å¤–çš„ç¨‹åºï¼Œæ¯”å¦‚ post è¯·æ±‚ä¸­æ·»åŠ  url å‚æ•°ï¼Œæˆ–è€… get è¯·æ±‚å‚æ•°ä¸­æ”¾å…¥ unicode ç¼–ç åçš„ urlã€‚æ›´å¤šçš„è§£å†³åŠæ³•ï¼Œéœ€è¦è‡ªè¡Œäº†è§£äº‘å‡½æ•°ã€‚å› ä¸ºæˆ‘çš„ imgurl æ˜¯ç›´æ¥åœ¨ python ç¨‹åºä¸­é€šè¿‡çˆ¬è™«çˆ¬å–çš„ï¼Œæ²¡æœ‰é€šè¿‡å‰ç«¯å‘é€ imgurl æ‰€ä»¥æ²¡æœ‰å†è´´å‡ºæ¥ã€‚è¿™é‡Œè´´å‡ºä¸€äº›äº‘å‡½æ•°çš„å¯èƒ½è¿”å›æ–¹æ³• 123456789101112131415#å‰ç«¯è¯·æ±‚æ—¶å°†urlç¼–ç #é€šè¿‡getè¯·æ±‚ä¼ å…¥imgurlå‚æ•°ï¼Œhttps://serverless-api.com/?imgurl=www.baidu.com%2fabc.jpgdef main_handler(event,context): if(&#x27;imgurl&#x27; in event[&#x27;queryString&#x27;]): imgurl = event[&#x27;queryString&#x27;][&#x27;imgurl&#x27;] #TODO å°†imgurlè¿›è¡Œurlè§£ç  #imgurl_decoded= img_str = getImgtoBase64(imgurl_decoded) #è¿”å›jsonæ ¼å¼çš„å†…å®¹ return &#123; &quot;isBase64Encoded&quot;: False, &quot;statusCode&quot;: 200, &quot;headers&quot;: &#123;&#x27;Content-Type&#x27;: &#x27;application/json&#x27;,&#x27;Access-Control-Allow-Origin&#x27;:&#x27;*&#x27;&#125;, &quot;body&quot;: &#123;&#x27;imgstr&#x27;:img_str&#125; &#125; å¦‚æœä¸æ˜¯å›¾ç‰‡èµ„æºï¼ŒåŠ å…¥Access-Control-Allow-Origin å¯ä»¥è§£å†³è·¨åŸŸé—®é¢˜ã€‚","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Serverless","slug":"Serverless","permalink":"https://sci.ci/tags/Serverless/"},{"name":"è·¨åŸŸ","slug":"è·¨åŸŸ","permalink":"https://sci.ci/tags/%E8%B7%A8%E5%9F%9F/"}]},{"title":"Selenium-Webdriveræ¥å£","slug":"yuque/fc448d","date":"2021-02-23T13:45:20.000Z","updated":"2023-12-02T00:06:39.098Z","comments":true,"path":"2021/02/23/yuque/fc448d/","link":"","permalink":"https://sci.ci/2021/02/23/yuque/fc448d/","excerpt":"","text":"è¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹ä½¿ç”¨ Serverless æ„æ¶æ­å»ºè‡ªå·±çš„åº”ç”¨ï¼Œè€Œ Serverless çš„ç¼ºç‚¹æ˜¾è€Œæ˜“è§ï¼Œå¾ˆéš¾è‡ªå®šä¹‰è¿è¡Œæ—¶ã€‚å½“æˆ‘å°è¯•åœ¨äº‘å‡½æ•°æ­å»ºä¸€ä¸ªåŸºäº Webdriver çš„çˆ¬è™«ç¨‹åºæ—¶ï¼Œæˆ‘äº†è§£åˆ°ï¼ŒåŸºäº python çš„ Selenium åº”ç”¨è¿˜æ— æ³•åœ¨äº‘å‡½æ•°ä¸Šè¿è¡Œï¼Œè¿™æ˜¯ç”±äºäº‘å‡½æ•°å¹¶æ²¡æœ‰å®‰è£… chrome æµè§ˆå™¨ã€‚å¦‚æœæƒ³åœ¨äº‘å‡½æ•°ä¸Šè¿è¡Œ Seleniumï¼Œåˆ™å¿…é¡»ä½¿ç”¨ node.js 8.10 ç‰ˆæœ¬+puppeteer æ’ä»¶ã€‚å¯¹äº node.js å¹¶ä¸ç†Ÿæ‚‰çš„æˆ‘ï¼Œéœ€è¦é‡æ–°å­¦ä¹ è¿™æ¬¾ç¨‹åºã€‚æˆ‘ç›¸ä¿¡ï¼Œéšç€ Serverless çš„å‘å±•ï¼Œä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„äººè·Ÿæˆ‘ä¸€æ ·ï¼Œå¸Œæœ›é€šè¿‡äº‘å‡½æ•°åŸºäº Python å®ç° Selenium çˆ¬è™«ã€‚å› æ­¤ï¼Œæˆ‘å°†åœ¨æ­¤æ–¹å‘ä¸Šï¼Œè¿ˆå‡ºä¸€æ­¥ï¼Œæ„å»ºä¸€ä¸ª Selenium çš„ apiã€‚æ­¤åº”ç”¨ï¼Œåº”å½“ä»¥ url ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ç»™ç”¨æˆ· js å¤„ç†åçš„ html ä»£ç ã€‚æˆ‘å¸Œæœ›å®ƒæ˜¯è¿è¡Œåœ¨äº‘å‡½æ•°ä¸Šçš„ã€‚ä¹Ÿè®¸å®ƒèƒ½å¤Ÿæˆä¸ºï¼Œåå‘ä»£ç†çš„ä¸€ç§æ–¹å¼ã€‚é‚£ä¹ˆç°åœ¨å¼€å§‹å­¦ä¹  Nodjs å§ï¼","categories":[{"name":"æ„æƒ³","slug":"æ„æƒ³","permalink":"https://sci.ci/categories/%E6%9E%84%E6%83%B3/"}],"tags":[{"name":"Selenium","slug":"Selenium","permalink":"https://sci.ci/tags/Selenium/"},{"name":"Serverless","slug":"Serverless","permalink":"https://sci.ci/tags/Serverless/"}]},{"title":"åŸºäºServerlessçš„éŸ³ä¹ä¸‹è½½å·¥å…·","slug":"yuque/nnzrrl","date":"2021-02-21T22:28:29.000Z","updated":"2023-12-02T00:06:39.170Z","comments":true,"path":"2021/02/22/yuque/nnzrrl/","link":"","permalink":"https://sci.ci/2021/02/22/yuque/nnzrrl/","excerpt":"","text":"1ï¼šä½¿ç”¨æ‰‹å†Œä¸€ä¸ªåŸºäº pythonï¼Œæ­å»ºåœ¨ Serverless äº‘å‡½æ•°ä¸Šçš„å…è´¹éŸ³ä¹ä¸‹è½½ç¨‹åºã€‚å¯å‰¥ç¦»äº‘å‡½æ•°æœ¬åœ°è¿è¡Œã€‚é€šè¿‡æ„é€ å½¢å¦‚[https://m.sci.ci/](https://m.sci.ci/)éŸ³ä¹ç›¸å…³ä¿¡æ¯è¿™æ ·çš„ç½‘å€ï¼Œå°±å¯åœ¨æµè§ˆå™¨ä¸Šä¸‹è½½å–œæ¬¢çš„éŸ³ä¹äº†ã€‚ demoç®€å•çš„ä¾‹å­ï¼Œæƒ³å¬çˆ±çš„ä¾›å…»ï¼Ÿå°è¯•åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥m.sci.ci/çˆ±çš„ä¾›å…»ç°åœ¨è¯•è¯• ğŸ‘‰m.sci.ci/çˆ±çš„ä¾›å…»è¿”å›çš„éŸ³ä¹æ–‡ä»¶æ˜¯æ¨å¹‚ç‰ˆæœ¬çš„ï¼Œä¸å–œæ¬¢ï¼Ÿå°è¯•é‡æ–°æ„é€ é“¾æ¥m.sci.ci/å¼ é“é¢–å¼ æ°çˆ±çš„ä¾›å…»ç°åœ¨è¿”å›çš„å°±æ˜¯å¼ æ°å’Œå¼ é“é¢–åˆå”±ç‰ˆå•¦ï¼æ­Œæ›²ä¸‹è½½é“¾æ¥ä»…èƒ½ä¿å­˜ä¸€å¤©ï¼éŸ³ä¹æ–‡ä»¶ä»¥ä½ çš„æœç´¢å†…å®¹ä¸ºåã€‚æ¯”å¦‚å¼ é“é¢–å¼ æ°çˆ±çš„ä¾›å…».mp3è€Œä¸æ˜¯åŸæ¥çš„åç§°ï¼Œæ–‡ä»¶ä¸­æ­Œæ›²çš„ä¸“è¾‘ã€æ­Œè¯ç­‰ç›¸å…³ä¿¡æ¯ä¹Ÿæ˜¯æ²¡æœ‰çš„ã€‚ 2ï¼šæ­å»ºè‡ªå·±çš„æœåŠ¡Serverless åˆç§°æ— æœåŠ¡ã€äº‘å‡½æ•°ï¼Œå¯é€šè¿‡ä¸€ä¸ª api è§¦å‘ä½ å†™å¥½çš„ç¨‹åºï¼Œå¹¶è¿”å›æ•°æ®ç»™è¯·æ±‚è€…ã€‚é¡¹ç›®åœ°å€ï¼šhttps://github.com/xieqifei/free-music 2.1 ä¾èµ– youtube-dl æä¾›é€šè¿‡ youtube è§†é¢‘ urlï¼Œä¸‹è½½è§†é¢‘æˆ– mp3 éŸ³ä¹æ–‡ä»¶ï¼Œéœ€è¦é€šè¿‡ pip å®‰è£… qiniu æä¾›éŸ³ä¹å‚¨å­˜æœåŠ¡ï¼Œéœ€è¦é€šè¿‡ pip å®‰è£… requests å‘é€ç½‘ç»œè¯·æ±‚ json è§£æ json æ•°æ® éœ€è¦åœ¨è°·æ­Œäº‘å‡½æ•° requrements.txt ä¸­å¡«å†™ 123qiniu&#x3D;&#x3D;7.3.1requests&#x3D;&#x3D;2.22.0youtube-dl&#x3D;&#x3D;2021.1.16 2.2 éŸ³é¢‘æå–å’Œå‚¨å­˜ä»¥ä¸‹ç¨‹åºè¿è¡Œåœ¨è°·æ­Œ Serverless æœåŠ¡ä¸Šã€‚éœ€è¦ä½ æ·»åŠ è‡ªå·±çš„ä¸ƒç‰›äº‘å‚¨å­˜æ¡¶ï¼Œå¦‚æœæœ‰å¿…è¦ï¼Œå¯ä»¥ä½¿ç”¨è°·æ­Œæä¾›çš„å…è´¹ youtube api è·å–æœç´¢ç»“æœï¼Œç¨‹åºä¼šä¼˜å…ˆä½¿ç”¨çˆ¬è™«è·å–æœç´¢ç»“æœï¼Œå½“ç¨‹åºé¢‘ç¹è¿è¡Œæ—¶ï¼Œçˆ¬è™«ä¼šå¤±æ•ˆï¼Œä¸ºäº†æé«˜å®¹é”™ï¼Œå»ºè®®æ·»åŠ è°·æ­Œ apiï¼Œæ­¤ api æ¯å¤©å¯ä»¥å‘èµ· 100 æ¬¡è¯·æ±‚æ¥è·å– youtube æœç´¢ç»“æœã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120# -*- encoding: utf-8 -*-&#x27;&#x27;&#x27;@file_name :lambda_function.py@description :@time :2021/02/02 22:20:14@author :Qifei@version :1.0&#x27;&#x27;&#x27;import requestsimport youtube_dlfrom qiniu import Authimport jsonimport refrom qiniu.services.storage.bucket import BucketManagerimport os#ä¸ƒç‰›äº‘å¯¹è±¡å‚¨å­˜AKå’ŒSKï¼Œä»¥åŠå‚¨å­˜æ¡¶å,å‚¨å­˜æ¡¶çš„cdnåŸŸåaccess_key = &#x27;&#x27;secret_key = &#x27;&#x27;bucket_name = &#x27;&#x27;qnurl = &quot;https://qn.xieqifei.com/&quot;#è°·æ­Œapiï¼Œç”¨äºè·å–youtubeæœç´¢ç»“æœgoogle_appKey=&quot;&quot;q = Auth(access_key, secret_key)def handler(request): musicname = request.url.split(&quot;/&quot;)[-1] video_url = get_video_url_in_youtube_from_crawler(musicname) #éµå¾ªåŒæºcorsåè®®ï¼Œå¯è·¨åŸŸè®¿é—® headers = &#123; &#x27;Access-Control-Allow-Origin&#x27;: &#x27;*&#x27; &#125; if video_url == 500: #çˆ¬è™«å¤±æ•ˆï¼Œåˆ‡æ¢api video_url = get_video_url_in_youtube_form_api(google_appKey,musicname) if video_url == 500: return (&quot;error&quot;,400,headers) filename = dl_mp3(musicname,video_url) localpath = &quot;/tmp&quot; dl_url = uploadfile(localpath,filename) return (dl_url, 200, headers)#å°†æ–‡ä»¶ä¸Šä¼ åˆ°ä¸ƒç‰›def uploadfile(localpath,filename): #ä¸Šä¼ åä¿å­˜çš„æ–‡ä»¶å key = filename #ç”Ÿæˆä¸Šä¼  Tokenï¼Œå¯ä»¥æŒ‡å®šè¿‡æœŸæ—¶é—´ç­‰ token = q.upload_token(bucket_name, key, 3600) url = &#x27;https://upload-z2.qiniup.com&#x27; files = &#123;&#x27;file&#x27;: open(localpath+&quot;/&quot;+filename, &#x27;rb&#x27;)&#125; data = &#123;&#x27;token&#x27;:token,&#x27;fileName&#x27;:filename,&#x27;key&#x27;:key&#125; response = requests.post(url, files=files, data=data) set_liftime(filename) url=qnurl+filename delete_tmp(filename) return url#è®¾ç½®ä¿å­˜åœ¨ä¸ƒç‰›äº‘ä¸Šçš„éŸ³ä¹æ–‡ä»¶1å¤©åè‡ªåŠ¨åˆ é™¤def set_liftime(musicname): #åˆå§‹åŒ–BucketManager bucket = BucketManager(q) #ä½ è¦æµ‹è¯•çš„ç©ºé—´ï¼Œ å¹¶ä¸”è¿™ä¸ªkeyåœ¨ä½ ç©ºé—´ä¸­å­˜åœ¨ key = musicname #æ‚¨è¦æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸ days = &#x27;1&#x27; ret, info = bucket.delete_after_days(bucket_name, key, days) print(info)##ä¸‹è½½mp3æ ¼å¼æ–‡ä»¶def dl_mp3(musicname,url): ydl_opts = &#123; &#x27;format&#x27;: &#x27;bestaudio/best&#x27;, &#x27;postprocessors&#x27;: [&#123; &#x27;key&#x27;: &#x27;FFmpegExtractAudio&#x27;, &#x27;preferredcodec&#x27;: &#x27;mp3&#x27;, &#x27;preferredquality&#x27;: &#x27;192&#x27;, &#125;], &#x27;outtmpl&#x27;: &#x27;/tmp/&#123;&#125;.mp3&#x27;.format(musicname), &#x27;quiet&#x27;: False &#125; with youtube_dl.YoutubeDL(ydl_opts) as ydl: ydl.download([url]) # info = ydl.extract_info(url, download=False) filename = &quot;&#123;&#125;.mp3&quot;.format(musicname) return filename#è°ƒç”¨è°·æ­Œapiè·å–youtubeæœç´¢ç»“æœï¼Œè¿”å›åŒ¹é…åº¦æœ€é«˜çš„è§†é¢‘é“¾æ¥def get_video_url_in_youtube_form_api(appKey,music_name): print(&quot;ä»google apiè·å–æ•°æ®&quot;) url = &quot;https://youtube.googleapis.com/youtube/v3/search?q=&quot;+music_name+&quot;&amp;key=&quot;+appKey resp = requests.get(url) resp_json = resp.json() if resp.status_code ==200: return &quot;https://www.youtube.com/watch?v=&quot;+resp_json[&#x27;items&#x27;][0][&#x27;id&#x27;][&#x27;videoId&#x27;] else: return 500#åˆ©ç”¨çˆ¬è™«è·å–youtubeæœç´¢ç»“æœdef get_video_url_in_youtube_from_crawler(keyword): url=&quot;https://m.youtube.com/results?search_query=&quot;+keyword print(&quot;é€šè¿‡çˆ¬è™«è·å–æ•°æ®&quot;) resp = requests.get(url) if resp.status_code==200: result_json = re.findall(r&#x27;ytInitialData = (.*);&lt;/script&gt;&#x27;, resp.text)[0] result_obj = json.loads(result_json) try: video_url = &quot;https://www.youtube.com/watch?v=&quot;+result_obj[&#x27;contents&#x27;][&#x27;twoColumnSearchResultsRenderer&#x27;][&#x27;primaryContents&#x27;][&#x27;sectionListRenderer&#x27;][&#x27;contents&#x27;][0][&#x27;itemSectionRenderer&#x27;][&#x27;contents&#x27;][0][&#x27;videoRenderer&#x27;][&#x27;videoId&#x27;] except KeyError: return 500 return video_url else: return 500def delete_tmp(filename): os.system(&quot;rm -f /tmp/&quot;+filename) print(&quot;ä»tmpåˆ é™¤&quot;+filename) ä¸Šè¿°ä»£ç ï¼Œä¼šæå–è°·æ­Œè¯·æ±‚è·¯å¾„ä¸­çš„æœ€åä¸€ä¸ªåœ°å€ä½œä¸ºæœç´¢å†…å®¹ï¼Œæ¯”å¦‚ https://service-azkac26i-1258461674.hk.apigw.tencentcs.com/release/APIGWH-1612290368/çˆ±çš„ä¾›å…» é‚£ä¹ˆçˆ±çš„ä¾›å…»å°†ä½œä¸ºæœç´¢å…³é”®è¯ï¼Œä¸‹è½½çˆ±çš„ä¾›å…»æœ€åŒ¹é…çš„è§†é¢‘çš„éŸ³é¢‘ ï¼Œå†ä¿å­˜åˆ°ä¸ƒç‰›äº‘å¯¹è±¡å‚¨å­˜æ¡¶ä¸­ã€‚ æ­¤ä»£ç ä»…èƒ½ç”¨äºè°·æ­Œ serverlessï¼Œç”±äºæƒé™é—®é¢˜ï¼Œåœ¨å…¶ä»– serverlessï¼Œæ¯”å¦‚è…¾è®¯ã€äºšé©¬é€Šä¸Šï¼Œåœ¨å°†ä¸‹è½½çš„è§†é¢‘æå–éŸ³é¢‘æ—¶ï¼Œffmpeg æ²¡æœ‰å¯¹è§†é¢‘çš„å†™æƒé™ï¼Œåªæœ‰è°·æ­Œæ— æœåŠ¡æ¡†æ¶æ”¯æŒã€‚æ‰€ä»¥åªèƒ½åœ¨è°·æ­Œä¸Šè¿è¡Œã€‚ ç”±äºè°·æ­Œ Serverless ä¸æ”¯æŒè‡ªå®šä¹‰ api ç½‘å€ï¼Œè€Œè°·æ­Œçš„åŸŸååœ¨å›½å†…åˆæ— æ³•è®¿é—®ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨è…¾è®¯çš„é¦™æ¸¯ serverless å†æ„å»ºä¸€ä¸ªäº‘å‡½æ•°ã€‚è…¾è®¯äº‘å‡½æ•°æ”¯æŒè‡ªå®šä¹‰ apiã€‚æˆ‘ç›¸ä¿¡é€šè¿‡ä¸€å®šçš„ä»£ç ä¿®æ”¹ï¼Œffmpeg æ˜¯æœ‰åŠæ³•å¤„ç†ä¸‹è½½çš„è§†é¢‘æ–‡ä»¶çš„ï¼Œä½†æ˜¯ç”±äºæ—¶é—´å…³ç³»ï¼Œæˆ‘ä¸æ„¿æ„å†å»åšå°è¯•ï¼›é¢ï¼Œè¿™é‡Œå°±ç›´æ¥ç”¨äº†è°·æ­Œ Serverless åšè§†é¢‘å¤„ç†ï¼Œå†é€šè¿‡è…¾è®¯ serverless è‡ªå®šä¹‰ api å¹¶è¿”å›ç»™ç”¨æˆ·ä¸€ä¸ªç½‘é¡µï¼Œç½‘é¡µé‡Œæç¤ºç”¨æˆ·ç­‰å¾…éŸ³é¢‘å¤„ç†ï¼Œå¹¶å‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚ç»™è°·æ­Œäº‘å‡½æ•°ï¼Œå½“éŸ³é¢‘å¤„ç†å®Œæ¯•ï¼Œè°·æ­Œäº‘å‡½æ•°è¿”å›ç»™ç½‘é¡µï¼ŒéŸ³é¢‘æ–‡ä»¶åœ¨ä¸ƒç‰›äº‘å‚¨å­˜æ¡¶çš„ä¿å­˜åœ°å€ã€‚ 2.3 ç½‘é¡µæ„å»º123456789101112131415161718192021# -*- encoding: utf-8 -*-&#x27;&#x27;&#x27;@file_name :scf.py@description :ç”¨äºè…¾è®¯äº‘å‡½æ•°ï¼Œè‡ªå®šä¹‰åŸŸåï¼Œè¿”å›ä¸€ä¸ªé™æ€é¡µé¢ï¼Œé¡µé¢å¼‚æ­¥è¯·æ±‚è°·æ­Œäº‘å‡½æ•°ï¼Œè°·æ­Œä¸‹è½½å¹¶å¤„ç†éŸ³ä¹ã€‚ç„¶åè¿”å›é“¾æ¥ç»™é™æ€é¡µé¢@time :2021/02/03 00:49:36@author :Qifei@version :1.0&#x27;&#x27;&#x27;def handler(event,context): musicname = event[&#x27;path&#x27;].split(&quot;/&quot;)[-1] html=&#x27;&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;å¤„ç†ä¸­&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;&lt;strong&gt;æœåŠ¡å™¨æ­£åœ¨å¤„ç†ä½ çš„è¯·æ±‚ï¼Œè¯·ä¸è¦å…³é—­é¡µé¢ï¼ŒéŸ³ä¹å°†åœ¨å€’è®¡æ•°ç»“æŸå‰æŠµè¾¾ã€‚ã€‚&lt;/strong&gt;&lt;/h1&gt;&lt;p id=&quot;demo&quot;&gt;&lt;/p&gt;&lt;h1 id=&quot;show&quot; name=&quot;n1&quot; &gt;&lt;/h1&gt;&lt;img src=&quot;https://qn.xieqifei.com/tipps.png&quot; alt=&quot;tipps&quot; width=&quot;300&quot;/&gt;&lt;script&gt;var xhr=new XMLHttpRequest();xhr.onload=function()&#123;window.location.replace(xhr.responseText);&#125;;xhr.onerror=function()&#123;document.getElementById(&quot;demo&quot;).innerHTML=&quot;è¯·æ±‚å‡ºé”™&quot;&#125;;xhr.open(&quot;GET&quot;,&quot;https://service-azkac26i-1258461674.hk.apigw.tencentcs.com/release/APIGWHtmlDemo-1612290368/&#x27;+musicname+&#x27;&quot;,true);xhr.send();function countdown() &#123;var n = 20;var interval;if (n &gt; 0) &#123;interval = setInterval(() =&gt; &#123;n--;document.getElementById(&quot;show&quot;).innerHTML = n;if (n&lt;= 0) &#123;clearInterval(interval)&#125;&#125;, 1000)&#125; &#125; countdown();&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;&#x27; return &#123; &quot;isBase64Encoded&quot;: False, &quot;statusCode&quot;: 200, &quot;headers&quot;: &#123;&#x27;Content-Type&#x27;: &#x27;text/html&#x27;,&#x27;Access-Control-Allow-Origin&#x27;:&#x27;*&#x27;&#125;, &quot;body&quot;: html &#125; æ¥çœ‹çœ‹ç½‘é¡µéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ä¸Šè¿°ä»£ç ä¸­çš„ html å˜é‡ï¼Œæ ¼å¼åŒ–å 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot; /&gt; &lt;title&gt;å¤„ç†ä¸­&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt; &lt;strong &gt;æœåŠ¡å™¨æ­£åœ¨å¤„ç†ä½ çš„è¯·æ±‚ï¼Œè¯·ä¸è¦å…³é—­é¡µé¢ï¼ŒéŸ³ä¹å°†åœ¨å€’è®¡æ•°ç»“æŸå‰æŠµè¾¾ã€‚ã€‚&lt;/strong &gt; &lt;/h1&gt; &lt;p id=&quot;demo&quot;&gt;&lt;/p&gt; &lt;h1 id=&quot;show&quot; name=&quot;n1&quot;&gt;&lt;/h1&gt; &lt;img src=&quot;https://qn.xieqifei.com/tipps.png&quot; alt=&quot;tipps&quot; width=&quot;300&quot; /&gt; &lt;script&gt; var xhr = new XMLHttpRequest(); xhr.onload = function() &#123; window.location.replace(xhr.responseText); &#125;; xhr.onerror = function() &#123; document.getElementById(&quot;demo&quot;).innerHTML = &quot;è¯·æ±‚å‡ºé”™&quot; &#125;; xhr.open(&quot;GET&quot;, &quot;https://service-azkac26i-1258461674.hk.apigw.tencentcs.com/release/APIGWH12290368/&#x27;+musicname+&#x27;&quot;, true); xhr.send(); function countdown() &#123; var n = 20; var interval; if (n &gt; 0) &#123; interval = setInterval(() = &gt;&#123; n--; document.getElementById(&quot;show&quot;).innerHTML = n; if (n &lt;= 0) &#123; clearInterval(interval) &#125; &#125;, 1000) &#125; &#125; countdown(); &lt;/script&gt; &lt;/body&gt;&lt;/html&gt; ç½‘é¡µä¼šæœ‰ä¸€ä¸ªæ–‡å­—æé†’ï¼Œå¹¶æœ‰ä¸€ä¸ª 20 ç§’å€’è®¡æ—¶çš„æ ‡ç­¾ï¼Œé€šå¸¸è§†é¢‘çš„ä¸‹è½½å’Œå¤„ç†éƒ½ä¼šåœ¨åå‡ ç§’å†…å®Œæˆï¼Œå½“è°·æ­Œä¸Šçš„äº‘å‡½æ•°å¤„ç†å®ŒéŸ³é¢‘åï¼Œä¼šç›´æ¥è¿”å›ç»™ç½‘é¡µéŸ³é¢‘åœ°å€ï¼Œè€Œç½‘é¡µé€šè¿‡ js ç›´æ¥è·³è½¬åˆ°éŸ³ä¹çš„å‚¨å­˜é“¾æ¥ï¼Œå¯ä»¥ç›´æ¥æ’­æ”¾ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½ã€‚ 2.4 ä¸­è½¬èŠ‚ç‚¹æ­£å¦‚ 2.2 èŠ‚æ‰€è®²ï¼Œè°·æ­Œäº‘å‡½æ•°çš„ api åœ¨å›½å†…æ˜¯æ— æ³•è®¿é—®çš„ã€‚å½“ 2.3 èŠ‚çš„ç½‘é¡µå‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨æ—¶ï¼Œè°·æ­Œäº‘å‡½æ•° api æ˜¯æœ¬åœ°å‘èµ·çš„è¯·æ±‚ï¼Œå¦‚æœç”¨æˆ·åœ¨å›½å†…ï¼Œé‚£ä¹ˆè¯·æ±‚å°†è¢«é•¿åŸé˜²ç«å¢™æ‹¦æˆªï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚ä¸ºäº†è®©å…¨çƒç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è…¾è®¯é¦™æ¸¯äº‘å‡½æ•°ä¸Šæ­å»ºä¸€ä¸ªä¸­è½¬èŠ‚ç‚¹ã€‚æ­¤èŠ‚ç‚¹ç”¨äºæ¥æ”¶ç½‘é¡µçš„å¼‚æ­¥è¯·æ±‚ï¼Œå¹¶è½¬å‘åˆ°è°·æ­Œäº‘å‡½æ•°ï¼Œæ¿€æ´»éŸ³ä¹ä¸‹è½½æœåŠ¡ï¼Œå¹¶è½¬å‘ç»“æœç»™ç½‘é¡µã€‚ 12345678910111213141516171819202122232425262728# -*- encoding: utf-8 -*-&#x27;&#x27;&#x27;@file_name :scf_node.py@description :è§£å†³å›½å†…ç”¨æˆ·æ— æ³•ç›´æ¥è¯·æ±‚è°·æ­Œapié—®é¢˜@time :2021/02/06 12:16:35@author :Qifei@version :1.0&#x27;&#x27;&#x27;import requestsfrom urllib.parse import quotedef handler(event,context): musicname = event[&#x27;path&#x27;].split(&quot;/&quot;)[-1] resp = requests.get(&quot;https://asia-east2-you*******ch-303517.cloudfunctions.net/music/&quot;+musicname) if(resp.status_code == 200): mscurl = resp.text return &#123; &quot;isBase64Encoded&quot;: False, &quot;statusCode&quot;: 200, &quot;headers&quot;: &#123;&#x27;Content-Type&#x27;: &#x27;text/html; charset=&quot;UTF-8&#x27;,&#x27;Access-Control-Allow-Origin&#x27;:&#x27;*&#x27;&#125;, &quot;body&quot;: mscurl &#125; else: return &#123; &quot;isBase64Encoded&quot;: False, &quot;statusCode&quot;: 500, &quot;headers&quot;: &#123;&#x27;Content-Type&#x27;: &#x27;text/plain&#x27;,&#x27;Access-Control-Allow-Origin&#x27;:&#x27;*&#x27;&#125;, &#125; 3ï¼šç»“è¯­é‡æ–°æ¢³ç†ä¸€éæ•´ä¸ªè¿‡ç¨‹ã€‚ æˆ‘ä»¬åœ¨è°·æ­Œäº‘å‡½æ•°ä¸Šæ­å»ºäº†ä¸€ä¸ª youtube è§†é¢‘ä¸‹è½½å¹¶æå–å…¶éŸ³é¢‘çš„æœåŠ¡ã€‚ ç„¶åæ„å»ºäº†ä¸€ä¸ªç½‘é¡µï¼Œè¿™ä¸ªç½‘é¡µç”¨äºå‘è°·æ­Œäº‘å‡½æ•°å‘èµ·è¯·æ±‚ã€‚è¿™ä¸ªç½‘é¡µç”±ä¸€ä¸ªè…¾è®¯äº‘å‡½æ•°ä¸‹å‘ç»™ç”¨æˆ·ã€‚ å› ä¸ºç½‘é¡µçš„è¯·æ±‚æ˜¯ç”¨æˆ·å‘èµ·çš„ï¼Œé‚£ä¹ˆå›½å†…ç”¨æˆ·æ— æ³•è®¿é—®è°·æ­Œäº‘å‡½æ•°çš„ apiï¼Œæˆ‘ä»¬åˆåœ¨è…¾è®¯äº‘å‡½æ•°é¦™æ¸¯ä¸Šæ­å»ºäº†ä¸€ä¸ªä¸­ä¸“æœåŠ¡å‡½æ•°ï¼Œæ­¤å‡½æ•°ç”¨äºæ¥æ”¶ç½‘é¡µè¯·æ±‚ï¼Œä»£ç½‘é¡µè¯·æ±‚è°·æ­Œå¹¶è¿”å›éŸ³ä¹ä¸‹è½½é“¾æ¥ç»™ç½‘é¡µã€‚ å¦‚æœä½ çš„æœåŠ¡å¯¹è±¡æ˜¯å›½å¤–ç”¨æˆ·ï¼Œé‚£ä¹ˆä¸­ä¸“èŠ‚ç‚¹æ˜¯ä¸éœ€è¦çš„ã€‚","categories":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/categories/Python/"}],"tags":[{"name":"Serverless","slug":"Serverless","permalink":"https://sci.ci/tags/Serverless/"},{"name":"Youtube-dl","slug":"Youtube-dl","permalink":"https://sci.ci/tags/Youtube-dl/"}]},{"title":"åœ¨ifvodä¸Šçˆ¬å–m3u8æ’­æ”¾é“¾æ¥","slug":"yuque/rs5ytp","date":"2021-02-21T10:53:31.000Z","updated":"2023-12-02T00:06:39.254Z","comments":true,"path":"2021/02/21/yuque/rs5ytp/","link":"","permalink":"https://sci.ci/2021/02/21/yuque/rs5ytp/","excerpt":"","text":"0ï¼šç»ªåœ¨ä¸Šä¸ªæœˆï¼Œæˆ‘é€šè¿‡çˆ¬å– youtube è§†é¢‘ï¼Œæå– mp3ï¼Œåˆ¶ä½œäº†ä¸€ä¸ªåŸºäºäº‘å‡½æ•°çš„æœç´¢éŸ³ä¹ç½‘ç«™ã€‚åæ¥ï¼Œæˆ‘æŠ±ç€è§£å†³ ifvod å¹¿å‘Šçš„æƒ³æ³•ï¼Œé˜…è¯»äº† ifvod çš„ç½‘ç«™æºç ï¼Œå¹¶ä¸”é€šè¿‡ä¿®æ”¹ js ä»£ç ï¼ŒæˆåŠŸåˆ é™¤äº† ifvod çš„å¹¿å‘Šã€‚å—ä¸Šè¿°ä¸¤ä¸ªè¿‡ç¨‹çš„å¯å‘ï¼Œæˆ‘æƒ³ï¼Œé€šè¿‡æå– ifvod ä¸Šçš„è§†é¢‘ m3u8 é“¾æ¥æ¥åˆ¶ä½œä¸€ä¸ªåŸºäºäº‘å‡½æ•°çš„è§†é¢‘æœç´¢ç½‘ç«™ã€‚ 1ï¼šä»€ä¹ˆæ˜¯ m3u8m3u8 æ–‡ä»¶æ˜¯ä¸€ç§æ–‡æœ¬æ–‡ä»¶ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼š 1234567#EXTM3U#EXT-X-VERSION:3#EXT-X-TARGETDURATION:18#EXTINF:10.677,media_0.ts?dnvodendtime&#x3D;1613939123&amp;dnvodhash&#x3D;LMkLRmsUktNRN4h-OrHuElRGhV71N32vV4nueFAQJXw%3D&amp;dnvodCustomParameter&#x3D;0_2003%3Ae3%3Af2f%3A5700%3A8417%3Aeeca%3A9a8e%3A1d35_1&amp;lb&#x3D;3c19337f6084516e1517490ee377c4b9&amp;us&#x3D;1&amp;vv&#x3D;4e5dcf3b2432cd03dd525e0489d72248&amp;pub&#x3D;1613766323672#EXTINF:14.515,media_1.ts?dnvodendtime&#x3D;1613939123&amp;dnvodhash&#x3D;LMkLRmsUktNRN4h-OrHuElRGhV71N32vV4nueFAQJXw%3D&amp;dnvodCustomParameter&#x3D;0_2003%3Ae3%3Af2f%3A5700%3A8417%3Aeeca%3A9a8e%3A1d35_1&amp;lb&#x3D;3c19337f6084516e1517490ee377c4b9&amp;us&#x3D;1&amp;vv&#x3D;4e5dcf3b2432cd03dd525e0489d72248&amp;pub&#x3D;1613766323672 åœ¨è¿™ä¸ªæ–‡æœ¬ä¸­ï¼Œè®°å½•äº†è§†é¢‘çš„æºåœ°å€ã€‚ã€‚æˆ‘ä»¬å¸¸è§çš„è§†é¢‘æ ¼å¼æ¯”å¦‚ mp4ï¼Œmp4 æ–‡ä»¶ç›´æ¥å‚¨å­˜äº†è§†é¢‘çš„å…¨éƒ¨ä¿¡æ¯ã€‚å¯ç›´æ¥ä½¿ç”¨æ’­æ”¾å™¨æ’­æ”¾ã€‚è€Œ m3u åˆç§°æµåª’ä½“ï¼Œè¿™ç§æ–¹æ³•ï¼Œæ˜¯å°†åŸæ¥å®Œæ•´çš„è§†é¢‘ï¼Œåˆ‡å‰²æˆå‡ ç§’åˆ°åå‡ ç§’ä¸ç­‰çš„ï¼Œts æ ¼å¼çš„è§†é¢‘ç‰‡æ®µï¼Œå°†æ¯ä¸ªç‰‡æ®µä½œä¸ºä¸€ä¸ªè§†é¢‘å†…å®¹å‚¨å­˜åœ¨æœåŠ¡å™¨ï¼Œè€Œ m3u8 æ–‡ä»¶å‚¨å­˜çš„å°±æ˜¯æ¯ä¸ªç‰‡æ®µçš„ url åœ°å€ã€‚html5 æ’­æ”¾å™¨é€šè¿‡æ£€ç´¢ m3u8 æ–‡ä»¶çš„å†…å®¹ï¼Œé€ä¸ªä¸‹è½½è§†é¢‘ç‰‡æ®µï¼Œå¹¶æ’­æ”¾ã€‚å¦‚ä»Šæœ‰è®¸å¤šè½¯ä»¶æ”¯æŒï¼Œæ ¹æ® m3u8 æ–‡ä»¶ä¸‹è½½æˆ–æ’­æ”¾è§†é¢‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æœ‰äº† m3u8 æ–‡ä»¶çš„ urlï¼Œå°±å¯ä»¥åœ¨ç½‘ç«™å¤–ä¸‹è½½å’Œæ’­æ”¾è§†é¢‘äº†ã€‚ 2ï¼šæ„é€  json è¯·æ±‚é“¾æ¥é€šè¿‡åˆ†æ ifvod ç½‘ç«™è¿”å›çš„æ•°æ®ï¼Œå¯ä»¥å‘ç°ã€‚åœ¨ä¸€ä¸ªè¯·æ±‚è¿”å›çš„ json æ•°æ®ä¸­ï¼ŒåŒ…å«äº†æˆ‘ä»¬æƒ³è¦çš„è§†é¢‘åœ°å€ï¼Œè¯·æ±‚æ˜¯ https://m8.ifvod.tv/api/video/play?cinema=1&amp;id=xcql1mznpF0&amp;region=DE&amp;device=1&amp;ispath=true&amp;usersign=1&amp;vv=ad4bee064a3af6c8a41cda35111966fd&amp;pub=1613905710379 åˆ†æè¿™ä¸ªè¯·æ±‚ urlï¼Œå¯ä»¥å‘ç°ï¼Œå…¶ä¸­ id æ˜¯è§†é¢‘çš„ idï¼Œç›´æ¥å‡ºç°åœ¨è§†é¢‘æ’­æ”¾çš„åœ°å€æ ä¸­ï¼Œvv å’Œ pub æ˜¯ç­¾åå’Œå…¬é’¥ï¼Œæœ‰äº†è¿™ä¸‰ä¸ªæ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è§†é¢‘çš„ id æ¥è·å–è§†é¢‘çš„ m3u8 åœ°å€äº†ã€‚å°è¯•è¯·æ±‚è¿™ä¸ªå¯ä»¥çœ‹åˆ°è¿”å›çš„æ•°æ®æ˜¯ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158&#123; &quot;ret&quot;: 200, &quot;data&quot;: &#123; &quot;code&quot;: 0, &quot;msg&quot;: &quot;&quot;, &quot;info&quot;: [ &#123; &quot;id&quot;: 625223, &quot;vl&quot;: null, &quot;add_date&quot;: null, &quot;post_Year&quot;: null, &quot;channel&quot;: null, &quot;videoType&quot;: null, &quot;contxt&quot;: null, &quot;updateweekly&quot;: null, &quot;commentNumber&quot;: 0, &quot;isVideoFavrited&quot;: false, &quot;taxis&quot;: 0, &quot;flvPathList&quot;: [ &#123; &quot;isHls&quot;: false, &quot;result&quot;: &quot;https://s1-a1.dnvodcdn.me/fast/423B3C813853-70244.mp4&quot;, &quot;validator&quot;: null, &quot;type&quot;: 0, &quot;link&quot;: &quot;http://ppt.ifvod.tv/c/c?position%3dPI%26d%3d1169%26r%3d7&quot;, &quot;broker&quot;: null, &quot;backup&quot;: null, &quot;rtmp&quot;: null, &quot;needSign&quot;: false &#125;, &#123; &quot;isHls&quot;: false, &quot;result&quot;: &quot;https://s1-a1.dnvodcdn.me/fast/A0B67356-87371.mp4&quot;, &quot;validator&quot;: null, &quot;type&quot;: 0, &quot;link&quot;: &quot;http://ppt.ifvod.tv/c/c?position%3dPI%26d%3d1230%26r%3d7&quot;, &quot;broker&quot;: null, &quot;backup&quot;: null, &quot;rtmp&quot;: null, &quot;needSign&quot;: false &#125;, &#123; &quot;isHls&quot;: false, &quot;result&quot;: &quot;https://s1-a1.dnvodcdn.me/fast/F709860823-88837.mp4&quot;, &quot;validator&quot;: null, &quot;type&quot;: 0, &quot;link&quot;: &quot;http://ppt.ifvod.tv/c/c?position%3dPI%26i%3d575%26r%3d7&quot;, &quot;broker&quot;: null, &quot;backup&quot;: null, &quot;rtmp&quot;: null, &quot;needSign&quot;: false &#125;, &#123; &quot;isHls&quot;: true, &quot;result&quot;: &quot;https://hss8.dnvodcdn.me/ppot/_definst_/mp4:s8/gvod/xj-fllyssx-480p-03656717C.mp4/chunklist.m3u8?dnvodendtime=1614078950&amp;dnvodhash=c7O8AgFsLq6N1O8ysAfNyp6SlvOLrVniVvvW2PEz8zU=&amp;dnvodCustomParameter=0_2003%3ae3%3af2f%3a5700%3a8417%3aeeca%3a9a8e%3a1d35_1&amp;lb=1f4a12a7923561331e23eee32ad4be8a&amp;us=1&quot;, &quot;validator&quot;: null, &quot;type&quot;: 0, &quot;link&quot;: null, &quot;broker&quot;: null, &quot;backup&quot;: &quot;&quot;, &quot;rtmp&quot;: &quot;https://hss8.dnvodcdn.me/ppot/_definst_/mp4:s8/gvod/xj-fllyssx-480p-03656717C.mp4/chunklist.m3u8?dnvodendtime=1614078950&amp;dnvodhash=c7O8AgFsLq6N1O8ysAfNyp6SlvOLrVniVvvW2PEz8zU=&amp;dnvodCustomParameter=0_2003%3ae3%3af2f%3a5700%3a8417%3aeeca%3a9a8e%3a1d35_1&amp;lb=1f4a12a7923561331e23eee32ad4be8a&amp;us=1&quot;, &quot;needSign&quot;: false &#125; ], &quot;title&quot;: &quot;480P&quot;, &quot;imgPath&quot;: null, &quot;unlockGold&quot;: 0, &quot;playRecordURL&quot;: &quot;//counter.timegate.vip/api/Counter/PlusOne?key=AddHitToMovie&amp;id=27212&quot;, &quot;favrateNumber&quot;: 0, &quot;filterGold&quot;: 0, &quot;key&quot;: &quot;puamPfe8zf7&quot;, &quot;cid&quot;: null, &quot;commentStatus&quot;: 0, &quot;shareCount&quot;: 0, &quot;pinfenRate&quot;: 0.0, &quot;renqiRate&quot;: 0.0, &quot;customData&quot;: null, &quot;isGuestHasMore&quot;: false, &quot;link&quot;: null, &quot;isVIPHasMore&quot;: false, &quot;pauseData&quot;: [ &#123; &quot;isHls&quot;: false, &quot;result&quot;: &quot;https://ppt.ifvod.tv/upload/video/202010020923422328455s.jpg&quot;, &quot;validator&quot;: null, &quot;type&quot;: 1, &quot;link&quot;: &quot;http://ppt.ifvod.tv/c/c?position%3dPZ%26d%3d1174%26r%3d7&quot;, &quot;broker&quot;: null, &quot;backup&quot;: null, &quot;rtmp&quot;: null, &quot;needSign&quot;: false &#125;, &#123; &quot;isHls&quot;: false, &quot;result&quot;: &quot;https://ppt.ifvod.tv/upload/video/202012140947004731731s.jpg&quot;, &quot;validator&quot;: null, &quot;type&quot;: 1, &quot;link&quot;: &quot;http://ppt.ifvod.tv/c/c?position%3dPZ%26d%3d1173%26r%3d7&quot;, &quot;broker&quot;: null, &quot;backup&quot;: null, &quot;rtmp&quot;: null, &quot;needSign&quot;: false &#125;, &#123; &quot;isHls&quot;: false, &quot;result&quot;: &quot;https://ppt.ifvod.tv/upload/video/202011032259305913218s.jpg&quot;, &quot;validator&quot;: null, &quot;type&quot;: 1, &quot;link&quot;: &quot;http://ppt.ifvod.tv/c/c?position%3dPZ%26d%3d2145%26r%3d7&quot;, &quot;broker&quot;: null, &quot;backup&quot;: null, &quot;rtmp&quot;: null, &quot;needSign&quot;: false &#125;, &#123; &quot;isHls&quot;: false, &quot;result&quot;: &quot;https://ppt.ifvod.tv/upload/video/202102191325542507558s.jpg&quot;, &quot;validator&quot;: null, &quot;type&quot;: 1, &quot;link&quot;: &quot;http://ppt.ifvod.tv/c/c?position%3dPZ%26d%3d2373%26r%3d7&quot;, &quot;broker&quot;: null, &quot;backup&quot;: null, &quot;rtmp&quot;: null, &quot;needSign&quot;: false &#125;, &#123; &quot;isHls&quot;: false, &quot;result&quot;: &quot;https://ppt.ifvod.tv/upload/video/202102120906530682725s.jpg&quot;, &quot;validator&quot;: null, &quot;type&quot;: 1, &quot;link&quot;: &quot;http://ppt.ifvod.tv/c/c?position%3dPZ%26d%3d1179%26r%3d7&quot;, &quot;broker&quot;: null, &quot;backup&quot;: null, &quot;rtmp&quot;: null, &quot;needSign&quot;: false &#125; ], &quot;startData&quot;: [], &quot;guestSeriesList&quot;: null, &quot;vipSeriesList&quot;: null, &quot;commentList&quot;: null, &quot;languageList&quot;: null, &quot;downloadList&quot;: null, &quot;videoServer&quot;: &#123; &quot;status&quot;: 0, &quot;info&quot;: &quot;&quot;, &quot;isMp4Available&quot;: false &#125;, &quot;copyRightInfo&quot;: null, &quot;publisher&quot;: null, &quot;previewFormat&quot;: &quot;&quot;, &quot;uniqueKey&quot;: &quot;27212_625221&quot;, &quot;starImg&quot;: null, &quot;starID&quot;: 0, &quot;starBgColor&quot;: null, &quot;age&quot;: null &#125; ] &#125;, &quot;msg&quot;: &quot;&quot;, &quot;isSpecialArea&quot;: 0&#125; å…¶ä¸­ flvPathList é”®æ”¾çš„å­˜æ”¾ç€å¹¿å‘Šå’Œè§†é¢‘çš„åœ°å€ã€‚ç°åœ¨åˆ†æï¼Œvv å’Œ pub å‚æ•°ã€‚é€šå¸¸ï¼Œä¸ºäº†ä¿è¯è¯·æ±‚é“¾æ¥ä¸è¢«ç¯¡æ”¹ï¼Œå¹¶ä¸”ï¼Œè¯·æ±‚è¿æ¥ä¸èƒ½é•¿æœŸæœ‰æ•ˆï¼Œéƒ½ä¼šç»™è¯·æ±‚è¿æ¥æ·»åŠ ä¸€ä¸ªç­¾åï¼Œä»¥ä¿è¯å®ƒéšæ—¶å˜åŒ–ä¸”ä¸è¢«ç¯¡æ”¹ã€‚pub æ˜¯ publickey çš„ç®€å†™ï¼Œä¹Ÿå°±æ˜¯å…¬é’¥ï¼Œç›¸å¯¹åº”çš„ï¼Œä»–è¿˜æœ‰ç§é’¥ privatekeyã€‚è¿™ä¸¤ä¸ªå€¼ï¼Œé€šå¸¸éƒ½æ˜¯ç”±æœåŠ¡å™¨æŒ‡å®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬éƒ½æ˜¯å¯å˜çš„ã€‚ã€‚åˆ†æ js æºç ï¼Œå¯ä»¥å‘ç°ï¼Œpubkey æ˜¯ç”± js ç”Ÿæˆçš„å½“å‰æ¯«ç§’æ—¶é—´æˆ³ã€‚ã€‚ç§é’¥æ˜¯é€šè¿‡ pubkey ç»è¿‡ä¸€æ®µè¿ç®—ï¼Œåœ¨ 7 ä¸ªç§é’¥åˆ—è¡¨ä¸­é€‰æ‹©çš„ä¸€ä¸ªã€‚è¿™ç§ç®—æ³•æ˜¯å¯ç¬‘çš„ï¼Œå› ä¸ºé€šå¸¸å…¬é’¥åº”è¯¥é€šè¿‡ç§é’¥æ¥ç”Ÿæˆã€‚ç§é’¥æ›´ä¸å¯èƒ½å‚¨å­˜åœ¨æœ¬åœ°ã€‚ç„¶åæ˜¯ vv å‚æ•°ï¼Œvv å‚æ•°æ˜¯ä¸Šè¿°è¯·æ±‚çš„ url å‚æ•°åŠ ä¸Šå…¬é’¥å’Œç§é’¥ï¼Œå†é€šè¿‡ md5 ç¼–ç ï¼Œè¿”å›çš„ 32 ä½å­—ç¬¦ä¸²ã€‚æˆ‘ä½¿ç”¨ python ä¹¦å†™äº†ä¸€ä¸ªé€šè¿‡åŸå§‹ urlï¼Œæ¥è·å–ç­¾åå’Œæ·»åŠ å…¬é’¥åçš„ url çš„ç±»ã€‚ 12345678910111213141516171819202122232425262728293031import timefrom urllib import parseimport hashlibimport requestsclass Signurl: def __init__(self, url: str, publicKey: int): self.publicKey = publicKey self.privateKey = [&quot;version001&quot;, &quot;vers1on001&quot;, &quot;vers1on00i&quot;, &quot;bersion001&quot;, &quot;vcrsion001&quot;, &quot;versi0n001&quot;, &quot;versio_001&quot;, &quot;version0o1&quot;] self.oldUrl = url self.newUrl = self._getSignUrl() def _getSignUrl(self): paramsStr = self._getParamsStr() r = str(self.publicKey) + &quot;&amp;&quot; + paramsStr + &quot;&amp;&quot; + self._getPrivateKey() hl = hashlib.md5() hl.update(r.encode()) newUrl = self.oldUrl+&quot;&amp;vv=&quot;+hl.hexdigest()+&quot;&amp;pub=&quot;+str(self.publicKey) return newUrl def _getParamsStr(self) -&gt; str: paramsStr = &quot;&quot; params = parse.parse_qs(parse.urlparse(self.oldUrl).query) for key in params: paramsStr += key + &quot;=&quot; + params[key][0] paramsStr += &quot;&amp;&quot; return paramsStr[0:-1].lower() def _getPrivateKey(self): return self.privateKey[self.publicKey % len(self.privateKey)] å…¶ä¸­ publickey å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç ç”Ÿæˆï¼ŒpublicKey = int(time.time()*1000) 3ï¼šæå– m3u8 é“¾æ¥åœ¨è·å–äº†ï¼Œjson æ•°æ®åï¼Œæå–å‡º m3u8 çš„é“¾æ¥ï¼š https://hss8.dnvodcdn.me/ppot/definst/mp4:s8/gvod/xj-fllyssx-480p-03656717C.mp4/chunklist.m3u8?dnvodendtime=1614078521&amp;dnvodhash=0KnVagh-3RIHR_0fE_qVTS3X_t1ogc9iRTbuUYK5GYI=&amp;dnvodCustomParameter=0_2003%3ae3%3af2f%3a5700%3a8417%3aeeca%3a9a8e%3a1d35_1&amp;lb=1f4a12a7923561331e23eee32ad4be8a&amp;us=1 ç›´æ¥è¯·æ±‚è¿™ä¸ªé“¾æ¥æ˜¯ï¼Œæ— æ³•è·å–åˆ° m3u8 æ–‡ä»¶çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡å®ƒé‡æ–°æ„é€ è¯·æ±‚ï¼ŒåŒæ ·æ˜¯ä½¿ç”¨ 2 ç« èŠ‚æ‰€ç”¨çš„ Signurl ç±»ï¼Œå¯¹æ­¤ url ç­¾åã€‚ä¼šå¢åŠ  vv å’Œ pub å‚æ•°åœ¨ä¸Šè¿° url æœ«å°¾ã€‚ 12345678910111213141516171819202122232425class Video: def __init__(self, id: str) -&gt; None: self.publicKey = int(time.time()*1000) self.id = id self.dataUrl = &quot;https://m8.ifvod.tv/api/video/play?cinema=1&amp;id=&quot; + \\ id+&quot;&amp;region=DE&amp;device=1&amp;usersign=1&quot; self.playUrl = self._getM3u8Url() def _getM3u8Url(self) -&gt; str: m3u8url = self._getData() if m3u8url: return Signurl(m3u8url, self.publicKey).newUrl else: return &quot;&quot; def _getData(self): reqUrl = Signurl(self.dataUrl, self.publicKey).newUrl rep = requests.get(reqUrl) if rep.status_code == 200: return rep.json()[&#x27;data&#x27;][&#x27;info&#x27;][0][&#x27;flvPathList&#x27;][-1][&#x27;result&#x27;] else: return &quot;&quot;print(Video(&quot;WdS12xLwXh6&quot;).playUrl) å°†ä¸Šè¿°ä¸¤ç«¯ä»£ç æ”¾åˆ°åŒä¸€ä¸ª py æ–‡ä»¶ä¸­æ‰§è¡Œï¼Œå°±å¯ä»¥è·å– m3u8 çš„æ’­æ”¾é“¾æ¥äº†ã€‚ 4ï¼šç»“è¯­æˆ‘å°è¯•å°†æ­¤é“¾æ¥é€šè¿‡åœ¨çº¿ m3u8 æ’­æ”¾å™¨è¿›è¡Œæ’­æ”¾ï¼Œé‡åˆ°çš„é—®é¢˜æ˜¯ï¼Œå¦‚æœè¿™ä¸ªè§†é¢‘æ’­æ”¾äº†ä¸€æ®µæ—¶é—´ï¼Œé‚£ä¹ˆåœ¨ç½‘é¡µæ’­æ”¾å™¨ä¸­ï¼Œé€šè¿‡ m3u8 åªèƒ½æ’­æ”¾åˆ° ifvod ç½‘é¡µä¸Šçš„ä½ç½®ã€‚é€šè¿‡åˆ†æï¼Œæˆ‘æ¨æµ‹ï¼Œifvod å¯¹ m3u8 é“¾æ¥çš„è¯·æ±‚åšäº†é˜²ç›—é“¾è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å…¶ä»–ç½‘ç«™ä¸Šæ’­æ”¾è¿™ä¸ª m3u8 è§†é¢‘ï¼Œæ˜¯æ— æ³•æ’­æ”¾çš„ï¼Œä¹‹æ‰€ä»¥å‡ºç°éƒ¨åˆ†ç‰‡æ®µèƒ½å¤Ÿæ’­æ”¾ï¼Œæ˜¯å› ä¸º ifvod æ’­æ”¾è¿‡çš„ç‰‡æ®µä¼šç»è¿‡ cdnï¼Œåœ¨ cdn ä¸Šæ˜¯æ²¡æœ‰é˜²ç›—é“¾çš„ã€‚ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæƒ³é€šè¿‡åœ¨çº¿ m3u8 æ’­æ”¾å™¨å’Œé€šè¿‡ serverless æœåŠ¡æ­å»ºä¸€ä¸ªæ’­æ”¾å™¨çš„æƒ³æ³•æ˜¯ä¸èƒ½å®ç°çš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘èŠ±äº†è®¸å¤šæ—¶é—´æ¥å°è¯•å’Œæœç´¢ç ´è§£æ–¹æ³•ã€‚å…¶ä¸­ï¼Œiframe ä¸­æ·»åŠ  referrerpolicyï¼Œç½‘é¡µä¸­æ·»åŠ  meta æ ‡ç­¾å¹¶ä¿®æ”¹ä½ no-referrer å‡æ— æ³•ä½¿è§†é¢‘æ’­æ”¾ã€‚å”¯ä¸€çš„åŠæ³•æ˜¯ä½¿ç”¨åå‘ä»£ç†ï¼Œæˆ‘åœ¨æˆ‘ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡ nginx åå‘ä»£ç†ï¼Œå®ç°äº†è¿™ä¸€è¿‡ç¨‹ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä»£ä»·å¤ªå¤§äº†ï¼Œé¦–å…ˆï¼Œserverless æ˜¯æœ‰å…è´¹é¢åº¦çš„ã€‚è€ŒæœåŠ¡å™¨éœ€è¦è‡ªå·±æè…°åŒ…ã€‚é€šè¿‡ä»£ç†ï¼Œæµé‡ä¼šç»è¿‡æœåŠ¡å™¨æ”¶è´¹ã€‚ç›¸å½“ä¸åˆ’ç®—ã€‚æ²¡æœ‰å®ç°çš„ä»·å€¼ã€‚å¦‚æœä¸é€šè¿‡è‡ªå·±çš„ç½‘ç«™ï¼Œæ¯”å¦‚ä½¿ç”¨ chrome æµè§ˆå™¨æ’ä»¶ï¼ŒPlay HLS M3u8ï¼Œå¯ä»¥ç›´æ¥åœ¨æœ¬åœ°æ’­æ”¾ m3u è§†é¢‘ï¼ŒåŸºäºæ­¤ï¼Œå¯ä»¥è‡ªå·±åšä¸€ä¸ªæ’ä»¶ï¼Œé€šè¿‡æœç´¢ï¼Œåœ¨æœ¬åœ°æ’­æ”¾ï¼Œå› ä¸ºæµè§ˆå™¨æ’ä»¶æ˜¯å¯ä»¥ä¿®æ”¹ referer çš„ã€‚","categories":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/categories/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/tags/%E7%88%AC%E8%99%AB/"},{"name":"m3u8","slug":"m3u8","permalink":"https://sci.ci/tags/m3u8/"}]},{"title":"è¯­é›€+æœ¬åœ°hexoåšå®¢ä¹¦å†™","slug":"yuque/fo0ngh","date":"2021-02-20T22:01:07.000Z","updated":"2023-12-02T00:06:39.326Z","comments":true,"path":"2021/02/21/yuque/fo0ngh/","link":"","permalink":"https://sci.ci/2021/02/21/yuque/fo0ngh/","excerpt":"","text":"æˆ‘ä¸€ç›´åœ¨å¯»æ‰¾ä¸€ç§æ›¿ä»£ Typoraï¼Œèƒ½å¤Ÿå®ç°åœ¨çº¿ä¹¦å†™ä¸ªäººåšå®¢çš„æ–¹æ³•ã€‚ä¸€æ¬¡å¶ç„¶çš„é˜…è¯»ï¼Œæˆ‘äº†è§£äº†è¯­é›€ã€‚åœ¨ç½‘ä¸Šæ£€ç´¢åå‘ç°ï¼Œå·²ç»æœ‰ä¸å°‘æ•™ç¨‹è®²è§£å¦‚ä½•é€šè¿‡è¯­é›€çš„é’©å­+Github Action+äº‘å‡½æ•°çš„æ–¹æ³•ï¼Œåœ¨çº¿åŒæ­¥è¯­é›€æ–‡ç« åˆ° github åšå®¢ã€‚åœ¨è¿™ç‰‡æ–‡ç« é‡Œï¼Œæˆ‘æ€»ç»“äº†ï¼Œä»Šå¤©æ­å»ºè¯­é›€è¿‡ç¨‹ä¸­é‡åˆ°çš„å‘ï¼Œå’Œè§£å†³è¿‡ç¨‹ã€‚çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œä½ åº”è¯¥å·²ç»åœ¨æ­å»ºè¯­é›€åšå®¢åŒæ­¥è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸å°‘é˜»ç¢å§ã€‚æˆ‘æœ¬äººæŒ‰ç…§ã€ŠHexo+GitHub+Action+è…¾è®¯äº‘å‡½æ•°+è¯­é›€æ­å»ºè‡ªåŠ¨åŒ–ä¸ªäººåšå®¢ã€‹æ–‡ç« çš„æ•™ç¨‹è¿›è¡Œæ­å»ºï¼Œæ‰€ä»¥ç»†èŠ‚ä¸å†èµ˜è¿°ã€‚é‡åˆ°çš„å‘ï¼Œå°†åœ¨ä¸‹é¢è¯´è¯´ã€‚ 1ï¼šHexo æœ¬åœ°åšå®¢æˆ‘å¾ˆæ—©å°±å¼€å§‹åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šä½¿ç”¨ Typora+markdown å†™åšå®¢äº†ã€‚æ—©å·²ä¹ æƒ¯äº† Typora çš„é£æ ¼å’Œå¿«æ·é”®ã€‚é€šè¿‡ win+shift+s æˆªå±ï¼Œç„¶åç›´æ¥ç²˜è´´åˆ° markdown ä¸­ï¼ŒTypora é€šè¿‡è®¾ç½®è¿æ¥å›¾ä¼ ï¼Œè‡ªåŠ¨ä¸Šä¼ ï¼Œå¯¹äºå›¾ç‰‡çš„ç²˜è´´éå¸¸å‹å¥½ã€‚ã€‚ç›®å‰è¿˜ä¸çŸ¥é“è¯­é›€æ˜¯å¦èƒ½å¤Ÿåšåˆ°ã€‚å°† Hexo åšå®¢å®‰è£…åˆ°æœ¬åœ°ï¼Œæ˜¯ä¸ºäº†è·å–åšå®¢æ–‡ä»¶ç›®å½•ï¼Œä¿®æ”¹ä¸»é¢˜ï¼Œå®‰è£…æ’ä»¶ç­‰ç­‰ã€‚åŒæ—¶ä¹Ÿèƒ½å¤Ÿæœ¬åœ°å†™ä½œã€‚å®‰è£… yuque-hexo æ’ä»¶åï¼Œéœ€è¦åœ¨ package.json ä¸­æ·»åŠ æ’ä»¶é…ç½®ã€‚åŸæ–‡æ¨èå¦‚ä¸‹ï¼š 123456789&quot;yuqueConfig&quot;: &#123; &quot;baseUrl&quot;: &quot;https://www.yuque.com/api/v2&quot;, &quot;login&quot;: &quot;è¯­é›€çš„id&quot;, &quot;repo&quot;: &quot;è¯­é›€çŸ¥è¯†åº“åç§°&quot;, &quot;mdNameFormat&quot;: &quot;title&quot;, &quot;postPath&quot;: &quot;source/_posts&quot;, &quot;onlyPublished&quot;: false, &#125; ä½†æ˜¯è¿™ä¸ªé…ç½®ï¼Œä¼šå°†æˆ‘ä»¬æœ¬åœ°ç¼–å†™çš„åšå®¢è¦†ç›–æ‰ï¼Œå¦‚æœä½ è¿‡å»åœ¨ hexo æœ¬åœ°ç¼–å†™è¿‡ï¼Œé‚£ä½ åº”è¯¥çŸ¥é“ï¼Œæœ¬åœ°åšæ–‡åŒæ ·å‚¨å­˜åœ¨source/_postsã€‚ä¸ºäº†é¿å…è¯­é›€åŒæ­¥åï¼Œè¦†ç›–åŸæœ¬åœ°æ–‡ç« ï¼Œéœ€è¦å°†ä¸Šè¿°é…ç½®ä¸­çš„**â€postPathâ€: â€œsource/_postsâ€ï¼Œä¿®æ”¹ä¸ºâ€œpostPathâ€: â€œsource/_posts/yuqueâ€ã€‚** 2ï¼šHexo åŒæ­¥ Github ä»“åº“å°†æ•´ä¸ªåšå®¢ç›®å½•åŒæ­¥åˆ° Github ä»“åº“ï¼Œè¿™æ ·åšå®¢çš„è®¸å¤šé‡è¦é…ç½®æ–‡ä»¶ï¼Œä¸»é¢˜è®¾ç½®ï¼Œæ–‡ç«  mdï¼Œé¡µé¢è®¾ç½®éƒ½å°†å¾—åˆ°ä¿å­˜ï¼ŒåŒæ—¶å¯ä»¥è°ƒç”¨è¿™ä¸ªä»“åº“çš„ actions åŠŸèƒ½ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œå°†åšå®¢é¡µé¢åŒæ­¥åˆ° github pagesã€‚ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒGithub å…è´¹ä»“åº“æ˜¯å…¬å¼€çš„ï¼Œä½ ä¿å­˜åœ¨ä»“åº“çš„ token å°†ä¼šè¢«åˆ«äººçŸ¥é“ï¼Œè¿™ä¼šç»™åšå®¢ä¸€äº›ä¾èµ– token åŠŸèƒ½ï¼Œæ¯”å¦‚è¯„è®ºã€ç™¾åº¦ seo å¸¦æ¥å¨èƒï¼Œå½“ç„¶æˆ‘ä»¬å¸Œæœ›äººä»¬æ€»æ˜¯å–„è‰¯çš„ã€‚å…³äºåŒæ­¥ï¼Œåœ¨é…ç½®**.gitignoreæ–‡ä»¶æ—¶ï¼Œå»ºè®®æ·»åŠ publicå’Œnode_modulesè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œpublic æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼Œnode_module æ˜¯ hexo ä¾èµ–ï¼Œä¹Ÿå¯ä»¥åŠ¨æ€ç”Ÿæˆï¼Œactions éƒ½èƒ½å¤Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–åŒæ­¥ä¸Šå»ã€‚themes æ–‡ä»¶å¤¹ä¸‹ï¼Œæ˜¯åšå®¢çš„ä¸»é¢˜ï¼Œä¸»é¢˜é€šå¸¸æ˜¯ä»ä¸€ä¸ª github ä»“åº“å…‹éš†è¿‡æ¥çš„ï¼Œåœ¨åŒæ­¥ hexo åšå®¢æ—¶ï¼Œå¦‚æœä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨.git æ–‡ä»¶å¤¹ï¼Œåˆ™è¿™ä¸ªæ–‡ä»¶å¤¹å°†è¢«è®¤ä¸ºæ˜¯åšå®¢ä»“åº“çš„å­ä»“åº“ï¼Œå› æ­¤ä¸ä¼šè¢«ä¸Šä¼ ã€‚åœ¨ github ä»“åº“ä¸­æ˜¾ç¤ºä¸ºä¸€ä¸ªå¸¦å³ç®­å¤´çš„æ–‡ä»¶å¤¹**ã€‚å¦‚æœè¦å°†ä¸»é¢˜ä¸Šä¼ åˆ° githubï¼Œéœ€è¦åˆ é™¤ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„.git æ–‡ä»¶å¤¹ã€‚æ­¤å¤–è¿è¡Œ git æŒ‡ä»¤ 1git rm -r --cache . æ­¤å‘½ä»¤æ¸…é™¤ git ç¼“å­˜åœ¨ push çš„æ—¶å€™ä½¿ç”¨å¼ºåˆ¶ push 1git push -f 3ï¼šActioné€šè¿‡ Actionï¼Œgithub å¯ä»¥å¾ªè¡Œ hexo æŒ‡ä»¤ï¼Œæ¯”å¦‚å°†è¯­é›€æ–‡ç« åŒæ­¥åˆ° source/_post/yuqueï¼Œç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œä¸Šä¼  github pages ç­‰ç­‰ã€‚ç›®å‰è¿™ä¸ª action ç¨‹åºï¼Œè¿˜æ²¡æœ‰å®ç°å°†è¯­é›€æ–‡ç« åŒæ­¥åˆ° github å‚¨å­˜åº“çš„èƒ½åŠ›ï¼Œåªèƒ½æœ¬åœ°åŒæ­¥ï¼Œå†æœ¬åœ°åŒæ­¥åˆ° githubã€‚å¸Œæœ›åäººèƒ½å¤Ÿè¡¥å…¨åŠŸèƒ½ã€‚ 4ï¼šäº‘å‡½æ•°æ— è®ºæ˜¯è…¾è®¯äº‘ã€é˜¿é‡Œäº‘è¿˜æ˜¯è°·æ­Œäºšé©¬é€Šï¼Œéƒ½æœ‰äº‘å‡½æ•°è¿™ä¸ªåŠŸèƒ½ï¼Œä½¿ç”¨ä¸Šé¢ä¹Ÿæ˜¯å¤§åŒå°å¼‚ã€‚äº‘å‡½æ•°çš„åŠŸèƒ½ï¼Œåœ¨è¿™é‡Œä¸»è¦æ˜¯ä¸ºäº†æ¥æ”¶è¯­é›€çš„å›è°ƒï¼Œæ¢å¥è¯è¯´ï¼Œæ¯å½“æˆ‘ä»¬æ›´æ–°åˆ é™¤æ–°å»ºçŸ¥è¯†åº“æ–‡ç« æ—¶ï¼Œè¯­é›€å°±ä¼šå‘ä¸€ä¸ªæŒ‡å®šçš„ url å‘èµ·è¯·æ±‚ï¼Œäº‘å‡½æ•°å°±ç”¨æ¥æ¥æ”¶è¿™ä¸ªè¯·æ±‚ã€‚äº‘å‡½æ•°æ¥æ”¶åˆ°è¯·æ±‚åï¼Œè°ƒç”¨ github çš„ apiï¼Œè¿è¡Œ actionï¼Œaction å†æ‰§è¡Œ hexo æŒ‡ä»¤éƒ¨ç½²åšå®¢ã€‚äº‘å‡½æ•°å†…å®¹ï¼š 12345678910111213141516# -*- coding: utf8 -*-import requestsdef main_handler(event, context): r = requests.post(&quot;https://api.github.com/repos/ä½ çš„githubç”¨æˆ·å/æºç ä»“åº“å/dispatches&quot;, json = &#123;&quot;event_type&quot;: &quot;start&quot;&#125;, headers = &#123;&quot;User-Agent&quot;:&#x27;curl/7.52.1&#x27;, &#x27;Content-Type&#x27;: &#x27;application/json&#x27;, &#x27;Accept&#x27;: &#x27;application/vnd.github.everest-preview+json&#x27;, &#x27;Authorization&#x27;: &#x27;token githubçš„token&#x27;&#125;) if r.status_code == 204: return &quot;This&#x27;s OK!&quot; else: return r.status_code éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ â€˜Authorizationâ€™: â€˜token github çš„ tokenâ€™**å…¶ä¸­ token æ˜¯ä¸€ä¸²ä¹±åºå­—ç¬¦ä¸²ï¼Œåœ¨è¿™ä¸²å­—ç¬¦ä¸²å‰å¿…é¡»æœ‰â€œtoken **â€è¿™ä¸ªå­—ä¸²ï¼Œå¦åˆ™æµ‹è¯•æ—¶ä¼šè¿”å› 404ã€‚ â€˜Authorizationâ€™: â€˜token 77ed8fdca6*a00f0***d73239790c6323ddâ€™ 5ï¼šè¯­é›€è½¬ markdownä»è¯­é›€åŒæ­¥æ–‡ç« åˆ°æœ¬åœ°æ—¶ï¼Œæ–‡ç« ä¼šè‡ªåŠ¨è½¬ä¸º markdown æ ¼å¼ï¼Œè€Œé€šå¸¸è¿™ä¸ªæ–‡ç« æ˜¯æ²¡æœ‰åˆ†ç±»å’Œæ ‡ç­¾çš„ï¼Œä¸ºäº†èƒ½å¤Ÿè®©æ–‡ç« åŒæ­¥åˆ°åšå®¢æ—¶ï¼Œæ›´åŠ èæ´½ï¼Œéœ€è¦åœ¨ç¼–å†™è¯­é›€æ–‡ç« æ—¶ï¼Œæ·»åŠ è¯­é›€æ’ä»¶è‡ªå¸¦çš„ Font-matter æ’ä»¶çš„å¤´éƒ¨æ ¼å¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦åœ¨è¯­é›€ç¼–è¾‘å™¨ä¸­ï¼Œæ ‡é¢˜ä¸€ä¸‹ï¼Œæ­£æ–‡ä»¥ä¸Šçš„éƒ¨ä½ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ 1234tags: [è¯­é›€, travis, serverless]categories: [è¯­é›€]--- ä¸ºäº†æ–¹ä¾¿ä¹¦å†™ï¼Œå»ºè®®ä¸ºæ­¤çŸ¥è¯†åº“å»ºç«‹ä¸€ä¸ªæ¨¡æ¿ï¼Œæ¯æ¬¡å†™æ–‡ç« éƒ½åº”ç”¨æ­¤æ¨¡æ¿ã€‚ä¹¦å†™æ›´åŠ æ¸¸åˆƒæœ‰ä½™ã€‚ 6ï¼šå‚è€ƒèµ„æ–™ã€ŠHexo+GitHub+Action+è…¾è®¯äº‘å‡½æ•°+è¯­é›€æ­å»ºè‡ªåŠ¨åŒ–ä¸ªäººåšå®¢ã€‹ã€Šè¯­é›€äº‘ç¼–è¾‘è‡ªåŠ¨éƒ¨ç½² Hexo åšå®¢ã€‹ã€Šè¯­é›€è‡ªåŠ¨åŒæ­¥åˆ° hexo åšå®¢ã€‹ã€Šè¯­é›€æ–‡ç« ç”¨ Serverless è‡ªåŠ¨éƒ¨ç½²åˆ° Hexo åšå®¢ã€‹","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Hexo","slug":"Hexo","permalink":"https://sci.ci/tags/Hexo/"},{"name":"Serverless","slug":"Serverless","permalink":"https://sci.ci/tags/Serverless/"},{"name":"è¯­é›€","slug":"è¯­é›€","permalink":"https://sci.ci/tags/%E8%AF%AD%E9%9B%80/"}]},{"title":"ifvodå»é™¤å¹¿å‘Š","slug":"ifvodå»é™¤å¹¿å‘Š","date":"2021-02-16T02:55:46.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2021/02/16/ifvodå»é™¤å¹¿å‘Š/","link":"","permalink":"https://sci.ci/2021/02/16/ifvod%E5%8E%BB%E9%99%A4%E5%B9%BF%E5%91%8A/","excerpt":"","text":"ifvodè§†é¢‘ä¼šåœ¨è§†é¢‘çš„å¼€å§‹ã€25åˆ†é’Ÿã€50åˆ†é’Ÿçš„æ—¶å€™æ’å…¥å¹¿å‘Šï¼Œç°åœ¨ä»…éœ€ç®€å•çš„ä¸¤æ­¥ï¼Œå°±èƒ½å»é™¤ifvodæ’­æ”¾å¹¿å‘Šã€‚ 1ï¼šå®‰è£…æµè§ˆå™¨æ’ä»¶ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥ï¼Œå°†ReResæ’ä»¶æ·»åŠ è‡³Chromeã€‚ https://chrome.google.com/webstore/detail/reres/gieocpkbblidnocefjakldecahgeeica å®‰è£…å¥½åï¼Œåœ¨æµè§ˆå™¨æ‹“å±•ç¨‹åºä¸­ï¼Œå°†å‡ºç°ReResæ’ä»¶ã€‚ åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ 1chrome:&#x2F;&#x2F;extensions&#x2F; æŸ¥çœ‹æ’ä»¶ï¼Œç¡®ä¿æ’ä»¶å·²ç»æ¿€æ´»ï¼Œæ¿€æ´»æ—¶ï¼Œå³ä¸‹è§’çš„æ»‘åŠ¨æŒ‰é’®çŠ¶æ€å¦‚å›¾æ‰€ç¤ºã€‚ ç‚¹å‡»æµè§ˆå™¨çª—å£å³ä¸Šè§’çš„ReReså›¾æ ‡ï¼Œåº”è¯¥ä¼šå‡ºç°ä¸‹å›¾æ‰€ç¤ºçš„å¼¹çª—ã€‚å½“ç„¶æ­¤æ—¶åº”å½“è¿˜æ²¡æœ‰ä»»ä½•è§„åˆ™ã€‚ 2ï¼šæ·»åŠ è§„åˆ™å¦‚å›¾æ‰€ç¤ºï¼Œç‚¹å‡»æ·»åŠ è§„åˆ™æŒ‰é’® åœ¨If URL match:ä¸€æ å¡«å…¥ 1https:&#x2F;&#x2F;www.ifvod.tv&#x2F;7-es2015.5cef6194389ec0967828.js åœ¨Response:ä¸€æ å¡«å…¥ 1https:&#x2F;&#x2F;qn.xieqifei.com&#x2F;7-es2015.5cef6194389ec0967828.js ç‚¹å‡»ä¿å­˜ã€‚ è‡³æ­¤ï¼Œä½ åœ¨ifvodè§‚çœ‹è§†é¢‘ï¼Œå°†ä¸ä¼šæœ‰ä»»ä½•è§†é¢‘å¹¿å‘Šæ’å…¥ã€‚ 3ï¼šåŸç†ifvodå¹¿å‘Šæ˜¯é€šè¿‡jsä»£ç åµŒå…¥åˆ°æ’­æ”¾å™¨ä¸­çš„ã€‚æˆ‘ä»”ç»†é˜…è¯»äº†ï¼Œå®ƒçš„æ’­æ”¾å™¨ä»£ç ï¼Œä¹Ÿå°±æ˜¯ï¼Œä¸Šé¢æ›¿æ¢æ‰çš„jsæ–‡ä»¶ï¼Œæˆ‘ä¿®æ”¹äº†å…¶ä¸­ï¼Œå…³äºå¹¿å‘ŠæŠ•æ”¾éƒ¨åˆ†çš„ä»£ç ã€‚ã€‚ ReResæ’ä»¶æ˜¯æˆ‘åœ¨ç½‘ä¸Šéšä¾¿æ‰¾çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼Œå½“æµè§ˆå™¨è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œå¦‚æœå®ƒç¬¦åˆæˆ‘åœ¨ReResä¸Šè®¾å®šçš„urlè§„åˆ™ï¼Œå°±å°†å®ƒé‡å®šå‘åˆ°å¦ä¸€ä¸ªèµ„æºæ–‡ä»¶ã€‚è¿™æ ·å°±èƒ½å®ç°ç¯¡æ”¹ifvodçš„æ’­æ”¾å™¨æºä»£ç ã€‚ ä¹Ÿè®¸ä½ å¯ä»¥é€šè¿‡å¯¹æ¯”ä¿®æ”¹å‰åçš„jsæ–‡ä»¶ï¼Œæ¥äº†è§£æˆ‘å…·ä½“æ˜¯å¦‚ä½•ä¿®æ”¹çš„ã€‚ã€‚ä¸è¿‡ï¼Œæˆ‘å¹¶ä¸æ¨èä½ é˜…è¯»è¿™ä¸ªä¸¤ä¸‡è¡Œä»£ç çš„æ–‡ä»¶ï¼Œå®ƒä¼šè®©ä½ å´©æºƒã€‚ã€‚æˆ‘ä¹Ÿæ²¡æœ‰å®Œå…¨é˜…è¯»è¿™äº›ä»£ç ï¼Œè€Œæ˜¯é€šè¿‡ä¸€äº›é€†å‘å·¥ç¨‹çš„æ¨æ–­ï¼Œæ¥æ‰¾åˆ°æ ¸å¿ƒä»£ç ï¼Œè¿™éœ€è¦ä¸€äº›è€å¿ƒã€‚","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Javascript","slug":"Javascript","permalink":"https://sci.ci/tags/Javascript/"}]},{"title":"çˆ¬å–Youtubeæœç´¢ç»“æœ","slug":"çˆ¬å–Youtubeæœç´¢ç»“æœ","date":"2021-02-06T06:46:38.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2021/02/06/çˆ¬å–Youtubeæœç´¢ç»“æœ/","link":"","permalink":"https://sci.ci/2021/02/06/%E7%88%AC%E5%8F%96Youtube%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C/","excerpt":"","text":"1ï¼šç»ªæœ€è¿‘åœ¨åšä¸€ä¸ªéŸ³ä¹ä¸‹è½½è½¯ä»¶ï¼Œé€šè¿‡æœç´¢éŸ³ä¹åç§°ï¼Œä¸‹è½½youtubeä¸Šä¿¡æ¯åŒ¹é…åº¦æœ€é«˜çš„è§†é¢‘ï¼Œæå–å…¶ä¸­çš„éŸ³é¢‘ï¼Œæ¥è·å–éŸ³ä¹ã€‚å¼€æºè½¯ä»¶youtube-dlå·²ç»å®Œæˆäº†è§†é¢‘ä¸‹è½½å’ŒéŸ³é¢‘æå–çš„å…¨éƒ¨å·¥ä½œï¼Œæˆ‘è¦åšçš„å°±æ˜¯ï¼Œè·å–ç›®æ ‡è§†é¢‘çš„idæˆ–è€…è§†é¢‘é“¾æ¥ï¼Œç„¶åè°ƒç”¨youtube-dlä¸‹è½½ã€‚ 2ï¼šæ¥å£è°·æ­Œå®˜æ–¹å…¶å®å·²ç»æä¾›äº†è·å–YouTubeæœç´¢ç»“æœçš„apiï¼Œç›´æ¥è°ƒç”¨å³å¯ã€‚ 12345678910#è°ƒç”¨è°·æ­Œapiè·å–youtubeæœç´¢ç»“æœï¼Œè¿”å›åŒ¹é…åº¦æœ€é«˜çš„è§†é¢‘é“¾æ¥def get_video_url_in_youtube_form_api(appKey,music_name): print(&quot;ä»google apiè·å–æ•°æ®&quot;) url = &quot;https://youtube.googleapis.com/youtube/v3/search?q=&quot;+music_name+&quot;&amp;key=&quot;+appKey resp = requests.get(url) resp_json = resp.json() if resp.status_code ==200: return &quot;https://www.youtube.com/watch?v=&quot;+resp_json[&#x27;items&#x27;][0][&#x27;id&#x27;][&#x27;videoId&#x27;] else: return 500 ä½†æ˜¯ï¼Œè°·æ­Œapiæ˜¯æœ‰è°ƒç”¨ä¸Šé™çš„ï¼Œä¹Ÿå°±æ˜¯10000ä¸ªå•ä½ï¼Œæ¯æ¬¡æœç´¢å°†æ¶ˆè€—100ä¸ªå•ä½ã€‚é‚£ä¹ˆæˆ‘ä»¬æ€»å…±å¯ä»¥é€šè¿‡apiè·å–æœç´¢ç»“æœçš„æ¬¡æ•°å°±æ˜¯100ä¸ªã€‚è¿™å¯¹äºä¸ªäººæ¥è¯´ï¼Œå®é™…ä¸Šå·²ç»è¶³å¤Ÿäº†ï¼Œä½†æ˜¯ï¼Œå¦‚æœè¦å‘ä»–äººæä¾›æœåŠ¡ï¼Œå°±ä¸å¤Ÿäº†ã€‚ é‚£ä¹ˆå°±åªèƒ½ä¸Šæ‰‹çˆ¬è™«äº†ã€‚ 3ï¼šçˆ¬å–æœç´¢ç»“æœ12345678910111213141516#åˆ©ç”¨çˆ¬è™«è·å–youtubeæœç´¢ç»“æœdef get_video_url_in_youtube_from_crawler(keyword): url=&quot;https://m.youtube.com/results?search_query=&quot;+keyword print(&quot;é€šè¿‡çˆ¬è™«è·å–æ•°æ®&quot;) resp = requests.get(url) if resp.status_code==200: result_json = re.findall(r&#x27;ytInitialData = (.*);&lt;/script&gt;&#x27;, resp.text)[0] result_obj = json.loads(result_json) try: video_url = &quot;https://www.youtube.com/watch?v=&quot;+result_obj[&#x27;contents&#x27;][&#x27;twoColumnSearchResultsRenderer&#x27;][&#x27;primaryContents&#x27;][&#x27;sectionListRenderer&#x27;][&#x27;contents&#x27;][0][&#x27;itemSectionRenderer&#x27;][&#x27;contents&#x27;][0][&#x27;videoRenderer&#x27;][&#x27;videoId&#x27;] except KeyError: return 500 return video_url else: return 500 é€šè¿‡urlå’Œæœç´¢å€¼ï¼Œæ„é€ æœç´¢é“¾æ¥ã€‚è·å–è¿”å›çš„htmlä»£ç ã€‚å¯¹htmlæ ¼å¼åŒ–åï¼Œå¯ä»¥å‘ç°ï¼Œæœ‰ä¸€ä¸²åŒ…å«æœç´¢ç»“æœçš„jsonæ•°æ®ï¼Œè—åœ¨ä¸€ä¸ªjsä»£ç ä¸­é—´ï¼Œé€šè¿‡æ­£åˆ™ï¼Œå°†å®ƒæå–å‡ºæ¥ã€‚ è°·æ­Œæ˜¯æœ‰åçˆ¬è™«çš„æœºåˆ¶çš„ï¼Œå°±æ˜¯è¯´ï¼Œå¦‚æœé¢‘ç¹é€šè¿‡ä¸Šè¿°ç¨‹åºè¯·æ±‚æ•°æ®ï¼Œè·å–åˆ°çš„jsonä¸ä¸€å®šèƒ½è·å¾—æƒ³è¦çš„å†…å®¹ã€‚è¿™é‡Œéœ€è¦ä½¿ç”¨Exceptionæ¥é¿å…æŠ¥é”™ï¼Œå‡å¦‚çˆ¬å–å¤±è´¥ï¼Œåº”å½“å†è°ƒç”¨apiã€‚å¦‚æœæœ‰ä»£ç†éš§é“ï¼Œé‚£ä¹ˆçˆ¬è™«å°±æ›´å¥½äº†ã€‚","categories":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/categories/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/tags/Python/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"ESP8266ä»0åˆ°1","slug":"ESP8266ä»0åˆ°1","date":"2020-11-26T12:49:52.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/11/26/ESP8266ä»0åˆ°1/","link":"","permalink":"https://sci.ci/2020/11/26/ESP8266%E4%BB%8E0%E5%88%B01/","excerpt":"","text":"0ï¼šå‰è¯­æ¨èå¤ªæåˆ›å®¢ï¼Œå­¦ä¹ ESP8266æ¨¡å—çš„æ›´å¤šçŸ¥è¯†ã€‚ 1ï¼šè¿çº¿ESP8266é€šè¿‡ä¸²å£ä¸ç”µè„‘æˆ–è€…å…¶ä»–å•ç‰‡æœºå®ç°äº¤äº’ï¼Œä¸²å£çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ã€‚ä»¥æœ€ç®€å•çš„ESP8266æ¨¡å—ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚å…¶ä»–æ¨¡å—å¯èƒ½å·²ç»æœ‰äº†usb type-cæˆ–è€…å…¶ä»–æ¥å£ï¼Œå°±ç›´æ¥ç”¨å¯¹åº”æ¥å£çš„çº¿å’Œè®¾å¤‡è¿æ¥å°±å¯ä»¥äº†ã€‚ä¸‹å›¾çš„æ¨¡å—ï¼Œæ²¡æœ‰usbæ¥å£ï¼Œå› æ­¤éœ€è¦æˆ‘ä»¬è‡ªå·±è¿çº¿ã€‚ æ¨¡å—å…±å¼•å‡ºäº†8ä¸ªå¼•è„šï¼Œå…¶ä¸­ï¼Œ VCCï¼šæ¥3.3Vç”µå‹ï¼Œä¸ºæ¨¡å—ä¾›ç”µã€‚ GUDï¼šæ¥åœ° GPIO0ï¼šå¹³æ—¶ç›´æ¥æ‚¬ç©ºã€‚éœ€è¦åˆ·å›ºä»¶çš„æ—¶å€™æ¥åœ°ã€‚ CH_PDï¼šé€šè¿‡ä¸€ä¸ª10Kç”µé˜»æ¥3.3Vç”µå‹ï¼Œè¡¨ç¤ºæ¨¡å—å¤„äºå·¥ä½œçŠ¶æ€ã€‚å¦åˆ™å°†ä¸å·¥ä½œã€‚ ä¸²å£é€šä¿¡å¼•è„šï¼Œ RXDï¼šä¸²å£è¾“å…¥ï¼Œè¡¨ç¤ºè¿™ä¸ªå¼•è„šä¼šæ¥æ”¶å…¶ä»–æ¨¡å—ä¼ å…¥çš„ä¿¡æ¯ã€‚ä¸å…¶ä»–æ¨¡å—çš„TXå¼•è„šç›¸è¿ã€‚ TXDï¼šä¸²å£è¾“å‡ºï¼Œæ¥å…¶ä»–æ¨¡å—çš„RXå¼•è„šï¼ŒæŠŠæ•°æ®ä¼ ç»™å…¶ä»–æ¨¡å—ã€‚ é€šè¿‡FTDI USB to TTLæ¨¡å—ï¼Œå¯ä»¥å°†ESPç›´æ¥å’Œç”µè„‘è¿æ¥ã€‚åªéœ€è¦å°†å¯¹åº”å¼•è„šä¸FTDIæ¨¡å—ç›¸è¿å³å¯ã€‚ 2ï¼šç®€å•å¼€å§‹ä¸‹å›¾ä¸ºä¸€ä¸ªFTDIæ¨¡å—ã€‚å°†å…¶å¼•è„šä¸ESPæ¨¡å—å„å¼•è„šç›¸è¿ã€‚ ä¸‹è½½FTDIæ¨¡å—çš„èŠ¯ç‰‡é©±åŠ¨ï¼Œç›´æ¥æœç´¢å¯¹åº”èŠ¯ç‰‡å°±èƒ½æ‰¾åˆ°ã€‚å®‰è£…é©±åŠ¨åï¼Œå°†è¿æ¥å¥½çš„FTDIæ¨¡å—æ’å…¥ç”µè„‘ï¼Œåœ¨ç”µè„‘è®¾å¤‡ç®¡ç†å™¨ä¸­ï¼Œèƒ½æ‰¾åˆ°ç«¯å£ä¸€æ ï¼Œå¤šäº†è¿™ä¸ªæ¨¡å—çš„ç«¯å£æ¯”å¦‚(COM6) éšæ„ä¸‹è½½ä¸€ä¸ªä¸²å£åŠ©æ‰‹ï¼Œé€‰æ‹©FTDIæ¨¡å—çš„ç«¯å£ï¼Œè®¾ç½®æ³¢ç‰¹ç‡ä¸º115200ï¼Œç»“æŸç¬¦ä¸ºNLå’ŒCRã€‚å…¶ä»–çš„é»˜è®¤ã€‚ åœ¨ä¸²å£åŠ©æ‰‹ä¸Šå‘é€ï¼šAT ä¸²å£åŠ©æ‰‹çš„çª—å£ä¼šè¿”å›ï¼šOKï¼Œæˆ–è€…ERRORã€‚ å¦‚æœè¿”å›OKï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡ATæŒ‡ä»¤æ“ä½œESPèŠ¯ç‰‡è¿æ¥WIFIæˆ–è€…ä½œä¸ºAPè®©åˆ«äººè¿wifiäº†ã€‚ å¦‚æœè¿”å›ERRORï¼Œé‚£ä¹ˆå°±éœ€è¦æ›´æ–°å›ºä»¶ï¼Œä»¥è®©ESPæ”¯æŒATæŒ‡ä»¤ã€‚ æœªå¿…ä¸€å®šè¦ç›´æ¥å°†ESPä¸ç”µè„‘è¿æ¥ï¼Œä¹Ÿå¯ä»¥å’Œå…¶ä»–å•ç‰‡æœºè¿æ¥ï¼Œé€šè¿‡å¯¹å…¶ä»–å•ç‰‡æœºç¼–ç¨‹ï¼Œå‘ESPå‘é€ATæŒ‡ä»¤ã€‚é‡è¦çš„æ˜¯ï¼Œç†è§£ESPçš„å·¥ä½œæ–¹å¼ã€‚ 3ï¼šæ›´æ–°å›ºä»¶å¦‚æœä½ ä¸å°å¿ƒå°†ESPé…ç½®é”™äº†ï¼Œåˆä¸çŸ¥é“æ€ä¹ˆå»å°†å®ƒå‡ºå‚è®¾ç½®ï¼Œæˆ–è€…ä½ å‘é€ATæŒ‡ä»¤æ€»æ˜¯è¿”å›ERRORï¼Œé‚£ä¹ˆä½ å°±éœ€è¦å­¦ä¹ å¦‚ä½•æ›´æ–°èŠ¯ç‰‡å›ºä»¶ã€‚ æ›´æ–°å›ºä»¶éœ€è¦ç”¨åˆ°FTDIæ¨¡å—ï¼Œå°†FTDIå’ŒESPè¿æ¥ï¼ŒFTDIè¿æ¥ç”µè„‘ã€‚ é¦–å…ˆä¸‹è½½Flashä¸‹è½½å·¥å…·ã€‚åªæœ‰Windowsç³»ç»Ÿèƒ½ç”¨ã€‚ ç„¶åä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ESP8266 NONOS SDKã€‚å¹¶è§£å‹ã€‚ æ¥çº¿ï¼Œéœ€è¦æ³¨æ„ï¼ŒGPIO0å¼•è„šå¿…é¡»æ¥åœ°ã€‚ åºå· å¼•è„šåç§° I/O æè¿° DCç‰¹æ€§ å¤‡æ³¨ 1 UTXD AT ä¸²å£å‘é€è¾“å‡º 3.3V å¼€æœºæ—¶ç¦æ­¢ä¸‹æ‹‰ 2 GND åœ° 3 CH_PD(EN) æ¨¡å—æ–­ç”µä¿¡å· 3.3V 1ï¼‰é«˜ç”µå¹³å·¥ä½œï¼› 2ï¼‰ä½ç”µå¹³æ¨¡å—ä¾›ç”µå…³æ‰ï¼› 4 GPIO2 é¢„ç•™ï¼Œé»˜è®¤æ‚¬ç©º 3.3V å¼€æœºä¸Šç”µæ—¶å¿…é¡»ä¸ºé«˜ç”µå¹³ï¼Œç¦æ­¢ç¡¬ä»¶ä¸‹æ‹‰ï¼›å†…éƒ¨é»˜è®¤å·²æ‹‰é«˜ 5 GPIO16 I å¤ä½ä¿¡å·(RESET) 3.3V ä½ç”µå¹³å¤ä½ï¼Œé«˜ç”µå¹³å·¥ä½œï¼ˆé»˜è®¤é«˜ï¼‰ï¼› 6 GPIO0 æ¨¡å—çŠ¶æ€ç¯/å·¥ä½œæ¨¡å¼é€‰æ‹© 3.3V 1ï¼‰é»˜è®¤WiFiStatusï¼šWiFiå·¥ä½œçŠ¶æ€æŒ‡ç¤ºç¯æ§åˆ¶ä¿¡å·ï¼›2ï¼‰å·¥ä½œæ¨¡å¼é€‰æ‹©ï¼šä¸Šæ‹‰ï¼šFlashBootï¼Œå·¥ä½œæ¨¡å¼ï¼›ä¸‹æ‹‰ï¼šUARTDownloadï¼Œä¸‹è½½æ¨¡å¼ï¼ˆä¸‹è½½å›ºä»¶ï¼‰ï¼› 7 VCC I æ¨¡å—é‡‡ç”¨å•ç”µæºä¾›ç”µï¼Œé€šè¿‡ 1 ä¸ªVCC ç”µæºå¼•è„šä¾›ç”µï¼Œç”µå‹èŒƒå›´ï¼š3.0V-3.6V,ç”µæµ&gt;600mA Vmax=3.6VVmin=3.0VVnorm=3.3V ç”µæºä¾›ç”µèƒ½åŠ›è¯·å¤§äº600mA;å¦åˆ™å¯èƒ½ä¼šå¼•èµ·æ¨¡å—å·¥ä½œå¼‚å¸¸ï¼Œæˆ–è€…æ— çº¿æ€§èƒ½ä¸å¥½ã€‚ 8 URXD AT ä¸²å£å‘é€è¾“å…¥ 3.3V æ‰“å¼€flash_download_tool_v3.8.5.exeã€‚é€‰æ‹©Developeræ¨¡å¼ã€‚ é€‰æ‹©8266èŠ¯ç‰‡ ç„¶ååœ¨ä¹‹å‰è§£å‹çš„SDKä¸­æ‰¾åˆ°C:\\Usersâ€¦â€¦\\ESP8266_NONOS_SDK-3.0.4\\bin\\boot_v1.6.binæ–‡ä»¶åˆ·å…¥åœ°å€0x00000ä¸­ ç„¶åç‚¹å‡»STARTæŒ‰é’®å¼€å§‹ï¼Œå¦‚æœæ˜¾ç¤ºç­‰å¾…ä¸Šç”µï¼Œåœ¨ä¿è¯GPIO0æ¥åœ°çš„æƒ…å†µä¸‹ï¼Œå°†RSTå¼•è„šæ¥åœ°å†æ–­å¼€ã€‚ è‡³æ­¤å›ºä»¶ç­‰å¾…åˆ·æ–°å®Œæ¯•ã€‚ 4ï¼šATæŒ‡ä»¤å®Œæ•´çš„ATæŒ‡ä»¤PDF å¸¸è§çš„æŒ‡ä»¤ï¼š åŸºç¡€å‘½ä»¤ æµ‹è¯•ï¼šAT å¤ä½ï¼šAT+RST æ¢å¤å‡ºå‚è®¾ç½®ï¼šAT+RESTORE æŸ¥è¯¢æœ¬æœºIPå’ŒMACï¼šAT+CIFSR æ¨¡å¼å‘½ä»¤ æŸ¥è¯¢æ¨¡å¼ï¼šAT+CWMODE? è®¾ç½®æ¨¡å¼ 1:STA 2:AP 3:bothï¼šAT+CWMODE=1 ï¼ˆSTAï¼‰æŸ¥è¯¢å½“å‰å¯ç”¨AP ï¼šAT+CWLAP ï¼ˆSTAï¼‰åŠ å…¥å¯ç”¨AP ï¼šAT+CWJAP=â€œssidâ€,â€œpswâ€ ï¼ˆSTAï¼‰é€€å‡ºå½“å‰AP ï¼šAT+CWQAP ï¼ˆAPï¼‰è®¾ç½®APå‚æ•°ï¼Œssid+psw+chn+ecn+n+01 ï¼šAT+CWSAP=â€œå“ˆå“ˆâ€,â€œ12345678â€,3,3,4,0 ï¼ˆAPï¼‰æŸ¥è¯¢APå‚æ•°ï¼šAT+CWSAP? å®¢æˆ·ç«¯|æœåŠ¡å™¨è®¾ç½® æŸ¥è¯¢æ˜¯å¦å¤šè¿æ¥ æ˜¯1ï¼Œå¦0 ï¼šAT+CIPMUX? è®¾ç½®å¯åŠ¨å¤šè¿æ¥1ï¼Œå•é“¾æ¥0ï¼ˆé‡å¯åé»˜è®¤0ï¼‰ï¼šAT+CIPMUX=1 ï¼ˆå¤šè¿æ¥ï¼‰å…³é—­æœåŠ¡å™¨ï¼Œå°±æ˜¯å¼€å¯å¤šè¿æ¥å®¢æˆ·ç«¯ï¼Œé»˜è®¤æ˜¯0 ï¼šAT+CIPSERVER=0 ï¼ˆå¤šè¿æ¥ï¼‰å¼€å¯æœåŠ¡å™¨,:å¼€å¯+ç«¯å£å·portã€‚ æ­¤æ—¶å®¢æˆ·ç«¯è¦è¿æœ¬æœºï¼Œè¿œç¨‹åœ°å€ä¸º IP+Port ï¼šAT+CIPSERVER=1,8080 ï¼ˆå¤šè¿æ¥ï¼‰å‘é€æ•°æ® id+Byteï¼šAT+CIPSEND=0,10 ï¼ˆå¤šè¿æ¥ï¼‰å…³é—­TCP/UDPè¿æ¥ï¼Œidï¼šAT+CIPCLOSE=0 ï¼ˆå®¢æˆ·ç«¯å•è¿æ¥ï¼‰å»ºç«‹TCP/UDPè¿æ¥ï¼šAT+CIPSTART=â€œTCPâ€,â€œ192.168.4.2â€,100 ï¼ˆå®¢æˆ·ç«¯å•è¿æ¥ï¼‰å‘é€æ•°æ®ï¼ŒByte ï¼šAT+CIPSEND=10 ï¼ˆå®¢æˆ·ç«¯å•è¿æ¥ï¼‰ä½¿èƒ½ç©¿é€æ¨¡å¼ï¼šAT+CIPMODE=1 ï¼ˆå®¢æˆ·ç«¯å•è¿æ¥ï¼‰è¿›å…¥é€ä¼ æ¨¡å¼å‘é€ï¼šAT+CIPSEND ï¼ˆå®¢æˆ·ç«¯å•è¿æ¥ï¼‰é€€å‡ºé€ä¼ ï¼š+++ ï¼ˆå®¢æˆ·ç«¯å•è¿æ¥ï¼‰å…³é—­TCP/UDPè¿æ¥ï¼šAT+CIPCLOSE ï¼ˆå®¢æˆ·ç«¯å¤šè¿æ¥ï¼‰å»ºç«‹TCP/UDPè¿æ¥ï¼Œidï¼ŒTCP/UDPï¼ŒIPï¼Œç«¯å£ï¼šAT+CIPSTART=0,â€œTCPâ€,â€œ192.168.4.2â€,100 å…¶ä»–å¦‚æœéœ€è¦ç”¨åˆ°ESPé€šè¿‡è½¯ä¸²å£è¿æ¥Arduinoå•ç‰‡æœºï¼Œå°±éœ€è¦ä¿®æ”¹ESPçš„æ³¢ç‰¹ç‡ï¼ŒESPé»˜è®¤æ³¢ç‰¹ç‡æ˜¯115200ï¼Œè€Œè½¯ä¸²å£åªèƒ½æ˜¯9600ï¼Œä¿®æ”¹æ³¢ç‰¹ç‡ATæŒ‡ä»¤ AT+CIOBAUD=9600 å¦‚æœè¿”å›ERRORï¼Œå¯ä»¥å°è¯• AT+UART=9600,8,1,0,0 5ï¼šä½¿ç”¨Arduino IDEç¼–å†™ç¨‹åºESP8266æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨Arduino IDEä¸Šçƒ§å½•ç¨‹åºçš„ã€‚ä¸ºäº†åœ¨Arduino IDEä¸Šç›´æ¥ç¼–å†™ç¨‹åºï¼Œé¦–å…ˆéœ€è¦å¯¼å…¥ESP8266çš„åº“ã€‚ åœ¨IDEçš„æ–‡ä»¶-&gt;é¦–é€‰é¡¹é‡Œè¾¹çš„é™„åŠ å¼€å‘æ¿ç®¡ç†ç½‘å€è¾“å…¥https://github.com/esp8266/Arduino/releases/download/2.5.0/package_esp8266com_index.json æˆ–è€…http://arduino.esp8266.com/stable/package_esp8266com_index.json ä¹‹åç‚¹å‡»å¥½ã€‚ åœ¨ å·¥å…·-&gt;å¼€å‘æ¿é€‰æ‹©æœ€ä¸Šæ–¹å¼€å‘æ¿ç®¡ç†å™¨ï¼Œä¹‹åæœç´¢espå³å¯å‡ºç°esp8266ï¼Œé€‰æ‹©ç‰ˆæœ¬ä¹‹åè¿›è¡Œå®‰è£…å³å¯ã€‚ åœ¨Arduino IDE èœå•&gt;å·¥å…·&gt;å¼€å‘æ¿&gt;å¼€å‘æ¿ç®¡ç†å™¨ ä¸­é€‰æ‹©ä½ æ­£åœ¨ä½¿ç”¨çš„8266å¼€å‘æ¿ã€‚ å¦‚æœä½ ä¸æ¸…æ¥šè‡ªå·±ä½¿ç”¨çš„æ˜¯å“ªä¸ªå¼€å‘æ¿ï¼Œå¯ä»¥é€‰æ‹©generic esp8266 moduleï¼Œè¿™æ˜¯é€šç”¨æ¿å­ã€‚ é€‰æ‹©æ­£ç¡®çš„ç«¯å£ã€‚å¦‚æœä¸çŸ¥é“è‡ªå·±æ¿å­è¿æ¥ç”µè„‘ä¸Šçš„æ˜¯å“ªä¸ªç«¯å£ï¼Œå¯ä»¥æ‰“å¼€ç”µè„‘çš„è®¾å¤‡ç®¡ç†å™¨ï¼Œå…¶ä¸­æœ‰ç«¯å£ä¸€æ ï¼Œæœ‰è¯¦ç»†ä¿¡æ¯ã€‚ ä¸Šè½½ç¨‹åºå‰ï¼Œå°†GPIO0å¼•è„šä¸‹æ‹‰æ¥åœ°ï¼Œå¹¶å°†RSTå¼•è„šæ¥åœ°åœ¨æ”¾å¼€ï¼Œä¸Šè½½ç¨‹åºæ—¶ï¼ŒGPIO0å¼•è„šéœ€ä¿æŒæ¥åœ°çŠ¶æ€ã€‚ä¸Šè½½å®Œæ¯•ï¼Œå°†GPIO0å¼•è„šæ”¾ç©ºï¼Œå¹¶å†æ¬¡å°†RSTå¼•è„šæ¥åœ°æ”¾å¼€ï¼Œåˆ‡æ¢åˆ°è¿è¡ŒçŠ¶æ€ã€‚ 6ï¼šHttpsè¯·æ±‚ç¨‹åºè¿™é‡Œä»¥ä¼ä¸šå¾®ä¿¡apiå‘é€åº”ç”¨æ¶ˆæ¯ä¸ºä¾‹ï¼Œç®€è¿°httpsè¯·æ±‚ä¸­çš„getå’Œpostè¯·æ±‚ã€‚httpè¯·æ±‚æ›´ä¸ºç®€å•ã€‚ç½‘ä¸Šèµ„æ–™ä¹Ÿæ›´å¤šã€‚ è¦è°ƒå–ä¼ä¸šå¾®ä¿¡apié¦–å…ˆéœ€è¦ä»”ç»†é˜…è¯»å…¶å¼€å‘æ–‡æ¡£ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142#include &lt;Arduino.h&gt;#include &lt;ESP8266WiFi.h&gt;#include &lt;ESP8266HTTPClient.h&gt;#include &lt;WiFiClientSecureBearSSL.h&gt;#include &lt;ArduinoJson.h&gt;//WiFiè¿æ¥ä¿¡æ¯ï¼ˆæ³¨æ„ï¼šéœ€è¦è‡ªè¡Œä¿®æ”¹ä»¥ä¸‹å†…å®¹å¦åˆ™ESP8266æ— æ³•è¿æ¥WiFiï¼‰#define ssid &quot;SSID&quot; //WiFiåç§° #define password &quot;PASSWORD&quot; //WiFiå¯†ç //https://qyapi.weixin.qq.comç½‘ç«™çš„æŒ‡çº¹ã€‚//espé€šè¿‡httpsè®¿é—®ç½‘ç«™ï¼Œéƒ½éœ€è¦è‡ªå·±é€šè¿‡æµè§ˆå™¨è·å–æŒ‡çº¹ï¼Œè·å–æ–¹æ³•å¯è‡ªè¡Œæœç´¢ï¼Œåœ¨å‚è€ƒèµ„æ–™ä¸­ä¹Ÿæœ‰æ–‡ç« ï¼ŒæŒ‡çº¹ä¸€èˆ¬å‡ ä¸ªæœˆå°±éœ€è¦æ›´æ–°ä¸€æ¬¡ã€‚æµè§ˆå™¨æ‰“å¼€https://qyapi.weixin.qq.com/cgi-bin/gettokenè·å–æŒ‡çº¹ï¼Œè€Œä¸åªæ˜¯åªæœ‰ä¸»æœºåã€‚const char fingerprint[] PROGMEM = &quot;790e6e32485bb89503ac6da87d948f5e634322a7&quot;;//HTTPSç«¯å£443const int httpsPort = 443; // ä¼ä¸šå¾®ä¿¡apiç›¸å…³String tokenUrl = &quot;https://qyapi.weixin.qq.com/cgi-bin/gettoken&quot;;String sendMsgUrl = &quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&quot;;//ä»¥ä¸‹ä¿¡æ¯éœ€è¦æ›¿æ¢ï¼Œè¿™é‡Œçš„å‡ä¸å¯ç”¨String corpid = &quot;ww98b3k1b63788a7ad&quot;;//ä½ çš„ä¼ä¸šidString corpsecret = &quot;Kh8asfasfaTrbSwRBGK5H0osnfasakjkmSYCqV3Tgcs&quot;;//ä½ çš„ä¼ä¸šåº”ç”¨å¯†é’¥String agentid = &quot;1000002&quot;;//ä½ çš„ä¼ä¸šåº”ç”¨id//è·å–ä¼ä¸šå¾®ä¿¡access_tokenString get_token()&#123; String token = &quot;123&quot;; String requestUrl = tokenUrl + &quot;?corpid=&quot;+corpid+&quot;&amp;corpsecret=&quot;+corpsecret; //httpséœ€è¦åˆ›å»ºä¸€ä¸ªåŠ å¯†è·¯å¾„ std::unique_ptr&lt;BearSSL::WiFiClientSecure&gt;client(new BearSSL::WiFiClientSecure); client-&gt;setFingerprint(fingerprint); //åˆ›å»ºä¸€ä¸ªHTTPå®¢æˆ·ç«¯ HTTPClient https; //httpå’Œhttpsçš„åŒºåˆ«å°±æ˜¯https.beginä¸­çš„*clientã€‚å¦‚æœæ²¡æœ‰*client,é‚£ä¹ˆå‘é€å‡ºå»çš„å°±æ˜¯httpè¯·æ±‚ //å»ºç«‹è¿æ¥ if (https.begin(*client, requestUrl)) &#123; // HTTPS Serial.print(&quot;[HTTPS] GET...\\n&quot;); // å‘é€getè¯·æ±‚ int httpCode = https.GET(); //å¦‚æœhttpCodeå°äºé›¶åˆ™è¿æ¥é”™è¯¯ if (httpCode &gt; 0) &#123; Serial.printf(&quot;[HTTPS] GET... code: %d\\n&quot;, httpCode); // file found at server if (httpCode == HTTP_CODE_OK || httpCode == HTTP_CODE_MOVED_PERMANENTLY) &#123; //å°†è¿”å›çš„jsonåºåˆ—ï¼Œæ”¾åˆ°jsonå˜é‡ String json = https.getString(); Serial.println(json); // åˆ›å»ºDynamicJsonDocumentå¯¹è±¡ï¼Œjsonä¸­çš„å‚æ•°ä¸º4ä¸ªã€‚ const size_t capacity = JSON_OBJECT_SIZE(4) + 290; DynamicJsonDocument doc(capacity); //ååºåˆ—åŒ–æ•°æ® deserializeJson(doc, json); if(doc[&quot;errcode&quot;].as&lt;int&gt;()==0)&#123; token = doc[&quot;access_token&quot;].as&lt;String&gt;(); &#125; &#125; &#125; else &#123; Serial.printf(&quot;[HTTPS] GET... failed, error: %s\\n&quot;, https.errorToString(httpCode).c_str()); &#125; https.end(); &#125; else &#123; Serial.printf(&quot;[HTTPS] Unable to connect\\n&quot;); &#125; return token;&#125; //è°ƒç”¨ä¼ä¸šå¾®ä¿¡apiï¼Œå‘é€ä¿¡æ¯ã€‚ void send_msg(String msg)&#123; //è°ƒç”¨get_tokenå‡½æ•°ï¼Œè·å–token String token = get_token(); //token=123è¡¨ç¤ºget_token()å‡½æ•°è¯·æ±‚tokenå¤±è´¥ã€‚ //å¦‚æœå¤±è´¥ï¼Œå¯èƒ½è¿˜éœ€è¦å…¶ä»–æ­¥éª¤ï¼Œæ¯”å¦‚é‡æ–°è·å–ã€‚è¿™é‡Œæ²¡æœ‰å®Œå–„ã€‚ if (token == &quot;123&quot;)&#123; Serial.println(&quot;not get token&quot;); return; &#125;else&#123; Serial.println(&quot;got token&quot;); &#125; //æ„é€ è¯·æ±‚url String requestUrl = sendMsgUrl + token; std::unique_ptr&lt;BearSSL::WiFiClientSecure&gt;client(new BearSSL::WiFiClientSecure); client-&gt;setFingerprint(fingerprint); HTTPClient httpClient; //ä¸å¾®ä¿¡æœåŠ¡å™¨å»ºç«‹è¿æ¥ httpClient.begin(*client,requestUrl); //æ„å»ºjsonæ•°æ®ï¼Œç”¨äºå‘é€è¯·æ±‚å†…å®¹ String json = &quot;&#123;\\&quot;touser\\&quot;:\\&quot;@all\\&quot;,\\&quot;msgtype\\&quot;:\\&quot;text\\&quot;,\\&quot;agentid\\&quot;:1000002,\\&quot;text\\&quot;:&#123;\\&quot;content\\&quot;:\\&quot;&quot;+msg+&quot;\\&quot;&#125;,\\&quot;safe\\&quot;:0,\\&quot;enable_id_trans\\&quot;:0,\\&quot;enable_duplicate_check\\&quot;:0,\\&quot;duplicate_check_interval\\&quot;:1800&#125;&quot;; //å‘é€è¯·æ±‚å†…å®¹ Serial.println(json); //å°†è¯·æ±‚æ•°æ®æ”¾åˆ°POST()ä¸­ã€‚ int httpCode = httpClient.POST(json); //è¿™é‡Œæ²¡æœ‰è¯»å–æœåŠ¡å™¨è¿”å›çš„jsonæ•°æ®ï¼Œæœ€å¥½è¿˜æ˜¯æå–å‡ºæ¥ï¼Œåˆ¤æ–­æ˜¯å¦å‘é€æˆåŠŸã€‚å¯è‡ªè¡Œæ·»åŠ ä»£ç  if (httpCode &gt; 0) &#123; //å°†æœåŠ¡å™¨å“åº”å¤´æ‰“å°åˆ°ä¸²å£ Serial.println(&quot;[HTTP] POST... code:&quot;+ httpCode); //å°†ä»æœåŠ¡å™¨è·å–çš„æ•°æ®æ‰“å°åˆ°ä¸²å£ if (httpCode == HTTP_CODE_OK) &#123; Serial.println(&quot;Send success&quot;); Serial.println(&quot;return str:&quot;+httpClient.getString()); &#125; &#125; else &#123; Serial.println(&quot;send failure&quot;); &#125; //å…³é—­ESP8266ä¸æœåŠ¡å™¨è¿æ¥ httpClient.end(); &#125;//Wifi initvoid wifi_init()&#123; Serial.begin(9600); WiFi.mode(WIFI_STA); //è®¾ç½®ESP8266ä¸ºæ— çº¿ç»ˆç«¯å·¥ä½œæ¨¡å¼ WiFi.begin(ssid, password); //è¿æ¥WiFi Serial.println(&quot;&quot;); Serial.println(&quot;Connecting&quot;); Serial.println(&quot;&quot;); // ç­‰å¾…è¿æ¥ while (WiFi.status() != WL_CONNECTED) &#123; delay(500); Serial.print(&quot;.&quot;); &#125; //æˆåŠŸè¿æ¥åé€šè¿‡ä¸²å£ç›‘è§†å™¨æ˜¾ç¤ºWiFiåç§°ä»¥åŠESP8266çš„IPåœ°å€ã€‚ Serial.println(&quot;&quot;); Serial.print(&quot;Connected to &quot;); Serial.println(ssid); Serial.print(&quot;IP address: &quot;); Serial.println(WiFi.localIP()); &#125;void setup() &#123; wifi_init(); send_msg(&quot;hello world!&quot;);&#125;void loop() &#123;&#125; ArduinoJSONåº“éœ€è¦åœ¨IDEåº“ç®¡ç†ä¸­æœç´¢å®‰è£…ï¼Œ å…¶ä»–åº“éƒ½æ˜¯éšESP8266åº“ä¸€èµ·å®‰è£…çš„ã€‚ jsonæ ¼å¼åŒ–å’Œè½¬ä¹‰ï¼šhttp://www.bejson.com/ ArduinoJson Assistantï¼šhttps://arduinojson.org/v6/assistant/ å…³äºArduinoJSONè¯¦ç»†æ•™ç¨‹å¯è§å‚è€ƒèµ„æ–™ç« èŠ‚ 7ï¼šä½åŠŸè€—æ–¹æ¡ˆESP8266æä¾›ä¸‰ç§çœç”µæ¨¡å¼ã€‚ å½“æˆ‘ä»¬çš„ç¨‹åºåœ¨æŸä¸ªæ—¶é—´æ®µä¸éœ€è¦ä½¿ç”¨wifiæ¨¡å—æ—¶ï¼Œå¯è®©å®ƒè¿›å…¥ç¡çœ æ¨¡å¼ï¼Œ Modem-Sleepæ¨¡å¼ï¼šwifiä¸è·¯ç”±å™¨ä¿æŒè¿æ¥ï¼Œåªåœ¨é—´æ–­çš„æ—¶é—´é‡Œå‘é€ä¸€ä¸ªæ¶ˆæ¯ä»¥ä¿æŒè¿æ¥ã€‚ Light-Sleepæ¨¡å¼ï¼šåœ¨Modem-Sleepçš„åŸºç¡€ä¸Šï¼Œå…³é—­CPUã€‚åœ¨espå¾ªç¯ä»»åŠ¡é•¿æ—¶é—´ä¸éœ€è¦espå·¥ä½œæ—¶ï¼Œä¼šè‡ªåŠ¨è¿›å…¥æ­¤æ¨¡å¼ã€‚ Deep-Sleepæ¨¡å¼ï¼šæ–­å¼€wifiã€‚å¯ç”¨æˆ·é…ç½®ã€‚ deepsleepæ¨¡å¼æä¾›å®šæ—¶å™¨å”¤é†’å’Œå¤–éƒ¨IOå”¤é†’ä¸¤ç§æ–¹æ¡ˆã€‚ å®šæ—¶å™¨å”¤é†’ å°†RSTå¼•è„šæ¥GPIO16ã€‚ 123456789101112131415161718192021/* * ESP8266 Deep sleep mode example * Rui Santos * Complete Project Details https://randomnerdtutorials.com */ void setup() &#123; Serial.begin(115200); Serial.setTimeout(2000); // Wait for serial to initialize. while(!Serial) &#123; &#125; // Deep sleep mode for 30 seconds, the ESP8266 wakes up by itself when GPIO 16 (D0 in NodeMCU board) is connected to the RESET pin Serial.println(&quot;I&#x27;m awake, but I&#x27;m going into deep sleep mode for 30 seconds&quot;); ESP.deepSleep(30e6); &#125;void loop() &#123;&#125; ESP-01èŠ¯ç‰‡ï¼ŒGPIO16å¼•è„šå¹¶æ²¡æœ‰å¼•å‡ºï¼Œæ‰€ä»¥ï¼Œå¾ˆéš¾å°†RSTå¼•è„šä¸å…¶ç›¸æ¥ã€‚ å¤–éƒ¨å”¤é†’ã€‚ å°†RSTä¸å¤–éƒ¨å•ç‰‡æœºçš„IOå£ç›¸æ¥ï¼Œå½“å¤–éƒ¨IOç»™RSTä¸€ä¸ªä½ç”µå¹³æ—¶ï¼ŒèŠ¯ç‰‡å°†é‡å¯æ¿€æ´»ã€‚ ä¾‹å¦‚ä½¿ç”¨æŒ‰é’®æ¥æä¾›ä½ç”µå¹³ 1234567891011121314151617181920/* * ESP8266 Deep sleep mode example * Rui Santos * Complete Project Details https://randomnerdtutorials.com */ void setup() &#123; Serial.begin(115200); Serial.setTimeout(2000); // Wait for serial to initialize. while(!Serial) &#123; &#125; // Deep sleep mode until RESET pin is connected to a LOW signal (for example pushbutton or magnetic reed switch) Serial.println(&quot;I&#x27;m awake, but I&#x27;m going into deep sleep mode until RESET pin is connected to a LOW signal&quot;); ESP.deepSleep(0); &#125;void loop() &#123;&#125; æœ‰çš„ESPæ¨¡å—ä¸Šé¢å¸¦æœ‰LEDç¯ï¼Œé‡‡ç”¨ä½åŠŸè€—æ–¹æ¡ˆï¼ŒåŠ¡å¿…å°†LEDç§»é™¤ã€‚ 8ï¼šä¸å…¶ä»–å•ç‰‡æœºé€šè®¯ESPé€šè¿‡ä¸²å£å¯ä¸å…¶ä»–å•ç‰‡æœºä¼ é€’ä¿¡æ¯ï¼Œå°†ESPçš„TXå¼•è„šè¿æ¥å…¶ä»–å•ç‰‡æœºRXå¼•è„šï¼ŒESPçš„RXè¿æ¥å…¶ä»–å•ç‰‡æœºçš„TXã€‚ æ³¨æ„ï¼ŒESP8266æ˜¯3.3Vä¾›ç”µï¼ŒVCCéœ€è¦æ¥3.3Vã€‚å¦‚æœå…¶ä»–å•ç‰‡æœºæ˜¯5Vä¾›ç”µï¼ŒESPçš„RXå¼•è„šéœ€è¦åˆ†å‹ä¹‹åè¿æ¥å…¶ä»–å•ç‰‡æœºçš„TXï¼Œå¦åˆ™è¿›å…¥ESPçš„5Vç”µå‹ä¼šçƒ§åèŠ¯ç‰‡ã€‚ESPçš„TXåˆ™ä¸ç”¨åˆ†å‹ã€‚ ä¸‹å›¾ä¸ºESPè¿æ¥Arduino Nanoçš„æ¥çº¿å›¾ï¼Œé€”ä¸­ï¼ŒESP RXå¼•è„šï¼Œé€šè¿‡1Kå’Œ2Kçš„ç”µé˜»åˆ†å‹ï¼Œå…¶å®ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ESP TXå¼•è„šå’Œå•ç‰‡æœºRXå¼•è„šä¹‹é—´è¿æ¥ä¸€ä¸ª550å·¦å³çš„ç”µé˜»ã€‚ 9ï¼šå‚è€ƒèµ„æ–™ã€Šä¹é‘«ESP8266çƒ§å½•å›ºä»¶ã€å‡çº§æœ€æ–°å›ºä»¶ã€åˆ·MQTTå›ºä»¶ã€‹ ã€ŠESP8266 WIFIæ¨¡å—å¸¸ç”¨ATæŒ‡ä»¤æ±‡æ€»ã€‹ ã€ŠArduinoå®‰è£…ESP8266çš„å¼€å‘ç¯å¢ƒã€‹ ã€ŠESP8266 JSONè§£æã€‹ ã€Šç‰©è”ç½‘å¼€å‘å®ç”¨çŸ¥è¯† â€“ æŸ¥çœ‹ç½‘ç«™è¯ä¹¦æŒ‡çº¹ã€‹ ã€ŠESP8266 Deep Sleep with Arduino IDE (NodeMCU)ã€‹","categories":[{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://sci.ci/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"}],"tags":[{"name":"ESP8266","slug":"ESP8266","permalink":"https://sci.ci/tags/ESP8266/"}]},{"title":"åŸºäºESP8266WIFIæ¨¡å—å’ŒMPU6050ä¼ æ„Ÿå™¨åœ¨Arduinoä¸Šå¼€å‘æ™ºèƒ½ä¿¡ç®±","slug":"åŸºäºESP8266WIFIæ¨¡å—å’ŒMPU6050åŠ é€Ÿåº¦è®¡åœ¨Arduinoä¸Šå¼€å‘æ™ºèƒ½ä¿¡ç®±","date":"2020-11-24T15:37:07.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/11/24/åŸºäºESP8266WIFIæ¨¡å—å’ŒMPU6050åŠ é€Ÿåº¦è®¡åœ¨Arduinoä¸Šå¼€å‘æ™ºèƒ½ä¿¡ç®±/","link":"","permalink":"https://sci.ci/2020/11/24/%E5%9F%BA%E4%BA%8EESP8266WIFI%E6%A8%A1%E5%9D%97%E5%92%8CMPU6050%E5%8A%A0%E9%80%9F%E5%BA%A6%E8%AE%A1%E5%9C%A8Arduino%E4%B8%8A%E5%BC%80%E5%8F%91%E6%99%BA%E8%83%BD%E4%BF%A1%E7%AE%B1/","excerpt":"","text":"1ï¼šå¼€ç¯‡åœ¨å¾·å›½ï¼Œæ¯å®¶æ¯æˆ·éƒ½æœ‰ä¸€ä¸ªä¿¡ç®±ï¼Œå®¶åº­çš„ç”µæ°”æš–è´¦å•ï¼Œäº²äººçš„é—®å€™ï¼Œä¸ªäººçš„ä¿¡ä»¶éƒ½ä¼šè£…åˆ°è¿™ä¸ªå°å°çš„ç®±å­é‡Œã€‚ã€‚ç›¸è¾ƒäºé€è´§åˆ°äººçš„å¿«é€’ï¼Œä¿¡ä»¶å¾€å¾€è¢«æˆ‘ä»¬æ‰€å¿½ç•¥ï¼Œå¸¸å®…åœ¨å®¶çš„æˆ‘ï¼Œä¸€ä¸¤ä¸ªæ˜ŸæœŸæ‰ä¼šæ£€æŸ¥ä¸€æ¬¡ä¿¡ç®±ã€‚è™½ç„¶ä¿¡ä»¶é€šå¸¸ä¸é‡è¦ï¼Œä½†æ£€æŸ¥ä¿¡ç®±è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦ã€‚äºæ˜¯ï¼Œæˆ‘è®¾è®¡äº†ä¸€ä¸ªå°å°çš„æ¨¡å—ï¼Œè®©å®ƒä»£æ›¿æˆ‘æ£€æŸ¥ä¿¡ç®±ï¼Œæ¯å½“æœ‰æ–°çš„ä¿¡ä»¶è¿›å…¥ä¿¡ç®±ï¼Œå®ƒå°±å‘é€ä¸€æ¡å¾®ä¿¡æ¶ˆæ¯ï¼Œæé†’æˆ‘å–ä¿¡ä»¶ã€‚ 1.1 ESP8266-01 Wifiæ¨¡å—wifiæ¨¡å—æ˜¯ç‰©è”ç½‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œé€šè¿‡å®ƒè¿ä¸Šå®¶é‡Œçš„wifiï¼Œå‘ç½‘ç»œå‘é€è¯·æ±‚ã€‚è°ƒç”¨ä¼ä¸šå¾®ä¿¡apiï¼Œæ¥å‘é€å¾®ä¿¡æ¶ˆæ¯ã€‚ ESP8266é€šè¿‡ä¸²å£é€šä¿¡ä¸Arduinoå•ç‰‡æœºé€šä¿¡ï¼Œç”±3.3Vç›´æµç”µå‹ä¾›ç”µã€‚ 1.2 GY-521æ¨¡å—GY-521æŒ‡å›´ç»•MPU6050èŠ¯ç‰‡æ‰€è®¾è®¡çš„ç”µè·¯æ¿ã€‚ MPU6050èŠ¯ç‰‡é›†æˆäº†åŠ é€Ÿåº¦è®¡ã€é™€èºä»ªã€æ¸©åº¦ä¼ æ„Ÿå™¨ã€‚é€šè¿‡i2cä¸Arduinoå•ç‰‡æœºé€šä¿¡ã€‚å·¥ä½œç”µå‹ä¸º5Vã€‚ ä½¿ç”¨MPU6050æ£€æµ‹ä¿¡ç®±å£çš„è¿åŠ¨çŠ¶æ€ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æ–°çš„ä¿¡ä»¶æŠ•å…¥ã€‚ 1.3 ArduinoArduinoæ˜¯ç›®å‰éå¸¸ç«çš„å¼€æºå•ç‰‡æœºï¼Œå…¶å‘¨è¾¹å¼€å‘æ¿å¤§å¤šå¼€æºï¼Œå› æ­¤ï¼Œä¸€å—Arduinoå¼€å‘æ¿ä»·æ ¼éå¸¸ä¾¿å®œï¼ŒArduino pro miniä»…åå—é’±ã€‚æˆ‘é‡‡ç”¨çš„æ˜¯Arduino nanoã€‚å…¶å¸¦æœ‰usbæ¥å£ï¼Œæ¯”è¾ƒæ–¹ä¾¿è°ƒè¯•ã€‚ä½†æ˜¯è€—ç”µä¼šæ¯”pro minié«˜ã€‚ åœ¨æŠ•å…¥ä½¿ç”¨æ—¶ï¼Œè€ƒè™‘åˆ°ç”µæ± ä¼˜åŒ–ï¼Œå»ºè®®ä½¿ç”¨pro miniã€‚è¿™æ ·æ•´ä¸ªç³»ç»Ÿçš„è¿è¡Œæ—¶é•¿ä¼šæ›´ä¹…ã€‚ æ­¤å¤–ï¼ŒArduinoæ‹¥æœ‰åºå¤§çš„ç¤¾åŒºï¼Œå¤§éƒ¨åˆ†ä¼ æ„Ÿå™¨æ¨¡å—éƒ½æœ‰å…¶é€‚é…æ”¯æŒçš„å¼€æºåº“ã€‚å¼€å‘æ›´åŠ å®¹æ˜“ï¼Œä¸”ä¸ç”¨èŠ±è´¹å¤§é‡æ—¶é—´é˜…è¯»ç¡¬ä»¶è¯´æ˜ä¹¦ã€‚å¯¹äºè¿½æ±‚æ€§èƒ½ä¼˜åŒ–è€Œä¸æ˜¯ä»…åŠŸèƒ½å®è·µçš„äººæ¥è¯´ï¼Œè¿˜æ˜¯æœ‰å¿…è¦é˜…è¯»ä¼ æ„Ÿå™¨æ•°æ®æ‰‹å†Œçš„ã€‚ Arduinoç”¨äºæ¥æ”¶ä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œå¹¶å¤„ç†è®¡ç®—ï¼Œåˆ¤æ–­æ˜¯å¦ä¿¡ç®±å£æœ‰åŠ¨ä½œï¼Œå¦‚æœæœ‰ï¼Œåˆ™é€šè¿‡wifiæ¨¡å—å‘é€å¾®ä¿¡ã€‚ 2ï¼šç”µè·¯è®¾è®¡è¿™é‡Œåªæ˜¯ç®€å•çš„ç”»äº†ä¸€ä¸ªç”µè·¯è®¾è®¡å›¾ï¼Œå› ä¸ºä¸éœ€è¦å†å»åˆ¶ä½œPCBæ¿ï¼Œä¹Ÿå°±ä¸ç”¨è®¾è®¡PCBæ¿å›¾ã€‚åªè¦è´­ä¹°ç›¸åº”çš„æ¨¡å—ï¼Œç„¶åå¯¹ç…§ç”µè·¯å›¾è¿çº¿å³å¯ã€‚ é¢åŒ…æ¿å›¾ 2.1 ç”µæºè®¾è®¡ 5Vç”µæº é€šè¿‡4ä¸ªAAç”µæ± ä¸²è”ï¼Œè·å¾—ä¸€ä¸ª4x1.5Vçš„ç›´æµç”µï¼Œç†è®ºç”µå‹ä¸º6Vï¼Œè€Œå®é™…ä¸Šéƒ½ä¼šå°äº6Vã€‚å› ä¸ºå•ç‰‡æœºä¾›ç”µè¦æ±‚åœ¨4.5~5.5Vä¹‹é—´ï¼Œå¦‚æœ‰å¿…è¦å¯åœ¨ç”µæ± æ­£ææ¥ä¸€ä¸ªç¨³å‹äºŒæç®¡ã€‚ç¨³å‹äºŒæç®¡ç”±ç¡…ææ–™åˆ¶æˆï¼Œå…¶æ­£å‘å¯¼é€šæ—¶ï¼Œåœ¨PNç»“ä¹‹é—´äº§ç”Ÿä¸€ä¸ª0.7Vå·¦å³çš„å‹é™ã€‚å› æ­¤ä»ç¨³å‹äºŒæç®¡è¾“å‡ºçš„ç”µå‹å°±èƒ½å¤Ÿæ»¡è¶³å•ç‰‡æœºä¾›ç”µéœ€æ±‚ã€‚æˆ‘ç›´æ¥è¿æ¥VCCä¾›ç”µæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨9~12Vçš„ç”µæºè¿æ¥VINæ¥å£ä¾›ç”µï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨å……ç”µå®ï¼Œé€šè¿‡usbæ¥å£ä¾›ç”µã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œusbä¾›ç”µä¼šé¢å¤–å¢åŠ ç”µèƒ½æŸè€—ã€‚ 3V3ç”µæº ESP8266æ¨¡å—ä½¿ç”¨3V3ç”µæºï¼Œ4ä¸ªå¹²ç”µæ± ï¼Œæ— æ³•æä¾›3Vç”µæºï¼Œä½¿ç”¨LM1117-3.3èŠ¯ç‰‡å°†5Vé™å‹ä¸º3Vã€‚è¾“å…¥å’Œè¾“å‡ºå£å„åŠ ä¸€ä¸ª2.2uFçš„ç”µå®¹ï¼Œç”¨äºç¨³å‹ã€‚ 2.2 å„æ¨¡å—æ¥çº¿GY521æ¨¡å—SCLã€SDAåˆ†åˆ«ä¸ºI2Cçš„æ—¶é’Ÿå’Œæ•°æ®æ€»çº¿ï¼Œä¸ArduinoSCLå’ŒSDAç›¸è¿ã€‚GY521 Intå¼•è„šæ¥Arduino D2(INT0)å¼•è„šã€‚ Arduino D6å¼•è„šï¼Œè¾“å‡ºæ§åˆ¶ç”µå¹³ï¼Œé€šè¿‡ä¸€ä¸ªç¨³å‹äºŒæç®¡ï¼Œå°†5Vé«˜ç”µå¹³è½¬3Vé«˜ç”µå¹³ã€‚ 3ï¼šç¨‹åºè®¾è®¡3.1 wifiæ¨¡å—å½“WIFIæ¨¡å—å¯åŠ¨æ—¶ï¼Œä¼šå‘é€ä¸€æ¡å¾®ä¿¡æ¶ˆæ¯ã€‚ç„¶åè¿›å…¥ç¡çœ ï¼Œå½“RSTå¼•è„šæ¥æ”¶åˆ°ä½ç”µå¹³-&gt;é«˜ç”µå¹³æ—¶ï¼ŒWIFIæ¨¡å—å°†è¢«å”¤é†’ã€‚ æˆ‘çŒœæµ‹æˆ‘çš„WIFIæ¨¡å—æ˜¯å­˜åœ¨æŸç§é—®é¢˜çš„ï¼Œå½“å®ƒè¢«å”¤é†’æ—¶ï¼Œå¹¶ä¸ä¼šè¿›è¡Œè¿è¡Œloopä¸­çš„å†…å®¹ï¼Œè€Œæ˜¯è¿›è¡Œäº†æœªçŸ¥æ“ä½œã€‚å› æ­¤ï¼Œæˆ‘åœ¨Arduinoä¸­ä¸å¾—ä¸ï¼Œå‘RSTå¼•è„šå‘å‡ºä¸¤æ¬¡ä½ç”µå¹³ï¼Œç¬¬ä¸€æ¬¡ç”¨äºæ¿€æ´»WIFIæ¨¡å—ï¼Œç¬¬äºŒæ¬¡é‡ç½®WIFIæ¨¡å—ï¼Œå› ä¸ºå®ƒé‡å¯çš„æ—¶å€™ï¼Œå°±ä¼šå‘é€ä¸€æ¡å¾®ä¿¡æ¶ˆæ¯ã€‚æ‰€ä»¥ä¹Ÿèƒ½å®ç°æ—¢å®šåŠŸèƒ½ã€‚ ESP8266å‘é€httpsè¯·æ±‚æ—¶ï¼Œä¸ä¼šè‡ªåŠ¨è·å–æœåŠ¡å™¨è¯ä¹¦ï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±ä»æœåŠ¡å™¨å»è·å–ï¼Œå¯ä»¥ç›´æ¥ä»æµè§ˆå™¨æ‹·è´ä¸‹æ¥ã€‚è¿™é‡Œæ²¡æœ‰ä½¿ç”¨è¯ä¹¦ï¼Œè€Œæ˜¯æŒ‡çº¹ï¼Œä½œç”¨ç›¸åŒã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142#include &lt;Arduino.h&gt;#include &lt;ESP8266WiFi.h&gt;#include &lt;ESP8266HTTPClient.h&gt;#include &lt;WiFiClientSecureBearSSL.h&gt;#include &lt;ArduinoJson.h&gt;//WiFiè¿æ¥ä¿¡æ¯ï¼ˆæ³¨æ„ï¼šéœ€è¦è‡ªè¡Œä¿®æ”¹ä»¥ä¸‹å†…å®¹å¦åˆ™ESP8266æ— æ³•è¿æ¥WiFiï¼‰#define ssid &quot;SSIDU&quot; //WiFiåç§° #define password &quot;Password&quot; //WiFiå¯†ç //https://qyapi.weixin.qq.comæœåŠ¡å™¨çš„æŒ‡çº¹const char fingerprint[] PROGMEM = &quot;790e6e32485bb89503ac6da87d948f5e634322a7&quot;;//HTTPSç«¯å£443const int httpsPort = 443; // ä¼ä¸šå¾®ä¿¡apiç›¸å…³String tokenUrl = &quot;https://qyapi.weixin.qq.com/cgi-bin/gettoken&quot;;String sendMsgUrl = &quot;https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=&quot;;String corpid = &quot;ww98b********d&quot;;String corpsecret = &quot;Kh8eKMZ**********wzQoPb0SYCqV3Tgcs&quot;;String agentid = &quot;1000002&quot;;//å‘èµ·Httpsè¯·æ±‚//è·å–ä¼ä¸šå¾®ä¿¡access_tokenString get_token()&#123; String token = &quot;123&quot;; String requestUrl = tokenUrl + &quot;?corpid=&quot;+corpid+&quot;&amp;corpsecret=&quot;+corpsecret; std::unique_ptr&lt;BearSSL::WiFiClientSecure&gt;client(new BearSSL::WiFiClientSecure); client-&gt;setFingerprint(fingerprint); HTTPClient https; if (https.begin(*client, requestUrl)) &#123; // HTTPS Serial.print(&quot;[HTTPS] GET...\\n&quot;); // start connection and send HTTP header int httpCode = https.GET(); // httpCode will be negative on error if (httpCode &gt; 0) &#123; // HTTP header has been send and Server response header has been handled Serial.printf(&quot;[HTTPS] GET... code: %d\\n&quot;, httpCode); // file found at server if (httpCode == HTTP_CODE_OK || httpCode == HTTP_CODE_MOVED_PERMANENTLY) &#123; String json = https.getString(); Serial.println(json); // åˆ›å»ºDynamicJsonDocumentå¯¹è±¡ï¼Œjsonä¸­çš„å‚æ•°ä¸º4ä¸ªã€‚ const size_t capacity = JSON_OBJECT_SIZE(4) + 290; DynamicJsonDocument doc(capacity); //ååºåˆ—åŒ–æ•°æ® deserializeJson(doc, json); if(doc[&quot;errcode&quot;].as&lt;int&gt;()==0)&#123; token = doc[&quot;access_token&quot;].as&lt;String&gt;(); &#125; &#125; &#125; else &#123; Serial.printf(&quot;[HTTPS] GET... failed, error: %s\\n&quot;, https.errorToString(httpCode).c_str()); &#125; https.end(); &#125; else &#123; Serial.printf(&quot;[HTTPS] Unable to connect\\n&quot;); &#125; return token;&#125; //è°ƒç”¨ä¼ä¸šå¾®ä¿¡apiï¼Œå‘é€ä¿¡æ¯ã€‚ void send_msg(String msg)&#123; //è°ƒç”¨get_tokenå‡½æ•°ï¼Œè·å–token String token = get_token(); //token=123è¡¨ç¤ºget_token()å‡½æ•°è¯·æ±‚tokenå¤±è´¥ã€‚ //å¦‚æœå¤±è´¥ï¼Œå¯èƒ½è¿˜éœ€è¦å…¶ä»–æ­¥éª¤ï¼Œæ¯”å¦‚é‡æ–°è·å–ã€‚è¿™é‡Œæ²¡æœ‰å®Œå–„ã€‚ if (token == &quot;123&quot;)&#123; Serial.println(&quot;not get token&quot;); return; &#125;else&#123; Serial.println(&quot;got token&quot;); &#125; //æ„é€ è¯·æ±‚url String requestUrl = sendMsgUrl + token; std::unique_ptr&lt;BearSSL::WiFiClientSecure&gt;client(new BearSSL::WiFiClientSecure); client-&gt;setFingerprint(fingerprint); HTTPClient httpClient; httpClient.addHeader(&quot;Content-Type&quot;,&quot;application/json&quot;); //ä¸å¾®ä¿¡æœåŠ¡å™¨å»ºç«‹è¿æ¥ httpClient.begin(*client,requestUrl); //æ„å»ºjsonæ•°æ®ï¼Œç”¨äºå‘é€è¯·æ±‚å†…å®¹ String json = &quot;&#123;\\&quot;touser\\&quot;:\\&quot;@all\\&quot;,\\&quot;msgtype\\&quot;:\\&quot;text\\&quot;,\\&quot;agentid\\&quot;:1000002,\\&quot;text\\&quot;:&#123;\\&quot;content\\&quot;:\\&quot;&quot;+msg+&quot;\\&quot;&#125;,\\&quot;safe\\&quot;:0,\\&quot;enable_id_trans\\&quot;:0,\\&quot;enable_duplicate_check\\&quot;:0,\\&quot;duplicate_check_interval\\&quot;:1800&#125;&quot;; //å‘é€è¯·æ±‚å†…å®¹ Serial.println(json); int httpCode = httpClient.POST(json); //æœªå®Œå–„ï¼Œå¯èƒ½å‘é€è¯·æ±‚æˆåŠŸï¼Œä½†apiè°ƒç”¨å¤±è´¥ï¼Œåç»­å®Œå–„ã€‚ if (httpCode &gt; 0) &#123; //å°†æœåŠ¡å™¨å“åº”å¤´æ‰“å°åˆ°ä¸²å£ Serial.println(&quot;[HTTP] POST... code:&quot;+ httpCode); //å°†ä»æœåŠ¡å™¨è·å–çš„æ•°æ®æ‰“å°åˆ°ä¸²å£ if (httpCode == HTTP_CODE_OK) &#123; Serial.println(&quot;Send success&quot;); Serial.println(&quot;return str:&quot;+httpClient.getString()); &#125; &#125; else &#123; Serial.println(&quot;send failure&quot;); &#125; //å…³é—­ESP8266ä¸æœåŠ¡å™¨è¿æ¥ httpClient.end(); &#125;//Wifi initvoid wifi_init()&#123; WiFi.mode(WIFI_STA); //è®¾ç½®ESP8266ä¸ºæ— çº¿ç»ˆç«¯å·¥ä½œæ¨¡å¼ WiFi.begin(ssid, password); //è¿æ¥WiFi Serial.println(&quot;&quot;); Serial.println(&quot;Connecting&quot;); Serial.println(&quot;&quot;); // ç­‰å¾…è¿æ¥ while (WiFi.status() != WL_CONNECTED) &#123; delay(500); Serial.print(&quot;.&quot;); &#125; //æˆåŠŸè¿æ¥åé€šè¿‡ä¸²å£ç›‘è§†å™¨æ˜¾ç¤ºWiFiåç§°ä»¥åŠESP8266çš„IPåœ°å€ã€‚ Serial.println(&quot;&quot;); Serial.print(&quot;Connected to &quot;); Serial.println(ssid); Serial.print(&quot;IP address: &quot;); Serial.println(WiFi.localIP()); &#125;void setup() &#123; Serial.begin(9600); wifi_init();&#125;void loop() &#123; send_msg(&quot;ä½ æœ‰ä¸€å°æ–°ä¿¡ä»¶ï¼Œè¯·åŠæ—¶æå–ï¼&quot;); delay(3000); ESP.deepSleep(0);&#125; 3.2 Arduinoå’ŒGY521åœ¨è¿™é‡Œï¼ŒArduinoä¼šå¯¹MPU6050èŠ¯ç‰‡è¿›è¡Œåˆå§‹åŒ–è®¾ç½®ï¼Œç„¶åè¿›å…¥ç¡çœ æ¨¡å¼ã€‚åœ¨MPUä¸­ï¼Œæˆ‘ä»¬å°†é™¤äº†Zè½´åŠ é€Ÿåº¦é‡‡æ ·ä»¥å¤–çš„æ‰€æœ‰æ£€æµ‹æ¨¡å—éƒ½å…³é—­ï¼Œä»¥æé«˜ç”µæ± çš„æŒä¹…åŠ›ã€‚å¹¶å½“Zè½´æ£€æµ‹åˆ°å¤§äºé˜ˆå€¼çš„è¿åŠ¨æ—¶ï¼Œäº§ç”Ÿè¿åŠ¨ä¸­æ–­ï¼Œä¸­æ–­å°†GY521çš„INTå¼•è„šæ‹‰ä½ï¼ŒINTå¼•è„šè¿æ¥Arduino INT0å¼•è„šä¹Ÿå°±æ˜¯2å·å¼•è„šï¼ŒArduinoå°†åœ¨ä¸­æ–­å‘ç”Ÿæ—¶è¢«å”¤é†’ã€‚å”¤é†’åçš„Arduinoï¼Œé€šè¿‡6å·å¼•è„šï¼Œå‘ESPwifiæ¨¡å—çš„RSTå‘é€ä¸¤ä¸ªä½ç”µå¹³è„‰å†²ï¼Œç”¨äºæ¿€æ´»å¹¶é‡ç½®ESPã€‚ MPU6050æ˜¯æä¾›ä¸€äº›ä½ç”µå¹³æ–¹æ¡ˆçš„ï¼Œæ¯”å¦‚CYCLEæ¨¡å¼ï¼Œæ­¤æ¨¡å¼ä¸‹å¯ä»¥è®¾ç½®MPUçš„é‡‡æ ·é¢‘ç‡ï¼Œæœ€ä½å¯è¾¾1.25Hzï¼Œä½†è®¾ç½®æ­¤æ¨¡å¼ï¼ŒMPU6050çš„è¿åŠ¨æ£€æµ‹åŠŸèƒ½å°†å—é™ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117#include &lt;MPU6050.h&gt;#include &quot;Wire.h&quot;#include &lt;avr/sleep.h&gt;//å®šä¹‰Arduinoå¼•è„šï¼Œ2å·ä¸ºä¸­æ–­å¼•è„šï¼Œå½“2å·å¼•è„šè¾“å…¥ä½ç”µå¹³ï¼ŒArduinoä»ç¡çœ è¢«å”¤é†’//6å·å¼•è„šä¸ºè¾“å‡ºï¼Œå½“6å·è¾“å‡ºä½ç”µå¹³ï¼ŒESP8266æ¨¡å—è¢«æ¿€æ´»ã€‚#define INTERRUPT_PIN 2#define ESP_ACTIVATE_PIN 6#define MPU6050_ADDRESS 0x68#define SIGNAL_PATH_RESET 0x68#define INT_PIN_CFG 0x37#define ACCEL_CONFIG 0x1C#define MOT_THR 0x1F // Motion detection threshold bits [7:0]#define MOT_DUR 0x20 // Duration counter threshold for motion interrupt generation, 1 kHz rate, LSB = 1 ms#define MOT_DETECT_CTRL 0x69#define INT_ENABLE 0x38#define WHO_AM_I_MPU6050 0x75 // Should return 0x68#define INT_STATUS 0x3AMPU6050 mpu;void mpu6050_init()&#123; Wire.begin();//å¼€å¯i2cé€šè®¯ mpu.initialize(); //ç”µæºç®¡ç†ï¼Œå°†é™€èºä»ªå…¨éƒ¨å…³é—­ï¼Œåªç•™zè½´åŠ é€Ÿåº¦ //å¦‚æœå…¨éƒ¨è®¾ç½®ä¸ºå¾…æœºï¼Œè¿åŠ¨æ£€æµ‹ä¸­æ–­å°†æ— æ³•å·¥ä½œ mpu.setStandbyXAccelEnabled(true); mpu.setStandbyXGyroEnabled(true); mpu.setStandbyYAccelEnabled(true); mpu.setStandbyYGyroEnabled(true); mpu.setStandbyZAccelEnabled(false);//ä¿æŒzè½´åŠ é€Ÿåº¦æ£€æµ‹æ´»è·ƒ mpu.setStandbyZGyroEnabled(true); //å…³é—­æ¸©åº¦ä¼ æ„Ÿå™¨ mpu.setTempSensorEnabled(false); // mpu.setAccelerometerPowerOnDelay(3);//è®¾ç½®åŠ é€Ÿåº¦è®¡å¼€æœºå»¶è¿Ÿ mpu.setInterruptMode(true); // ä¸­æ–­æ—¶ä¸­æ–­å¼•è„šå‘å‡ºä½ç”µå¹³ mpu.setIntZeroMotionEnabled(false);//å…³é—­é›¶è¿åŠ¨ä¸­æ–­æ£€æµ‹ mpu.setIntMotionEnabled(true); // è¿åŠ¨æ£€æµ‹ä¸­æ–­ä½¿èƒ½ mpu.setInterruptLatch(true); // ç”µå¹³ä¿æŒï¼Œç›´åˆ°æ¸…é™¤ mpu.setInterruptLatchClear(false);//æ¸…é™¤ä¸­æ–­å¼•è„šç”µå¹³çš„æ–¹æ³•ï¼Œfalseè¡¨ç¤ºåªæœ‰è¯»å–statuså¯„å­˜å™¨æ‰èƒ½æ¸…é™¤ï¼Œtrueè¯»å–ä»»æ„å¯„å­˜å™¨éƒ½å¯ä»¥æ¸…é™¤ã€‚ mpu.setMotionDetectionThreshold(2);//æ£€æµ‹é˜ˆå€¼ï¼Œé˜ˆå€¼è¶Šå¤§ï¼Œéœ€è¦çš„éœ‡åŠ¨è¶Šå¤§ï¼Œæ‰èƒ½äº§ç”Ÿä¸­æ–­ï¼Œå•ä½mg mpu.setMotionDetectionDuration(20);//è¿åŠ¨æŒç»­çš„æ—¶é•¿ï¼Œè¶Šå¤§ï¼Œåˆ™è¿åŠ¨éœ€è¦æŒç»­è¶Šä¹…ï¼Œæ‰èƒ½äº§ç”Ÿä¸­æ–­ã€‚å•ä½ms mpu.setMotionDetectionCounterDecrement(1); //Write register 28 (==0x1C) to set the Digital High Pass Filter, bits 3:0. For example set it to 0x01 for 5Hz. (These 3 bits are grey in the data sheet, but they are used! Leaving them 0 means the filter always outputs 0.) writeByte(MPU6050_ADDRESS, ACCEL_CONFIG, 0x01); Serial.println(&quot;MPU init finish&quot;);&#125;void sleepNow() &#123; set_sleep_mode(SLEEP_MODE_PWR_DOWN);//è®¾ç½®Arduinoç¡çœ æ¨¡å¼ä¸ºpower down sleep_enable(); //ä½¿èƒ½ç¡çœ  delay(500); Serial.println(&quot;now sleep!&quot;); delay(2000); Serial.println(&quot;Interrupt attached!&quot;); attachInterrupt(0, wakeUp,LOW);//å¼€å¯ä¸­æ–­ï¼Œ0è¡¨ç¤ºINT0ï¼Œå¯¹åº”2å·å¼•è„šï¼ŒwakeUPæ˜¯ä¸­æ–­å‘ç”Ÿæ—¶çš„å¤„ç†å‡½æ•°ï¼ŒLOWï¼š2å·å¼•è„šä½ç”µå¹³æ—¶è§¦å‘ delay(500); delay(500); sleep_cpu(); //è¿›å…¥ç¡çœ &#125;//ä¸­æ–­å¤„ç†å‡½æ•°void wakeUp() &#123; detachInterrupt(0);//æ¸…é™¤ä¸­æ–­ï¼Œé˜²æ­¢ä¸­æ–­å¤„ç†è¿‡ç¨‹ä¸­ï¼Œå†æ¬¡è¿›å…¥ä¸­æ–­ sleep_disable();//æ¥è§¦ç¡çœ æ¨¡å¼ digitalWrite(ESP_ACTIVATE_PIN,LOW);//è®¾ç½®æ¿€æ´»å¼•è„šä¸ºä½ç”µå¹³ï¼Œç”¨äºæ¿€æ´»èŠ¯ç‰‡ Serial.println(&quot;wake up! reset esp&quot;);&#125;//I2cé€šè®¯ï¼Œå†™å…¥ä¸€ä¸ªå­—èŠ‚åˆ°å¯„å­˜å™¨void writeByte(uint8_t address, uint8_t subAddress, uint8_t data) &#123; Wire.begin(); Wire.beginTransmission(address); // Initialize the Tx buffer Wire.write(subAddress); // Put slave register address in Tx buffer Wire.write(data); // Put data in Tx buffer Wire.endTransmission(); // Send the Tx buffer&#125;//åˆå§‹ç”»arduinovoid arduino_init()&#123; Serial.begin(9600);//è®¾ç½®UARTé€šä¿¡æ³¢ç‰¹ç‡ï¼Œä½¿ç”¨ä¸²å£æ¥æ”¶ã€‚ pinMode(INTERRUPT_PIN,INPUT);//è®¾ç½®INT0ï¼Œå³2å·å¼•è„šä¸ºè¾“å…¥ï¼Œç¡®ä¿åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¼•è„šä¸Šæœ‰é«˜ç”µå¹³ã€‚ pinMode(ESP_ACTIVATE_PIN,OUTPUT);//è®¾ç½®6å·å¼•è„šä¸ºè¾“å‡ºï¼Œç”¨äºæ¿€æ´»ESPæ¨¡å— digitalWrite(ESP_ACTIVATE_PIN,HIGH);//è®¾ç½®è¾“å‡ºä¸ºé«˜ç”µå¹³ï¼ŒESPçš„RESETå¼•è„šä»¥ä½ç”µå¹³æ¿€æ´»æˆ–é‡ç½®èŠ¯ç‰‡ã€‚ Serial.println(&quot;arduino init finish!&quot;);&#125;void setup()&#123; arduino_init(); mpu6050_init();&#125;void loop()&#123; sleepNow();//è¿›å…¥ç¡çœ  int16_t zAccel = mpu.getAccelerationZ(); Serial.println(zAccel); bool detect = mpu.getIntMotionStatus();//è¯»å–ä¸­æ–­çŠ¶æ€ï¼Œä»¥æ¸…é™¤ä¸­æ–­å¼•è„šç”µå¹³ã€‚ä¸æ¸…é™¤ï¼ŒMPUä¸­æ–­å¼•è„šä¼šä¸€ç›´ä¿æŒä½ç”µå¹³ã€‚ Serial.println(detect); //åœ¨ä¸­æ–­å‡½æ•°ä¸­ï¼Œå‘é€äº†ä¸€ä¸ªä½ç”µå¹³æ¿€æ´»èŠ¯ç‰‡ï¼Œåœ¨è¿™é‡Œå†å‘é€ä¸€ä¸ªä½ç”µå¹³ï¼Œç”¨äºé‡ç½®èŠ¯ç‰‡ã€‚æœ€åå›åˆ°é«˜ç”µå¹³ã€‚ //ä¸èƒ½å†ä¸­æ–­å‡½æ•°ä¸­ï¼Œå‘é€ä¸¤ä¸ªç”µå¹³ï¼Œå› ä¸ºä¸­æ–­å‡½æ•°ä¸­æ— æ³•ä½¿ç”¨delay()æ–¹æ³•ã€‚è€Œä½ç”µå¹³å¿…é¡»ä¿æŒä¸€å®šæ—¶é—´æ‰èƒ½æ¿€æ´»ESPã€‚ delay(500); digitalWrite(ESP_ACTIVATE_PIN,HIGH); delay(500); digitalWrite(ESP_ACTIVATE_PIN,LOW); Serial.println(&quot;rest esp&quot;); delay(500); digitalWrite(ESP_ACTIVATE_PIN,HIGH); delay(1000);&#125;","categories":[{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://sci.ci/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"}],"tags":[{"name":"Arduino","slug":"Arduino","permalink":"https://sci.ci/tags/Arduino/"},{"name":"ESP8266","slug":"ESP8266","permalink":"https://sci.ci/tags/ESP8266/"},{"name":"MPU6050","slug":"MPU6050","permalink":"https://sci.ci/tags/MPU6050/"}]},{"title":"äººå·¥æ™ºèƒ½â€”â€”æ¿€æ´»å‡½æ•°","slug":"äººå·¥æ™ºèƒ½â€”â€”æ¿€æ´»å‡½æ•°","date":"2020-11-15T02:00:48.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/11/15/äººå·¥æ™ºèƒ½â€”â€”æ¿€æ´»å‡½æ•°/","link":"","permalink":"https://sci.ci/2020/11/15/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E2%80%94%E2%80%94%E6%BF%80%E6%B4%BB%E5%87%BD%E6%95%B0/","excerpt":"","text":"1ï¼šä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•° ä»¥ä¸€ä¸ªç®€å•çš„ç¥ç»å…ƒä¸ºä¾‹ã€‚åœ¨æ²¡æœ‰æ¿€æ´»å‡½æ•°æ—¶ï¼Œç¥ç»å…ƒè¾“å‡ºzç­‰äº$z=x_1w_1+x_2w_2+x_3w_3+b$ è€Œæ¿€æ´»å‡½æ•°å°†zä½œä¸ºè¾“å…¥ï¼Œå¾—åˆ°æ–°çš„ç¥ç»å…ƒè¾“å‡º$f(z)$ è¿™é‡Œçš„$f(z)$å³æ¿€æ´»å‡½æ•°ã€‚æ¿€æ´»å‡½æ•°çš„ä¸»è¦ä½œç”¨æ˜¯ä½¿è¾“å‡ºéçº¿æ€§åŒ–ï¼Œå³æ›²çº¿åŒ–æˆ–è€…åˆ†æ®µåŒ–ï¼ˆå¯¹åº”åˆ†æ®µå‡½æ•°ï¼‰ã€‚ 2ï¼šä¸ºä»€ä¹ˆè¦æ¿€æ´»å‡½æ•°ä»$z=x_1w_1+x_2w_2+x_3w_3+b$ä¸éš¾çœ‹å‡ºï¼Œåœ¨æ²¡æœ‰æ¿€æ´»å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬çš„ç¥ç»å…ƒè¾“å‡ºï¼Œæ€»æ˜¯ä¸è¾“å…¥$x_1,x_2,x_3$æˆçº¿æ€§å…³ç³»ã€‚ã€‚ ç®€å•ç‚¹çš„ä¾‹å­ï¼Œ$z = x_1*w+b$ã€‚ å¯ä»¥çŸ¥é“ï¼Œè¿™æ˜¯ä¸€æ¡ç›´çº¿ã€‚å¯ä»¥è§£å†³ä¸€ä¸ªç®€å•çš„äºŒåˆ†ç±»é—®é¢˜ã€‚ å¦‚æœè¿™ä¸ªäºŒåˆ†ç±»ä¸æ˜¯ç”¨ç›´çº¿åˆ†å‰²çš„å‘¢ï¼Ÿ æ¯”å¦‚ï¼Œä¸€ä¸ªåœ†å½¢ï¼Œåœ†å†…çš„ç‚¹æ˜¯1ï¼Œåœ†å¤–æ˜¯0ã€‚æˆ‘ä»¬ç”¨ç›´çº¿å°±å¾ˆéš¾å°†ä»–ä»¬åŒºåˆ†å¼€äº†ã€‚ å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ— æ•°æ¡å°çš„ç›´çº¿æ¥åˆ’åˆ†è¿™ä¸¤ä¸ªåŒºåŸŸï¼Œä½†æ˜¯å¯¹æ¯”ç›´æ¥ä½¿ç”¨æ›²çº¿ï¼Œå°±å¤æ‚å¤šäº†ã€‚ ä¸ºäº†è®©æˆ‘ä»¬çš„è¾“å‡ºå‡½æ•°ï¼Œç¬¦åˆéçº¿æ€§ç‰¹å¾ï¼Œå¼•å…¥äº†æ¿€æ´»å‡½æ•°çš„æ¦‚å¿µã€‚ 3ï¼šå“ªäº›æ¿€æ´»å‡½æ•° Sigmoidå‡½æ•° Sigmoidå‡½æ•°åªä¼šè¾“å‡º0åˆ°1ä¹‹é—´çš„æ­£æ•°ï¼Œå½“è¾“å…¥æ— ç©·å°æ—¶ï¼Œè¾“å‡ºä¸º0ï¼Œè¾“å…¥æ— ç©·å¤§æ—¶ï¼Œè¾“å‡ºä¸º1ã€‚ ç¼ºç‚¹ï¼š åŸºäºåå‘ä¼ æ’­ï¼ˆæ ¹æ®é“¾å¼æ±‚å¯¼æ³•åˆ™ï¼‰çš„å‚æ•°æ›´æ–°ï¼Œéšç€ç½‘ç»œå±‚æ•°çš„å¢åŠ ï¼Œwæ›´æ–°çš„æ¢¯åº¦ä¼šè¶Šæ¥è¶Šå°ï¼Œå¹¶é€æ¸æ¥è¿‘äºé›¶ã€‚ä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¢¯åº¦æ¶ˆå¤±ã€‚ ä¸‹å›¾æ˜¯é“¾å¼æ±‚å¯¼æ³•åˆ™æ±‚wæ¢¯åº¦çš„è¿‡ç¨‹ã€‚è¿™æ˜¯æŸä¸ªç¥ç»ç½‘ç»œä¸­çš„ä¸€éƒ¨åˆ†ç¥ç»å…ƒã€‚ å…¶ä¸­ï¼Œ$net_{o1}=h1w5+h2w6+b2$ $out_{o1}=Sigmoid(net_{o1})$ è¯¯å·®å‡½æ•°ä¸º$E_{o1}=\\frac{target-out_{o1}}{2}$ è·å¾—$w_5$æ›´æ–°æ‰€éœ€çš„æ¢¯åº¦å°±æ˜¯æ±‚$E_{o1}$å¯¹$w_5$æ±‚å¯¼ã€‚ æ ¹æ®é“¾å¼æ³•åˆ™ï¼Œ$$\\frac{\\partial E_{o1}}{\\part w_5} = \\frac{\\part E_{o1}}{\\part out_{o1}}* \\frac{\\part out_{o1}}{\\part net_{o1}}* \\frac{\\part net_{o1}}{\\part w_5}$$å…¶ä¸­$\\frac{\\part out_{o1}}{\\part net_{o1}}$å°±æ˜¯Sigmoidå‡½æ•°æ±‚å¯¼ã€‚ æ ¹æ®Sigmoidå‡½æ•°æ±‚å¯¼å…¬å¼ï¼Œ$$\\frac{\\part g(z)}{\\part z} = g(z)(1-g(z))$$ ä¸Šå¼ï¼Œ$g(z)$ä¸ºSigmoidå‡½æ•°ï¼Œå…¶å¯¼æ•°æœ€å¤§å€¼ä¸º0.25. å½“ç¥ç»å…ƒä¸ªæ•°é€æ¸å¢å¤šï¼Œå‰å‘wæ¢¯åº¦ï¼Œæ˜¯åå‘wæ¢¯åº¦åšé“¾å¼æ³•åˆ™çš„ç»“æœï¼Œé‚£ä¹ˆä¼šæœ‰è®¸å¤šä¸ª$gâ€™(z)$ç›¸ä¹˜ã€‚åˆ™ï¼Œå‰å‘wçš„æ¢¯åº¦ä¼šé€æ¸è¶‹è¿‘äº0ã€‚ tanhå‡½æ•° ç›¸æ¯”äºSigmodå‡½æ•°ï¼Œå…¶è¾“å‡ºå‡å€¼ä¸º0ã€‚ ç¼ºç‚¹ï¼š ä»ç„¶å­˜åœ¨æ¢¯åº¦æ¶ˆå¤±ç°è±¡ã€‚ Reluå‡½æ•° ç›®å‰æœ€å¸¸ç”¨çš„å‡½æ•°ï¼Œåªéœ€åˆ¤æ–­è¾“å…¥æ˜¯å¦å¤§äºé›¶ï¼Œå°äºé›¶çš„è¾“å…¥ï¼Œè¾“å‡ºä¸º0 4ï¼šå‚è€ƒèµ„æ–™ã€ŠCNNå…¥é—¨è®²è§£ï¼šä»€ä¹ˆæ˜¯æ¿€æ´»å‡½æ•°ï¼ˆActivation Functionï¼‰ã€‹ ã€Šå¸¸ç”¨æ¿€æ´»å‡½æ•°ï¼ˆæ¿€åŠ±å‡½æ•°ï¼‰ç†è§£ä¸æ€»ç»“ã€‹ ã€ŠBPï¼ˆåå‘ä¼ æ’­ç®—æ³•ï¼‰å…¬å¼æ¨å¯¼åŠä¾‹é¢˜è§£æã€‹ ã€Šsigmoidå‡½æ•°çš„æ±‚å¯¼ã€‹","categories":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://sci.ci/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"}],"tags":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://sci.ci/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"AI","slug":"AI","permalink":"https://sci.ci/tags/AI/"}]},{"title":"åŒ—å¤§äººå·¥æ™ºèƒ½å®è·µâ€”â€”TensorFlow2","slug":"åŒ—å¤§äººå·¥æ™ºèƒ½å®è·µâ€”â€”TensorFlow2","date":"2020-11-12T08:10:33.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/11/12/åŒ—å¤§äººå·¥æ™ºèƒ½å®è·µâ€”â€”TensorFlow2/","link":"","permalink":"https://sci.ci/2020/11/12/%E5%8C%97%E5%A4%A7%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD%E5%AE%9E%E8%B7%B5%E2%80%94%E2%80%94TensorFlow2/","excerpt":"","text":"1ï¼šäººå·¥æ™ºèƒ½ä¸‰å­¦æ´¾ å‡†å¤‡æ•°æ® æ­å»ºç½‘ç»œ ä¼˜åŒ–å‚æ•° åº”ç”¨ç½‘ç»œ 2ï¼šç¥ç»ç½‘ç»œè®¾è®¡è¿‡ç¨‹é¸¢å°¾èŠ±çš„åˆ†ç±»ï¼š é€šè¿‡æµ‹é‡èŠ±è¼é•¿ã€èŠ±è¼å®½ã€‚ ifè¯­å¥caseè¯­å¥â€”â€”ä¸“å®¶ç³»ç»ŸæŠŠä¸“å®¶çš„ç»éªŒå‘ŠçŸ¥è®¡ç®—æœºï¼Œè®¡ç®—æœºæ‰§è¡Œé€»è¾‘åˆ¤æ–­ã€‚ç»™å‡ºåˆ†ç±» ç¥ç»ç½‘ç»œï¼šé‡‡é›†å¤§é‡æ•°æ®å¯¹æ„æˆæ•°æ®é›†ã€‚ 3ï¼šå¼ é‡ç”Ÿæˆå¼ é‡ï¼ˆTensorï¼‰ï¼šå¤šç»´æ•°ç»„ï¼ˆåˆ—è¡¨ï¼‰ é˜¶ï¼šå¼ é‡çš„ç»´æ•° é˜¶ åå­— ä¾‹å­ 0 æ ‡é‡ S=1 2 3 1 å‘é‡ v=[1,2,3] 2 çŸ©é˜µ n å¼ é‡ åˆ›å»ºå¼ é‡ 1234a = tf.constan(å¼ é‡å†…å®¹,dtype = æ•°æ®ç±»å‹)print(a)print(a.dtype)print(a.shape) 1234tf.zeros(ç»´åº¦)tf.ones(ç»´åº¦)tf.fill(ç»´åº¦ï¼ŒæŒ‡å®šå€¼)c = tf.fill([2,2],9) //ä¸¤è¡Œä¸¤åˆ— 123tf.random.normal(ç»´åº¦,mean=å‡å€¼,stddev=æ ‡å‡†å·®)tf.random.truncated_normal(ç»´åº¦ï¼Œmean=å‡å€¼,stddev=æ ‡å‡†å·®)tf.random.uniform(ç»´åº¦,minval=æœ€å°å€¼,maxval=æœ€å¤§å€¼) 4ï¼šå¸¸ç”¨å‡½æ•°123tf.cast(å¼ é‡å,dtype&#x3D;æ•°æ®ç±»å‹) &#x2F;&#x2F;å¼ºåˆ¶è½¬æ¢æ•°æ®ç±»å‹tf.reduce_min() &#x2F;&#x2F;è®¡ç®—æœ€å¤§å€¼tf.reduce_max() 12tf.reduce_mean(å¼ é‡å,axis=æ“ä½œè½´) //è®¡ç®—å¼ é‡å»¶æŒ‡å®šç»´åº¦å¹³å‡å€¼tf.reduce_sum(å¼ é‡å,axis=æ“ä½œè½´) //è®¡ç®—æ²¿æŒ‡å®šç»´åº¦çš„å’Œ æœªæŒ‡å®šæ“ä½œè½´ï¼Œåˆ™ä¸ºå¯¹å…¨éƒ¨æ•°è¿›è¡Œæ“ä½œ å˜é‡ï¼š 1tf.Variable(åˆå§‹å€¼) æ•°å­¦è¿ç®— 12345678tf.add()tf.subtract()tf.multiply()tf.divide()&#x2F;&#x2F;åªæœ‰ç»´åº¦ç›¸åŒæ‰èƒ½è¿›è¡Œå››åˆ™è¿ç®—tf.square(å¼ é‡å) å¹³æ–¹tf.pow() &#x2F;&#x2F;næ¬¡æ–¹tf.sqrt() &#x2F;&#x2F;å¼€æ–¹ çŸ©é˜µä¹˜ 1tf.matmul(çŸ©é˜µ1ï¼ŒçŸ©é˜µ2) ç‰¹å¾å’Œæ ‡ç­¾å¯¹åº”ï¼š 123features &#x3D; tf.constant([12,23,10,14])labels &#x3D; tf.constant([0,1,1,0])dataset &#x3D; tf.data.Dataset.from_tensor_slices((features,labels)) è®¡ç®—æ¢¯åº¦ 1234with tf.GradientTape() as tape: w = tf.Variable(tf.constant(3.0)) loss = tf.pow(w,2)grad = tape.gradient(loss,w) enumerate 123seq = [&#x27;one&#x27;,&#x27;two&#x27;,&#x27;three&#x27;]for i,element in enumerate(seq): print(i,element) ç‹¬çƒ­ç¼–ç ï¼š æ ‡è®°ç±»åˆ«ï¼š1è¡¨ç¤ºæ˜¯ï¼Œ0è¡¨ç¤ºå¦ 1tf.one_hot(å¾…è½¬æ¢æ•°æ®ï¼Œdepth&#x3D;å‡ åˆ†ç±») è¾“å‡ºç¬¦åˆæ¦‚ç‡åˆ†å¸ƒï¼š 1234tf.nn.softmax(x)y = tf.constant([1.01,2.01,-0.66])y_pro = tf.nn.softmax(y) å‚æ•°è‡ªæ›´æ–°ï¼š 123w &#x3D; tf.Variable(4)w.assign_sub(1) &#x2F;&#x2F;w-&#x3D;1print(w) è¿”å›æœ€å¤§å€¼ç´¢å¼• 1tf.argmax(å¼ é‡åï¼Œaxis&#x3D;æ“ä½œè½´) æ¡ä»¶è¯­å¥ï¼š 1tf.where(æ¡ä»¶è¯­å¥,çœŸè¿”å›A,å‡è¿”å›B) è¿”å›[0,1)ä¹‹é—´çš„éšæœºæ•° 1np.random.RandomState.rand(ç»´åº¦) å°†ä¸¤ä¸ªæ•°ç»„æŒ‰å‚ç›´æ–¹å‘å åŠ ï¼ˆä¸€ç»´â€”&gt;äºŒç»´ï¼‰ï¼š 1np.vstack(æ•°ç»„1ï¼Œæ•°ç»„2) 12345x,y = np.mgrid[1:3:1,2:4:0.5] //x=[[1 1 1 1] [2 2 2 2]] y=[[2 2.5 3 3.5] [2 2.5 3 3.5]] gird = np.c_[x.ravel(),y.ravel()] //ravel()é™ç»´åˆ°ä¸€ç»´ï¼Œnp.c_[æ•°ç»„1ï¼Œæ•°ç»„2]é…å¯¹ã€‚ 5ï¼šç¥ç»ç½‘ç»œ(NN)å¤æ‚åº¦NNå¤æ‚åº¦ï¼šå¤šç”¨NNå±‚æ•°å’ŒNNå‚æ•°çš„ä¸ªæ•°è¡¨ç¤ºã€‚ ç©ºé—´å¤æ‚åº¦ æ—¶é—´å¤æ‚åº¦ å­¦ä¹ ç‡:$$w_{t+1} = w_t+lrgradient$$æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡:$$æŒ‡æ•°è¡°å‡å­¦ä¹ ç‡=åˆå§‹å­¦ä¹ ç‡å­¦ä¹ ç‡è¡°å‡ç‡^{å½“å‰è½®æ•°/å¤šå°‘è½®è¡°å‡ä¸€æ¬¡}\\\\epoch= 40\\\\LR_BASE= 0.2\\\\LR_DECAY= 0.99\\\\LR_STEP=1$$ 123456for epoch in range(epoch): lr = LR_BASE*LR_DECAY**(epoch/LR_STEP) with tf.GradientTape() as tape: loss = tf.square(w+1) grads = tape.gradient(loss,w) w.assign_sub(lr*grads) 6ï¼šæ¿€æ´»å‡½æ•°$$y = f(wx+b)$$ Sigmoidå‡½æ•° $$f(x)=\\frac{1}{1+e^{-x}}$$ 1tf.nn.sigmoid(x) æ˜“é€ æˆæ¢¯åº¦æ¶ˆå¤± è¾“å‡ºé0å‡å€¼ï¼Œæ”¶æ•›æ…¢ å¹‚è¿ç®—å¤æ‚ï¼Œè®­ç»ƒæ—¶é—´é•¿ Tanhå‡½æ•° $$f(x) = \\frac{1-e^{-2x}}{1+e^{-2x}}$$ 1tf.math.tanh(x) Reluå‡½æ•° $$\\begin{align}f(x)=&amp; max(x,0)\\\\=&amp; \\begin{cases}0\\qquad x&lt;0\\x\\qquad x&gt;=0\\end{cases}\\end{align}$$ 1tf.nn.relu(x) Leaky Reluå‡½æ•° $$f(x)=max(ax,x)$$ 1tf.nn.leaky_relu(x) åˆå­¦è€…ï¼š é¦–é€‰Reluå‡½æ•° å­¦ä¹ ç‡è®¾ç½®è¾ƒå°å€¼ è¾“å…¥ç‰¹å¾æ ‡å‡†åŒ–ï¼Œè®©è¾“å…¥ç‰¹å¾æ»¡è¶³ä»¥0ä¸ºå‡å€¼ï¼Œ1ä¸ºæ ‡å‡†å·®çš„æ­£æ€åˆ†å¸ƒ åˆå§‹å‚æ•°ä¸­å¿ƒåŒ–ï¼Œè®©éšæœºç”Ÿæˆçš„å‚æ•°æ»¡è¶³ä»¥0ä¸ºå‡å€¼ï¼Œsqrt(2/å½“å‰å±‚è¾“å…¥ç‰¹å¾ä¸ªæ•°)ä¸ºæ ‡å‡†å·®çš„æ­£æ€åˆ†å¸ƒ 7ï¼šæŸå¤±å‡½æ•°lossï¼šé¢„æµ‹å€¼(y)ä¸å·²çŸ¥ç­”æ¡ˆ(y_)çš„å·®è· å‡æ–¹è¯¯å·®mseï¼š $$MSE(y_,y)=\\frac{\\sum^n_{i=1}(y-y_)^2}{n}$$ 1loss_mse = tf.reduce_mean(tf.square(y-y_)) è‡ªå®šä¹‰æŸå¤±å‡½æ•° y_:æ ‡å‡†ç­”æ¡ˆ y:é¢„æµ‹ç­”æ¡ˆ$$f(y_,y)=\\begin{cases}PROFIT*(y_-y)\\quad y&lt;y_ \\ é¢„æµ‹çš„yå°‘äº†ï¼ŒæŸå¤±åˆ©æ¶¦\\COST*(y-y_)\\quad y&gt;=y_ \\ é¢„æµ‹çš„yå¤šäº†ï¼ŒæŸå¤±æˆæœ¬\\end{cases}$$ 1loss_diy = tf.reduce_sum(tf.where(tf.greater(y,y_),COST(y-y_),PROFIT(y_-y))) //y&gt;y_?,ä¸ºçœŸCOSTï¼Œä¸ºå‡PROFIT äº¤å‰ç†µæŸå¤±å‡½æ•°CEï¼šè¡¨å¾ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒä¹‹é—´çš„è·ç¦» $$H(y_,y)=-\\sum y_*lny$$ 1tf.losses.categorical_crossentropy(y_,y) softmaxå’Œäº¤å‰ç†µç»“åˆ softmaxè®¡ç®—æ¦‚ç‡åˆ†å¸ƒ 1tf.nn.softmax_cross_entropy_with_logits(y_,y) 8ï¼šç¼“è§£è¿‡æ‹Ÿåˆ æ­£åˆ™åŒ–ç¼“è§£è¿‡æ‹Ÿåˆ æ­£åˆ™åŒ–åœ¨æŸå¤±å‡½æ•°ä¸­å¼•å…¥æ¨¡å‹å¤æ‚åº¦æŒ‡æ ‡ï¼Œåˆ©ç”¨ç»™WåŠ æƒå€¼ï¼Œå¼±åŒ–è®­ç»ƒæ•°æ®çš„å™ªå£°ã€‚ $$loss=loss(yä¸y_)+REGULARIZER*losss(w)$$ L2æ­£åˆ™åŒ– 1234567891011with tf.GradientTape() as tape: h1 &#x3D; tf.matmul(x_train,w1)+b1 h1 &#x3D; tf.nn.relu(h1) y &#x3D; tf.matmul(h1,w2) + b2 loss_mse &#x3D; tf.reduce_mean(tf.square(y_train - y)) loss_regularization &#x3D; [] loss_regularization.append(tf.nn.l2_loss(w1)) loss_regularization.append(tf.nn.l2_loss(w2)) loss_regularization &#x3D; tf.reduce_sum(loss_regularization) loss &#x3D; loss_mse + 0.03*loss_regularization 9ï¼šä¼˜åŒ–å™¨$m_t$ï¼šä¸€é˜¶åŠ¨é‡(ä¸æ¢¯åº¦ç›¸å…³çš„å‡½æ•°) $V_t$ï¼šäºŒé˜¶åŠ¨é‡(ä¸æ¢¯åº¦å¹³æ–¹ç›¸å…³çš„å‡½æ•°) ä¸‹é™æ¢¯åº¦$\\eta_t=lr*m_t/\\sqrt{V_t}$ æ›´æ–°å‚æ•°$w_{t+1}=w_t-\\eta_t$ ä¸åŒçš„ä¼˜åŒ–å™¨ï¼Œåªæ˜¯å®šä¹‰äº†ä¸åŒçš„åŠ¨é‡å‡½æ•° SGDï¼Œæ¢¯åº¦ä¸‹é™æ³• $m_t=g_t$ $V_t=1$ $w_{t+1}=w_t-lr*g_t$ SGDMï¼ŒSGDåŸºç¡€ä¸Šå¢åŠ äº†ä¸€é˜¶åŠ¨é‡ $m_t=\\beta*m_{t-1}+(1-\\beta)*g_t$ $V_t=1$ Adagradï¼Œåœ¨SGDåŸºç¡€ä¸Šå¢åŠ äºŒé˜¶åŠ¨é‡ $m_t=g_t$ $V_t=\\sum^t_{\\tau=1}g^2_\\tau$ RMSPropï¼ŒSGDåŸºç¡€ä¸Šå¢åŠ äºŒé˜¶åŠ¨é‡ $m_t=g_t$ $V_t=\\beta*V_{t-1}+(1-\\beta)*g^2_t$ Adamï¼ŒåŒæ—¶ç»“åˆSGDMä¸€é˜¶åŠ¨é‡å’ŒRMSPropäºŒé˜¶åŠ¨é‡ $m_t=\\beta*m_{t-1}+(1-\\beta)*g_t$ ä¿®æ­£ä¸€é˜¶åŠ¨é‡çš„åå·®ï¼š$\\hat{m_t}=\\frac{m_t}{1-\\beta^t_1}$ $V_t=\\beta*V_{t-1}+(1-\\beta)*g^2_t$ ä¿®æ­£äºŒé˜¶åŠ¨é‡çš„åå·®ï¼š$\\hat{V_t}=\\frac{V_t}{1-\\beta^t_2}$ 10ï¼šæ­å»ºå…«è‚¡ç½‘ç»œ-Sequentialtf.kerasæ­å»ºç½‘ç»œå…«è‚¡ å…­æ­¥æ³•ï¼š import train,test model = tf.keras.models.Sequential model.compile model.fit model.summary Sequentialï¼Œæè¿°å„å±‚ç½‘ç»œ æ‹‰ç›´å±‚ï¼štf.keras.layers.Flatten() å…¨è¿æ¥å±‚ï¼štf.keras.layers.Dense(ç¥ç»å…ƒä¸ªæ•°,activation=â€æ¿€æ´»å‡½æ•°â€,kernel_regularizer=å“ªç§æ­£åˆ™åŒ–) activationï¼šreluã€softmaxã€sigmoidã€tanh kernel_regularizerï¼štf.keras.regularizers.l1()ã€tf.keras.regularizers.l2() å·ç§¯å±‚ï¼štf.keras.layers.Conv2D(filters = å·ç§¯æ ¸ä¸ªæ•°,kernel_size = å·ç§¯æ ¸å°ºå¯¸,strides = å·ç§¯æ­¥é•¿,padding = â€œvalidâ€orâ€sameâ€) LSTMå±‚ï¼štf.keras.layers.LSTM() Compile 1model.compile(optimizer = ä¼˜åŒ–å™¨,loss=æŸå¤±å‡½æ•°,metrics=[&quot;å‡†ç¡®ç‡&quot;]) Fit 1model.fit(è®­ç»ƒé›†çš„è¾“å…¥ç‰¹å¾ï¼Œè®­ç»ƒé›†çš„æ ‡ç­¾ï¼Œbathc_size&#x3D;,epochs&#x3D;,validation_data&#x3D;(æµ‹è¯•é›†çš„è¾“å…¥ç‰¹å¾ï¼Œæµ‹è¯•é›†çš„æ ‡ç­¾)ï¼Œvalidation_split&#x3D;ä»è®­ç»ƒé›†åˆ’åˆ†å¤šå°‘æ¯”ä¾‹ç»™æµ‹è¯•é›†ï¼Œvalidation_freq&#x3D;å¤šå°‘æ¬¡epochæµ‹è¯•ä¸€æ¬¡) Summary 1model.summary() 11ï¼šæ­å»ºç½‘ç»œå…«è‚¡-class123456789class MyModel(Model): def __init__(self): super(MyModel,self).__init__() å®šä¹‰ç½‘ç»œç»“æ„å— def call(self,x): è°ƒç”¨ç½‘ç»œç»“æ„å—ï¼Œå®ç°å‰å‘ä¼ æ’­ reutrn y model = MyModel() 12ï¼šMNISTæ•°æ®é›†æä¾›6ä¸‡å¼ 28*28åƒç´ ç‚¹çš„0-9æ‰‹å†™æ•°å­—å›¾ç‰‡å’Œæ ‡ç­¾ï¼Œç”¨äºè®­ç»ƒ 1ä¸‡å¼ 28*28åƒç´ ç‚¹çš„0-9æ‰‹å†™æ•°ç»„å›¾ç‰‡å’Œæ ‡ç­¾ï¼Œç”¨äºæµ‹è¯• å¯¼å…¥MNISTæ•°æ®é›† 12mnist &#x3D; tf.keras.datasets.mnist(x_train,y_train),(x_test,y_test)&#x3D;mnist.load_data() ä½œä¸ºè¾“å…¥ç‰¹å¾ï¼Œå°†æ•°æ®æ‹‰ä¼¸ä¸ºä¸€ç»´æ•°ç»„ 1tf.keras.layers.Flatten() 13ï¼šFasion_MNISTæ•°æ®é›†123456789101112131415import tensorflow as tffasion = tf.keras.datasets.fashion_mnist(x_train, y_train),(x_test,y_test) = fasion.load_data()x_train,x_test = x_train/255.0,x_test/255.0model = tf.keras.models.Sequential([ tf.keras.layers.Flatten(), tf.keras.layers.Dense(128,activation=&#x27;relu&#x27;), tf.keras.layers.Dense(10,activation = &#x27;softmax&#x27;)])model.compile(optimizer=&quot;adam&quot;,loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=False),metrics=[&#x27;sparse_categorical_accuracy&#x27;])model.fit(x_train,y_train,batch_size = 32,epochs=5,validation_data=(x_test,y_test),validation_freq = 1)model.summary() 14ï¼šè‡ªåˆ¶æ•°æ®é›† åœ¨mnist_image_labelæ–‡ä»¶å¤¹ä¸‹æœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹mnist_train_jpg_60000å’Œmnist_test_jpg_10000 æ¯ä¸ªæ–‡ä»¶å¤¹åˆ†åˆ«æ”¾äº†å¯¹åº”ä¸ªæ•°çš„å›¾ç‰‡ä»¥åŠä¸€ä¸ª.txtæ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸Šï¼Œjpgå+ç©ºæ ¼+æ ‡ç­¾ ç°åœ¨éœ€è¦é‡å†™(x_train,y_train),(x_test,y_test)=mnist.load_data()ä¸­çš„load_data()æ–¹æ³•ã€‚ 123456789101112131415161718def generateds(path,txt): f = open(txt,&#x27;r&#x27;) contents = f.readlines() f.close() x,y_ = [],[] for content in contents: value = content.split() img_path = path+value[0] img = Image.open(img_path) img = np.array(img.convert(&#x27;L&#x27;)) img = img/255. x.append(img) y_.append(value[1]) print(&#x27;loading:&#x27;+content) x = np.array(x) y_ = np.array(y_) y_ = y_.astype(np.int64) return x,y_ ä¿å­˜æ•°æ®é›† 1np.save(ä¿å­˜è·¯å¾„å¸¦æ‹“å±•,ä¿å­˜çš„å†…å®¹) 15ï¼šæ•°æ®å¢å¼º12345678image_gen_train = tf.keras.preprocessing.image.ImageDataGenerator( rescale = æ‰€æœ‰æ•°æ®å°†ä¹˜ä»¥è¯¥æ•°å€¼ rotation = éšæœºæ—‹è½¬è§’åº¦å€¼èŒƒå›´ width_shift_range = éšæœºå®½åº¦åç§»é‡ height_shift_range = éšæœºé«˜åº¦åç§»é‡ horizontal_flip = æ˜¯å¦éšæœºæ°´å¹³ç¿»è½¬ zoom_range = éšæœºç¼©æ”¾çš„èŒƒå›´[1-n,1+n])image_gen_train.fit(x_train) fit()ä¸­çš„æ•°æ®æ˜¯å››ä½æ•°æ®ï¼Œæ‰€ä»¥éœ€è¦å¯¹å…¶reshape x_train = x_train.reshape(x_train.shape[0],28,28,1) æœ€åçš„1è¡¨ç¤ºç°åº¦å€¼ã€‚ model.fit()æ–¹æ³•å†…ä¿®æ”¹ä¸º 1model.fit(image_gen_train.flow(x_train,y_train,batch_size = 32),epochs=5,validation_data=(x_test,y_test),validation_freq = 1) 16ï¼šæ–­ç‚¹ç»­è®­è¯»å–æ¨¡å‹ï¼š load_weights(è·¯å¾„æ–‡ä»¶å) 1234checkpoint_save_path = &quot;./checkpoint/mnist.ckpt&quot;if os.path.exists(checkpoint_save_path + &#x27;.index&#x27;) print(&#x27;-----load the model------&#x27;) model.load_weights(checkpoint_save_path) ä¿å­˜æ¨¡å‹ 12345callback = tf.keras.callbacks.ModelCheckpoint( filepath = è·¯å¾„æ–‡ä»¶å, save_weights_only=True/False, save_best_only = True/False)history = model.fit(â€¦â€¦callbacks = [cp_callback]) 17ï¼šå‚æ•°æå–model.trainable_variables è¿”å›æ¨¡å‹ä¸­å¯è®­ç»ƒçš„å‚æ•° è®¾ç½®printè¾“å‡ºæ ¼å¼ 1np.set_printoptions(threshold = è¶…è¿‡å¤šå°‘çœç•¥æ˜¾ç¤º) #threshold=np.infè¡¨ç¤ºæ— é™ 12345678np.set_printoptions(threshold = np.inf)print(model.trainable_variables)file = open(&#x27;./weights.txt&#x27;,&#x27;w&#x27;)for v in model.trainable_variables: file.write(str(v.name)+&#x27;\\n&#x27;) file.write(str(v.shape)+&#x27;\\n&#x27;) file.write(str(v.numpy())+&#x27;\\n&#x27;)file.close() 18ï¼šaccæ›²çº¿å’Œlossæ›²çº¿å¯è§†åŒ–12345history = model.fit()acc = history.history[&#x27;sparse_categorical_accuracy&#x27;] #è®­ç»ƒé›†å‡†ç¡®ç‡val_acc = history.history[&#x27;val_sparse_categorical_accuracy&#x27;] #æµ‹è¯•é›†å‡†ç¡®ç‡loss = history.history[&#x27;loss&#x27;] #è®­ç»ƒé›†lossval_loss = history.history[&#x27;val_loss&#x27;] #æµ‹è¯•é›†loss ç”»å›¾ 123456789101112plt.subplot(1,2,1)plt.plot(acc,label=&quot;Training Accuracy&quot;)plt.plot(val_acc,label=&quot;Validation Accuracy&quot;)plt.title(&quot;Training and Validation Accuracy&quot;)plt.legend()plt.subplot(1,2,2)plt.plot(loss,label=&quot;Training Loss&quot;)plt.plot(val_loss,label=&quot;Validation Loss&quot;)plt.title(&#x27;Training and Validation Loss&#x27;)plt.legend()plt.show() 19ï¼šæ ·ä¾‹é¢„æµ‹predict(è¾“å…¥ç‰¹å¾,batch_size=æ•´æ•°) 123456789#å¤ç°æ¨¡å‹model = tf.keras.models.Sequential([ tf.keras.layers.Flatten(), tf.keras.layers.Dense(128,activation = &#x27;relu&#x27;), tf.keras.layers.Dense(10,activation = &#x27;softmax&#x27;)])#åŠ è½½å‚æ•°model.load_weights(model_save_path)#é¢„æµ‹ç»“æœresult = model.predict(x_predict) 20ï¼šå·ç§¯è®¡ç®—è¿‡ç¨‹åŸå§‹å½©è‰²å›¾ç‰‡â€”â€”&gt;è‹¥å¹²å±‚ç‰¹å¾æå–â€”â€”&gt;å…¨è¿æ¥ç½‘ç»œ ä¸»è¦æ¨¡å—ï¼š(CBAPD) å·ç§¯(Convolutional)-&gt;æ‰¹æ ‡å‡†åŒ–(BN)-&gt;æ¿€æ´»(Activation)-&gt;æ± åŒ–(Pooling)-&gt;èˆå¼ƒ(Dropout) 21ï¼šæ„Ÿå—é‡æ„Ÿå—é‡ï¼šå·ç§¯ç¥ç»ç½‘ç»œå„è¾“å‡ºç‰¹å¾å›¾ä¸­çš„æ¯ä¸ªåƒç´ ç‚¹ï¼Œåœ¨åŸå§‹è¾“å…¥å›¾ç‰‡ä¸Šæ˜ å°„åŒºåŸŸçš„å¤§å°ã€‚ æ¯”å¦‚ï¼š 1ï¼š 5x5åŸå§‹å›¾ï¼Œä½¿ç”¨3x3å·ç§¯æ ¸ï¼Œç”Ÿæˆçš„3x3ç‰¹å¾å›¾ï¼Œé‚£ä¹ˆå…¶æ„Ÿå—é‡æ˜¯3. å°†ç”Ÿæˆçš„3x3ç‰¹å¾å›¾ï¼Œå†æ¬¡ä½¿ç”¨3x3å·ç§¯æ ¸ä½œç”¨ï¼Œç”Ÿæˆ1x1ç‰¹å¾å›¾ï¼Œé‚£ä¹ˆè¿™ä¸ªç‰¹å¾å›¾ç›¸å¯¹äºåŸå§‹å›¾ï¼Œæ„Ÿå—é‡ä¸º5. 2ï¼š 5x5åŸå§‹å›¾ï¼Œä½¿ç”¨5x5å·ç§¯æ ¸ï¼Œç”Ÿæˆ1x1ç‰¹å¾å›¾ï¼Œå…¶æ„Ÿå—é‡åŒæ ·ä¸º5 é•¿æ¬¾xå¤§äº10æ—¶ï¼Œä¸¤å±‚3x3å·ç§¯æ ¸æ€§èƒ½ä¼˜äºä¸€å±‚5x5å·ç§¯æ ¸ 22ï¼šå…¨é›¶å¡«å……ç‰¹å¾å›¾ä¸€åœˆå¡«å……é›¶ã€‚ ç‰¹å¾å›¾è¾¹é•¿$$padding=\\begin{cases}SAME(å…¨0å¡«å……)\\ \\frac{å…¥é•¿}{æ­¥é•¿}\\ (å‘ä¸Šå–æ•´)\\VALID(ä¸å…¨0å¡«å……)\\ \\frac{å…¥é•¿-æ ¸é•¿+1}{æ­¥é•¿}\\ (å‘ä¸Šå–æ•´)\\end{cases}$$ 23ï¼šæè¿°å·ç§¯å±‚12345678tf.keras.layers.Conv2D( filter = å·ç§¯æ ¸ä¸ªæ•°, kernel_size = å·ç§¯æ ¸å°ºå¯¸ï¼Œ #æ­£æ–¹å½¢å†™æ ¸é•¿æ•´æ•°ï¼Œæˆ–ï¼ˆæ ¸é«˜ï¼Œæ ¸å®½ï¼‰ strides = æ»‘åŠ¨æ­¥é•¿, #æ¨ªçºµç›¸åŒå†™æ­¥é•¿æ•´æ•°ï¼Œæˆ–ï¼ˆçºµå‘æ­¥é•¿ï¼Œæ¨ªå‘æ­¥é•¿ï¼‰ padding = &quot;same&quot; or &quot;valid&quot; #å…¨é›¶å¡«å……sameï¼Œéå…¨é›¶valid activation = &quot;relu&quot; or &quot;sigmoid&quot;, input_shape = (é«˜ï¼Œå®½ï¼Œé€šé“æ•°) #è¾“å…¥ç‰¹å¾å›¾ç»´åº¦ï¼Œå¯çœ) 24ï¼šæ‰¹æ ‡å‡†åŒ–ï¼ˆBatch Normalizationï¼‰æ ‡å‡†åŒ–ï¼šä½¿æ•°æ®ç¬¦åˆ0å‡å€¼ï¼Œ1ä¸ºæ ‡å‡†å·®çš„åˆ†å¸ƒ æ‰¹æ ‡å‡†åŒ–ï¼šå¯¹ä¸€å°æ‰¹æ•°æ®ï¼Œåšæ ‡å‡†åŒ–$$Hâ€™^k_i = \\frac{H^k_i-\\mu^k_{batch}}{\\sigma_{batch}^k}$$kï¼šç¬¬kä¸ªå·ç§¯æ ¸ iï¼šç¬¬iä¸ªåƒç´ ç‚¹ Hâ€™ï¼šæ‰¹æ ‡å‡†åŒ–ä¹‹å Hï¼šæ‰¹æ ‡å‡†åŒ–ä¹‹å‰ ä¸Šè¿°å¼å­ï¼Œè¦æ±‚æ‰¹æ ‡å‡†åŒ–ä¹‹å‰çš„ç‰¹å¾æ•°æ®å³æ»¡è¶³æ­£æ€åˆ†å¸ƒã€‚ é€šå¸¸ä½¿ç”¨ï¼š$$x^k_i=\\gamma_kHâ€™^k_i+\\beta_k$$$\\gamma_k$:ç¼©æ”¾å› å­ $\\beta_k$:åç§»å› å­ è°ƒæ•´åˆ†å¸ƒçš„å®½çª„å’Œåç§»ã€‚ BNå±‚ä½äºï¼Œå·ç§¯å±‚ä¹‹åï¼Œæ¿€æ´»å±‚ä¹‹å‰ã€‚ 1tf.keras.layers.BatchNormalization() 25ï¼šæ± åŒ–æ± åŒ–ç”¨äºå‡å°‘ç‰¹å¾æ•°æ®é‡ã€‚ æœ€å¤§æ± åŒ–ï¼Œå‡å€¼æ± åŒ– 123456tf.keras.layers.MaxPool2D( pool_size=æ± åŒ–æ ¸å°ºå¯¸ strides=æ± åŒ–æ­¥é•¿ padding=&#x27;valid&#x27; or &#x27;same&#x27; #å…¨é›¶å¡«å……ï¼Ÿ)tf.keras.layers.AveragePooling2D() 26ï¼šèˆå¼ƒï¼ˆdropoutï¼‰åœ¨ç¥ç»ç½‘ç»œè®­ç»ƒæ—¶ï¼Œå°†ä¸€éƒ¨åˆ†ç¥ç»å…ƒæŒ‰ç…§ä¸€å®šæ¦‚ç‡ä»ç¥ç»ç½‘ç»œä¸­æš‚æ—¶èˆå¼ƒï¼Œç¥ç»ç½‘ç»œä½¿ç”¨æ—¶ï¼Œè¢«èˆå¼ƒçš„ç¥ç»å…ƒæ¢å¤è¿æ¥ã€‚ 1tf.keras.layers.Dropout(èˆå¼ƒæ¦‚ç‡) 27ï¼šCifar10æ•°æ®é›†äº”ä¸‡å¼ 32*32åƒç´ ç‚¹çš„æ˜¯åˆ†ç±»å½©è‰²å›¾ç‰‡å’Œæ ‡ç­¾ï¼Œç”¨äºè®­ç»ƒ æµ‹è¯•1ä¸‡å¼  28ï¼šLeNetè¾“å…¥ï¼š32*32","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://sci.ci/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"}]},{"title":"å¦‚ä½•åˆ©ç”¨ADBå¼€å‘ç‹è€…è£è€€å¤–æŒ‚","slug":"å¦‚ä½•åˆ©ç”¨ADBå¼€å‘ç‹è€…è£è€€å¤–æŒ‚","date":"2020-10-24T03:51:01.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/10/24/å¦‚ä½•åˆ©ç”¨ADBå¼€å‘ç‹è€…è£è€€å¤–æŒ‚/","link":"","permalink":"https://sci.ci/2020/10/24/%E5%A6%82%E4%BD%95%E5%88%A9%E7%94%A8ADB%E5%BC%80%E5%8F%91%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80%E5%A4%96%E6%8C%82/","excerpt":"","text":"1ï¼šæ€è·¯ADBå…¨ç§°å®‰å“è®¾å¤‡è°ƒè¯•å·¥å…·ï¼Œæ˜¯è°·æ­Œå®˜æ–¹æä¾›å¸®åŠ©å®‰å“å¼€å‘è€…è°ƒè¯•è‡ªèº«åº”ç”¨çš„ä¸€ä¸ªè½»é‡çº§å·¥å…·åŒ…ï¼Œæ€»å¤§å°åªæœ‰å‡ å…†ã€‚é€šè¿‡shellæŒ‡ä»¤å¯ä»¥å®ç°å¯¹å®‰è£…äº†å®‰å“ç³»ç»Ÿçš„æ‰‹æœºè¿›è¡Œæ§åˆ¶ï¼ŒåŒ…æ‹¬å¼€å…³æœºï¼Œå¼€å…³åº”ç”¨ç¨‹åºï¼Œæ§åˆ¶å±å¹•ã€éŸ³é‡ã€ç›¸æœºç­‰æ“ä½œã€‚åˆ©ç”¨ADBæ§åˆ¶å±å¹•çš„åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡ç¨‹åºæ¥å®ç°å¿«é€Ÿæ¢è£…ã€å©‰å„¿ä¸€é”®ä¸Šå¤©ç­‰æ“ä½œã€‚ç”±äºADBæ˜¯ä¸€ç§æ¨¡æ‹Ÿäººåœ¨å±å¹•ä¸Šæ“ä½œçš„å·¥å…·ï¼Œä¸ä¼šä¿®æ”¹ç‹è€…è£è€€çš„å†…éƒ¨æ–‡ä»¶ï¼Œä¹Ÿä¸ç”¨rootæ‰‹æœºï¼Œæ‰€æœ‰æ˜¯ä¸ä¼šè¢«ç‹è€…è£è€€æ£€æµ‹åˆ°ï¼Œä¹Ÿä¸ä¼šè¢«å°å·ã€‚åªéœ€è¦ç®€å•é…ç½®è®©å®‰è£…äº†ADBçš„ç”µè„‘è¿æ¥æ‰‹æœºï¼Œå³å¯å®ç°ç¨‹åºæ§åˆ¶ç‹è€…è§’è‰²ã€‚å› ä¸ºADBæ”¯æŒé€šè¿‡TCP/IPåè®®ï¼Œå¯ä»¥è®©ç”µè„‘è„±ç¦»æ•°æ®çº¿è¿œç¨‹è°ƒè¯•æ‰‹æœºã€‚ é‚£ä¹ˆè¿™ä¸ªå¤–æŒ‚å®Œæ•´çš„å·¥ä½œè¿‡ç¨‹æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ åœ¨ç”µè„‘ä¸Šå®‰è£…ADBå·¥å…·ï¼Œå¹¶å°†å…¶ç›®å½•æ”¾åˆ°ç³»ç»Ÿç¯å¢ƒæˆ–ç”¨æˆ·ç¯å¢ƒå˜é‡ä¸­ã€‚å¼€å¯æ‰‹æœºçš„USBè°ƒè¯•åŠŸèƒ½ï¼Œé€šè¿‡ADBè¿œç¨‹è°ƒè¯•åŠŸèƒ½è¿æ¥æ‰‹æœºã€‚ ç¼–å†™ä¸€ä¸ªå®‰å“åº”ç”¨ç¨‹åºï¼Œç¨‹åºä½¿ç”¨å®‰å“çš„æ‚¬æµ®çª—åŠŸèƒ½ã€‚åœ¨ç‹è€…è£è€€é¢æ¿ä¸Šå±‚æ‚¬æµ®ä¸€ä¸ªæŒ‰é’®ã€‚ç‚¹å‡»æŒ‰é’®ï¼Œå‘é€ä¸€ä¸ªhttpçš„getè¯·æ±‚ã€‚ åœ¨å®‰è£…äº†ADBçš„ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ªhttpæœåŠ¡å™¨ç”¨äºæ¥æ”¶æ‚¬æµ®æŒ‰é’®å‘é€çš„getè¯·æ±‚ã€‚ç®€å•çš„httpæœåŠ¡å™¨æ˜¯åŸºäºpythonå†…è‡ªå¸¦çš„http serverã€‚ httpæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·æ±‚åï¼Œæ‰§è¡Œå·²ç»å†™å¥½çš„ADBæŒ‡ä»¤ï¼Œæ§åˆ¶æ‰‹æœºï¼Œå®ç°å©‰å„¿ä¸€é”®ä¸Šå¤©ã€‚ çœ‹çœ‹ä½¿ç”¨æ•ˆæœå§ï¼ 2ï¼šADBå·¥å…·åŠè°ƒè¯•æ‰‹æœº2.1 ä¸‹è½½ADBåœ¨ç½‘ä¸Šä¸‹è½½ADBå·¥å…·åŒ…ï¼šä¸‹è½½åœ°å€ï¼ˆéœ€è¦è¿æ¥å¤–ç½‘ï¼‰ è§£å‹åï¼Œè·å¾—ä¸€ä¸ªåä¸ºplatform-toolsçš„å·¥å…·åŒ…ï¼ŒåŒ…å†…å«æœ‰adb.exeç¨‹åºï¼Œå³ä¸ºå®‰å“è°ƒè¯•å·¥å…·ã€‚ 2.2 è®¾ç½®ç¯å¢ƒåœ¨windowsä¸­æœç´¢huanjingæ‰“å¼€ç¯å¢ƒå˜é‡é¢æ¿ã€‚ ä¾æ¬¡ç‚¹å‡»ç¯å¢ƒå˜é‡ï¼Œç‚¹å‡»ç³»ç»Ÿå˜é‡ä¸‹çš„åä¸ºPathçš„ä¸€è¡Œï¼Œç‚¹å‡»ç¼–è¾‘. ç‚¹å‡»æ–°å»ºï¼Œå°†platform-toolsæ–‡ä»¶å¤¹çš„å®Œæ•´è·¯å¾„æ·»åŠ åˆ°å˜é‡ä¸­ï¼Œä¾‹ï¼šæˆ‘çš„å·¥å…·åŒ…å­˜æ”¾åœ¨C:\\Users\\9752\\.AndroidStudio3.5\\platform-tools ç‚¹å‡»ç¡®è®¤ï¼Œç„¶åå…³é—­æ­¤çª—å£ã€‚ åœ¨windowsä¸­æœç´¢cmdï¼Œæ‰“å¼€ç»ˆç«¯çª—å£ï¼Œè¾“å…¥adbå›è½¦ã€‚ å‡ºç°ä¸Šæ–‡ï¼Œåˆ™é…ç½®æˆåŠŸã€‚ 2.3 è¿æ¥æ‰‹æœºæ‰“å¼€æ‰‹æœºå¼€å‘è€…æ¨¡å¼ é€šå¸¸æ˜¯æ‰‹æœºè®¾ç½®ä¸­ï¼Œæ‰¾åˆ°ç‰ˆæœ¬ä¿¡æ¯æˆ–è€…å†…æ ¸ä¿¡æ¯ï¼Œç„¶åç‚¹å‡»ä¸ƒä¸‹ï¼Œåœ¨è®¾ç½®ä¸­å°±ä¼šå‡ºç°å¼€å‘è€…æ¨¡å¼äº†ã€‚å…·ä½“æ–¹æ³•å¯ä»¥è‡ªè¡Œè°·æ­Œã€‚ æ‰“å¼€å¼€å‘è€…æ¨¡å¼çš„USBè°ƒè¯• é€šè¿‡åŸè£…æ•°æ®çº¿è¿æ¥ç”µè„‘ï¼Œæœ‰çš„éåŸè£…æ•°æ®çº¿åªèƒ½å……ç”µä¸èƒ½ä¼ è¾“æ•°æ®ã€‚ è¿æ¥ç”µè„‘åï¼Œéœ€è¦åœ¨æ‰‹æœºä¸Šå…è®¸æ­¤ç”µè„‘è°ƒè¯•ï¼Œæœ€å¥½ä¸€å¾‹å…è®¸æ­¤ç”µè„‘è°ƒè¯•ã€‚ åœ¨ç»ˆç«¯ä¸­è¾“å…¥adb devicesæŸ¥çœ‹æ˜¯å¦è¿æ¥ä¸Šäº†æ‰‹æœºã€‚ 2.4 å¼€å¯è¿œç¨‹è°ƒè¯• ä¹Ÿå¯ä¸ç”¨è¿œç¨‹ï¼Œç›´æ¥ä½¿ç”¨æ•°æ®çº¿ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ è®©æ‰‹æœºå’Œç”µè„‘å¤„åœ¨ç›¸åŒçš„WiFiä¸‹ ç”µè„‘é€šè¿‡æ•°æ®çº¿è¿æ¥æ‰‹æœºåï¼Œç»ˆç«¯è¾“å…¥ 1adb tcpip 5555 æ‹”æ‰æ•°æ®çº¿ã€‚åœ¨WiFiè®¾ç½®é‡Œï¼ŒæŸ¥çœ‹æ‰‹æœºçš„å±€åŸŸç½‘ipåœ°å€ï¼Œé€šå¸¸æ˜¯192.168.xxx.xxxï¼Œæˆ–è€…10.xxx.xxx.xxx ä¿®æ”¹ä¸ºä½ çš„æ‰‹æœºipåœ°å€ï¼Œè¿æ¥æ‰‹æœºï¼š 1adb connect 192.168.xxx.xxx:5555 2.5 ä¸»è¦ç”¨åˆ°çš„ADBæŒ‡ä»¤123456789// æ¨¡æ‹Ÿç‚¹å‡»ï¼Œå±å¹•ä¸Šæ¨ªåæ ‡çºµåæ ‡åˆ†åˆ«ä¸º100 120çš„ä½ç½®// è¦æŸ¥çœ‹å…·ä½“åæ ‡å€¼ï¼Œå¯ä»¥æ‰“å¼€å¼€å‘è€…é€‰é¡¹-&gt;æŒ‡é’ˆä½ç½®adb shell input tap 100 120// æ¨¡æ‹Ÿæ»‘åŠ¨ï¼Œä»ä½ç½®ï¼ˆ0,1000ï¼‰æ»‘åŠ¨åˆ°(800,600)adb shell input swipe 0 1000 800 600// æ¨¡æ‹Ÿé•¿æŒ‰ï¼Œåœ¨ä½ç½®ï¼ˆ100,200ï¼‰é•¿æŒ‰500æ¯«ç§’adb shell input swipe 100 200 100 200 500// å¼€å¯adbæœåŠ¡ å…¶ä¸­ä½ç½®ä¿¡æ¯ï¼Œéœ€è¦åœ¨æ‰‹æœºä¸Šè·å–ã€‚ åœ¨å¼€å‘è€…æ¨¡å¼ä¸­æ‰“å¼€æ˜¾ç¤ºæŒ‡é’ˆ é€šè¿‡æŒ‰ä½å±å¹•ï¼Œå°±èƒ½å®æ—¶æ˜¾ç¤ºæŒ‰å‹ä½çš„ä½ç½®çš„xè½´å’Œyè½´ä¿¡æ¯ã€‚ æ­¤æ—¶å·²ç»å¯ä»¥å°è¯•ç”¨ADBæŒ‡ä»¤æ§åˆ¶å±å¹•äº†ã€‚ 2.6 æ§åˆ¶å©‰å„¿ä¸Šå¤©ä¸åŒçš„æ‰‹æœºï¼Œéœ€è¦è‡ªå·±å¯»æ‰¾åˆé€‚çš„åæ ‡ç‚¹æ¥å®ç°å©‰å„¿çš„æŠ€èƒ½é‡Šæ”¾ã€‚ 123456789å‘å‰ç§»åŠ¨ï¼šabd shell input swipe 450 1105 544 983 600å‘åç§»åŠ¨ï¼šadb shell input swipe 450 1105 217 1400 800æ™®å·¥ï¼šadb shell input tap 2726 1226ä¸€æŠ€èƒ½ï¼šadb shell input swipe 2290 1267 2748 790 100äºŒæŠ€èƒ½ï¼šadb shell input swipe 2451 1010 2793 670 100ä¸‰æŠ€èƒ½ï¼šadb shell input swipe 2721 860 2721 860 200å‘å‰ç›´çº¿ä¸Šå¤©ï¼šadb shell &quot;input swipe 2451 1010 2793 670 100&amp;&amp;input swipe 2721 860 2721 860 200&amp;&amp;input swipe 450 1105 544 983 600&amp;&amp;input tap 2726 1226&amp;&amp;input swipe 2290 1267 2748 790 100&amp;&amp;input swipe 450 1105 743 781 1000&quot;åŸåœ°ä¸Šå¤©ï¼šadb shell &quot;input swipe 2451 1010 2793 670 100&amp;&amp;input swipe 2721 860 2721 860 200&amp;&amp;input swipe 450 1105 544 983 600&amp;&amp;input tap 2726 1226&amp;&amp;input swipe 2290 1267 2100 1376 100&amp;&amp;input swipe 450 1105 217 1400 800&amp;&amp;input swipe 450 1105 777 1150 500&quot; 2.7 ä¸€é”®æ¢è£…123456æ‰“å¼€å•†åº—ï¼š adb shell input tap 2873 102è£…å¤‡ï¼š adb shell input tap 2173 1278å‡ºå”®ï¼š adb shell input tap 2525 1153å…³é—­å•†åº—ï¼š adb shell input tap 2624 167è´­ä¹°é¢„é€‰ï¼šadb shell input tap 2832 243å®Œæ•´æ“ä½œé“¾ï¼šadb shell &quot;input tap 2873 102&amp;&amp;input tap 2173 1278&amp;&amp;input tap 2525 1153&amp;&amp;input tap 2624 167&amp;&amp;input tap 2832 243&quot; 3ï¼šæ­å»ºhttpæœåŠ¡å™¨åœ¨ç”µè„‘ä¸Šå®‰è£…å¥½pythonç¯å¢ƒã€‚ æ–°å»ºä¸€ä¸ªtakeoff.pyæ–‡ä»¶ã€‚ç¼–è¾‘æ–‡ä»¶ï¼š 12345678910111213141516171819202122232425262728293031import osfrom http.server import BaseHTTPRequestHandlerfrom urllib import parseclass GetHandler(BaseHTTPRequestHandler): def do_GET(self): parsed_path = parse.urlparse(self.path) query = parse.parse_qs(parsed_path.query) if query[&#x27;skill&#x27;][0] == &#x27;1&#x27;: os.system(&#x27;adb shell &quot;input swipe 2451 1010 2793 670 100&amp;&amp;input swipe 2721 860 2721 860 200&amp;&amp;input swipe 450 1105 544 983 600&amp;&amp;input tap 2726 1226&amp;&amp;input swipe 2290 1267 2748 790 100&amp;&amp;input swipe 450 1105 743 781 1000&quot;&#x27;) message = &#x27;æ‰§è¡Œç›´çº¿èµ·é£æŒ‡ä»¤&#x27; elif query[&#x27;skill&#x27;][0] == &#x27;2&#x27;: os.system(&#x27;adb shell &quot;input swipe 2451 1010 2793 670 100&amp;&amp;input swipe 2721 860 2721 860 200&amp;&amp;input swipe 450 1105 544 983 600&amp;&amp;input tap 2726 1226&amp;&amp;input swipe 2290 1267 2100 1376 100&amp;&amp;input swipe 450 1105 217 1400 800&amp;&amp;input swipe 450 1105 777 1150 500&quot;&#x27;) message = &#x27;æ‰§è¡ŒåŸåœ°èµ·é£æŒ‡ä»¤&#x27; elif query[&#x27;skill&#x27;][0] == &#x27;3&#x27;: os.system(&#x27;adb shell &quot;input tap 2873 102&amp;&amp;input tap 2173 1278&amp;&amp;input tap 2525 1153&amp;&amp;input tap 2624 167&amp;&amp;input tap 2832 243&quot;&#x27;) message = &#x27;æ‰§è¡Œå¿«é€Ÿæ¢è£…æŒ‡ä»¤&#x27; else: message = &#x27;æ— æŒ‡ä»¤è¿è¡Œ&#x27; self.send_response(200) self.send_header(&#x27;Content-Type&#x27;, &#x27;text/plain; charset=utf-8&#x27;) self.end_headers() self.wfile.write(message.encode(&#x27;utf-8&#x27;))if __name__ == &#x27;__main__&#x27;: from http.server import HTTPServer server = HTTPServer((&#x27;0.0.0.0&#x27;, 9797), GetHandler) print(&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ, ä½¿ç”¨&lt;Ctrl-C&gt; æ¥åœæ­¢ã€‚ã€‚&#x27;) server.serve_forever() éœ€è¦å°†os.system()ä¸­çš„å†…å®¹æ›¿æ¢ä¸ºè‡ªå·±çš„ã€‚ ä¿®æ”¹ä¸Šé¢çš„ç¨‹åºå¾ˆé‡è¦ï¼Œå› ä¸ºä¸åŒåˆ†è¾¨ç‡æ‰‹æœºï¼Œéœ€è¦çš„adbæŒ‡ä»¤æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¦‚æœä¸ä¿®æ”¹ï¼ŒåŸºæœ¬ä¸Šä¸å¯èƒ½ä¼šå®ç°ç†æƒ³çš„æ“ä½œï¼Œé™¤éä½ è·Ÿæˆ‘ç”¨çš„ç›¸åŒçš„æ‰‹æœºï¼Œä¸‰æ˜ŸS10+ã€‚ é€šè¿‡pythonè¿è¡Œè¿™ä¸ªæ–‡ä»¶å°±å·²ç»å»ºç«‹å¥½äº†httpæœåŠ¡å™¨ã€‚ 123python3 filepath/takeoff.py#filepathä¿®æ”¹ä¸ºtakeoff.pyçš„è·¯å¾„ã€‚æ¯”å¦‚C:/Users/999/Desktop/takeoff.py#æ˜¾ç¤ºï¼ŒæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ, ä½¿ç”¨&lt;Ctrl-C&gt; æ¥åœæ­¢ã€‚ã€‚åˆ™å¯åŠ¨æˆåŠŸ æŸ¥çœ‹ç”µè„‘çš„å±€åŸŸç½‘ipåœ°å€ï¼Œç»ˆç«¯è¾“å…¥ 1ipconfig é€šå¸¸æ˜¯192.168.xxx.xxxï¼Œæˆ–è€…10.xxx.xxx.xxx åœ¨ç”µè„‘æµè§ˆå™¨ä¸­ï¼Œè®¿é—®ï¼š192.168.xxx.xxx:9797/?skill=1å°±èƒ½å®ç°ç›´çº¿ä¸Šå¤©äº†ã€‚skill =2å’Œskill=3åˆ†åˆ«å¯¹åº”åŸåœ°ä¸Šå¤©å’Œä¸€é”®æ¢è£…ã€‚ æ­¤æ—¶ï¼Œå¦‚æœåœ¨æ‰‹æœºæµè§ˆå™¨ä¸Šè®¿é—®192.168.xxx.xxx:9797/?skill=1ï¼Œåº”è¯¥æ˜¯è®¿é—®ä¸é€šçš„ï¼Œå› ä¸ºwindowsè‡ªå¸¦çš„é˜²ç«å¢™ï¼Œæ˜¯ä¸å…è®¸å±€åŸŸç½‘ä¸‹çš„å…¶ä»–è®¾å¤‡è®¿é—®æœªå¼€æ”¾çš„ç«¯å£çš„ã€‚ä½ éœ€è¦å…³é—­å±€åŸŸç½‘é˜²ç«å¢™ã€‚ å…³é—­é˜²ç«å¢™æ˜¯å­˜åœ¨ä¸€å®šé£é™©çš„ï¼Œå¦‚æœä½ ç”¨çš„å…¬å…±åœºæ‰€çš„WiFiï¼Œæˆ‘å»ºè®®ä¸è¦å…³é—­ã€‚å¦‚æœæ˜¯å®¶åº­WiFiï¼Œè®°å¾—åœ¨ä½¿ç”¨å®Œåå†æ¬¡å¼€å¯é˜²ç«å¢™ã€‚ windowsæœç´¢fanghuoqiangæ³¨æ„ä¸è¦ç”¨æ±‰å­—æœç´¢ï¼Œç”¨æ‹¼éŸ³ã€‚æ‰“å¼€é˜²ç«å¢™å’Œç½‘ç»œä¿æŠ¤ å¦‚æœæ˜¯å®¶åº­WiFiï¼Œåˆ™ç‚¹å‡»ä¸“ç”¨ç½‘ç»œã€‚ å°†é˜²ç«å¢™å…³é—­ã€‚ æ­¤æ—¶åœ¨æ‰‹æœºæµè§ˆå™¨ä¸Šä¹Ÿèƒ½è®¿é—®åˆ°httpæœåŠ¡å™¨äº†ã€‚ 4ï¼šç‹è€…å±€å†…æ‚¬æµ®æŒ‰é’®æ–°å»ºä¸€ä¸ªå®‰å“é¡¹ç›®ï¼Œå¼€å‘ä¸€ä¸ªæ‚¬æµ®æŒ‰é’®ï¼Œåœ¨ç‹è€…å†…ç‚¹å‡»æŒ‰é’®ï¼Œå°±èƒ½ç»™httpæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œç„¶åæœåŠ¡å™¨é€šè¿‡adbå†è¿”è¿‡æ¥æ§åˆ¶å±€å†…è§’è‰²ã€‚ å¼€å‘æ–°é¡¹ç›®ï¼Œæˆ‘ç›´æ¥é€‰æ‹©ç«™åœ¨å·¨äººè‚©è†€ä¸Šã€‚https://github.com/dongzhong/TestForFloatingWindow ç›´æ¥å¯¹è¿™ä¸ªä»“åº“é‡Œæä¾›çš„æ‚¬æµ®çª—åŠŸèƒ½è¿›è¡Œä¿®æ”¹ã€‚ã€‚å…³é”®ç¨‹åºå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142//FloatingButtonService2.javaprivate void showFloatingWindow() &#123; if (Settings.canDrawOverlays(this)) &#123; button2 = new Button(getApplicationContext()); button2.setText(&quot;è£…&quot;);//æŒ‰é”®ä¸Šçš„å­—ï¼Œè¡¨ç¤ºæŒ‰ä¸‹è¿™ä¸ªæŒ‰é’®ä¸€é”®æ¢è£… button2.setBackgroundColor(Color.argb(120,0,255,0)); windowManager.addView(button2, layoutParams); button2.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; send(); &#125; &#125;); button2.setOnTouchListener(new FloatingOnTouchListener()); &#125; &#125; private void send() &#123; //å¼€å¯çº¿ç¨‹ï¼Œå‘é€getè¯·æ±‚ new Thread(new Runnable() &#123; @Override public void run() &#123; //valueå¯¹åº”httpæœåŠ¡å™¨æ¥æ”¶çš„æŠ€èƒ½ //åœ¨httpæœåŠ¡å™¨ä¸­ï¼Œè®¾ç½®çš„ï¼Œskill=1ï¼Œç›´çº¿ä¸Šå¤©ï¼Œskill=2ï¼ŒåŸåœ°ä¸Šå¤©ï¼Œskill=3ï¼Œæ¢è£… char value = &#x27;3&#x27;; //è¿™é‡Œä¿®æ”¹ä¸ºhttpæœåŠ¡å™¨åœ°å€ã€‚ String path = &quot;http://192.168.0.109:9797/?skill=&quot;+value; try &#123; URL url = new URL(path); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); conn.setRequestMethod(&quot;GET&quot;); InputStream in = conn.getInputStream(); conn.disconnect(); &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; &#125;).start(); &#125; è¿™åªæ˜¯å…¶ä¸­ä¸€ä¸ªä¸€é”®æ¢è£…çš„æŒ‰é’®ï¼Œå¦å¤–è¿˜éœ€è¦ä¿®æ”¹ä¸€é”®ä¸Šå¤©çš„æŒ‰é’®ã€‚åœ¨FloatingButtonService.javaä¸­ï¼Œä¸¤ä¸ªç¨‹åºï¼Œéƒ½ç›¸ä¼¼ã€‚ã€‚ä¿®æ”¹å®Œåï¼Œç›´æ¥ç¼–è¯‘ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ å®Œæ•´çš„é¡¹ç›®åœ°å€ï¼šhttps://github.com/xieqifei/Expandskill å®‰å“é¡¹ç›®ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡gitå…‹éš† 1git clone https://github.com/xieqifei/Expandskill.git ä¿®æ”¹ç¨‹åºåï¼Œç›´æ¥ç¼–è¯‘å³å¯ã€‚ 5ï¼šå‚è€ƒèµ„æ–™ã€Šandroid adbå¸¸ç”¨å‘½ä»¤æ”¶é›†ã€‹ ã€ŠAndroid adbè¿œç¨‹è°ƒè¯•ã€‹ ã€Šhttp.server â€” å®ç° Web æœåŠ¡å™¨çš„åŸºç¡€ç±»ã€‹ ã€ŠAndroid HTTPè¯·æ±‚æ–¹å¼:HttpURLConnectionã€‹ ã€ŠAndroidæ‚¬æµ®çª—çš„å®ç°ã€‹","categories":[{"name":"å®‰å“ç¼–ç¨‹","slug":"å®‰å“ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E5%AE%89%E5%8D%93%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"ADB","slug":"ADB","permalink":"https://sci.ci/tags/ADB/"},{"name":"Python","slug":"Python","permalink":"https://sci.ci/tags/Python/"},{"name":"Java","slug":"Java","permalink":"https://sci.ci/tags/Java/"}]},{"title":"å·²çŸ¥å¤šä¸ªåœ°ç‚¹ç»çº¬åº¦çš„æœ€ä¼˜è·¯å¾„è§„åˆ’","slug":"å·²çŸ¥å¤šä¸ªåœ°ç‚¹ç»çº¬åº¦çš„æœ€ä¼˜è·¯å¾„è§„åˆ’","date":"2020-10-18T16:42:00.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/10/19/å·²çŸ¥å¤šä¸ªåœ°ç‚¹ç»çº¬åº¦çš„æœ€ä¼˜è·¯å¾„è§„åˆ’/","link":"","permalink":"https://sci.ci/2020/10/19/%E5%B7%B2%E7%9F%A5%E5%A4%9A%E4%B8%AA%E5%9C%B0%E7%82%B9%E7%BB%8F%E7%BA%AC%E5%BA%A6%E7%9A%84%E6%9C%80%E4%BC%98%E8%B7%AF%E5%BE%84%E8%A7%84%E5%88%92/","excerpt":"","text":"1ï¼šä¸ºä»€ä¹ˆè§„åˆ’è·¯çº¿è¿™æ˜¯ç»Ÿä¸€ç¾å›¢é¥¿äº†ä¹ˆè®¢å•åçš„åç»­å·¥ä½œï¼Œè¦æ±‚å¯¹å¤šä¸ªæŒ‡å®šçš„é…é€åœ°ç‚¹è¿›è¡Œç»Ÿè®¡ï¼Œå¹¶è®¡ç®—å‡ºä»èŠ±åº—å‡ºå‘ï¼Œåˆ°é…é€å®Œæ‰€æœ‰åœ°ç‚¹è¿”å›èŠ±åº—çš„å¯èƒ½è·¯ç¨‹ï¼Œå¹¶å¾—å‡ºæœ€ä¼˜çš„è·¯çº¿ã€‚ã€‚ 2ï¼šè®¾è®¡æ€æƒ³å‡è®¾æœ‰å››ä¸ªé…é€ç‚¹ABCDï¼Œé…é€çš„è·¯çº¿ä¼šæœ‰24ç§å¯èƒ½ï¼Œæšä¸¾æ‰€æœ‰å¯èƒ½ï¼Œå¹¶è®¡ç®—ä»èŠ±åº—åˆ°ç¬¬ä¸€ä¸ªé…é€ç‚¹ï¼Œä¾æ¬¡å†æœ‰ä¸‰ä¸ªé…é€ç‚¹ï¼Œç„¶åè¿”å›èŠ±åº—çš„è·ç¦»ã€‚æ¯”è¾ƒè¿™äºŒåå››ç§è·¯çº¿çš„è·ç¦»ï¼Œè·ç¦»æœ€å°‘çš„ï¼Œé€‰ä¸ºæœ€ä¼˜è·¯çº¿ã€‚ åœ¨Pythonä¸­ï¼Œä½¿ç”¨itertoolsè¿­ä»£åº“ä¸­çš„permutationsæ–¹æ³•ï¼Œå¯¹è·¯å¾„å¯èƒ½è¿›è¡Œæ’åˆ—ã€‚é€šè¿‡haversineå…¬å¼è®¡ç®—ä¸¤ä¸ªç»çº¬åº¦ä¹‹é—´çš„è·ç¦»ã€‚ 3ï¼šPythonç¨‹åº1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556# -*- encoding: utf-8 -*-&#x27;&#x27;&#x27;@file_name :shortest_dist.py@description :@time :2020/10/18 20:24:21@author :Qifei@version :1.0&#x27;&#x27;&#x27;from math import radians, cos, sin, asin, sqrtfrom itertools import permutationsclass Route(): def __init__(self,data): self.data = data self.home = &#123;&#x27;lng&#x27;:&#x27;104.270910&#x27;,&#x27;lat&#x27;:&#x27;30.876583&#x27;&#125; self.distances = [] self.routes = [] #æ’åˆ—å„ç§å¯èƒ½çš„è·¯çº¿ self.iter_routes = permutations(data,len(data)) #å°†æ’åˆ—åçš„è¿­ä»£ç±»å‹æ•°æ®è½¬ä¸ºåˆ—è¡¨ç±»å‹ for iter_route in self.iter_routes: self.routes.append(list(iter_route)) #è¿”å›æœ€ä¼˜è·¯çº¿çš„åˆ—è¡¨æ’åº def best_route(self): for route in self.routes: distance = 0 if len(route) &gt; 1: for i in range(len(route)-1): distance += self.calc_distance(route[i+1][&#x27;lng&#x27;],route[i+1][&#x27;lat&#x27;],route[i][&#x27;lng&#x27;],route[i][&#x27;lat&#x27;]) distance += self.calc_distance(self.home[&#x27;lng&#x27;],self.home[&#x27;lat&#x27;],route[0][&#x27;lng&#x27;],route[0][&#x27;lat&#x27;]) distance += self.calc_distance(self.home[&#x27;lng&#x27;],self.home[&#x27;lat&#x27;],route[-1][&#x27;lng&#x27;],route[-1][&#x27;lat&#x27;]) self.distances.append(distance) return self.routes[self.distances.index(min(self.distances))] #è®¡ç®—ä¸¤ä¸ªç»çº¬åº¦ä¹‹é—´çš„è·ç¦» def calc_distance(self,lon1, lat1, lon2, lat2): # å°†åè¿›åˆ¶åº¦æ•°è½¬åŒ–ä¸ºå¼§åº¦ lon1, lat1, lon2, lat2 = map(radians, [float(lon1), float(lat1), float(lon2), float(lat2)]) # haversineå…¬å¼ dlon = lon2 - lon1 dlat = lat2 - lat1 a = sin(dlat/2)**2 + cos(lat1) * cos(lat2) * sin(dlon/2)**2 c = 2 * asin(sqrt(a)) r = 6371 # åœ°çƒå¹³å‡åŠå¾„ï¼Œå•ä½ä¸ºå…¬é‡Œ return c * r * 1000if __name__ == &#x27;__main__&#x27;: data = [&#123;&#x27;name&#x27;:&#x27;å¤§å¼¯ä¸­å­¦&#x27;,&#x27;lng&#x27;:&#x27;104.278184&#x27;,&#x27;lat&#x27;:&#x27;30.879862&#x27;&#125;,&#123;&#x27;name&#x27;:&#x27;æ€¡æ¹–å…¬å›­&#x27;,&#x27;lng&#x27;:&#x27;104.261332&#x27;,&#x27;lat&#x27;:&#x27;30.878314&#x27;&#125;,&#123;&#x27;name&#x27;:&#x27;å¤§å¼¯å°å­¦&#x27;,&#x27;lng&#x27;:&#x27;104.270611&#x27;,&#x27;lat&#x27;:&#x27;30.880657&#x27;&#125;,&#123;&#x27;name&#x27;:&#x27;é•¿æ²³éƒ¡&#x27;,&#x27;lng&#x27;:&#x27;104.278201&#x27;,&#x27;lat&#x27;:&#x27;30.872356&#x27;&#125;] route = Route(data) # print(route.calc_distance(data[0][&#x27;lng&#x27;],data[0][&#x27;lat&#x27;],data[0][&#x27;lng&#x27;],data[0][&#x27;lat&#x27;])) best_route = route.best_route() print(best_route) # print(route.distances)","categories":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/categories/Python/"}],"tags":[{"name":"-Python","slug":"Python","permalink":"https://sci.ci/tags/Python/"}]},{"title":"å¤–å–å¹³å°è®¢å•çˆ¬å–ä¹‹ç¾å›¢å¤–å–å•†å®¶ç‰ˆ","slug":"å¤–å–å¹³å°è®¢å•çˆ¬å–ä¹‹ç¾å›¢å¤–å–å•†å®¶ç‰ˆ","date":"2020-10-17T10:49:09.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/10/17/å¤–å–å¹³å°è®¢å•çˆ¬å–ä¹‹ç¾å›¢å¤–å–å•†å®¶ç‰ˆ/","link":"","permalink":"https://sci.ci/2020/10/17/%E5%A4%96%E5%8D%96%E5%B9%B3%E5%8F%B0%E8%AE%A2%E5%8D%95%E7%88%AC%E5%8F%96%E4%B9%8B%E7%BE%8E%E5%9B%A2%E5%A4%96%E5%8D%96%E5%95%86%E5%AE%B6%E7%89%88/","excerpt":"","text":"1ï¼šrootæ‰‹æœºæ˜¨å¤©ï¼Œæˆ‘åˆ©ç”¨mitmproxyæˆåŠŸæ‹¦æˆªäº†é¥¿äº†ä¹ˆæœåŠ¡å™¨è¿”å›çš„è®¢å•ä¿¡æ¯ã€‚ä»Šå¤©ï¼Œæˆ‘å‡†å¤‡æ•…æŠ€é‡æ–½ï¼Œè·å–ç¾å›¢è®¢å•ã€‚æ®‹é…·çš„ç°å®ç»™æˆ‘ç‚½çƒ­åœ°å¿ƒæµ‡äº†ä¸€ç›†å†·æ°´ã€‚æ— è®ºæˆ‘å¦‚ä½•è°ƒæ•´mitmproxyå’Œç¾å›¢å¤–å–å•†å®¶ç‰ˆï¼Œéƒ½æ— æ³•è·å–åˆ°ç¾å›¢æœåŠ¡å™¨è¿”å›çš„æ•°æ®ã€‚æ›´ç¡®åˆ‡åœ°è¯´ï¼Œç¾å›¢æœåŠ¡å™¨ä¼¼ä¹å‘ç°ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªå°å·ï¼Œå‡†å¤‡å·å–å®ƒè¿”å›ç»™å®¢æˆ·ç«¯åœ°æ•°æ®ã€‚å› æ­¤æ‹’ç»ç»™å®¢æˆ·ç«¯ä¼ é€’æ•°æ®ã€‚ æˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›è§£ç­”ï¼Œåœ¨å®‰å“7.0ä¹‹åï¼Œå®‰å“ç³»ç»Ÿå…è®¸å®‰å“åº”ç”¨ä¸ä¿¡ä»»ç”¨æˆ·ä¸Šä¼ åœ°CAè¯ä¹¦ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨ä¸­é—´äººæ”»å‡»ä¸­ï¼Œå°†ä»£ç†æœåŠ¡å™¨çš„CAè¯ä¹¦æ·»åŠ åˆ°å®‰å“ç”¨æˆ·è¯ä¹¦é‡Œï¼Œè¿™æ ·ä»£ç†æœåŠ¡å™¨åœ¨å®¢æˆ·ç«¯å’ŒhttpsæœåŠ¡ç«¯ä¹‹é—´åšä¸ªä¿¡ä½¿ï¼Œä»–ä»¬çš„æ¥å›ä¿¡ä»¶ï¼Œä¿¡ä½¿å°±èƒ½æ‹†å¼€é˜…è¯»ï¼Œå†å°å¥½å‘å‡ºå»ã€‚ç°åœ¨å®‰å“ç³»ç»Ÿå…è®¸å®‰å“åº”ç”¨è®¾ç½®æ˜¯å¦ä¿¡ä»»ç”¨æˆ·è¯ä¹¦ï¼Œå¾ˆæ˜æ˜¾ï¼Œç¾å›¢å¤–å–å•†å®¶ç‰ˆï¼Œä¸æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰è¯ä¹¦ã€‚ å¥½åœ¨ï¼Œå®‰å“ç³»ç»Ÿæœ‰ä¸ªè¦æ±‚ï¼Œå°±æ˜¯ç³»ç»Ÿè¯ä¹¦éƒ½æ˜¯è¢«è®¤å¯çš„ã€‚è€Œæ·»åŠ ç³»ç»Ÿè¯ä¹¦ï¼Œéœ€è¦ä¿®æ”¹æ‰‹æœºsystemæ–‡ä»¶å¤¹ï¼Œéœ€è¦å°†æ‰‹æœºrootã€‚ å¾…rootæ‰‹æœºï¼šä¸‰æ˜ŸS8+ å·¥å…·ï¼šOdinçº¿åˆ·å·¥å…·ï¼Œç¬¬ä¸‰æ–¹recovery TWRPï¼ŒTomatoå¡åˆ·åŒ…ï¼ˆå¡åˆ·åŒ…å«rootï¼‰ã€‚ 2ï¼šæ·»åŠ CAè¯ä¹¦ä¸ºç³»ç»Ÿè¯ä¹¦mitmproxyä¼šåœ¨å…¶è¿è¡Œç›®å½•ç”Ÿæˆä¸€ä¸ª.mitmproxyéšè—ç›®å½•ï¼Œç›®å½•ä¸­çš„mitmproxy-ca-cert.pemæ˜¯å¯ä»¥ç›´æ¥æ”¾åˆ°ç³»ç»Ÿè¯ä¹¦ç›®å½•ä¸‹çš„è¯ä¹¦ã€‚é¦–å…ˆéœ€è¦å°†å®ƒæ›´åä¸ºç»Ÿä¸€çš„æ ¼å¼ã€‚ 1234#opensslç‰ˆæœ¬åœ¨1.0ä»¥ä¸Šçš„ç‰ˆæœ¬çš„æ‰§è¡Œè¿™ä¸€å¥openssl x509 -inform PEM -subject_hash_old -in mitmproxy-ca-cert.pem #opensslç‰ˆæœ¬åœ¨1.0ä»¥ä¸‹çš„ç‰ˆæœ¬çš„æ‰§è¡Œè¿™ä¸€å¥openssl x509 -inform PEM -subject_hash -in mitmproxy-ca-cert.pem ç”Ÿæˆ347bacb5è¯ä¹¦çš„hashå€¼ï¼Œç„¶åå°†mitmproxy-ca-cert.pemæ›´åä¸º347bacb5.0 å°†æ›´ååçš„è¯ä¹¦æ”¾åˆ°å®‰å“ç³»ç»Ÿè¯ä¹¦ç›®å½•ï¼Œrootåçš„å®‰å“æ‰‹æœºï¼Œå¯ä»¥ç›´æ¥æ‰“å¼€REç®¡ç†å™¨è¿›å…¥ç³»ç»Ÿç›®å½• 1&#x2F;system&#x2F;etc&#x2F;security&#x2F;cacerts é‡å¯æ‰‹æœºã€‚ä¿®æ”¹wifiä»£ç†ï¼Œå¹¶è¿æ¥mitmproxyã€‚ æ‰“å¼€ç¾å›¢å¤–å–å•†å®¶ç‰ˆï¼Œä¸å†æŠ¥æ²¡æœ‰ç½‘ç»œè¿æ¥çš„é”™è¯¯ã€‚æ­¤æ—¶å³å¯ä»¥ä»ä»£ç†ä¸­æˆªè·è§£ç åçš„ä¿¡æ¯äº†ã€‚ 3ï¼šæˆªè·è®¢å•è¯·æ±‚æ•°æ®å¼€å¯mitmproxyï¼Œå¼€å§‹æ”¶é›†è¯·æ±‚ã€‚åœ¨ç¾å›¢ä¸Šä¸‹å•ï¼Œå¯ä»¥æˆªè·ä¸‹å•åï¼Œç¾å›¢æœåŠ¡å™¨å‘é€åˆ°å®¢æˆ·ç«¯çš„è®¢å•ä¿¡æ¯ã€‚ è¿›è¡Œä¸­è®¢å•è¯·æ±‚åœ°å€ï¼Œéƒ¨åˆ†å†…å®¹å·²æ‰“ç ï¼š 1https:&#x2F;&#x2F;eapi.waimai.meituan.com&#x2F;api&#x2F;retail&#x2F;order&#x2F;supplement&#x2F;increment&#x2F;orders?region_id&#x3D;10***0100&amp;region_version&#x3D;153***1&amp;__skck&#x3D;8f5973b0***&amp;__skts&#x3D;16***8&amp;__skua&#x3D;d41d8c***8427e&amp;__skno&#x3D;94899011-*** é¢„è®¢å•è¯·æ±‚åœ°å€ï¼š 1https:&#x2F;&#x2F;eapi.waimai.meituan.com&#x2F;api&#x2F;retail&#x2F;order&#x2F;pre&#x2F;orders?region_id&#x3D;1000510100&amp;region_version&#x3D;1534166411&amp;__skck&#x3D;8f5973b085446090f224af74e30e0181&amp;__skts&#x3D;1603035614&amp;__skua&#x3D;d41d8cd98f00b204e9800998ecf8427e&amp;__skno&#x3D;ed5fa567-5e33-4186-806a-e1ee884b5d5c&amp;__skcy&#x3D;hNEhcBUBRBinXjXwhZ%2BoMtvkMu8%3D è¿›è¡Œä¸­å“åº”å†…å®¹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302&#123; &quot;msg&quot;: &quot;Success&quot;, &quot;code&quot;: 0, &quot;data&quot;: &#123; &quot;serverTime&quot;: 1603013219, &quot;news&quot;: [&#123; &quot;agreeBtn&quot;: 0, &quot;reject_reason&quot;: &quot;&quot;, &quot;rejectBtn&quot;: 0, &quot;apply_refund_type&quot;: 0, &quot;appealReason&quot;: &quot;&quot;, &quot;pay_status&quot;: 3, &quot;payExpireTime&quot;: 0, &quot;orderDescription&quot;: &quot;&quot;, &quot;pay_status_desc&quot;: &quot;å·²ä»˜æ¬¾&quot;, &quot;apply_reason&quot;: &quot;&quot;, &quot;applyRefundTime&quot;: 0, &quot;rejectRefundTime&quot;: &quot;&quot;, &quot;appealRefundTime&quot;: 0, &quot;refundFinishTime&quot;: &quot;&quot;, &quot;isPartRefundApply&quot;: 0, &quot;isAllowPartRefund&quot;: 0, &quot;isAllowAllRefund&quot;: false, &quot;hasMigratedToRetail&quot;: true, &quot;returnSubStatus&quot;: 0, &quot;logistics&quot;: &#123; &quot;id&quot;: -1, &quot;type&quot;: 101, &quot;icon&quot;: &quot;&quot;, &quot;name&quot;: &quot;&quot;, &quot;status&quot;: -1, &quot;statusDesc&quot;: &quot;&quot;, &quot;sendTime&quot;: -1, &quot;confirmTime&quot;: -1, &quot;arrivePoiTime&quot;: -1, &quot;selfDeliveryTime&quot;: -1, &quot;fetchTime&quot;: -1, &quot;completedTime&quot;: -1, &quot;cancelTime&quot;: -1, &quot;collectTime&quot;: 0, &quot;departureTime&quot;: 0, &quot;reachTime&quot;: 0, &quot;takeTime&quot;: 0, &quot;timeOut&quot;: -1, &quot;code&quot;: &quot;&quot;, &quot;valid&quot;: 1, &quot;shippingFee&quot;: 0.0, &quot;tipFee&quot;: 0.0, &quot;shippingTips&quot;: &quot;&quot;, &quot;couponAmount&quot;: 0.0, &quot;activityName&quot;: &quot;&quot;, &quot;activityAmount&quot;: 0.0, &quot;extraFee&quot;: 0.0, &quot;payAmount&quot;: 0.0, &quot;shippingFeeBase&quot;: 0.0, &quot;payType&quot;: &quot;&quot;, &quot;zbType&quot;: 0, &quot;orderDistance&quot;: 0.0, &quot;ifSelfLogistics&quot;: 0, &quot;isCanChangeSelfLogistics&quot;: 0, &quot;dispatcher&quot;: &#123; &quot;name&quot;: &quot;&quot;, &quot;mobile&quot;: &quot;&quot;, &quot;icon&quot;: &quot;&quot;, &quot;role&quot;: &quot;é…é€å‘˜&quot;, &quot;type&quot;: -1, &quot;typeName&quot;: &quot;&quot; &#125;, &quot;dispatchMaster&quot;: &#123; &quot;name&quot;: &quot;ç«™ç‚¹&quot;, &quot;mobile&quot;: &quot;&quot;, &quot;icon&quot;: &quot;&quot;, &quot;role&quot;: &quot;ç«™é•¿&quot; &#125;, &quot;dispatchAssistant&quot;: &#123; &quot;name&quot;: &quot;ç«™ç‚¹å¤‡ç”¨&quot;, &quot;mobile&quot;: &quot;&quot;, &quot;icon&quot;: &quot;&quot;, &quot;role&quot;: &quot;ç«™é•¿åŠ©ç†&quot; &#125;, &quot;unionDispatcher&quot;: &#123; &quot;name&quot;: &quot;&quot;, &quot;mobile&quot;: &quot;&quot; &#125;, &quot;logisticsSubCode&quot;: &quot;&quot;, &quot;dispatchOrderId&quot;: -1, &quot;delayPushSecond&quot;: 0, &quot;delayPushMin&quot;: 0, &quot;assignTime&quot;: 0, &quot;thirdLogisticsCode&quot;: &quot;&quot; &#125;, &quot;printRelayBarCode&quot;: false, &quot;utime&quot;: 1603013218, &quot;refundType&quot;: -1, &quot;isCanChangeSelfLogistics&quot;: 0, &quot;refundProcessEndTips&quot;: &quot;&quot;, &quot;ifSelfLogistics&quot;: 0, &quot;cancelButtonShow&quot;: 0, &quot;foodDoneInfo&quot;: &#123; &quot;isShowFoodDoneBlock&quot;: 0, &quot;isfoodDone&quot;: 0, &quot;foodDoneStatus&quot;: &quot;æ‹£è´§å®Œæˆ&quot;, &quot;foodDoneTime&quot;: 0, &quot;foodSendOutTimeDeadline&quot;: 0, &quot;diningMinutes&quot;: 0, &quot;foodSendDeviceInfo&quot;: &quot;&quot; &#125;, &quot;logisticsAbnormalInfo&quot;: &#123; &quot;isLogisticsAbnormal&quot;: 0, &quot;logisticsAbnormalDesc&quot;: &quot;&quot;, &quot;logisticsAbnormalType&quot;: 0, &quot;isShowLogisticsReport&quot;: 0, &quot;logisticsReportDesc&quot;: &quot;&quot; &#125;, &quot;refundOtherInfos&quot;: &#123; &quot;returnStatusDesc&quot;: &quot;&quot;, &quot;returnSubStatusDesc&quot;: &quot;&quot;, &quot;returnMaxPayAcount&quot;: 100.0, &quot;returnSubStatus&quot;: 0, &quot;countDownDesc&quot;: &quot;&quot;, &quot;refundViewId&quot;: 0, &quot;serviceType&quot;: 0, &quot;refundRuleUrl&quot;: &quot;http://s3plus.sankuai.com/v1/mss_03d0d9cf21144ba0b7747ba1dc1acf6e/order/refund_rules.html&quot; &#125;, &quot;refundInfoList&quot;: [], &quot;refundGoodsInfoList&quot;: [], &quot;isAppealApply&quot;: 0, &quot;compensationInfo&quot;: &#123; &quot;id&quot;: 0, &quot;title&quot;: &quot;&quot;, &quot;time&quot;: 0, &quot;moneyDesc&quot;: &quot;&quot;, &quot;reason&quot;: &quot;&quot;, &quot;pictures&quot;: [], &quot;appealInfo&quot;: &quot;&quot; &#125;, &quot;orderImValid&quot;: 1, &quot;imGuideContent&quot;: &quot;&quot;, &quot;imReplyDefaultContent&quot;: &quot;&quot;, &quot;isAllowPriceDiffRefund&quot;: false, &quot;confirmDeliveryStatus&quot;: 0, &quot;id&quot;: 56367**02186, &quot;wm_poi_id&quot;: 5636780, &quot;wm_poi_order_dayseq&quot;: 1, &quot;wm_order_id_view&quot;: 563678***186, &quot;num&quot;: 1, &quot;poi_name&quot;: &quot;**é²œèŠ±åº—&quot;, &quot;order_source&quot;: 1, &quot;order_source_desc&quot;: &quot;æ‰‹æœºAPPä¸‹å•&quot;, &quot;shipping_fee&quot;: 0.0, &quot;recipient_name&quot;: &quot;è°¢å…ˆç”Ÿ&quot;, &quot;recipient_phone&quot;: &quot;178**858,4109&quot;, &quot;recipient_address&quot;: &quot;&quot;, &quot;total_after&quot;: 10.0, &quot;total_before&quot;: 10.0, &quot;boxpriceTotal&quot;: 0.0, &quot;remark&quot;: &quot;[è´ºå¡å†…å®¹]è´ºå¡å†…å®¹ [å…¶ä»–å¤‡æ³¨]å¤‡æ³¨å†…å®¹&quot;, &quot;environmentalFriendlyOrder&quot;: 0, &quot;status&quot;: 4, &quot;order_time&quot;: 1603013207, &quot;order_time_fmt&quot;: &quot;10-18 17:26&quot;, &quot;confirmOrderTime&quot;: 1603013218, &quot;details&quot;: [&#123; &quot;id&quot;: 1945297344, &quot;food_name&quot;: &quot;8æçº¢è‰²éæ´²èŠ &quot;, &quot;food_price&quot;: 10.0, &quot;originalFoodPrice&quot;: 10.0, &quot;unit&quot;: &quot;ä»½&quot;, &quot;count&quot;: 1, &quot;box_num&quot;: 1.0, &quot;box_price&quot;: 0.0, &quot;cartId&quot;: 0, &quot;cartName&quot;: &quot;1å·å£è¢‹&quot;, &quot;upcCode&quot;: &quot;&quot;, &quot;skuCode&quot;: &quot;&quot;, &quot;locatorCode&quot;: &quot;&quot;, &quot;discountPoint&quot;: &quot;&quot;, &quot;discountRemark&quot;: &quot;&quot;, &quot;picUrl&quot;: &quot;http://p0.meituan.net/wmproduct/d852b****0fa2d7f3d1adf7d95423.jpg&quot;, &quot;specification&quot;: &quot;&quot; &#125;], &quot;discounts&quot;: [], &quot;tips&quot;: [], &quot;canBeCancelled&quot;: 1, &quot;cancel_reason&quot;: &quot;&quot;, &quot;is_pre_order&quot;: 0, &quot;delivery_btime&quot;: 0, &quot;pre_order_delivery_info&quot;: &quot;&quot;, &quot;pay_utime&quot;: 1603013218, &quot;pay_utime_fmt&quot;: &quot;2020-10-18 17:26:58&quot;, &quot;online_paid_info&quot;: &quot;&quot;, &quot;pre_order_remind&quot;: 0, &quot;pre_order_tip&quot;: &quot;é¢„è®¢å•ï¼šæœŸæœ›é€è¾¾æ—¶é—´&quot;, &quot;overtime_paid_info&quot;: &quot;&quot;, &quot;invoice_title&quot;: &quot;&quot;, &quot;wm_order_pay_type&quot;: 2, &quot;actual_pay_type&quot;: 2, &quot;dispatch_code&quot;: &quot;&quot;, &quot;longitude&quot;: 104251302, &quot;latitude&quot;: 30880900, &quot;inArea&quot;: 1, &quot;orderDistance&quot;: 2120.0, &quot;addressLongitude&quot;: 104251302, &quot;addressLatitude&quot;: 30880900, &quot;riderPayment&quot;: &quot;&quot;, &quot;zbShippingFee&quot;: &quot;&quot;, &quot;zbShippingTips&quot;: &quot;&quot;, &quot;tipsVos&quot;: [], &quot;status_desc&quot;: &quot;å·²æ¥å•&quot;, &quot;delivery_btime_fmt&quot;: &quot;&quot;, &quot;logistics_code&quot;: &quot;&quot;, &quot;logisticsService&quot;: 1, &quot;logistics_status&quot;: -1, &quot;hasFrozen&quot;: 0, &quot;estimateArrivalTime&quot;: 1603020418, &quot;poi_push_day&quot;: 20201018, &quot;bindedPhone&quot;: &quot;178**858,4109&quot;, &quot;isLargeAmountOrder&quot;: 0, &quot;userOrderCount&quot;: 2, &quot;pickType&quot;: 0, &quot;isUsePrivacyPhone&quot;: 1, &quot;privacyPhone&quot;: &quot;1788**4858,4109&quot;, &quot;phoneShow&quot;: &quot;178**8è½¬4109&quot;, &quot;privacyPhoneStatus&quot;: 0, &quot;recipientPhoneShow&quot;: &quot;æ‰‹æœºå°¾å·2605&quot;, &quot;packageBagMoney&quot;: 0.0, &quot;wmUserId&quot;: 371311890, &quot;confirmTime&quot;: 1603013218, &quot;cansunStatus&quot;: 0, &quot;cansunInfo&quot;: [], &quot;wmChargeBusiness&quot;: &#123; &quot;wmOrderViewId&quot;: 56367802727202186, &quot;activityAmount&quot;: &quot;0.0&quot;, &quot;activityDetails&quot;: [], &quot;commisionAmount&quot;: &quot;-1.0&quot;, &quot;settleAmount&quot;: &quot;8.95&quot;, &quot;offlineOrderSkPayAmount&quot;: &quot;0.0&quot;, &quot;shippingType&quot;: &quot;0000&quot;, &quot;commisionDetails&quot;: [&#123; &quot;chargeAmount&quot;: &quot;-1.0&quot;, &quot;chargeDesc&quot;: &quot;æœåŠ¡è´¹&quot; &#125;], &quot;userOnlinePayAfter&quot;: &quot;&quot;, &quot;discounts&quot;: [], &quot;isDowngrade&quot;: false, &quot;shippingFee&quot;: &quot;0.0&quot;, &quot;riderPayment&quot;: &quot;&quot;, &quot;isRiderPay&quot;: false, &quot;giftDetails&quot;: [], &quot;userPayAmount&quot;: &quot;0.0&quot;, &quot;foodAmount&quot;: &quot;10.0&quot;, &quot;userPayTotalAmount&quot;: &quot;10.0&quot;, &quot;donateAmount&quot;: &quot;-0.05&quot;, &quot;agreementAmount&quot;: 0.0, &quot;chargeMode&quot;: 1 &#125;, &quot;userTips&quot;: [&#123; &quot;category&quot;: 17, &quot;type&quot;: &quot;ä¸‹å•2æ¬¡&quot;, &quot;info&quot;: &quot;è¯¥ç”¨æˆ·è¿‡å»90å¤©å®Œæˆè®¢å•æ•°&quot; &#125;], &quot;bindedPrivacyPhoneList&quot;: [&#123; &quot;privacyPhoneShow&quot;: &quot;130**773è½¬5108&quot;, &quot;privacyPhone&quot;: &quot;13**4773,5108&quot; &#125;], &quot;backupField&quot;: [], &quot;onTimeInsurance&quot;: &#123; &quot;effect&quot;: 0, &quot;desc&quot;: &quot;&quot;, &quot;status&quot;: 0 &#125;, &quot;foodSafeInsurance&quot;: &#123; &quot;effect&quot;: 0, &quot;desc&quot;: &quot;&quot;, &quot;status&quot;: 0 &#125;, &quot;thirdLogistics&quot;: &#123; &quot;courierName&quot;: &quot;&quot;, &quot;courierPhone&quot;: &quot;&quot;, &quot;logisticsPlatformName&quot;: &quot;&quot;, &quot;logisticsPlatformCode&quot;: &quot;&quot;, &quot;deliverTime&quot;: &quot;&quot;, &quot;allowAlterType&quot;: true &#125;, &quot;preMakerValid&quot;: 1, &quot;retailOrderPreMakerInfo&quot;: &#123; &quot;preMakerPrivacyPhoneShow&quot;: &quot;1788**37è½¬9232&quot;, &quot;preMakerPhoneShow&quot;: &quot;178**7è½¬9232&quot;, &quot;preMakerPhone&quot;: &quot;178**137,9232&quot;, &quot;preMakerTag&quot;: &quot;è´­èŠ±ä½¿è€…&quot;, &quot;preMakerPrivacyPhoneShowAfter&quot;: &quot;1******8137è½¬9232&quot;, &quot;preMakerBackupPrivacyPhone&quot;: [&#123; &quot;privacyPhoneShow&quot;: &quot;185**029è½¬1199&quot;, &quot;privacyPhone&quot;: &quot;18**4029,1199&quot; &#125;] &#125; &#125;], &quot;changes&quot;: [], &quot;orderSynCtime&quot;: 1603013219, &quot;orderSynUtime&quot;: 1603013219 &#125;&#125; 3.1 ç¡®è®¤é€è¾¾æ—¶é—´ï¼š1&quot;estimateArrivalTime&quot;: 1603020418, ä»ä¿¡æ¯ä¸­æå–åˆ°é€è¾¾æ—¶é—´çš„æ—¶é—´æˆ³ï¼Œæ—¶é—´æˆ³æ˜¯æŒ‡ï¼Œæ ¼æ—å¨æ²»æ—¶é—´ä»1970-01-01 00:00:00åˆ°æŸä¸ªæ—¶é—´ç‚¹æ‰€ç»å†çš„ç§’æ•°ï¼Œå¯ä»¥è¡¨è¾¾ç»å¯¹æ—¶é—´é¢†åŸŸçš„ä¸€ä¸ªæ—¶åˆ»ã€‚å…¶è½¬åŒ–ä¸ºæˆ‘ä»¬æ‰€èƒ½å¤Ÿé˜…è¯»çš„æ—¶é—´ï¼Œæ˜¯æ ¹æ®è®¡ç®—æœºç³»ç»Ÿæ—¶é—´æ¥è®¡ç®—çš„ã€‚ä¸åŒæ—¶åŒºçš„è®¡ç®—æœºå¾—åˆ°çš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸Šè¿°æ—¶é—´æˆ³ï¼Œè½¬ä¸ºåŒ—äº¬æ—¶é—´åæ˜¯2020-10-18 19:26:58ã€‚åœ¨è½¬æ¢æ—¶ï¼Œé»˜è®¤æ—¶æ ¹æ®è®¡ç®—æœºæ‰€åœ¨æ—¶åŒºè½¬æ¢ã€‚æ‰€ä»¥ï¼Œæœ€å¥½æŒ‡å®šè½¬æ¢æ—¶åŒºã€‚ 123456import pytzts = 1566395745tz = pytz.timezone(&#x27; Asia/Shanghai&#x27;)dt = pytz.datetime.datetime.fromtimestamp(ts, tz)dt.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;)12345 ç»“æœä¸ºï¼š2019-08-21 09:55:45 3.2 é€è¾¾åœ°ç‚¹åœ¨ä¿¡æ¯ä¸­ï¼Œæ˜¯æ²¡æœ‰é…é€åœ°ç‚¹çš„å†…å®¹çš„ï¼Œå¦‚æœï¼Œé€šè¿‡appiumæ¥ç‚¹å‡»æŸ¥çœ‹åœ°å€åœ¨çˆ¬å–åœ°å€ä¿¡æ¯ï¼Œå°±è¿‡äºéº»çƒ¦ã€‚å†æ¬¡ç ”ç©¶è®¢å•ä¿¡æ¯JSONæ•°æ®åï¼Œæˆ‘å‘ç°ï¼Œåœ¨è®¢å•ä¸­ï¼Œæœ‰ä¸€è¡Œæ•°æ®ä¸º 12&quot;addressLongitude&quot;: 104251302,&quot;addressLatitude&quot;: 30880900, è¿™æ˜¯åœ°å€ç¼–ç ï¼Œå¯¹åº”çš„æ˜¯ç»çº¬åº¦ä¿¡æ¯ã€‚åœ¨é«˜å¾·åœ°å›¾APIæ¥å£æ‰‹å†Œä¸­ï¼Œæˆ‘æ‰¾åˆ°äº†é€‚åˆåœ°å€è§£ç çš„api 1https:&#x2F;&#x2F;restapi.amap.com&#x2F;v3&#x2F;geocode&#x2F;regeo?output&#x3D;xml&amp;location&#x3D;116.310003,39.991957&amp;key&#x3D;&lt;ç”¨æˆ·çš„key&gt;&amp;radius&#x3D;1000&amp;extensions&#x3D;all æµ‹è¯•åï¼Œä»apiè¿”å›çš„åœ°å€æ­£æ˜¯æ”¶è´§åœ°å€ã€‚ å¯ä»¥çœ‹åˆ°ï¼ŒLongitudeç»åº¦ï¼ŒLatitudeç»´åº¦ã€‚è¿™ä¸ªå‚æ•°æ˜¯ä»¥å…­ä½å°æ•°ç»“å°¾çš„æ•°æ®ã€‚ã€‚è€Œè®¢å•ä¸­ï¼Œæ˜¯æ²¡æœ‰æŠŠå°æ•°ä½è¡¨ç°å‡ºæ¥çš„ï¼Œæ‰€ä»¥éœ€è¦å•ç‹¬ä¿®æ”¹ã€‚ ä¸ºäº†è®©é¥¿äº†ä¹ˆå’Œç¾å›¢çš„è®¢å•ï¼Œå…·æœ‰ç›¸åŒçš„æ ¼å¼ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¹‹å‰ç¡®å®šçš„é¥¿äº†ä¹ˆè®¢å•å¯¹è±¡ã€‚æŠŠé€è¾¾æ—¶é—´ç»Ÿä¸€æ›´æ”¹ä¸ºæ—¶é—´æˆ³ï¼ŒæŠŠåœ°å€ä¿¡æ¯ç»Ÿä¸€è½¬ä¸ºåœ°ç†ç¼–ç åçš„ç»çº¬åº¦ã€‚ 4ï¼šPythonç¼–ç¨‹ä¸‹é¢æ˜¯åŒ…å«äº†é¥¿äº†ä¹ˆå’Œç¾å›¢å¤–å–çš„å®Œæ•´ç¨‹åº 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586# -*- encoding: utf-8 -*-&#x27;&#x27;&#x27;@file_name :order.py@description :@time :2020/10/16 21:25:01@author :Qifei@version :1.0&#x27;&#x27;&#x27;import mitmproxy.httpimport json#é¡¾å®¢ç±»class Customer(object): def __init__(self,name,tel): self.name = name self.tel = tel #å•†å“ç±»class Good(object): def __init__(self,name,number,img): self.name = name self.number = number self.img = img#è®¢å•ç±»class Order(Customer): def __init__(self,platform,name,tel,addr_long,addr_latu,note,arri_time,order_id,goods): Customer.__init__(self,name,tel) self.addr_long = addr_long self.addr_latu = addr_latu self.note = note self.arri_time = arri_time self.order_id = order_id self.goods = goods self.platform = platform#æˆªè·é¥¿äº†ä¹ˆè®¢å•class ElemeOrders(): def __init__(self): self.orders = [] def response(self, flow: mitmproxy.http.flow): if &quot;bwm_newretail.recrm_order_j/queryorderapp/queryOrderInfoList?&quot; in flow.request.url: data = json.loads(flow.response.text)[&quot;data&quot;] for total_order_list in data[&#x27;total_order_list&#x27;]: for order_list in total_order_list[&#x27;order_list&#x27;]: goods = [] for good in order_list[&#x27;order_goods&#x27;][&#x27;goods_list&#x27;]: good_buffer = Good(good[&#x27;name&#x27;],good[&#x27;number&#x27;],good[&#x27;url&#x27;]) goods.append(good_buffer) order = Order(&#x27;eleme&#x27;,order_list[&#x27;order_basic&#x27;][&#x27;user_real_name&#x27;]+order_list[&#x27;order_basic&#x27;][&#x27;sex&#x27;],order_list[&#x27;order_basic&#x27;][&#x27;user_phone&#x27;],str(order_list[&#x27;order_basic&#x27;][&#x27;user_address_lng&#x27;]),str(order_list[&#x27;order_basic&#x27;][&#x27;user_address_lat&#x27;]),order_list[&#x27;order_basic&#x27;][&#x27;user_note&#x27;],order_list[&#x27;order_basic&#x27;][&#x27;takeout_average_time&#x27;],order_list[&#x27;order_basic&#x27;][&#x27;order_id&#x27;],goods) self.orders.append(order) print(self.orders) #æˆªè·ç¾å›¢è®¢å•class MeituanOrders(): def __init__(self): self.orders = [] def response(self, flow: mitmproxy.http.flow): if &quot;eapi.waimai.meituan.com/api/retail/order/supplement/increment/orders?&quot; in flow.request.url: data = json.loads(flow.response.text)[&quot;data&quot;] for order_list in data[&#x27;news&#x27;]: goods = [] for good in order_list[&#x27;details&#x27;]: good_buffer = Good(good[&#x27;food_name&#x27;],good[&#x27;count&#x27;],good[&#x27;picUrl&#x27;]) goods.append(good_buffer) order = Order(&#x27;meituan&#x27;,order_list[&#x27;recipient_name&#x27;],order_list[&#x27;recipient_phone&#x27;],self.geo_format(order_list[&#x27;longitude&#x27;]),self.geo_format(order_list[&#x27;latitude&#x27;]),order_list[&#x27;remark&#x27;],order_list[&#x27;estimateArrivalTime&#x27;],order_list[&#x27;id&#x27;],goods) self.orders.append(order) print(self.orders[0].name) #å°†ç»çº¬åº¦162787612è½¬ä¸º162.787612 def geo_format(self,int_geo): str_geo = str(int_geo) #162787612 list_geo = list(str_geo) #[&#x27;1&#x27;,&#x27;6&#x27;,&#x27;2&#x27;,&#x27;7&#x27;,&#x27;8&#x27;,&#x27;7&#x27;,&#x27;6&#x27;,&#x27;1&#x27;,&#x27;2&#x27;] list_geo.insert(-6,&#x27;.&#x27;) new_str = &#x27;&#x27;.join(list_geo) return new_str#mitmproxyæ’ä»¶addons = [ ElemeOrders(), MeituanOrders()] 5ï¼šå‚è€ƒèµ„æ–™ã€Šç»™Android7åŠä»¥ä¸Šçš„æ‰‹æœºå®‰è£…ç³»ç»Ÿçº§è¯ä¹¦ï¼Œå®ç°Fiddleræˆ–è€…å…¶ä»–ç¨‹åºçš„HTTPSçš„æŠ“åŒ…ã€‹ ã€Špythonå°†æ—¶é—´æˆ³è½¬æ¢ä¸ºæŒ‡å®šæ—¶åŒºæ—¶é—´ã€‹","categories":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/categories/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"-TWRP","slug":"TWRP","permalink":"https://sci.ci/tags/TWRP/"}]},{"title":"å¤–å–å¹³å°è®¢å•çˆ¬å–ä¹‹é¥¿äº†ä¹ˆé›¶å”®å•†å®¶ç‰ˆ","slug":"å¤–å–å¹³å°è®¢å•çˆ¬å–ä¹‹é¥¿äº†ä¹ˆé›¶å”®å•†å®¶ç‰ˆ","date":"2020-10-16T15:46:27.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/10/16/å¤–å–å¹³å°è®¢å•çˆ¬å–ä¹‹é¥¿äº†ä¹ˆé›¶å”®å•†å®¶ç‰ˆ/","link":"","permalink":"https://sci.ci/2020/10/16/%E5%A4%96%E5%8D%96%E5%B9%B3%E5%8F%B0%E8%AE%A2%E5%8D%95%E7%88%AC%E5%8F%96%E4%B9%8B%E9%A5%BF%E4%BA%86%E4%B9%88%E9%9B%B6%E5%94%AE%E5%95%86%E5%AE%B6%E7%89%88/","excerpt":"","text":"1ï¼šç®€å•è¯´ä¸¤å¥è¿™æ˜¯æˆ‘ä¸€ä¸ªå‡†å¤‡åšçš„å®Œæ•´é¡¹ç›®ä¸­çš„ä¸€ä¸ªå°éƒ¨åˆ†ã€‚ä»å¾ˆæ—©ä»¥å‰ï¼Œæˆ‘å°±åœ¨æ€è€ƒï¼Œå¦‚ä½•å°†ç¾å›¢å’Œé¥¿äº†ä¹ˆä»¥åŠæˆ‘è‡ªå·±åšçš„å°ç¨‹åºè®¢å•åˆå¹¶åœ¨ä¸€èµ·ï¼Œè¿™æ ·æ¥å®ç°ç»Ÿä¸€çš„ç®¡ç†ã€‚ã€‚ä¹‹æ‰€ä»¥è¦ç»Ÿä¸€ç®¡ç†ï¼Œæ˜¯å› ä¸ºæˆ‘æ¯äº²ä»äº‹é²œèŠ±é›¶å”®ï¼Œåœ¨èŠ‚å‡æ—¥é‡Œï¼Œä¼šæœ‰å¤§é‡çš„è®¢å•ï¼Œè€Œé²œèŠ±çš„åŒ…æ‰æ˜¯ä¸ªæ—¶é—´æ´»ã€‚åˆ¶ä½œå’Œé…é€ï¼Œä»¥åŠè®¢å•çš„å¤„ç†ï¼Œç¹æ‚çš„ç¨‹åºä¼šè®©äººæ™•å¤´è½¬å‘ã€‚ä¸ºäº†å‡è½»æˆ‘æ¯äº²çš„èŠ‚å‡æ—¥å‹åŠ›ï¼Œæˆ‘æƒ³åˆ°äº†ä¸€äº›æ–¹æ³•ï¼Œæ¥å¸®åŠ©å¥¹ç®¡ç†è®¢å•ã€‚ å®Œæ•´çš„é¡¹ç›®æ˜¯ï¼Œæ±‡æ€»å°ç¨‹åºã€ç¾å›¢ã€é¥¿äº†ä¹ˆçš„è®¢å•ã€‚å°†è®¢å•è¿”å›çš„ä¿¡æ¯ï¼Œé€šè¿‡å¤„ç†ï¼ŒæŒ‰é…é€æ—¶é—´æ’åºï¼Œç»è¿‡å¤„ç†åé€šè¿‡ä¼ä¸šå¾®ä¿¡apiæ¨é€ç»™å¾®ä¿¡ã€‚å› ä¸ºï¼ŒèŠ±åº—çš„é…é€äººå‘˜éƒ½æ˜¯æˆ‘æ¯äº²æ‰¾çš„ï¼Œä»–ä»¬å—æ•™è‚²ç¨‹åº¦ä½ï¼Œæœ‰çš„å› ä¸ºä¸è¯†å­—ï¼Œè¿å¯¼èˆªéƒ½ä¸ä¼šç”¨ã€‚æ‰€ä»¥ï¼Œéœ€è¦æŠŠè®¢å•çš„ä½ç½®ä¿¡æ¯ï¼Œé€šè¿‡ç™¾åº¦åœ°å›¾apiè½¬ä¸ºurlå‘é€ç»™é…é€å‘˜ã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥åˆ¶ä½œä¸€ä¸ªç¨‹åºï¼Œåœ¨ç¨‹åºä¸Šå®æ—¶æ›´æ–°ï¼Œæ–°è®¢å•ã€‚ã€‚æ¯å½“ä¸€æŸèŠ±è¢«åšå¥½ï¼Œæˆ‘æ¯äº²å°±å¯ä»ç¨‹åºä¸­å°†è¯¥è®¢å•ä»ç­‰å¾…åˆ¶ä½œçš„åˆ—è¡¨ä¸­ç§»é™¤ã€‚ã€‚æ¯å½“ï¼Œæœ‰ä¸€ä¸ªè®¢å•è¢«é€å‡ºï¼Œä¹Ÿå¯åœ¨ç¨‹åºä¸Šæ§åˆ¶ç¾å›¢ç­‰å®¢æˆ·ç«¯å‘é€å¯¹åº”æ¶ˆæ¯ã€‚ è¿™ä¸€åˆ‡éƒ½æ˜¯éå¸¸ç¾å¥½çš„ï¼Œå¯¹é›¶å”®å•†å®¶çš„ä½“éªŒä¼šéå¸¸å‹å¥½ã€‚ä½†æ˜¯ï¼Œå› ä¸ºæˆ‘æ— æ³•å–å¾—ç¾å›¢å’Œé¥¿äº†ä¹ˆçš„å¼€å‘è€…èµ„æ ¼ï¼Œä¹Ÿå°±æ‹¿ä¸åˆ°ä»–ä»¬çš„æ¥å£æˆæƒã€‚ã€‚äºæ˜¯ï¼Œæˆ‘æƒ³åˆ°äº†ï¼Œåˆ©ç”¨åˆ©ç”¨mitmproxyè·å–ç¾å›¢é¥¿äº†ä¹ˆçš„è®¢å•ä¿¡æ¯ã€‚é€šè¿‡appiumè‡ªåŠ¨åŒ–æ§åˆ¶æ‰‹æœºã€‚æ— è®ºæ˜¯mitmrpoxyè¿˜æ˜¯appiumå¯¹pythonç¨‹åºéƒ½æ˜¯éå¸¸å‹å¥½çš„ã€‚ é‚£ä¹ˆç°åœ¨å¼€å§‹æˆ‘çš„ç¬¬ä¸€æ­¥ï¼Œåˆ©ç”¨mitmproxyçˆ¬å–é¥¿äº†ä¹ˆé›¶å”®å•†å®¶ç‰ˆè®¢å•ä¿¡æ¯ã€‚ 2ï¼šmitmproxyå®‰è£…ä¸ä½¿ç”¨å®‰è£… 1pip install mitmproxy å¼€å¯ 12mitmweb#æˆ–è€…mitmproxy mitmdump ä¸pythoné…åˆ 1mitmdump -s eleme.py æ‰‹æœºä½¿ç”¨mitmproxyå¼€å¯çš„ä»£ç†ï¼š æ›´æ”¹wifié«˜çº§è®¾ç½®é‡Œçš„ä»£ç†æ¨¡å¼ä¸ºæ‰‹åŠ¨ï¼Œä¸»æœºå¡«å†™mitmproxyè¿è¡Œçš„ç”µè„‘å±€åŸŸç½‘ipã€‚å¯é€šè¿‡ifconfigæŸ¥çœ‹ã€‚ ç«¯å£ä¸º8080 æ­¤æ—¶æ‰“å¼€baidu.comä¼šæç¤ºä¸å®‰å…¨ï¼Œè€Œä¸”mitmproxyåº”è¯¥å¼€å§‹è®°å½•äº†ã€‚ æ‰‹æœºæ‰“å¼€ç½‘é¡µmitm.itä¸‹è½½å¯¹åº”ç³»ç»Ÿçš„è¯ä¹¦æ–‡ä»¶ã€‚å®‰å“ä¸‹è½½åç›´æ¥å®‰è£…ã€‚ã€‚ å†ä¸Šç½‘å°±ä¸ä¼šæç¤ºä¸å®‰å…¨äº†ã€‚ 3ï¼šå“åº”å†…å®¹åœ¨å¼€å¯mitmwebåï¼Œä»æ‰“å¼€çš„ç½‘é¡µä¸Šå¯ä»¥è§‚å¯Ÿåˆ°æ‰‹æœºçš„æ•´ä¸ªæ•°æ®æµï¼Œåœ¨æ‰‹æœºä¸Šåˆ·æ–°è®¢å•é¡µï¼Œå°±èƒ½æˆªè·é¥¿äº†ä¹ˆå‘é€å›æ¥çš„è®¢å•ä¿¡æ¯ã€‚ å°†å“åº”å†…å®¹æå–å‡ºæ¥ï¼Œå¹¶æŠŠJSONæ•°æ®æ ¼å¼åŒ–ï¼Œéƒ¨åˆ†å…³é”®ä¿¡æ¯å·²æ‰“ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416&#123; &quot;data&quot;: &#123; &quot;curr_page&quot;: 1, &quot;order_count&quot;: 1, &quot;page_count&quot;: 1, &quot;page_size&quot;: 20, &quot;total_order_list&quot;: [&#123; &quot;mills&quot;: 1602518400000, &quot;order_list&quot;: [&#123; &quot;cold_chain_cost&quot;: &#123; &quot;price&quot;: &quot;0.00&quot;, &quot;title&quot;: &quot;å†·é“¾æœåŠ¡è´¹&quot; &#125;, &quot;compensationInfo&quot;: &#123; &quot;enableCompensable&quot;: false, &quot;timeRemaining&quot;: 0 &#125;, &quot;extract_commission&quot;: &#123; &quot;brief_desc&quot;: &quot;è¯·ä»¥ç»“ç®—è´¦å•ä¸ºå‡†&quot;, &quot;commission_total&quot;: &quot;15.00&quot;, &quot;title&quot;: &quot;æŠ½å–ä½£é‡‘&quot; &#125;, &quot;goods_discount&quot;: &#123; &quot;discount_account&quot;: &quot;-ï¿¥3.00&quot;, &quot;discount_list&quot;: [&#123; &quot;desc&quot;: &quot;&quot;, &quot;hasLineBelow&quot;: 1, &quot;list&quot;: [&#123; &quot;price&quot;: &quot;ï¿¥3.00&quot;, &quot;title&quot;: &quot;å•†å®¶é…é€è´¹è¡¥è´´&quot; &#125;, &#123; &quot;price&quot;: &quot;ï¿¥3.00&quot;, &quot;title&quot;: &quot;å°è®¡&quot; &#125;], &quot;title&quot;: &quot;å•†æˆ·è¡¥è´´é‡‘é¢&quot; &#125;, &#123; &quot;desc&quot;: &quot;&quot;, &quot;hasLineBelow&quot;: null, &quot;list&quot;: [&#123; &quot;title&quot;: &quot;é…é€è´¹æ»¡å‡&quot; &#125;, &#123; &quot;title&quot;: &quot;(å•†å®¶è¡¥è´´:ï¿¥3.00å…ƒ)&quot; &#125;], &quot;title&quot;: &quot;æ´»åŠ¨æ˜ç»†&quot; &#125;], &quot;title&quot;: &quot;é¡¾å®¢ä¼˜æƒ åˆè®¡&quot;, &quot;user_discount_account&quot;: &quot;-ï¿¥3.00&quot; &#125;, &quot;grayInfo&quot;: &#123; &quot;hummingBirdGray&quot;: 0 &#125;, &quot;orderSettle&quot;: &#123; &quot;baseLogisticsAmt&quot;: &quot;0.00&quot;, &quot;baseLogisticsDesc&quot;: &quot;æœ¬å•æ”¶å–å›ºå®šç‰©æµè´¹&quot;, &quot;commissionAmt&quot;: &quot;15.00&quot;, &quot;commissionDesc&quot;: &quot;è¯·ä»¥ç»“ç®—è´¦å•ä¸ºå‡†&quot;, &quot;shopInAmount&quot;: &quot;0.00&quot; &#125;, &quot;order_basic&quot;: &#123; &quot;apply_cancel_feed&quot;: &#123; &quot;feed_list&quot;: [&#123; &quot;cancel_content&quot;: &quot;&quot;, &quot;cancel_extra&quot;: &quot;&quot;, &quot;cancel_time&quot;: &quot;10æœˆ13æ—¥ 12:55&quot;, &quot;cancel_title&quot;: &quot;è®¢å•å·²å®Œæˆ(å•†æˆ·)&quot;, &quot;end_time&quot;: &quot;&quot;, &quot;left_time&quot;: 0, &quot;left_time_show&quot;: &quot;&quot;, &quot;refund_price&quot;: &quot;&quot;, &quot;user_apply_refund_pic&quot;: [] &#125;, &#123; &quot;cancel_content&quot;: &quot;&quot;, &quot;cancel_extra&quot;: &quot;&quot;, &quot;cancel_time&quot;: &quot;10æœˆ13æ—¥ 09:10&quot;, &quot;cancel_title&quot;: &quot;å•†å®¶å·²æ¥å•&quot;, &quot;end_time&quot;: &quot;&quot;, &quot;left_time&quot;: 0, &quot;left_time_show&quot;: &quot;&quot;, &quot;refund_price&quot;: &quot;&quot;, &quot;user_apply_refund_pic&quot;: [] &#125;, &#123; &quot;cancel_content&quot;: &quot;&quot;, &quot;cancel_extra&quot;: &quot;&quot;, &quot;cancel_time&quot;: &quot;10æœˆ13æ—¥ 09:10&quot;, &quot;cancel_title&quot;: &quot;è®¢å•å·²æ”¯ä»˜&quot;, &quot;end_time&quot;: &quot;&quot;, &quot;left_time&quot;: 0, &quot;left_time_show&quot;: &quot;&quot;, &quot;refund_price&quot;: &quot;&quot;, &quot;user_apply_refund_pic&quot;: [] &#125;, &#123; &quot;cancel_content&quot;: &quot;&quot;, &quot;cancel_extra&quot;: &quot;&quot;, &quot;cancel_time&quot;: &quot;10æœˆ13æ—¥ 09:09&quot;, &quot;cancel_title&quot;: &quot;åˆ›å»ºè®¢å•&quot;, &quot;end_time&quot;: &quot;&quot;, &quot;left_time&quot;: 0, &quot;left_time_show&quot;: &quot;&quot;, &quot;refund_price&quot;: &quot;&quot;, &quot;user_apply_refund_pic&quot;: [] &#125;] &#125;, &quot;apply_cancel_status&quot;: 886, &quot;auto_confirm_order&quot;: 0, &quot;batch&quot;: 2000000000000000001, &quot;business_type&quot;: 0, &quot;call_delivery_delay&quot;: &quot;&quot;, &quot;cancel_reason&quot;: &quot;&quot;, &quot;cancel_reason_explain&quot;: &quot;&quot;, &quot;cancel_reason_status&quot;: &quot;0&quot;, &quot;check_out_button&quot;: 0, &quot;city_name&quot;: &quot;æˆéƒ½å¸‚&quot;, &quot;confirmButton&quot;: 1, &quot;confirm_time&quot;: &quot;1602551413&quot;, &quot;create_time&quot;: &quot;1602551397&quot;, &quot;delivery_delay_time&quot;: &quot;&quot;, &quot;delivery_exception_code&quot;: 0, &quot;delivery_exception_state&quot;: &quot;&quot;, &quot;delivery_name&quot;: &quot;&quot;, &quot;delivery_party&quot;: &quot;self&quot;, &quot;delivery_staff_phone&quot;: &quot;&quot;, &quot;delivery_state&quot;: &quot;0&quot;, &quot;delivery_state_desc&quot;: &quot;&quot;, &quot;delivery_tip_amount&quot;: 0.0, &quot;distance&quot;: &quot;&lt;1.8åƒç±³&quot;, &quot;due_deliver_time_by_ofc&quot;: &quot;&quot;, &quot;ele_fengniao_info&quot;: &#123; &quot;is_fengniao_call_again&quot;: 0, &quot;is_fengniao_switch_self&quot;: 0, &quot;no_delivery&quot;: 0 &#125;, &quot;ele_zhongbao_info&quot;: &#123; &quot;delivery_fee&quot;: 0, &quot;is_show&quot;: false, &quot;op_status&quot;: 0 &#125;, &quot;eleme_finish_refund&quot;: 0, &quot;eleme_order_id&quot;: &quot;5009809679236497411&quot;, &quot;evoip_order&quot;: 2, &quot;express_company&quot;: &quot;&quot;, &quot;express_id&quot;: &quot;0&quot;, &quot;feed_to_show&quot;: &quot;order_log&quot;, &quot;finished_time&quot;: &quot;1602564946&quot;, &quot;gift_greeting&quot;: &quot;&quot;, &quot;gift_phone&quot;: &quot;13***502&quot;, &quot;hbirdRunErrandsInfo&quot;: &#123; &quot;addTipsButton&quot;: 0, &quot;callButton&quot;: 0, &quot;cancelCallButton&quot;: 0, &quot;payType&quot;: null &#125;, &quot;idempotentId&quot;: &quot;20201017025815254005000100027411822742&quot;, &quot;invoice_price&quot;: &quot;100.00&quot;, &quot;invoice_title&quot;: &quot;&quot;, &quot;is_alipay_order&quot;: 0, &quot;is_baidu_logistics&quot;: 0, &quot;is_can_auto_confirm&quot;: 0, &quot;is_city_delivery&quot;: 0, &quot;is_cold_order&quot;: 0, &quot;is_compensation_show&quot;: 0, &quot;is_cook_overtime&quot;: 0, &quot;is_from_tp_new_retail&quot;: true, &quot;is_print&quot;: 1, &quot;is_privacy_hide&quot;: 1, &quot;is_ranger_show&quot;: 1, &quot;is_show_express&quot;: 0, &quot;ivr_tip&quot;: &quot;&quot;, &quot;meal_num&quot;: &quot;&quot;, &quot;need_invoice&quot;: 0, &quot;orderUserPhone&quot;: &quot;136****3502&quot;, &quot;orderUserPrivacyPhone&quot;: &quot;&quot;, &quot;order_from&quot;: &quot;2&quot;, &quot;order_id&quot;: &quot;50098***97411&quot;, &quot;order_index&quot;: &quot;1&quot;, &quot;order_list_type&quot;: &#123; &quot;is_cancel&quot;: 0, &quot;is_exception&quot;: 0, &quot;is_new&quot;: 0, &quot;is_remind&quot;: 0, &quot;is_reserve&quot;: 1, &quot;is_user_part_refund&quot;: 0 &#125;, &quot;order_time_line&quot;: [&#123; &quot;code&quot;: &quot;101004&quot;, &quot;time&quot;: &quot;10/13 12:55&quot;, &quot;title&quot;: &quot;è®¢å•å·²å®Œæˆ(å•†æˆ·)&quot; &#125;, &#123; &quot;code&quot;: &quot;100004&quot;, &quot;time&quot;: &quot;10/13 09:10&quot;, &quot;title&quot;: &quot;å•†å®¶å·²æ¥å•&quot; &#125;, &#123; &quot;code&quot;: &quot;100001&quot;, &quot;time&quot;: &quot;10/13 09:10&quot;, &quot;title&quot;: &quot;è®¢å•å·²æ”¯ä»˜&quot; &#125;, &#123; &quot;code&quot;: &quot;100000&quot;, &quot;time&quot;: &quot;10/13 09:09&quot;, &quot;title&quot;: &quot;åˆ›å»ºè®¢å•&quot; &#125;], &quot;order_type&quot;: 4, &quot;part_refund_support&quot;: 0, &quot;pay_display&quot;: 1, &quot;pay_status&quot;: &quot;å·²æ”¯ä»˜&quot;, &quot;pc_order_label&quot;: [], &quot;pick_info&quot;: &#123; &quot;expect_finish_time&quot;: &quot;02:58:15&quot;, &quot;left_time&quot;: &quot;0&quot;, &quot;pick_button&quot;: &quot;0&quot;, &quot;show&quot;: &quot;0&quot;, &quot;timestamp&quot;: &quot;&quot; &#125;, &quot;privacy_phone&quot;: &quot;&quot;, &quot;range_status&quot;: 0, &quot;real_status&quot;: 5, &quot;real_status_desc&quot;: &quot;å•†å®¶å·²ç»ç¡®è®¤è®¢å•&quot;, &quot;refund_attribute&quot;: 0, &quot;refund_logs&quot;: [], &quot;refund_req_info&quot;: [], &quot;refuseButton&quot;: 1, &quot;remind_undeal&quot;: 0, &quot;remind_wait_time&quot;: &quot;&quot;, &quot;responsible_party&quot;: &quot;æš‚æ— &quot;, &quot;self_order_completed_button&quot;: 0, &quot;send_time&quot;: &quot;è¯·10æœˆ13æ—¥ 13:00é€è¾¾&quot;, &quot;send_time_print&quot;: &quot;13æ—¥ 13:00é€è¾¾&quot;, &quot;service_phone&quot;: &quot;10105757&quot;, &quot;set_express&quot;: 0, &quot;sex&quot;: &quot;å¥³å£«&quot;, &quot;shopPicked&quot;: 1, &quot;shop_info&quot;: &#123; &quot;location_shop&quot;: &#123; &quot;latitude&quot;: &quot;35**3**7&quot;, &quot;longitude&quot;: &quot;***4431E7&quot; &#125;, &quot;shop_address&quot;: null &#125;, &quot;shop_name&quot;: &quot;**é²œèŠ±åº—&quot;, &quot;shop_phone&quot;: &quot;13***65&quot;, &quot;shop_user_distance&quot;: &quot;&quot;, &quot;show_add_tip&quot;: 0, &quot;show_cancel_button&quot;: false, &quot;show_know_button&quot;: 0, &quot;show_shop_pack&quot;: 0, &quot;status&quot;: 9, &quot;status_desc&quot;: &quot; å·²å®Œç»“&quot;, &quot;supplier_id&quot;: &quot;0&quot;, &quot;supplier_name&quot;: &quot;&quot;, &quot;takeout_average_time&quot;: 1602565200, &quot;takeout_phone&quot;: &quot;136****065&quot;, &quot;taxer_id&quot;: &quot;&quot;, &quot;thirty_min_service&quot;: 0, &quot;userTags&quot;: [2], &quot;user_address&quot;: &quot;ä¸ºäº†ä¿æŠ¤é¡¾å®¢éšç§ï¼Œéšè—åœ°å€ä¿¡æ¯&quot;, &quot;user_address_lat&quot;: &quot;30.890345&quot;, &quot;user_address_lng&quot;: &quot;104.261772&quot;, &quot;user_id&quot;: &quot;576192986&quot;, &quot;user_note&quot;: &quot;é€ç»™æˆ‘å¥½æœ‹å‹çš„ç”Ÿæ—¥èŠ±ï¼Œå†™å‡ å¥ç¥ç¦è¯­ï¼Œè°¢è°¢&quot;, &quot;user_order_num_str&quot;: &quot;è¶…ç™¾æ¬¡ä¸‹å•&quot;, &quot;user_phone&quot;: &quot;177****7520&quot;, &quot;user_phone_call&quot;: &quot;&quot;, &quot;user_phone_star&quot;: &quot;&quot;, &quot;user_real_name&quot;: &quot;çŠ&quot;, &quot;vip_status&quot;: 0, &quot;waimai_release_id&quot;: &quot;159766693&quot;, &quot;wxIconPath&quot;: &quot;&quot;, &quot;wxNickname&quot;: &quot;&quot;, &quot;zone_tips_required&quot;: 0 &#125;, &quot;order_goods&quot;: &#123; &quot;cart_num&quot;: 1, &quot;goods_list&quot;: [&#123; &quot;customer_price&quot;: &quot;98.00&quot;, &quot;ext&quot;: &#123; &quot;attr&quot;: &quot;&quot;, &quot;cart_id&quot;: &quot;1&quot;, &quot;cold_chain&quot;: null, &quot;combo_attr&quot;: [], &quot;customer_total_discount&quot;: &quot;&quot;, &quot;discount_desc&quot;: &quot;&quot;, &quot;ext_code&quot;: &quot;&quot;, &quot;is_combo&quot;: 0, &quot;process_label&quot;: [], &quot;product_index&quot;: null, &quot;property_label&quot;: [], &quot;shop_total_discount&quot;: &quot;&quot;, &quot;store_attr&quot;: &#123; &quot;bar_code&quot;: &quot;wm367**65&quot;, &quot;category_name&quot;: &quot;çˆ±æƒ…è¡¨ç™½&quot;, &quot;shelf_position&quot;: &quot;&quot;, &quot;sku_id&quot;: &quot;1597871782222488&quot; &#125;, &quot;unique_id&quot;: &quot;13***678&quot; &#125;, &quot;fix_weight&quot;: 0, &quot;gift_info&quot;: null, &quot;gmids&quot;: null, &quot;hasgift&quot;: 0, &quot;isNoReasonToReturn&quot;: false, &quot;isfreegift&quot;: 0, &quot;name&quot;: &quot;ã€ä¸ƒå¤•ä¸“å±ã€‘19æœµçº¢ç«ç‘°ç¤¼ç›’+é“¶å¶&quot;, &quot;number&quot;: 1, &quot;orig_price&quot;: &quot;98.00&quot;, &quot;orig_unit_price&quot;: &quot;98.00&quot;, &quot;printing_price&quot;: &quot;98.00&quot;, &quot;shop_price&quot;: &quot;98.00&quot;, &quot;shop_unit_price&quot;: &quot;98.00&quot;, &quot;total_weight&quot;: 999, &quot;unique_id&quot;: &quot;130047***9119678&quot;, &quot;url&quot;: &quot;https://img.alic***i2/111483146/O1CN01wVILGS1Z6udgswHe4_!!111483146-0-***.jpg&quot;, &quot;weight&quot;: 999, &quot;weight_can_update&quot;: false, &quot;weight_flag&quot;: 2 &#125;], &quot;goods_total&quot;: 1 &#125;, &quot;order_meal_fee&quot;: &#123; &quot;price&quot;: &quot;0.00&quot;, &quot;title&quot;: &quot;åŒ…è£…è´¹&quot; &#125;, &quot;order_operations&quot;: [], &quot;order_sub_total&quot;: &#123; &quot;discount&quot;: 0, &quot;formula_desc&quot;: &quot;&quot;, &quot;number&quot;: 1, &quot;price&quot;: &quot;98.00&quot;, &quot;title&quot;: &quot;å•†å“å°è®¡&quot; &#125;, &quot;order_total&quot;: &#123; &quot;customer_price&quot;: &quot;100.00&quot;, &quot;customer_title&quot;: &quot;æœ¬å•é¡¾å®¢å®é™…æ”¯ä»˜&quot;, &quot;number&quot;: 1, &quot;pay_type&quot;: 1, &quot;shop_price&quot;: &quot;85.00&quot;, &quot;shop_price_final&quot;: &quot;85.00&quot;, &quot;title&quot;: &quot;é¢„è®¡æ”¶å…¥&quot;, &quot;title_after&quot;: null, &quot;total_desc&quot;: &quot;æœ¬å•é¡¾å®¢å®é™…æ”¯ä»˜100.00å…ƒ&quot; &#125;, &quot;other_total_cost&quot;: &#123; &quot;price&quot;: &quot;5.00&quot;, &quot;title&quot;: &quot;å…¶ä»–è´¹ç”¨åˆè®¡&quot; &#125;, &quot;prescriptionDrugsInfo&quot;: &#123; &quot;auditButton&quot;: 0, &quot;prescriptionOrder&quot;: false, &quot;processMsg&quot;: &quot;ç³»ç»Ÿæ­£åœ¨å¤„ç†ä¸­&quot; &#125;, &quot;prescription_info&quot;: &#123; &quot;is_prescription_order&quot;: 0 &#125;, &quot;shop_other_discount&quot;: &#123; &quot;customer_discount_list&quot;: [], &quot;customer_discount_total&quot;: 0, &quot;price&quot;: &quot;-0.00&quot;, &quot;shop_discount_list&quot;: [], &quot;shop_discount_total&quot;: 0, &quot;sub_total_desc&quot;: &quot;ä»¥ä¸Šæ˜ç»†ä¸ºå•†æˆ·æ‰¿æ‹…çš„é¡¾å®¢ä¼˜æƒ è´¹ç”¨ï¼Œæœ€ç»ˆè®¢å•æ”¶å…¥è¯·ä»¥å¯¹è´¦å•ä¸ºå‡†ã€‚&quot;, &quot;title&quot;: &quot;å•†æˆ·å…¶ä»–ä¼˜æƒ &quot; &#125;, &quot;takeout_cost&quot;: &#123; &quot;price&quot;: &quot;5.00&quot;, &quot;title&quot;: &quot;é…é€è´¹&quot; &#125; &#125;], &quot;title&quot;: &quot;10æœˆ13æ—¥&quot; &#125;] &#125;, &quot;errmsg&quot;: &quot;&quot;, &quot;errno&quot;: 0, &quot;req_params&quot;: [&#123; &quot;asap_type&quot;: null, &quot;end_timestamp&quot;: &quot;2020-10-16&quot;, &quot;is_asap&quot;: null, &quot;keyword&quot;: &quot;&quot;, &quot;new_system&quot;: 1, &quot;order_status&quot;: 9, &quot;page&quot;: 1, &quot;pageSize&quot;: 20, &quot;shop_id&quot;: null, &quot;start_timestamp&quot;: &quot;2020-10-10&quot; &#125;, &#123; &quot;appVersion&quot;: &quot;2.2.3&quot;, &quot;authedSupplierIds&quot;: [], &quot;brand&quot;: &quot;samsung&quot;, &quot;channel&quot;: &quot;mobile&quot;, &quot;cuid&quot;: &quot;12B9828F9D0D3E389BA181D5A286A514|fw+G+2QPhBBAD8Yubtg6qGDX&quot;, &quot;from&quot;: &quot;android&quot;, &quot;isBoss&quot;: false, &quot;isManager&quot;: false, &quot;isMobile&quot;: false, &quot;isShop&quot;: true, &quot;isSupplier&quot;: false, &quot;manager&quot;: &#123; &quot;bossUserId&quot;: null &#125;, &quot;pcVersion&quot;: &quot;&quot;, &quot;roleInfo&quot;: &#123; &quot;shopRoleId&quot;: &quot;159766693&quot; &#125;, &quot;shopInfo&quot;: &#123; &quot;eleId&quot;: 159766693, &quot;wid&quot;: &quot;159766693&quot; &#125;, &quot;supplierInfo&quot;: &#123; &quot;supplierId&quot;: &quot;0&quot; &#125;, &quot;userInfo&quot;: &#123; &quot;loginRole&quot;: 1, &quot;loginSubUserType&quot;: 0, &quot;loginUserId&quot;: &quot;1597***50001&quot;, &quot;phone&quot;: &quot;13***65&quot;, &quot;shopUserId&quot;: &quot;15973**001&quot;, &quot;userName&quot;: &quot;x***65&quot; &#125; &#125;]&#125; 4ï¼šPythonç¨‹åºå¯¹ä¸Šè¿°JSONæ•°æ®è¿›è¡Œåˆ†æï¼Œåœ¨Pythonä¸­ç”¨json.loadæŠŠJSONæ•°æ®è½¬åŒ–ä¸ºå­—å…¸å’Œåˆ—è¡¨æ ¼å¼æ•°æ®ï¼Œæ–¹ä¾¿æˆ‘ä»¬æå–ä¿¡æ¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546import mitmproxy.httpimport json#é¡¾å®¢ç±»class Customer(object): def __init__(self,name,tel): self.name = name self.tel = tel #å•†å“ç±»class Good(object): def __init__(self,name,number,img): self.name = name self.number = number self.img = img#è®¢å•ç±»class Order(Customer): def __init__(self,platform,name,tel,addr_long,addr_latu,note,arri_time,order_id,goods): Customer.__init__(self,name,tel) self.addr_long = addr_long self.addr_latu = addr_latu self.note = note self.arri_time = arri_time self.order_id = order_id self.goods = goods self.platform = platformclass ElemeOrders(): def __init__(self): self.orders = [] def response(self, flow: mitmproxy.http.flow): if &quot;bwm_newretail.recrm_order_j/queryorderapp/queryOrderInfoList?&quot; in flow.request.url: data = json.loads(flow.response.text)[&quot;data&quot;] for total_order_list in data[&#x27;total_order_list&#x27;]: for order_list in total_order_list[&#x27;order_list&#x27;]: goods = [] for good in order_list[&#x27;order_goods&#x27;][&#x27;goods_list&#x27;]: good_buffer = Good(good[&#x27;name&#x27;],good[&#x27;number&#x27;],good[&#x27;url&#x27;]) goods.append(good_buffer) order = Order(&#x27;eleme&#x27;,order_list[&#x27;order_basic&#x27;][&#x27;user_real_name&#x27;]+order_list[&#x27;order_basic&#x27;][&#x27;sex&#x27;],order_list[&#x27;order_basic&#x27;][&#x27;user_phone&#x27;],str(order_list[&#x27;order_basic&#x27;][&#x27;user_address_lng&#x27;]),str(order_list[&#x27;order_basic&#x27;][&#x27;user_address_lat&#x27;]),order_list[&#x27;order_basic&#x27;][&#x27;user_note&#x27;],order_list[&#x27;order_basic&#x27;][&#x27;takeout_average_time&#x27;],order_list[&#x27;order_basic&#x27;][&#x27;order_id&#x27;],goods) self.orders.append(order) print(self.orders) ç»è¿‡ç®€å•çš„æµ‹è¯•ï¼Œç¨‹åºèƒ½å¤Ÿæ‹¿åˆ°å®Œæ•´çš„è®¢å•ä¿¡æ¯ã€‚ä¸€æ¬¡æ€§æå®šï¼Œæ²¡æœ‰bugã€‚ åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼Œä¸»è¦éœ€è¦å…³æ³¨çš„æ˜¯ï¼ŒMitmç±»ä¸­çš„self.ordersè¿™ä¸ªå˜é‡ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå®ƒåŒ…å«äº†å¤§äºç­‰äº1ä¸ªè®¢å•ã€‚æ¯ä¸ªè®¢å•ï¼Œéƒ½æ˜¯ä¸€ä¸ªOrderç±»çš„å®ä¾‹åŒ–ï¼ŒOrderç±»ä¸­æœ€åä¸€ä¸ªå˜é‡goodsæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œè¿™ä¸ªåˆ—è¡¨ç”±å¤šä¸ªå®ä¾‹åŒ–çš„Goodç±»ç»„æˆã€‚å› ä¸ºä¸€ä¸ªè®¢å•å¯èƒ½åŒ…å«å¤šç§å•†å“ã€‚ å…·ä½“å¦‚ä½•åˆ©ç”¨è¿™äº›ä¿¡æ¯ï¼Œè¿˜éœ€è¦å†Mitm()ç±»ä¸­åšä¿®æ”¹ã€‚è€Œæå–å•ä¸ªè®¢å•ç±»ï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ªè®¢å•ï¼Œç›´æ¥ä½¿ç”¨self.orders[0]ï¼Œè¦æå–ç¬¬ä¸€ä¸ªè®¢å•ä¸­çš„ç¬¬ä¸€ä»¶å•†å“self.orders[0].goods[0]ã€‚ å…¶ä»–çš„ï¼Œæ¯”å¦‚ç¬¬ä¸€ä¸ªè®¢å•æ”¶è´§äººï¼šself.orders[0].name ç¬¬ä¸€ä¸ªè®¢å•çš„ç¬¬ä¸€ä»¶å•†å“çš„åç§°ï¼šself.orders[0].goods[0].name åç»­æˆ‘å¯èƒ½ä¼šå°†å®ƒä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œæ–¹ä¾¿ä¸‹æ¬¡æå–å’Œä¿®æ”¹ä¿¡æ¯ã€‚ 5ï¼šå‚è€ƒèµ„æ–™ã€Šä½¿ç”¨ mitmproxy + python åšæ‹¦æˆªä»£ç†ã€‹ ã€ŠAPPçˆ¬è™«å…¥é—¨ï¼ŒAppium+Mitmproxyå¼ºåŠ¿ç»„åˆå®ç°æŠ–éŸ³çš„æ•°æ®çˆ¬å–ã€‹","categories":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/categories/%E7%88%AC%E8%99%AB/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/tags/Python/"},{"name":"Mitmproxy","slug":"Mitmproxy","permalink":"https://sci.ci/tags/Mitmproxy/"}]},{"title":"PandasçŸ¥è¯†æ€»ç»“","slug":"PandasçŸ¥è¯†æ€»ç»“","date":"2020-10-14T10:45:54.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/10/14/PandasçŸ¥è¯†æ€»ç»“/","link":"","permalink":"https://sci.ci/2020/10/14/Pandas%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/","excerpt":"","text":"1ï¼šç®€ä»‹åœ¨æˆ‘çœ‹æ¥ï¼ŒPandasæ˜¯ä¸€æ¬¾æ•°æ®å¤„ç†å·¥å…·ï¼Œå®ƒç›¸æ¯”äºnumpyè€Œè¨€ï¼Œæ›´åŠ å…·æœ‰é’ˆå¯¹æ€§ã€‚æ¯”å¦‚è¯´ï¼ŒPandasæä¾›äº†ä¸¤ç§æ•°æ®ç»“æ„ï¼ŒSerieså’ŒDataFrameï¼Œåˆ†åˆ«è¡¨ç¤ºä¸€ç»´æ•°æ®å’ŒäºŒç»´æ•°æ®ï¼Œè€Œnumpyåˆ™è¿˜æœ‰æ›´å¤šç»´æ•°æ®ã€‚Pandasçš„ç‰¹è‰²æ˜¯ï¼Œå®ƒå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„ç´¢å¼•æ¥è¡¨ç¤ºæ•°æ®çš„ç‰¹ç‚¹ï¼Œè¿™å’ŒExcelè¡¨æ ¼å¾ˆç±»ä¼¼ã€‚è€Œnumpyåªæœ‰å›ºå®šçš„æ•´æ•°ç´¢å¼•ã€‚ åœ¨æ•°æ®ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæœ‰è¿™ç§æƒ…å†µï¼Œä¸€ä¸ªäºŒç»´è¡¨æ ¼ï¼Œæ¯ä¸€è¡Œï¼Œè¡¨ç¤ºä¸åŒçš„å­¦ç”Ÿï¼Œæ¯ä¸€åˆ—è¡¨ç¤ºå­¦ç”Ÿçš„ä¸åŒä¿¡æ¯ã€‚å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œ å¹´é¾„ ç­çº§ å°æ˜ 19 4ç­ å°å¼  15 2ç­ å°å 17 1ç­ ç”±å¹´é¾„å’Œç­çº§æ„æˆçš„äºŒç»´æ•°ç»„ï¼Œåœ¨numpyä¸­æ˜¯æ— æ³•å»ºç«‹çš„ï¼Œå› ä¸ºnumpyæ— æ³•å»ºç«‹ç­çº§çš„å­—ç¬¦ä¸²æ ¼å¼æ•°æ®ï¼Œä¸”æ•°ç»„å†…ä¸èƒ½å«æœ‰å¤šç§å±æ€§çš„æ•°æ®ï¼Œæ¯”å¦‚å¹´é¾„çš„æ•°æ®æ ¼å¼æ˜¯intï¼Œè€Œç­çº§åˆ™æ˜¯stringã€‚ æ­¤æ—¶Pandasçš„ä½œç”¨å°±å‡ºæ¥äº†ã€‚Pandaså¯ä»¥æŒ‡å®šä¸Šè¿°æ•°æ®æ¯ä¸€è¡Œçš„æ„ä¹‰ä¸ºåå­—ï¼Œæ‰€ä»¥å…¶è¡Œç´¢å¼•Indexå¯ä»¥è®¾ç½®ä¸º[â€˜å°æ˜â€™,â€™å°å¼ â€™,â€™å°åâ€™]ï¼Œè€Œå…¶çºµåæ ‡çš„ç´¢å¼•columnsè®¾ç½®ä¸º[â€˜å¹´é¾„â€™,â€™ç­çº§â€™]ã€‚ç„¶åå†å‘è¿™ä¸ªDataFrameä¸­æ·»åŠ æ•°æ®å³å¯ã€‚ 2ï¼šå…¥é—¨2.1 ç”Ÿæˆå¯¹è±¡å¼•å…¥Pandasï¼š 12import numpy as npimport pandas as pd ç”ŸæˆSeriesï¼š 1s = pd.Series([1,4,1,np.nan,8]) ç”ŸæˆDataFrameï¼š 123dates = pd.date_range(&#x27;20130101&#x27;,periods=6)#ç”Ÿæˆå…­ä¸ªä»¥20130101å¼€å§‹ï¼Œé—´éš”ä¸ºä¸€å¤©çš„æ—¶é—´åºåˆ—df = pd.DataFrame(np.random.randn(6,4), index=dates, columns=list(&#x27;ABCD&#x27;)) date_rangeå‡½æ•°å¯ä»¥ç”Ÿæˆä¸€ä¸ªæ—¶é—´åºåˆ—ï¼Œå‚æ•°æœ‰ï¼Œå¼€å§‹æ—¶é—´ï¼Œç»“æŸæ—¶é—´ï¼Œåºåˆ—ä¸ªæ•°ï¼Œé—´éš”å•ä½ç­‰ã€‚ dfä¸ºï¼š 1234567 A B C D2013-01-01 0.469112 -0.282863 -1.509059 -1.1356322013-01-02 1.212112 -0.173215 0.119209 -1.0442362013-01-03 -0.861849 -2.104569 -0.494929 1.0718042013-01-04 0.721555 -0.706771 -1.039575 0.2718602013-01-05 -0.424972 0.567020 0.276232 -1.0874012013-01-06 -0.673690 0.113648 -1.478427 0.524988 ä½¿ç”¨å­—å…¸å¯¹è±¡ç”ŸæˆDataFrameï¼š 123456df2 = pd.DataFrame(&#123;&#x27;A&#x27;:1, &#x27;B&#x27;:pd.Timestamp(&#x27;20130102&#x27;), &#x27;C&#x27;:pd.Series(1, index=list(range(4)),dtype=&#x27;float332&#x27;), &#x27;D&#x27;:np.array([3]*4,dtype=&#x27;int32&#x27;), &#x27;E&#x27;:pd.Categorical([&quot;test&quot;,&quot;train&quot;,&quot;test&quot;,&quot;train&quot;]), &#x27;F&#x27;:&#x27;foo&#x27;&#125;) 2.2 æŸ¥çœ‹æ•°æ®æŸ¥çœ‹DataFrameå¤´éƒ¨å’Œå°¾éƒ¨æ•°æ®ï¼š 123df.head()df.tail(3)#å¯æŒ‡å®šæŸ¥çœ‹å¤´å°¾éƒ¨çš„æ•°æ®è¡Œæ•° æ˜¾ç¤ºç´¢å¼•å’Œåˆ—åï¼š 12df.indexdf.columns df.to_numpy()å°†DataFrameæ•°æ®è½¬ä¸ºnumpyæ•°æ® df.describe()æŸ¥çœ‹æ•°æ®ç»Ÿè®¡æ‘˜è¦ df.Tè½¬ç½® df.sort_index(axis=1,ascending=False)æŒ‰è½´ä¸Šå‡æ’åº df.sort_values(by=&#39;B&#39;)æŒ‰è½´æ’åº 2.3 é€‰æ‹©æ•°æ®äº§ç”ŸSeries 12df[&#x27;A&#x27;]df.A åˆ‡ç‰‡ï¼š 12df[0:3]#é€‰æ‹©1åˆ°3è¡Œ 1df[&#x27;20130102&#x27;:&#x27;20130104&#x27;] æŒ‰æ ‡ç­¾é€‰æ‹©ï¼š 1df.loc[dates[0]] ç”¨æ ‡ç­¾é€‰å¤šåˆ—ï¼š 1df.loc[:,[&#x27;A&#x27;,&#x27;B&#x27;]] ç”¨æ ‡ç­¾åˆ‡ç‰‡ï¼š 1df.loc[&#x27;20130102&#x27;:&#x27;20130104&#x27;,[&#x27;A&#x27;,&#x27;B&#x27;]] æå–æ ‡é‡ï¼š 12df.loc[dates[0],&#x27;A&#x27;]df.at[dates[0],&#x27;A&#x27;] æŒ‰ä½ç½®é€‰ï¼š 1df.iloc[3] ç”¨æ•´æ•°åˆ‡ç‰‡ï¼š 1df.iloc[3:5,0:2] ç”¨æ•´æ•°åˆ—è¡¨æŒ‰ä½ç½®åˆ‡ç‰‡ï¼š 1df.iloc[[1,2,4],[0,2]] æŒ‰ä½ç½®è®¿é—®æ ‡é‡ï¼š 12df.iloc[1,1]df.iat[1,1] å¸ƒå°”ç´¢å¼•ï¼š ç”¨å•åˆ—çš„å€¼ï¼š 1df[df.A&gt;0] 12345Out[39]: A B C D2013-01-01 0.469112 -0.282863 -1.509059 -1.1356322013-01-02 1.212112 -0.173215 0.119209 -1.0442362013-01-04 0.721555 -0.706771 -1.039575 0.271860 é€‰æ‹©æ»¡è¶³æ¡ä»¶çš„å€¼ï¼š 1df[df&gt;0] 12345678Out[40]: A B C D2013-01-01 0.469112 NaN NaN NaN2013-01-02 1.212112 NaN 0.119209 NaN2013-01-03 NaN NaN NaN 1.0718042013-01-04 0.721555 NaN NaN 0.2718602013-01-05 NaN 0.567020 0.276232 NaN2013-01-06 NaN 0.113648 NaN 0.524988 isin()ç­›é€‰ 123df2 = df.copy()df2[&#x27;E&#x27;] = [&#x27;one&#x27;,&#x27;two&#x27;,&#x27;three&#x27;â€¦â€¦]df2[df2[&#x27;E&#x27;].isin([&#x27;one&#x27;,&#x27;two&#x27;])] 2.4 ç¼ºå¤±å€¼Nanreindexé‡å»ºç´¢å¼•ï¼Œä¸ä¼šä¿®æ”¹æºæ•°æ® 12df1 = df.reindex(index = dates[0:4],columns=list(df.columns)+[&#x27;E&#x27;])df1.loc[dates[0]:dates[1],&#x27;E&#x27;] = 1 123456Out[57]: A B C D F E2013-01-01 0.000000 0.000000 -1.509059 5 NaN 1.02013-01-02 1.212112 -0.173215 0.119209 5 1.0 1.02013-01-03 -0.861849 -2.104569 -0.494929 5 2.0 NaN2013-01-04 0.721555 -0.706771 -1.039575 5 3.0 NaN åˆ é™¤å«ç¼ºå¤±å€¼çš„è¡Œï¼š 1df1.dropna(how=&#x27;any&#x27;) å¡«å……ç¼ºå¤±å€¼ï¼š 1df1.fillna(value=5) æå–ç¼ºå¤±å€¼çš„å¸ƒå°”æ©ç ï¼š 1pd.isna(df1) 2.5 è¿ç®—ä¸€èˆ¬ï¼Œè¿ç®—æ—¶ä¼šæ’é™¤ç¼ºå¤±å€¼ åœ¨åˆ—ä¸Šè®¡ç®—å¹³å‡å€¼ï¼š 1df.mean() åœ¨è¡Œä¸Šè®¡ç®—ï¼š 1df.mean(1) 12345678Out[62]: 2013-01-01 0.8727352013-01-02 1.4316212013-01-03 0.7077312013-01-04 1.3950422013-01-05 1.8836562013-01-06 1.592306Freq: D, dtype: float64 å‡æ³•ï¼š 12s = pd.Series([1,3,5,np.nan,6,8], index=dates).shift(2)df.sub(s,axis=&#x27;index&#x27;) sä¸dfçš„indexè½´æ˜¯ç›¸åŒçš„ï¼Œæˆ–è€…è¯´åœ¨è¡Œä¸Šä»–ä»¬æ•°æ®çš„ä¸ªæ•°ç›¸åŒï¼Œæ‰€ä»¥ï¼Œsubç¬¬äºŒä¸ªå‚æ•°å¡«å†™indexæˆ–è€…0ï¼Œè®¡ç®—æ—¶ï¼Œdfæ¯åˆ—éƒ½ä¼šå‡å»sã€‚ shiftå‡½æ•°æ˜¯å¹³ç§»å‡½æ•°ï¼Œså„ä¸ªä½ç½®ä¸Šçš„æ•°å‘ä¸‹å¹³ç§»ï¼Œç”±äºå‘ä¸‹å¹³ç§»äº†ä¸¤ä¸ªä½ç½®ï¼Œ0å’Œ1ä½ç½®ä¸Šçš„æ•°æ²¡æœ‰å†…å®¹å¯ä»¥è¡¥ï¼Œç”¨nanè‡ªåŠ¨æ›¿è¡¥ã€‚ Applyå‡½æ•°ï¼š DataFrame.apply() å‡½æ•°åˆ™ä¼šä¾æ¬¡å°†æ¯è¡Œæˆ–åˆ—å–å‡ºæ¥ä½œä¸ºä¸€ä¸ªSeriesä¼ é€’åˆ°applyæŒ‡å®šçš„å‡½æ•°ä¸­ã€‚ 12345678matrix = [ [1,2,3], [4,5,6], [7,8,9]]df = pd.DataFrame(matrix, columns=list(&#x27;xyz&#x27;), index=list(&#x27;abc&#x27;))df.apply(np.square) å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼š pandas apply() å‡½æ•°ç”¨æ³• ç›´æ–¹å›¾ä¸ç¦»æ•£åŒ–ï¼š 12s = pd.Series(np.random.randint(0,7,size=10))s.value_counts() #ç»Ÿè®¡sä¸­æ•´æ•°çš„åˆ†å¸ƒæƒ…å†µï¼Œæ¯”å¦‚4æœ‰5ä¸ª å­—ç¬¦ä¸²æ–¹æ³•ï¼š 12s = pd.Series([&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;Aaba&#x27;, &#x27;Baca&#x27;, np.nan, &#x27;CABA&#x27;, &#x27;dog&#x27;, &#x27;cat&#x27;])s.str.lower() #å­—ç¬¦ä¸²å°å†™ 2.6 åˆå¹¶ç»“åˆï¼š contact()å°†é›¶æ•£çš„dfåˆå¹¶ï¼Œåˆå¹¶åŸåˆ™æ ¹æ®indexå’Œcolumnsï¼Œç›¸åŒåˆå¹¶ï¼Œä¸åŒè¿æ¥ã€‚ 123df = pd.DataFrame(np.random.randn(10, 4))pieces = [df[:3], df[3:7], df[7:]]pd.concat(pieces) è¿æ¥ï¼š join()ç›´æ¥å°†è¿ä¸ªdfè¿æ¥èµ·æ¥ã€‚ 12345678910111213141516171819In [79]: leftOut[79]: key lval0 foo 11 foo 2In [80]: rightOut[80]: key rval0 foo 41 foo 5In [81]: pd.merge(left, right, on=&#x27;key&#x27;)Out[81]: key lval rval0 foo 1 41 foo 1 52 foo 2 43 foo 2 5 1234567891011121314151617In [84]: leftOut[84]: key lval0 foo 11 bar 2In [85]: rightOut[85]: key rval0 foo 41 bar 5In [86]: pd.merge(left, right, on=&#x27;key&#x27;)Out[86]: key lval rval0 foo 1 41 bar 2 5 è¿½åŠ ï¼š append()ä¸ºdfè¿½åŠ è¡Œ 1df.append(s,ignore_index=True) 2.7 åˆ†ç»„æŒ‰ç…§æŸä¸ªcolumnæˆ–columnsï¼Œå°†dfåˆ†ç»„ï¼Œç„¶åç»“åˆdfçš„å‡½æ•°åˆ†åˆ«è®¡ç®—å„ä¸ªåˆ†ç»„ã€‚ 1234567891011121314151617181920212223242526272829In [92]: dfOut[92]: A B C D0 foo one -1.202872 -0.0552241 bar one -1.814470 2.3959852 foo two 1.018601 1.5528253 bar three -0.595447 0.1665994 foo two 1.395433 0.0476095 bar two -0.392670 -0.1364736 foo one 0.007207 -0.5617577 foo three 1.928123 -1.623033In [93]: df.groupby(&#x27;A&#x27;).sum()Out[93]: C DA bar -2.802588 2.42611foo 3.146492 -0.63958In [94]: df.groupby([&#x27;A&#x27;, &#x27;B&#x27;]).sum()Out[94]: C DA B bar one -1.814470 2.395985 three -0.595447 0.166599 two -0.392670 -0.136473foo one -1.195665 -0.616981 three 1.928123 -1.623033 two 2.414034 1.600434 2.8 é‡å¡‘","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Pandas","slug":"Pandas","permalink":"https://sci.ci/tags/Pandas/"},{"name":"æ•°æ®å¤„ç†","slug":"æ•°æ®å¤„ç†","permalink":"https://sci.ci/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"}]},{"title":"è‡ªå®šä¹‰Volantisä¸»é¢˜é¡µè„š","slug":"è‡ªå®šä¹‰Volantisä¸»é¢˜é¡µè„š","date":"2020-10-10T12:04:58.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/10/10/è‡ªå®šä¹‰Volantisä¸»é¢˜é¡µè„š/","link":"","permalink":"https://sci.ci/2020/10/10/%E8%87%AA%E5%AE%9A%E4%B9%89Volantis%E4%B8%BB%E9%A2%98%E9%A1%B5%E8%84%9A/","excerpt":"","text":"ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶ä¸‹çš„_config.yml æ‰¾åˆ°é¡µè„šéƒ¨åˆ†ï¼š 12345678############################### Site Footer ############################### &gt; startsite_footer: # layout of footer: [aplayer, social, license, info, copyright,analytics] layout: [custom] #custom custom: &#x27;&lt;a style=&quot;padding-right: 1%;&quot; href=&quot;https://hexo.io/&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/Powered-Hexo-red&quot;&gt;&lt;/a&gt;&lt;a style=&quot;padding-right: 1%;&quot; href=&quot;https://volantis.js.org/&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/Theme-Volantis-blue&quot;&gt;&lt;/a&gt;&lt;a style=&quot;padding-right: 1%;&quot; href=&quot;https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-success&quot;&gt;&lt;/a&gt;&lt;a style=&quot;padding-right: 1%;&quot; href=&quot;https://sci.ci&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/Copyright-2019--2020%20QF-orange&quot;&gt;&lt;/a&gt;&#x27; br: &#x27;&lt;br&gt;&#x27;############################### Site Footer ############################### &gt; end ä¿®æ”¹åæ•ˆæœï¼š","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Volantis","slug":"Volantis","permalink":"https://sci.ci/tags/Volantis/"}]},{"title":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","date":"2020-09-30T00:16:08.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/09/30/æ­£åˆ™è¡¨è¾¾å¼/","link":"","permalink":"https://sci.ci/2020/09/30/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","excerpt":"","text":"1ï¼šç®€ä»‹æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¸¸ç”¨äºåŒ¹é…åŒ…å«ä¸€å®šè§„å¾‹çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä»å­—ç¬¦ä¸²ä¸­æå–ç¬¦åˆè§„å¾‹çš„å­—ç¬¦ä¸²æ®µï¼Œæˆ–è€…è¿”å›æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚ä¹Ÿå¯ç”¨äºæ›¿æ¢å­—ç¬¦ä¸²ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬è®¾ç½®å¯†ç æ—¶ï¼Œç½‘ç«™é€šå¸¸è¦æ±‚ï¼Œå¯†ç ä¸ºå­—æ¯+æ•°å­—+ä¸‹åˆ’çº¿ç»„åˆï¼Œå¹¶ä¸”å…·æœ‰ä¸€å®šé•¿åº¦å¦‚3åˆ°15ä½ï¼Œé‚£ä¹ˆå®ƒçš„æ­£åˆ™è¡¨è¾¾å¼å¯ä»¥æ˜¯ï¼Œ^[a-z0-9_-]&#123;3-15&#125;$ å…¶ä¸­^è¡¨ç¤ºä»å¼€å¤´å¼€å§‹åŒ¹é…ï¼Œ[a-z0-9_-]è¡¨ç¤ºåŒ¹é…å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿å’Œè¿æ¥ç¬¦ï¼Œ$è¡¨ç¤ºåŒ¹é…ç»“æŸã€‚&#123;3-15&#125;è¡¨ç¤ºåŒ¹é…3åˆ°15ä¸ªå­—ç¬¦ã€‚å®Œæ•´æ„ä¹‰ï¼šä»å¼€å¤´å¼€å§‹åŒ¹é…ï¼ŒåŒ¹é…åŒ…æ‹¬å­—æ¯æ•°å­—ä¸‹åˆ’çº¿å’Œè¿æ¥ç¬¦ï¼Œæ€»å…±15ä¸ªå­—ç¬¦ã€‚ 2ï¼šè¯­æ³•*è¡¨ç¤ºåŒ¹é…0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚*qifei**å¯ä»¥åŒ¹é…ï¼šqifei, qifi,qifeeeei ?è¡¨ç¤ºåŒ¹é…0ä¸ªæˆ–1ä¸ªå­—ç¬¦ã€‚qife?iå¯ä»¥åŒ¹é…ï¼šqifi, qifei + åŒ¹é…ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ã€‚qife+iå¯ä»¥åŒ¹é…ï¼šqifei,qifeeeei []å•å­—ç¬¦æ»¡è¶³[]ä¸­çš„è¦æ±‚ï¼Œåˆ™åŒ¹é…ã€‚[aui]*è¡¨ç¤ºå­—ç¬¦ä¸²ä¸­auiéƒ½ä¼šè¢«åŒ¹é…å‡ºæ¥ å­—ç¬¦ æè¿° [ABC] åŒ¹é… [â€¦] ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œä¾‹å¦‚ [aeiou] åŒ¹é…å­—ç¬¦ä¸² â€œgoogle runoob taobaoâ€ ä¸­æ‰€æœ‰çš„ e o u a å­—æ¯ã€‚ [^ABC] åŒ¹é…é™¤äº† [â€¦] ä¸­å­—ç¬¦çš„æ‰€æœ‰å­—ç¬¦ï¼Œä¾‹å¦‚ [^aeiou] åŒ¹é…å­—ç¬¦ä¸² â€œgoogle runoob taobaoâ€ ä¸­é™¤äº† e o u a å­—æ¯çš„æ‰€æœ‰å­—æ¯ã€‚ [A-Z] [A-Z] è¡¨ç¤ºä¸€ä¸ªåŒºé—´ï¼ŒåŒ¹é…æ‰€æœ‰å¤§å†™å­—æ¯ï¼Œ[a-z] è¡¨ç¤ºæ‰€æœ‰å°å†™å­—æ¯ã€‚ . åŒ¹é…é™¤æ¢è¡Œç¬¦ï¼ˆ\\nã€\\rï¼‰ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ï¼Œç›¸ç­‰äº [^\\n\\r] [\\s\\S] åŒ¹é…æ‰€æœ‰ã€‚\\s æ˜¯åŒ¹é…æ‰€æœ‰ç©ºç™½ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œï¼Œ\\S éç©ºç™½ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œã€‚ \\w åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€‚ç­‰ä»·äº [A-Za-z0-9_] ç‰¹åˆ«å­—ç¬¦ æè¿° $ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“å°¾ä½ç½®ã€‚å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œåˆ™ $ ä¹ŸåŒ¹é… â€˜\\nâ€™ æˆ– â€˜\\râ€™ã€‚è¦åŒ¹é… $ å­—ç¬¦æœ¬èº«ï¼Œè¯·ä½¿ç”¨ $ã€‚ ( ) æ ‡è®°ä¸€ä¸ªå­è¡¨è¾¾å¼çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚å­è¡¨è¾¾å¼å¯ä»¥è·å–ä¾›ä»¥åä½¿ç”¨ã€‚è¦åŒ¹é…è¿™äº›å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ ( å’Œ )ã€‚ * åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚è¦åŒ¹é… * å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ *ã€‚ + åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚è¦åŒ¹é… + å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ +ã€‚ . åŒ¹é…é™¤æ¢è¡Œç¬¦ \\n ä¹‹å¤–çš„ä»»ä½•å•å­—ç¬¦ã€‚è¦åŒ¹é… . ï¼Œè¯·ä½¿ç”¨ . ã€‚ [ æ ‡è®°ä¸€ä¸ªä¸­æ‹¬å·è¡¨è¾¾å¼çš„å¼€å§‹ã€‚è¦åŒ¹é… [ï¼Œè¯·ä½¿ç”¨ [ã€‚ ? åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼Œæˆ–æŒ‡æ˜ä¸€ä¸ªéè´ªå©ªé™å®šç¬¦ã€‚è¦åŒ¹é… ? å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ ?ã€‚ \\ å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºæˆ–ç‰¹æ®Šå­—ç¬¦ã€æˆ–åŸä¹‰å­—ç¬¦ã€æˆ–å‘åå¼•ç”¨ã€æˆ–å…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œ â€˜nâ€™ åŒ¹é…å­—ç¬¦ â€˜nâ€™ã€‚â€™\\nâ€™ åŒ¹é…æ¢è¡Œç¬¦ã€‚åºåˆ— â€˜\\â€˜ åŒ¹é… â€œ&quot;ï¼Œè€Œ â€˜(â€˜ åˆ™åŒ¹é… â€œ(â€œã€‚ ^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ï¼Œé™¤éåœ¨æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œå½“è¯¥ç¬¦å·åœ¨æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­ä½¿ç”¨æ—¶ï¼Œè¡¨ç¤ºä¸æ¥å—è¯¥æ–¹æ‹¬å·è¡¨è¾¾å¼ä¸­çš„å­—ç¬¦é›†åˆã€‚è¦åŒ¹é… ^ å­—ç¬¦æœ¬èº«ï¼Œè¯·ä½¿ç”¨ ^ã€‚ { æ ‡è®°é™å®šç¬¦è¡¨è¾¾å¼çš„å¼€å§‹ã€‚è¦åŒ¹é… {ï¼Œè¯·ä½¿ç”¨ {ã€‚ | æŒ‡æ˜ä¸¤é¡¹ä¹‹é—´çš„ä¸€ä¸ªé€‰æ‹©ã€‚è¦åŒ¹é… |ï¼Œè¯·ä½¿ç”¨ |ã€‚ ()é€‰æ‹©ï¼šä½¿ç”¨()ç»™éœ€è¦é€‰æ‹©åˆ°çš„åŒ¹é…é¡¹åˆ†ç»„ï¼Œé€‰æ‹©é¡¹ï¼Œå¯ä½¿ç”¨åˆ—è¡¨ç´¢å¼•è·å–æ¯ä¸ªé€‰æ‹©é¡¹ï¼ŒåŒ¹é…çš„å€¼ã€‚ 3ï¼šå…ƒå­—ç¬¦ å­—ç¬¦ æè¿° \\ å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ä¸ºä¸€ä¸ªç‰¹æ®Šå­—ç¬¦ã€æˆ–ä¸€ä¸ªåŸä¹‰å­—ç¬¦ã€æˆ–ä¸€ä¸ª å‘åå¼•ç”¨ã€æˆ–ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€™nâ€™ åŒ¹é…å­—ç¬¦ â€œnâ€ã€‚â€™\\nâ€™ åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚åºåˆ— â€˜\\â€˜ åŒ¹é… â€œ&quot; è€Œ â€œ(â€œ åˆ™åŒ¹é… â€œ(â€œã€‚ ^ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®ã€‚å¦‚æœè®¾ç½®äº† RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œ^ ä¹ŸåŒ¹é… â€˜\\nâ€™ æˆ– â€˜\\râ€™ ä¹‹åçš„ä½ç½®ã€‚ $ åŒ¹é…è¾“å…¥å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®ã€‚å¦‚æœè®¾ç½®äº†RegExp å¯¹è±¡çš„ Multiline å±æ€§ï¼Œ$ ä¹ŸåŒ¹é… â€˜\\nâ€™ æˆ– â€˜\\râ€™ ä¹‹å‰çš„ä½ç½®ã€‚ * åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œzo* èƒ½åŒ¹é… â€œzâ€ ä»¥åŠ â€œzooâ€ã€‚* ç­‰ä»·äº{0,}ã€‚ + åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™zo+â€™ èƒ½åŒ¹é… â€œzoâ€ ä»¥åŠ â€œzooâ€ï¼Œä½†ä¸èƒ½åŒ¹é… â€œzâ€ã€‚+ ç­‰ä»·äº {1,}ã€‚ ? åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€do(es)?â€ å¯ä»¥åŒ¹é… â€œdoâ€ æˆ– â€œdoesâ€ ã€‚? ç­‰ä»·äº {0,1}ã€‚ {n} n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„ n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2}â€™ ä¸èƒ½åŒ¹é… â€œBobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†æ˜¯èƒ½åŒ¹é… â€œfoodâ€ ä¸­çš„ä¸¤ä¸ª oã€‚ {n,} n æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é…n æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€™o{2,}â€™ ä¸èƒ½åŒ¹é… â€œBobâ€ ä¸­çš„ â€˜oâ€™ï¼Œä½†èƒ½åŒ¹é… â€œfooooodâ€ ä¸­çš„æ‰€æœ‰ oã€‚â€™o{1,}â€™ ç­‰ä»·äº â€˜o+â€™ã€‚â€™o{0,}â€™ åˆ™ç­‰ä»·äº â€˜o*â€™ã€‚ {n,m} m å’Œ n å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­n &lt;= mã€‚æœ€å°‘åŒ¹é… n æ¬¡ä¸”æœ€å¤šåŒ¹é… m æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€o{1,3}â€ å°†åŒ¹é… â€œfoooooodâ€ ä¸­çš„å‰ä¸‰ä¸ª oã€‚â€™o{0,1}â€™ ç­‰ä»·äº â€˜o?â€™ã€‚è¯·æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚ ? å½“è¯¥å­—ç¬¦ç´§è·Ÿåœ¨ä»»ä½•ä¸€ä¸ªå…¶ä»–é™åˆ¶ç¬¦ (*, +, ?, {n}, {n,}, {n,m}) åé¢æ—¶ï¼ŒåŒ¹é…æ¨¡å¼æ˜¯éè´ªå©ªçš„ã€‚éè´ªå©ªæ¨¡å¼å°½å¯èƒ½å°‘çš„åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ï¼Œè€Œé»˜è®¤çš„è´ªå©ªæ¨¡å¼åˆ™å°½å¯èƒ½å¤šçš„åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸² â€œooooâ€ï¼Œâ€™o+?â€™ å°†åŒ¹é…å•ä¸ª â€œoâ€ï¼Œè€Œ â€˜o+â€™ å°†åŒ¹é…æ‰€æœ‰ â€˜oâ€™ã€‚ . åŒ¹é…é™¤æ¢è¡Œç¬¦ï¼ˆ\\nã€\\rï¼‰ä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚è¦åŒ¹é…åŒ…æ‹¬ â€˜\\nâ€™ åœ¨å†…çš„ä»»ä½•å­—ç¬¦ï¼Œè¯·ä½¿ç”¨åƒâ€(.|\\n)â€œçš„æ¨¡å¼ã€‚ (pattern) åŒ¹é… pattern å¹¶è·å–è¿™ä¸€åŒ¹é…ã€‚æ‰€è·å–çš„åŒ¹é…å¯ä»¥ä»äº§ç”Ÿçš„ Matches é›†åˆå¾—åˆ°ï¼Œåœ¨VBScript ä¸­ä½¿ç”¨ SubMatches é›†åˆï¼Œåœ¨JScript ä¸­åˆ™ä½¿ç”¨ $0â€¦$9 å±æ€§ã€‚è¦åŒ¹é…åœ†æ‹¬å·å­—ç¬¦ï¼Œè¯·ä½¿ç”¨ â€˜(â€˜ æˆ– â€˜)â€˜ã€‚ (?:pattern) åŒ¹é… pattern ä½†ä¸è·å–åŒ¹é…ç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¸è¿›è¡Œå­˜å‚¨ä¾›ä»¥åä½¿ç”¨ã€‚è¿™åœ¨ä½¿ç”¨ â€œæˆ–â€ å­—ç¬¦ (|) æ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†æ˜¯å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚ï¼Œ â€˜industr(?:y|ies) å°±æ˜¯ä¸€ä¸ªæ¯” â€˜industry|industriesâ€™ æ›´ç®€ç•¥çš„è¡¨è¾¾å¼ã€‚ (?=pattern) æ­£å‘è‚¯å®šé¢„æŸ¥ï¼ˆlook ahead positive assertï¼‰ï¼Œåœ¨ä»»ä½•åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€Windows(?=95|98|NT|2000)â€èƒ½åŒ¹é…â€Windows2000â€ä¸­çš„â€Windowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€Windows3.1â€ä¸­çš„â€Windowsâ€ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚ (?!pattern) æ­£å‘å¦å®šé¢„æŸ¥(negative assert)ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ã€‚è¿™æ˜¯ä¸€ä¸ªéè·å–åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚â€Windows(?!95|98|NT|2000)â€èƒ½åŒ¹é…â€Windows3.1â€ä¸­çš„â€Windowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€Windows2000â€ä¸­çš„â€Windowsâ€ã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚ (?&lt;=pattern) åå‘(look behind)è‚¯å®šé¢„æŸ¥ï¼Œä¸æ­£å‘è‚¯å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚ï¼Œâ€`(?&lt;=95 (?&lt;!pattern) åå‘å¦å®šé¢„æŸ¥ï¼Œä¸æ­£å‘å¦å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚â€`(?&lt;!95 x|y åŒ¹é… x æˆ– yã€‚ä¾‹å¦‚ï¼Œâ€™z|foodâ€™ èƒ½åŒ¹é… â€œzâ€ æˆ– â€œfoodâ€ã€‚â€™(z|f)oodâ€™ åˆ™åŒ¹é… â€œzoodâ€ æˆ– â€œfoodâ€ã€‚ [xyz] å­—ç¬¦é›†åˆã€‚åŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ â€˜[abc]â€™ å¯ä»¥åŒ¹é… â€œplainâ€ ä¸­çš„ â€˜aâ€™ã€‚ [^xyz] è´Ÿå€¼å­—ç¬¦é›†åˆã€‚åŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ â€˜[^abc]â€™ å¯ä»¥åŒ¹é… â€œplainâ€ ä¸­çš„â€™pâ€™ã€â€™lâ€™ã€â€™iâ€™ã€â€™nâ€™ã€‚ [a-z] å­—ç¬¦èŒƒå›´ã€‚åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€™[a-z]â€™ å¯ä»¥åŒ¹é… â€˜aâ€™ åˆ° â€˜zâ€™ èŒƒå›´å†…çš„ä»»æ„å°å†™å­—æ¯å­—ç¬¦ã€‚ [^a-z] è´Ÿå€¼å­—ç¬¦èŒƒå›´ã€‚åŒ¹é…ä»»ä½•ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€™[^a-z]â€™ å¯ä»¥åŒ¹é…ä»»ä½•ä¸åœ¨ â€˜aâ€™ åˆ° â€˜zâ€™ èŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚ \\b åŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®ã€‚ä¾‹å¦‚ï¼Œ â€˜er\\bâ€™ å¯ä»¥åŒ¹é…â€neverâ€ ä¸­çš„ â€˜erâ€™ï¼Œä½†ä¸èƒ½åŒ¹é… â€œverbâ€ ä¸­çš„ â€˜erâ€™ã€‚ \\B åŒ¹é…éå•è¯è¾¹ç•Œã€‚â€™er\\Bâ€™ èƒ½åŒ¹é… â€œverbâ€ ä¸­çš„ â€˜erâ€™ï¼Œä½†ä¸èƒ½åŒ¹é… â€œneverâ€ ä¸­çš„ â€˜erâ€™ã€‚ \\cx åŒ¹é…ç”± x æŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ \\cM åŒ¹é…ä¸€ä¸ª Control-M æˆ–å›è½¦ç¬¦ã€‚x çš„å€¼å¿…é¡»ä¸º A-Z æˆ– a-z ä¹‹ä¸€ã€‚å¦åˆ™ï¼Œå°† c è§†ä¸ºä¸€ä¸ªåŸä¹‰çš„ â€˜câ€™ å­—ç¬¦ã€‚ \\d åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº [0-9]ã€‚ \\D åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº [^0-9]ã€‚ \\f åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ã€‚ç­‰ä»·äº \\x0c å’Œ \\cLã€‚ \\n åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚ç­‰ä»·äº \\x0a å’Œ \\cJã€‚ \\r åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ã€‚ç­‰ä»·äº \\x0d å’Œ \\cMã€‚ \\s åŒ¹é…ä»»ä½•ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚ç­‰ä»·äº [ \\f\\n\\r\\t\\v]ã€‚ \\S åŒ¹é…ä»»ä½•éç©ºç™½å­—ç¬¦ã€‚ç­‰ä»·äº [^ \\f\\n\\r\\t\\v]ã€‚ \\t åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº \\x09 å’Œ \\cIã€‚ \\v åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº \\x0b å’Œ \\cKã€‚ \\w åŒ¹é…å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€‚ç­‰ä»·äºâ€™[A-Za-z0-9_]â€™ã€‚ \\W åŒ¹é…éå­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€‚ç­‰ä»·äº â€˜[^A-Za-z0-9_]â€™ã€‚ \\xn åŒ¹é… nï¼Œå…¶ä¸­ n ä¸ºåå…­è¿›åˆ¶è½¬ä¹‰å€¼ã€‚åå…­è¿›åˆ¶è½¬ä¹‰å€¼å¿…é¡»ä¸ºç¡®å®šçš„ä¸¤ä¸ªæ•°å­—é•¿ã€‚ä¾‹å¦‚ï¼Œâ€™\\x41â€™ åŒ¹é… â€œAâ€ã€‚â€™\\x041â€™ åˆ™ç­‰ä»·äº â€˜\\x04â€™ &amp; â€œ1â€ã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨ ASCII ç¼–ç ã€‚ \\num åŒ¹é… numï¼Œå…¶ä¸­ num æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚å¯¹æ‰€è·å–çš„åŒ¹é…çš„å¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€™(.)\\1â€™ åŒ¹é…ä¸¤ä¸ªè¿ç»­çš„ç›¸åŒå­—ç¬¦ã€‚ \\n æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚å¦‚æœ \\n ä¹‹å‰è‡³å°‘ n ä¸ªè·å–çš„å­è¡¨è¾¾å¼ï¼Œåˆ™ n ä¸ºå‘åå¼•ç”¨ã€‚å¦åˆ™ï¼Œå¦‚æœ n ä¸ºå…«è¿›åˆ¶æ•°å­— (0-7)ï¼Œåˆ™ n ä¸ºä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼ã€‚ \\nm æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚å¦‚æœ \\nm ä¹‹å‰è‡³å°‘æœ‰ nm ä¸ªè·å¾—å­è¡¨è¾¾å¼ï¼Œåˆ™ nm ä¸ºå‘åå¼•ç”¨ã€‚å¦‚æœ \\nm ä¹‹å‰è‡³å°‘æœ‰ n ä¸ªè·å–ï¼Œåˆ™ n ä¸ºä¸€ä¸ªåè·Ÿæ–‡å­— m çš„å‘åå¼•ç”¨ã€‚å¦‚æœå‰é¢çš„æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œè‹¥ n å’Œ m å‡ä¸ºå…«è¿›åˆ¶æ•°å­— (0-7)ï¼Œåˆ™ \\nm å°†åŒ¹é…å…«è¿›åˆ¶è½¬ä¹‰å€¼ nmã€‚ \\nml å¦‚æœ n ä¸ºå…«è¿›åˆ¶æ•°å­— (0-3)ï¼Œä¸” m å’Œ l å‡ä¸ºå…«è¿›åˆ¶æ•°å­— (0-7)ï¼Œåˆ™åŒ¹é…å…«è¿›åˆ¶è½¬ä¹‰å€¼ nmlã€‚ \\un åŒ¹é… nï¼Œå…¶ä¸­ n æ˜¯ä¸€ä¸ªç”¨å››ä¸ªåå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºçš„ Unicode å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ \\u00A9 åŒ¹é…ç‰ˆæƒç¬¦å· (?)ã€‚ 4ï¼šåœ¨çº¿æµ‹è¯•http://c.runoob.com/front-end/854","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://sci.ci/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"}]},{"title":"Pythonæ•°æ®åˆ†æ","slug":"Pythonæ•°æ®åˆ†æ","date":"2020-09-29T09:56:45.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/09/29/Pythonæ•°æ®åˆ†æ/","link":"","permalink":"https://sci.ci/2020/09/29/Python%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/","excerpt":"","text":"1ï¼šç»¼è¿°ä¸ºä»€ä¹ˆå­¦ä¹ æ•°æ®åˆ†æ å²—ä½éœ€æ±‚ pythonæ•°æ®ç§‘å­¦çš„åŸºç¡€ æœºå™¨å­¦ä¹ çš„è¯¾ç¨‹åŸºç¡€ ä»€ä¹ˆæ˜¯æ•°æ®åˆ†æ ç”¨é€‚å½“çš„æ–¹æ³•å¯¹æ”¶é›†çš„å¤§é‡æ•°æ®è¿›è¡Œåˆ†æ å¸®åŠ©äººä»¬åšå‡ºåˆ¤æ–­ï¼Œä»¥ä¾¿é‡‡å–é€‚å½“çš„è¡ŒåŠ¨ jupyter notebookï¼š Pythonç¬”è®°è½¯ä»¶ 2ï¼šMatplotlib å°†æ•°æ®å¯è§†åŒ–ï¼Œæ›´ç›´è§‚çš„å‘ˆç° ä½¿æ•°æ®æ›´åŠ å®¢è§‚ã€æ›´å…·è¯´æœåŠ› æœ€æµè¡Œçš„pythonåº•å±‚ç»˜å›¾åº“ï¼Œä¸»è¦åšæ•°æ®å¯è§†åŒ–ï¼Œæ¨¡ä»¿matlabæ„å»º 123456from matplotlib import pyplot as plt #å¯¼å…¥pyplotx = range(2,26,2) #æ•°æ®åœ¨xè½´çš„ä½ç½®ï¼Œæ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹y = [15,13,14,17,20,25,26,26,25,22,18,15] #æ•°æ®åœ¨yè½´çš„ä½ç½®ï¼Œæ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡plt.plot(x,y) #ä¼ å…¥xå’Œyï¼Œé€šè¿‡plotç»˜åˆ¶å‡ºæŠ˜çº¿å›¾plt.show() #æ‰§è¡Œç¨‹åºçš„æ—¶å€™å±•ç°å›¾åƒ ç›®å‰å­˜åœ¨çš„é—®é¢˜ï¼š å›¾ç‰‡å¤§å° ä¿å­˜åˆ°æœ¬åœ° æè¿°ä¿¡æ¯ï¼Œæ¯”å¦‚xï¼Œyè½´è¡¨ç¤ºä»€ä¹ˆ åˆ»åº¦ çº¿æ¡æ ·å¼ æ ‡è®°ç‰¹æ®Šç‚¹ 2.1 è®¾ç½®å›¾ç‰‡å¤§å°-figure1234567fig = plt.figure(figsize=(20,8),dpi=80)#figureå›¾å½¢å›¾æ ‡çš„æ„æ€ï¼Œè¿™é‡ŒæŒ‡ç”»çš„å›¾#é€šè¿‡å®ä¾‹åŒ–ä¸€ä¸ªfigureå¹¶ä¸”ä¼ å…¥å‚æ•°#ä¼ å…¥åƒç´ å€¼ï¼Œdpiï¼Œè®©å›¾ç‰‡æ›´æ¸…æ™°plt.plot(x,y)plt.savefig(&quot;./t1.png&quot;) #ä¿å­˜å›¾ç‰‡#å¯ä»¥ä¿å­˜ä¸ºsvgçŸ¢é‡å›¾æ ¼å¼ï¼Œæ”¾å¤§ä¸ä¼šå¤±çœŸ 2.2 è®¾ç½®xï¼Œyè½´æ­¥é•¿-xticks/yticks123456789101112plt.xticks(x) #è®¾ç½®æ­¥é•¿plt.xticks(range(2,25))_xticks_labels = [i/2 for i in range(4,49)]plt.xticks(_xticks_labels[::3])plt.yticks(range(min(y),max(y)+1))#æ˜¾ç¤ºå­—ç¬¦ä¸²_x = list(x)[::3]_xticks_labels = [&quot;10ç‚¹&#123;&#125;åˆ†&quot;.format(i) for i in range(60)]_xticks_labels += [&quot;11ç‚¹&#123;&#125;åˆ†&quot;.format(i) for i in range(60)]plt.xticks(list(_x)[::3],_xticks_labels[::3],rotation=90) #,å‰ä¸ºæ­¥é•¿åˆ—è¡¨ï¼Œï¼Œåä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œä¸æ­¥é•¿åˆ—è¡¨ä¸€ä¸€å¯¹åº”ï¼Œå¹¶æŠŠåˆ»åº¦æ—‹è½¬90åº¦æ˜¾ç¤ºã€‚ ä¸Šè¿°ç»˜å›¾ï¼Œæ— æ³•æ˜¾ç¤ºä¸­æ–‡ 2.3 åŠ å…¥ä¸­æ–‡å­—ä½“æ”¯æŒ-FontPropertiesæ–¹æ³•1ï¼š 123456import matplotlibfont = &#123;&#x27;family&#x27;:&#x27;MicroSoft YaHei&#x27;, &#x27;weight&#x27;:&#x27;bold&#x27;, &#x27;size&#x27;:&#x27;larger&#x27;&#125;matplotlib.rc(&quot;font&quot;,**font) #**å¯ä»¥æŠŠå­—å…¸è½¬ä¸ºxx=xxæ ¼å¼matplotlib.rc(&quot;font&quot;,family=&#x27;MicroSoft YaHei&#x27;,weight=&#x27;bold&#x27;) æ–¹æ³•2ï¼š 12345from matplotlib import font_managermy_font = font_manager.FontProperties(fname=&quot;/System/Library/Fonts/PingFang.ttc&quot;) #è®¾å®šå­—ä½“ä½ç½®#æŸ¥æ‰¾ç³»ç»Ÿå­—ä½“å­˜æ”¾ä½ç½®plt.xticks(list(_x)[::3],_xticks_labels[::3],rotation=90,fontproperties=my_font)#ä½¿ç”¨å­—ä½“ 2.4 åŠ å…¥æè¿°ä¿¡æ¯-xlabel/ylabel/title123plt.xlabel(&quot;æ—¶é—´&quot;,fontproperties=my_font)plt.ylabel(&quot;æ¸©åº¦ å•ä½ï¼ˆâ„ƒï¼‰&quot;,fontproperties=my_font)plt.title(&quot;10ç‚¹åˆ°12ç‚¹çš„è¯·é—®å˜åŒ–&quot;,fontproperties=my_font) 2.5 è®¾ç½®ç½‘æ ¼-grid12plt.grid()plt.grid(alpha=0.4) #è®¾ç½®ç½‘æ ¼é€æ˜åº¦ï¼Œ1ä¸é€æ˜ï¼Œ0é€æ˜ 2.6 ç»˜åˆ¶ä¸¤ä¸ªå›¾å½¢-legend1234567plt.plot(x,y1,label=&quot;è‡ªå·±&quot;,color=&quot;orange&quot;,linestyle=&quot;:&quot;)plt.plot(x,y2,label=&quot;åŒæ¡Œ&quot;,color=&quot;r&quot;,linestyle=&quot;--&quot;)#æ·»åŠ å›¾ä¾‹ï¼Œè§£é‡Šå“ªä¸ªçº¿è¡¨ç¤ºå“ªä¸ªæ•°æ®é›†ï¼Œæ˜¾ç¤ºä¸­æ–‡ï¼Œæ ¼å¼ä¸å†æ˜¯FontProperties#propå­—ä½“ï¼Œlocä½ç½®ï¼š0æœ€å¥½çš„ä½ç½®ï¼Œä¸è®¾ç½®å‚æ•°åˆ™é»˜è®¤0plt.legend(prop=my_font,loc=0) color=â€™râ€™ é¢œè‰² linestyle=â€™â€“â€™ çº¿æ¡é£æ ¼ï¼š-å®çº¿ï¼›â€“è™šçº¿ï¼›-.ç‚¹åˆ’çº¿ï¼›:ç‚¹è™šçº¿ï¼›ç•™ç©ºæˆ–ç©ºæ ¼ï¼Œè¡¨ç¤ºæ— çº¿æ¡ linewidth=5 çº¿ç²—ç»† alpha=0.4 é€æ˜åº¦ 2.7 ç»˜åˆ¶æ•£ç‚¹å›¾-scatter12plt.scatter(x, y)plt.show() 2.8 ç»˜åˆ¶æŸ±çŠ¶å›¾-bar123456789#ç»˜åˆ¶ç”µå½±ä¸å…¶å¯¹åº”ç¥¨æˆ¿a=[&quot;æˆ˜ç‹¼2&quot;,&quot;é€Ÿåº¦ä¸æ¿€æƒ…8&quot;,&quot;åŠŸå¤«ç‘œä¼½&quot;,&quot;è¥¿æ¸¸é™„é­”ç¯‡&quot;]b=[56,61,26,94]plt.figure(figsize=(20,15),dpi=80)#ç»˜åˆ¶æŸ±çŠ¶å›¾plt.bar(range(a),b,width=0.3)#è®¾ç½®æ¨ªè½´å­—ç¬¦ä¸²plt.xticks(range(a),a,rotation=45)plt.show() 2.9 ç»˜åˆ¶æ¡å½¢å›¾-barh12plt.barh(range(len(a)),b,height=0.3,color=&#x27;orange&#x27;)plt.yticks(range(len(a)),a) 2.10 ç»˜åˆ¶ç›´æ–¹å›¾-histæœ‰250éƒ¨ç”µå½±çš„æ—¶é•¿ï¼Œç»Ÿè®¡æ—¶é•¿åˆ†å¸ƒçš„æ•°é‡ï¼Œæ¯”å¦‚100åˆ°120åˆ†é’Ÿçš„ç”µå½±æ•°ã€‚ ç»„æ•°=æå·®/ç»„è·ã€‚ 123456789101112a = [120,76,124,161â€¦â€¦] #250éƒ¨ç”µå½±çš„æ—¶é•¿ã€‚#è®¡ç®—ç»„æ•°theory_d = 3 #å‡å®šç»„è·num_bins = (max(a)-min(a))//d #è®¡ç®—ç»„æ•°plt.figure(figsize = (20,8),dpi=80)plt.hist(a,num_bins) #é¢‘æ•°åˆ†å¸ƒç›´æ–¹å›¾plt.hist(a,num_bins,normed=True) #é¢‘ç‡åˆ†å¸ƒç›´æ–¹å›¾#è®¾ç½®xåˆ»åº¦plt.xticks(range(min(a),max(a)+d,d))plt.grid()plt.show() å½“ï¼ˆæœ€å¤§å€¼-æœ€å°å€¼ï¼‰/å‡å®šç»„è· æ— æ³•é™¤å°½æ—¶ï¼Œæ ¹æ®å‡å®šç»„è·ç»˜åˆ¶çš„xåˆ»åº¦ä¼šåç§»ã€‚ 2.11 ç»˜åˆ¶å…¶ä»–å›¾å½¢ https://matplotlib.org/gallery/index.html å‰ç«¯ç”»å›¾åº“jsâ€”â€”echartsï¼š https://echarts.apache.org/examples/zh/index.html å›¾è¡¨ä»£ç æ‰˜ç®¡â€”â€”Plotly:https://plot.ly/python 2ï¼šNumpyä»€ä¹ˆæ—¶numpyï¼Ÿ ä¸€ä¸ªå†pythonä¸­åšç§‘å­¦è®¡ç®—çš„åŸºç¡€åº“ï¼Œé‡åœ¨æ•°å€¼è®¡ç®—ï¼Œä¹Ÿæ˜¯å¤§éƒ¨åˆ†pythonç§‘å­¦è®¡ç®—åº“çš„åŸºç¡€åº“ï¼Œå¤šç”¨äºåœ¨å¤§å‹ã€å¤šç»´æ•°ç»„ä¸Šæ‰§è¡Œæ•°å€¼è®¡ç®—ã€‚ 2.1 åˆ›å»ºæ•°ç»„ï¼š12345678import numpy as npa = np.array([1,2,3])b = np.array(range(10))c = np.arange(10) #ä½œç”¨ä¸bçš„è¡¨è¾¾å¼ç›¸åŒprint(a)print(type(a)) ç»“æœï¼š [1 2 3] &lt;class â€˜nmpy.ndarrayâ€™&gt; 2.2 æ•°æ®ç±»å‹123456d = np.array(range(1,4),dtype=&quot;float32&quot;) #dtypeæŒ‡å®šæ•°ç»„ä¸­æ•°æ®çš„æ•°æ®ç±»å‹e = np.array([1,1,0,0,0,1],dtype=bool)print(e.dtype) #æ‰“å°æ•°ç»„ä¸­æ•°æ®çš„æ•°æ®ç±»å‹#è°ƒæ•´æ•°æ®ç±»å‹f = d.astype(&quot;int8&quot;) ä¿®æ”¹æµ®ç‚¹å‹çš„å°æ•°ä½æ•° 12a &#x3D; np.array(random.random() for i in range(10))np.round(a,2) 2.3 æ•°ç»„å½¢çŠ¶123t1 = np.array([[1,2,3],[3,4,5]])t1.shape #out:(2,3) æ•°ç»„çš„å½¢çŠ¶ 1234t2 = np.arange(12) #æ–°å»ºä¸€ç»´æ•°ç»„t3 = t2.reshape(3,4) #å˜ä¸ºäºŒç»´çš„t4 = t2.reshape(24,) #å˜ä¸€ç»´æ•°ç»„t5 = t2.flatten() #å˜ä¸€ç»´æ•°ç»„ 2.4 æ•°ç»„è®¡ç®—æ•°ç»„å’Œæ•° 12345t6 = np.arange(24)t7 = t6.reshape(4,6)t7+2 #æ•°ç»„ä¸­æ¯ä¸ªæ•°éƒ½åŠ 2t7*2 #æ¯ä¸ªæ•°éƒ½ä¹˜2t7/2 #æ¯ä¸ªæ•°éƒ½é™¤2ï¼Œä¼šå¾—åˆ°æµ®ç‚¹æ•° æ•°ç»„å’Œæ•°ç»„ å½¢çŠ¶ç›¸åŒï¼š(4,6)ä¸(4,6) 123t8 = np.arange(100,124).reshape(4,6)t7+t8 #å½¢çŠ¶ç›¸åŒï¼Œè¡Œåˆ—ç›¸åŒçš„æ•°å€¼è¿›è¡Œè¿ç®—t7*t8 (4,6)ä¸(,6) (4,6)ä¸(4,1) å¹¿æ’­åŸåˆ™ï¼š å¦‚æœä¸¤ä¸ªæ•°ç»„çš„åç¼˜ç»´åº¦ï¼Œå³ä»æœ«å°¾å¼€å§‹ç®—èµ·çš„ç»´åº¦çš„è½´é•¿åº¦ç›¸ç¬¦æˆ–å…¶ä¸­ä¸€æ–¹çš„é•¿åº¦ä¸º1ï¼Œåˆ™è®¤ä¸ºä»–ä»¬æ˜¯å¹¿æ’­å…¼å®¹çš„ã€‚å¹¿æ’­ä¼šåœ¨ç¼ºå¤±å’Œæˆ–é•¿åº¦ä¸º1çš„ç»´åº¦ä¸Šè¿›è¡Œ 2.5 è¯»å–æ•°æ®è½´ ä¸€ç»´æ•°ç»„åªæœ‰ä¸€ä¸ªè½´ï¼Œå³0è½´ äºŒç»´æ•°ç»„æœ‰ä¸¤ä¸ªè½´ï¼Œ0å’Œ1è½´ã€‚(2,5)ï¼Œ2æ˜¯0è½´é•¿åº¦ï¼Œ5æ˜¯1è½´é•¿åº¦ ä¸‰ç»´æ•°ç»„æœ‰ä¸‰ä¸ªè½´ï¼Œ0ï¼Œ1ï¼Œ2è½´ è¯»å–æ•°æ® 1np.loadtxt(frame,dtype=np.float,delimiter=None,skiprows=0,usecols=None,unpack=False) frameï¼šæ–‡ä»¶ã€å­—ç¬¦ä¸²æˆ–äº§ç”Ÿå™¨ dtypeï¼šæ•°æ®ç±»å‹ dlimiterï¼šåˆ†å‰²å­—ç¬¦ä¸²ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼ skiprowsï¼šè·³è¿‡å‰xè¡Œ usecolsï¼šè¯»å–æŒ‡å®šçš„åˆ— unpackï¼šTrueè¡¨ç¤ºï¼Œè¯»å…¥å±æ€§å°†åˆ†åˆ«å†™å…¥ä¸åŒçš„æ•°ç»„å˜é‡ï¼ŒFalse è¯»å…¥æ•°æ®åªå†™å…¥ä¸€ä¸ªæ•°ç»„å˜é‡ï¼Œé»˜è®¤Falseã€‚è½¬ç½®æ•ˆæœã€‚ è¯»å–çš„æ–‡ä»¶å†…å®¹æ ¼å¼ï¼š 12341241,1241,15346,2451125415,235,4135,135112516,15326,1361,616â€¦â€¦ è¯»å–æ—¶å¯ä»¥æŒ‰,åˆ†å‰²ã€‚æŒ‰è¡Œåˆ’åˆ† 2.6 çŸ©é˜µè½¬ç½®123t2.transpose()t2.Tt2.swapaxes(1,0) #äº¤æ¢è½´ï¼Œä¹Ÿèƒ½å®ç°è½¬ç½®æ•ˆæœ 2.7 ç´¢å¼•å’Œåˆ‡ç‰‡å–ç¬¬äºŒè¡Œï¼š 1t2[2] å–è¿ç»­çš„å¤šè¡Œï¼š 1t2[2:] å–ä¸è¿ç»­çš„å¤šè¡Œï¼š 1t2[[2,8,10]] å–ç¬¬ä¸€åˆ—ï¼š 1t2[:,0] å–è¿ç»­å¤šåˆ—ï¼š 1t2[:,2:] å–ä¸è¿ç»­çš„å¤šåˆ—ï¼š 1t2[:,[0,2,5]] å–3è¡Œå››åˆ—çš„å€¼ï¼š 1t2[3,4] å–å¤šè¡Œå¤šåˆ—ï¼š3è¡Œåˆ°5è¡Œï¼Œ2åˆ—åˆ°4åˆ—ï¼Œå› ä¸º:å·¦å³æ˜¯å·¦é—­å³å¼€åŒºé—´ï¼Œè¡Œæ•°ä¸ºç´¢å¼•+1 1t2[2:5,1:4] å–å¤šä¸ªä¸è¿ç»­çš„ç‚¹ï¼š(0,0) (2,1) (5,5) 1t2[[0,2,5],[0,1,5]] 2.8 ä¿®æ”¹æ•°å€¼1t[:,2:4] = 0 å¸ƒå°”ç´¢å¼• 123t2&lt;10 #ç›¸åŒçš„çŸ©é˜µï¼ŒçŸ©é˜µå€¼ä¸ºå¸ƒå°”ç±»å‹ï¼Œå¯¹åº”ä½ç½®æ»¡è¶³å€¼å°äº10ï¼Œåˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0t2[t2&lt;10] = 3 #t2ä¸­å°äº10çš„ä½ç½®ï¼Œèµ‹å€¼ä¸º3t2[t2&lt;10] #å–t2ä¸­å°äº10çš„æ•°ç»„æˆæ–°çŸ©é˜µ ä¸‰å…ƒè¿ç®—ç¬¦ 1np.where(t&lt;10,0,10) #å¦‚æœå°äº10ï¼Œæ›¿æ¢ä¸º0ï¼Œå¦åˆ™æ›¿æ¢ä¸º10 è£å‰ª 1t.clip(10,18) #å°äº10çš„æ›¿æ¢ä¸º10ï¼Œå¤§äº18çš„æ›¿æ¢ä¸º18 12t2 = t2.astype(float)t2[3,3] = np.nan 2.9 æ‹¼æ¥æ•°ç»„12np.vstack(t1,t2) #ç«–ç›´æ‹¼æ¥np.hstack(t1,t2) #æ°´å¹³æ‹¼æ¥ 2.10 è¡Œåˆ—äº¤æ¢è¡Œäº¤æ¢ï¼š 1t[[1,2],:] = t[[2,1],:] åˆ—äº¤æ¢ï¼š 1t[:,[0,2]] = t[:,[2,0]] 2.11 å…¶ä»–æ–¹æ³•123456789#è·å–æœ€å¤§æœ€å°å€¼np.argmax(t,axis=0)np.argmin(t,axis=1)#åˆ›å»ºä¸€ä¸ªå…¨0çš„æ•°ç»„np.zeros((3,4))#åˆ›å»ºå…¨1æ•°ç»„np.ones((3,4))#åˆ›å»ºä¸€ä¸ªå¯¹è§’çº¿ä¸º1çš„æ­£æ–¹å½¢æ•°ç»„ï¼ˆæ–¹é˜µï¼‰np.eye(3) 2.12 ç”Ÿæˆéšæœºæ•°123np.random.rand(3,4) #å‡åŒ€åˆ†å¸ƒnp.random.randn(3,4) #æ ‡å‡†æ­£å¤ªåˆ†å¸ƒçš„éšæœºæ•°ï¼Œå¹³å‡æ•°ä¸º0ï¼Œæ ‡å‡†å·®ä¸º1np.random.randint(low,high,(shape)) #äº§ç”Ÿ[low,high)ä¹‹é—´çš„æ•° ç§å­ï¼š 12np.random.seed(10)t = np.random.randint(0,20,(3,4)) #æ¯æ¬¡éšæœºçš„ç»“æœç›¸åŒ 2.13 copyå’Œview a=bå®Œå…¨ä¸å¤åˆ¶ï¼Œaå’Œbç›¸äº’å½±å“ã€‚ a = b[:]ï¼Œè§†å›¾æ“ä½œï¼Œåˆ›å»ºæ–°å¯¹è±¡aï¼Œä½†açš„æ•°æ®å®Œå…¨ç”±bä¿ç®¡ï¼Œä¸¤è€…æ•°æ®å˜åŒ–ä¸€è‡´ã€‚ a = b.copy()å¤åˆ¶ï¼Œaå’Œbäº’ä¸å½±å“ã€‚ 2.14 nanå’Œinfnan(NAN,Nan)ï¼šnot a numberè¡¨ç¤ºä¸æ˜¯ä¸€ä¸ªæ•°å­— inf(-inf,inf)ï¼šinfinityï¼Œæ­£æ— ç©·ï¼Œ-infè¡¨ç¤ºè´Ÿæ— ç©· ä¸€ä¸ªæ•°å­—é™¤ä»¥0ï¼Œpythonä¸­ä¼šæŠ¥é”™ï¼Œnumpyä¸­æ˜¯ä¸€ä¸ªinf nanï¼š ä¸¤ä¸ªnanä¸ç›¸ç­‰ 12np.nan !=np.nan#True è®¡ç®—nanä¸ªæ•° 12np.count_nonzero(t2!=t2) #t2!=t2ï¼Œå¾—åˆ°æ–°çŸ©é˜µï¼Œæ¯ä¸ªä½ç½®æ˜¯boolç±»å‹ï¼Œtrueè¡¨ç¤ºè¯¥ä½ç½®æ˜¯nannp.count_nonzero(np.isnan(t2)) # è®¡ç®—çŸ©é˜µå’Œ 12np.sum(t3)np.sum(t3, axis=0) #æ•°ç»„å…ƒç´ ä¸ªæ•°ï¼Œä¸åˆ—æ•°ç›¸åŒã€‚ï¼Œè®¡ç®—å¯¹åº”åˆ—ä¸Šçš„å’Œ 2.15 å¸¸ç”¨ç»Ÿè®¡å‡½æ•°æ±‚å’Œï¼št.sum(axis=0) å‡å€¼ï¼št.mean(axis=0) ä¸­å€¼ï¼št.median(axis) æœ€å¤§å€¼ï¼št.max æœ€å°å€¼:t.min æå€¼ï¼šnp.ptp(t,axis=None) æœ€å¤§å€¼å’Œæœ€å°å€¼ä¹‹å·® æ ‡å‡†å·®ï¼št.std(axis=None) é»˜è®¤è¿”å›å¤šç»´æ•°ç»„çš„å…¨éƒ¨ç»Ÿè®¡ç»“æœ","categories":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/categories/Python/"}],"tags":[{"name":"Pandas","slug":"Pandas","permalink":"https://sci.ci/tags/Pandas/"},{"name":"Matplotlib","slug":"Matplotlib","permalink":"https://sci.ci/tags/Matplotlib/"},{"name":"Numpy","slug":"Numpy","permalink":"https://sci.ci/tags/Numpy/"}]},{"title":"åˆ©ç”¨æ ‘è“æ´¾å®šæ—¶æŠ¢å›¾ä¹¦é¦†åº§ä½","slug":"åˆ©ç”¨æ ‘è“æ´¾å®šæ—¶æŠ¢å›¾ä¹¦é¦†åº§ä½","date":"2020-09-27T10:49:13.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/09/27/åˆ©ç”¨æ ‘è“æ´¾å®šæ—¶æŠ¢å›¾ä¹¦é¦†åº§ä½/","link":"","permalink":"https://sci.ci/2020/09/27/%E5%88%A9%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE%E5%AE%9A%E6%97%B6%E6%8A%A2%E5%9B%BE%E4%B9%A6%E9%A6%86%E5%BA%A7%E4%BD%8D/","excerpt":"","text":"1ï¼šéœ€æ±‚åˆ†æç”±äºæ–°å† ç–«æƒ…çš„å½±å“ï¼Œå­¦æ ¡å›¾ä¹¦é¦†å’Œè‡ªä¹ å®¤å¿…é¡»åœ¨ç›‘ç®¡ä¹‹ä¸‹è¿è¡Œï¼Œæ¯æ—¥æä¾›çš„åå¸­å’Œå¼€æ”¾æ—¶é—´å—é™ã€‚å¤§éƒ¨åˆ†è‡ªä¹ å®¤è¢«å…³é—­ï¼Œå¯¼è‡´åå¸­éœ€æ±‚å¾ˆå¤§ï¼Œè€Œä¾›åº”å¾ˆå°‘ã€‚æ–°è§„è¦æ±‚ï¼Œå›¾ä¹¦é¦†å’Œè‡ªä¹ å®¤çš„åå¸­å¿…é¡»åœ¨å­¦æ ¡å®˜ç½‘ä¸Šé¢„å®šï¼Œè€Œä¸”é¢„å®šæ—¶é—´æ˜¯å‘¨æ—¥åˆ°å‘¨å››æ—©ä¸Šå…«ç‚¹ï¼Œä»…èƒ½é¢„å®šåä¸€å¤©çš„ä½ç½®ã€‚ åœ¨è€ƒè¯•å‘¨ï¼Œåº§ä½éå¸¸éš¾æŠ¢åˆ°ï¼Œå› æ­¤èŒå‘äº†é€šè¿‡ç¨‹åºæŠ¢åº§çš„å¿µå¤´ã€‚ ç›®å‰éœ€æ±‚æ˜¯ï¼Œç¨‹åºåœ¨å‘¨å¤©åˆ°å‘¨æ—¥çš„æ—©ä¸Šå…«ç‚¹å¯åŠ¨ï¼Œå¹¶æ‰“å¼€æŠ¢åº§é¡µé¢ï¼ŒæŠ¢åº§åå…³é—­ç¨‹åºã€‚æŠ¢åº§æˆåŠŸåï¼Œå­¦æ ¡ä¼šè‡ªåŠ¨å‘é€æŠ¢åº§æˆåŠŸçš„é‚®ä»¶ã€‚ 2ï¼šè½¯ç¡¬ä»¶åº”ç”¨æœåŠ¡å™¨ï¼šæ ‘è“æ´¾4B+ã€Linuxç³»ç»Ÿ è¯­è¨€ï¼šPython ä¾èµ–åº“ï¼šSeleniumï¼Œdate Linuxå·¥å…·ï¼šcrontab 3ï¼šæŠ¢åº§ç¨‹åº123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107from selenium import webdriverfrom selenium.webdriver.common.action_chains import ActionChainsfrom selenium.webdriver.support.ui import Selectfrom selenium.webdriver.common.keys import Keysfrom selenium.webdriver.support.ui import WebDriverWaitfrom selenium.webdriver.support import expected_conditions as ECfrom selenium.webdriver.common.by import Byfrom time import sleepimport datetime#ç‚¹å‡»buchenæŒ‰é’®def clickbucheng(driver): inputs = driver.find_elements_by_tag_name(&#x27;input&#x27;) for input in inputs: if input.get_attribute(&#x27;value&#x27;) == &#x27;buchen&#x27;: ActionChains(driver).click(input).perform() # writetohtml(driver,r&quot;C:\\Users\\97532\\OneDrive\\ç¨‹åºä»“åº“\\getPlatzinBibliothek\\1.html&quot;) window = driver.window_handles[1] driver.switch_to.window(window) driver.find_elements_by_css_selector(&#x27;#bs_form_main &gt; div &gt; div.bs_etvg &gt; div &gt; label &gt; div.bs_form_uni.bs_right.padding0 &gt; input&#x27;)[0].click() print(datetime.datetime.now().strftime(&#x27;%Y.%m.%d-%H:%M:%S&#x27;),&quot;: start buchen&quot;) return 1 return 0#å‘é€è¡¨æ ¼ä¿¡æ¯def sendform(driver): # writetohtml(driver,r&#x27;C:\\Users\\97532\\OneDrive\\ç¨‹åºä»“åº“\\getPlatzinBibliothek\\2.html&#x27;) #sex:M/W urinfo = &#123;&quot;sex&quot;:&quot;M&quot;,&quot;vorname&quot;:&quot;***&quot;,&quot;name&quot;:&quot;***&quot;,&quot;strasse&quot;:&quot;Hai***1&quot;,&quot;ort&quot;:&quot;***&quot;,&quot;status&quot;:&quot;S-RWTH&quot;,&quot;matnr&quot;:&quot;***93&quot;,&quot;email&quot;:&quot;im@xieqifei.com&quot;,&quot;telefon&quot;:&quot;0049***4845&quot;&#125; radios = driver.find_elements_by_name(&#x27;sex&#x27;) vorname = driver.find_element_by_name(&#x27;vorname&#x27;) name = driver.find_element_by_name(&#x27;name&#x27;) strasse = driver.find_element_by_name(&#x27;strasse&#x27;) ort = driver.find_element_by_name(&#x27;ort&#x27;) status = Select(driver.find_element_by_name(&#x27;statusorig&#x27;)) matnr = driver.find_element_by_name(&#x27;matnr&#x27;) email = driver.find_element_by_name(&#x27;email&#x27;) telefon = driver.find_element_by_name(&#x27;telefon&#x27;) tnbed = driver.find_element_by_name(&#x27;tnbed&#x27;) submit = driver.find_element_by_css_selector(&#x27;#bs_foot &gt; div.bs_form_row &gt; div.bs_right &gt; input&#x27;) for radio in radios: if radio.get_attribute(&quot;value&quot;) == urinfo[&#x27;sex&#x27;]: radio.click() break vorname.send_keys(urinfo[&#x27;vorname&#x27;]) name.send_keys(urinfo[&#x27;name&#x27;]) strasse.send_keys(urinfo[&#x27;strasse&#x27;]) ort.send_keys(urinfo[&#x27;ort&#x27;]) status.select_by_value(urinfo[&#x27;status&#x27;]) matnr.send_keys(urinfo[&#x27;matnr&#x27;]) email.send_keys(urinfo[&#x27;email&#x27;]) telefon.send_keys(urinfo[&#x27;telefon&#x27;]) tnbed.click() telefon.click() sleep(4) # WebDriverWait(driver, 10).until(EC.element_to_be_clickable(By.XPATH,&#x27;//*[@id=&quot;bs_foot&quot;]/div[3]/div[2]/input&#x27;)) submit.click() print(datetime.datetime.now().strftime(&#x27;%Y.%m.%d-%H:%M:%S&#x27;),&quot;: send MsgForm&quot;) return 1#ç¡®è®¤é¢„å®šdef confirm(driver): confirm = driver.find_element_by_css_selector(&#x27;#bs_foot &gt; div.bs_form_row &gt; div.bs_right &gt; input&#x27;) confirm.click() print(datetime.datetime.now().strftime(&#x27;%Y.%m.%d-%H:%M:%S&#x27;),&quot;: confirm,buchen success!&quot;)#å¯å‘é€ç”¨æˆ·åå¯†ç æŠ¢åº§def sendpw(driver): logininfo = &#123;&quot;pw_email&quot;:&quot;im@xieqifei.com&quot;,&quot;password&quot;:&quot;***&quot;&#125; pw_email = driver.find_element_by_name(&#x27;pw_email&#x27;) pw = driver.find_element_by_css_selector(&#x27;#bs_pw_anm &gt; div:nth-child(3) &gt; div.bs_form_sp2 &gt; input&#x27;) submit2 = driver.find_element_by_css_selector(&#x27;#bs_pw_anm &gt; div.bs_form_foot &gt; div.bs_form_row &gt; div.bs_right &gt; input&#x27;) pw_email.send_keys(logininfo[&#x27;pw_email&#x27;]) pw.send_keys(logininfo[&#x27;password&#x27;]) # sleep(3) submit2.submit() &quot;&quot;&quot;def writetohtml(driver,path): f = open(path,&#x27;wb&#x27;) f.write(driver.page_source.encode(&quot;utf-8&quot;, &quot;ignore&quot;)) f.close() &quot;&quot;&quot; if __name__ == &quot;__main__&quot;: #path = &quot;/home/pi/Programms/getPlatzinBibliothek/chromedriver&quot; option = webdriver.ChromeOptions() option.add_argument(&#x27;--headless&#x27;) driver = webdriver.Chrome(options=option) print(datetime.datetime.now().strftime(&#x27;%Y.%m.%d-%H:%M:%S&#x27;),&quot;: chrome start up&quot;) # driver.get(&#x27;file:///C:/Users/97532/Desktop/Anmeldung.html&#x27;) driver.get(&#x27;https://buchung.hsz.rwth-aachen.de/angebote/aktueller_zeitraum/_Lernraumbuchung.html&#x27;) ok = clickbucheng(driver) count = 0 while ok != 1 and count &lt; 10: sleep(1) driver.refresh() ok = clickbucheng(driver) count = count + 1 else: if ok == 1: sendform(driver) confirm(driver) #driver.get_screenshot_as_file(r&quot;/home/pi/Programms/tushuguan.jpg&quot;) sleep(1) print(datetime.datetime.now().strftime(&#x27;%Y.%m.%d-%H:%M:%S&#x27;),&quot;: chrome shutdown&quot;) driver.quit() ä½¿ç”¨Seleniumé©±åŠ¨chromeæµè§ˆå™¨ï¼Œå®è¡Œwebè‡ªåŠ¨åŒ–ï¼Œå®ŒæˆæŠ¢åº§åŠŸèƒ½ã€‚ 4ï¼šå®šæ—¶ä»»åŠ¡åœ¨æ ‘è“æ´¾ä¸Šï¼Œåˆ©ç”¨Linuxå®šæ—¶å·¥å…·crontabï¼ŒæŒ‡å®šç¨‹åºåœ¨æ¯å‘¨å¤©åˆ°å‘¨å››ä¸Šåˆå…«ç‚¹è¿è¡Œã€‚ åˆ›å»ºshellè„šæœ¬ï¼Œbibplatz.sh 123#!/bin/bashcd /home/pi/Programms/getPlatzinBibliothekpython3 -u getplatz.py &gt; result.log 2&gt;&amp;1 æ·»åŠ ä»»åŠ¡ 1crontab -e åœ¨vimç¼–è¾‘å™¨ä¸­æ·»åŠ ä»»åŠ¡ 10 8 * * 0-4 /home/pi/bibplatz.sh &amp; crontabçš„æ ¼å¼ä¸ºï¼š* * * * * command äº”ä¸ª*åˆ†åˆ«ä»£è¡¨ï¼Œåˆ†é’Ÿï¼Œå°æ—¶ï¼Œå¤©ï¼Œæœˆï¼Œå‘¨ æŸ¥çœ‹ä»»åŠ¡ 1crontab -l 5ï¼šå‚è€ƒèµ„æ–™ã€ŠLinuxå®šæ—¶ä»»åŠ¡Crontabå‘½ä»¤è¯¦è§£ã€‹ ã€ŠLinuxåå°è¿è¡ŒPythonç¨‹åºçš„å‡ ç§æ–¹æ³•è®²è§£ã€‹ ã€Šlinuxä¸‹åå°è¿è¡Œpythonç¨‹åºå¹¶è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶ä¸­ã€‹","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/tags/Linux/"},{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://sci.ci/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"}]},{"title":"æ ‘è“æ´¾Chromeæµè§ˆå™¨é©±åŠ¨webdriver","slug":"æ ‘è“æ´¾Chromeæµè§ˆå™¨é©±åŠ¨webdriver","date":"2020-09-21T14:01:57.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/09/21/æ ‘è“æ´¾Chromeæµè§ˆå™¨é©±åŠ¨webdriver/","link":"","permalink":"https://sci.ci/2020/09/21/%E6%A0%91%E8%8E%93%E6%B4%BEChrome%E6%B5%8F%E8%A7%88%E5%99%A8%E9%A9%B1%E5%8A%A8webdriver/","excerpt":"","text":"æ ‘è“æ´¾ä¸Šçš„ç³»ç»Ÿæ˜¯åŸºäºArmå†…æ ¸çš„Linuxï¼Œä¸”æ˜¯32ä½ç³»ç»Ÿï¼Œåœ¨Googleä¸Šé¢ä¸‹è½½çš„chromedriveråœ¨seleniumè¿è¡Œæ—¶ï¼Œä¼šæŠ¥é”™ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨apt-getå®‰è£…chromedriverã€‚ å®‰è£…å‘½ä»¤ï¼š 1sudo apt-get install chromium-chromedriver ä¼šè‡ªåŠ¨è¯†åˆ«æ ‘è“æ´¾ä¸ŠåŸæœ‰çš„chromeæµè§ˆå™¨ç‰ˆæœ¬ã€‚ åœ¨pythonç¨‹åºä¸­ï¼Œå¯ç›´æ¥ä½¿ç”¨webdriver.Chrome()è€Œæ— éœ€å†æŒ‡å®šé©±åŠ¨è·¯å¾„ã€‚","categories":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://sci.ci/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"}],"tags":[{"name":"Selenium","slug":"Selenium","permalink":"https://sci.ci/tags/Selenium/"}]},{"title":"ADBå‚è€ƒæŒ‡ä»¤","slug":"ADBå‚è€ƒæŒ‡ä»¤","date":"2020-09-21T08:31:53.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/09/21/ADBå‚è€ƒæŒ‡ä»¤/","link":"","permalink":"https://sci.ci/2020/09/21/ADB%E5%8F%82%E8%80%83%E6%8C%87%E4%BB%A4/","excerpt":"","text":"1ï¼šå‚è€ƒèµ„æ–™ã€Šä½¿ç”¨adbå‘½ä»¤æ“æ§Androidæ‰‹æœºï¼ˆadbå‘½ä»¤ï¼‰ã€‹ï¼šä»è¿æ¥è®¾å¤‡ï¼Œåˆ°é”®ç›˜è¾“å…¥å’Œç‚¹å‡»æ“ä½œ ã€Šadb shell geteventä¸­è·å–åˆ°çš„å±å¹•äº‹ä»¶çš„åæ ‡è½¬æ¢ã€‹","categories":[{"name":"å®‰å“ç¼–ç¨‹","slug":"å®‰å“ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E5%AE%89%E5%8D%93%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"ADB","slug":"ADB","permalink":"https://sci.ci/tags/ADB/"}]},{"title":"Seleniumåº“å¸¸ç”¨æ“ä½œè®°å½•","slug":"Seleniumå¸¸ç”¨æ“ä½œè®°å½•","date":"2020-09-18T11:06:09.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/09/18/Seleniumå¸¸ç”¨æ“ä½œè®°å½•/","link":"","permalink":"https://sci.ci/2020/09/18/Selenium%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1ï¼šSeleniumç®€ä»‹Seleniumåº“æ˜¯ä¸€ä¸ªç”¨äºæµè§ˆå™¨è‡ªåŠ¨åŒ–pyhonåº“ã€‚å¯¹æé«˜çˆ¬è™«å®¹é”™ç‡æœ‰å¾ˆå¥½çš„æ•ˆæœã€‚å®ƒå¯ç”¨äºé©±åŠ¨æµè§ˆå™¨ï¼Œæ¥å¸®åŠ©æˆ‘ä»¬å®ç°è·å–ç½‘ç«™jsè„šæœ¬æ‰§è¡Œåçš„ç½‘é¡µã€‚ 2ï¼šSeleniumå®‰è£…2.1 å®‰è£…1pip install selenium 2.2 æµè§ˆå™¨é©±åŠ¨ä¸‹è½½æµè§ˆå™¨é©±åŠ¨ï¼š Firefoxæµè§ˆå™¨é©±åŠ¨ï¼šgeckodriver Chromeæµè§ˆå™¨é©±åŠ¨ï¼šchromedriver , taobaoå¤‡ç”¨åœ°å€ IEæµè§ˆå™¨é©±åŠ¨ï¼šIEDriverServer Edgeæµè§ˆå™¨é©±åŠ¨ï¼šMicrosoftWebDriver Operaæµè§ˆå™¨é©±åŠ¨ï¼šoperadriver PhantomJSæµè§ˆå™¨é©±åŠ¨ï¼šphantomjs å°†é©±åŠ¨æ”¾åˆ°æŸä¸ªè·¯å¾„ä¸‹ï¼Œå¹¶åœ¨ç¯å¢ƒå˜é‡ä¸­æŒ‡æ˜ã€‚ä¾‹å¦‚ï¼š é©±åŠ¨æ”¾åœ¨ç›®å½•ï¼šC:/abc/webdriver.exe åˆ™éœ€è¦åœ¨ç”¨æˆ·æˆ–è€…ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­ï¼Œç»™Pathå˜é‡æ·»åŠ æ–°å˜é‡ï¼šC:/abc æˆ–è€…æŒ‡å®šé©±åŠ¨è·¯å¾„ 123from selenium import webdriverpath = &quot;/path/to/chromedriver&quot; #æ³¨æ„è¿™ä¸ªè·¯å¾„éœ€è¦æ—¶å¯æ‰§è¡Œè·¯å¾„ï¼ˆchmod 777 dir or 755 dirï¼‰driver = webdriver.Chrome(executable_path=path) ä¸åŒçš„æµè§ˆå™¨å¯åŠ¨æ–¹å¼ï¼š 123456789101112from selenium import webdriverdriver = webdriver.Firefox() # Firefoxæµè§ˆå™¨driver = webdriver.Chrome() # Chromeæµè§ˆå™¨driver = webdriver.Ie() # Internet Exploreræµè§ˆå™¨driver = webdriver.Edge() # Edgeæµè§ˆå™¨driver = webdriver.Opera() # Operaæµè§ˆå™¨driver = webdriver.PhantomJS() # PhantomJS 3ï¼šæµè§ˆå™¨é€‰é¡¹å’Œæ“ä½œ3.1 æµè§ˆå™¨é€‰é¡¹æ¯æ¬¡å½“seleniumå¯åŠ¨chromeæµè§ˆå™¨çš„æ—¶å€™ï¼Œchromeæµè§ˆå™¨å¾ˆå¹²å‡€ï¼Œæ²¡æœ‰æ’ä»¶ã€æ²¡æœ‰æ”¶è—ã€æ²¡æœ‰å†å²è®°å½•ï¼Œè¿™æ˜¯å› ä¸ºseleniumåœ¨å¯åŠ¨chromeæ—¶ä¸ºäº†ä¿è¯æœ€å¿«çš„è¿è¡Œæ•ˆç‡ï¼Œå¯åŠ¨äº†ä¸€ä¸ªè£¸æµè§ˆå™¨ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦é…ç½®å‚æ•°çš„åŸå› ï¼Œä½†æ˜¯æœ‰äº›æ—¶å€™æˆ‘ä»¬éœ€è¦çš„ä¸ä»…æ˜¯ä¸€ä¸ªè£¸æµè§ˆå™¨ã€‚ seleniumå¯åŠ¨é…ç½®å‚æ•°æ¥æ”¶æ˜¯ChromeOptionsç±»ï¼Œåˆ›å»ºæ–¹å¼å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657from selenium import webdriveroption = webdriver.ChromeOptions()# æ·»åŠ å¯åŠ¨å‚æ•°option.add_argument()# æ·»åŠ æ‰©å±•åº”ç”¨ option.add_extension()option.add_encoded_extension()# æ·»åŠ å®éªŒæ€§è´¨çš„è®¾ç½®å‚æ•° option.add_experimental_option()# è®¾ç½®è°ƒè¯•å™¨åœ°å€option.debugger_address()# æ·»åŠ UAoptions.add_argument(&#x27;user-agent=&quot;MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22; CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&quot;&#x27;)# æŒ‡å®šæµè§ˆå™¨åˆ†è¾¨ç‡options.add_argument(&#x27;window-size=1920x3000&#x27;) # è°·æ­Œæ–‡æ¡£æåˆ°éœ€è¦åŠ ä¸Šè¿™ä¸ªå±æ€§æ¥è§„é¿bugchrome_options.add_argument(&#x27;--disable-gpu&#x27;) # éšè—æ»šåŠ¨æ¡, åº”å¯¹ä¸€äº›ç‰¹æ®Šé¡µé¢options.add_argument(&#x27;--hide-scrollbars&#x27;)# ä¸åŠ è½½å›¾ç‰‡, æå‡é€Ÿåº¦options.add_argument(&#x27;blink-settings=imagesEnabled=false&#x27;) # æµè§ˆå™¨ä¸æä¾›å¯è§†åŒ–é¡µé¢. linuxä¸‹å¦‚æœç³»ç»Ÿä¸æ”¯æŒå¯è§†åŒ–ä¸åŠ è¿™æ¡ä¼šå¯åŠ¨å¤±è´¥options.add_argument(&#x27;--headless&#x27;) # ä»¥æœ€é«˜æƒé™è¿è¡Œoptions.add_argument(&#x27;--no-sandbox&#x27;)# æ‰‹åŠ¨æŒ‡å®šä½¿ç”¨çš„æµè§ˆå™¨ä½ç½®options.binary_location = r&quot;C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe&quot; #æ·»åŠ crxæ’ä»¶option.add_extension(&#x27;d:\\crx\\AdBlock_v2.17.crx&#x27;) # ç¦ç”¨JavaScriptoption.add_argument(&quot;--disable-javascript&quot;) # è®¾ç½®å¼€å‘è€…æ¨¡å¼å¯åŠ¨ï¼Œè¯¥æ¨¡å¼ä¸‹webdriverå±æ€§ä¸ºæ­£å¸¸å€¼options.add_experimental_option(&#x27;excludeSwitches&#x27;, [&#x27;enable-automation&#x27;]) # ç¦ç”¨æµè§ˆå™¨å¼¹çª—prefs = &#123; &#x27;profile.default_content_setting_values&#x27; : &#123; &#x27;notifications&#x27; : 2 &#125; &#125; options.add_experimental_option(&#x27;prefs&#x27;,prefs)driver=webdriver.Chrome(chrome_options=chrome_options) å…¶ä»–é…ç½®å‚æ•° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586â€“user-data-dir=â€[PATH]â€ # æŒ‡å®šç”¨æˆ·æ–‡ä»¶å¤¹User Dataè·¯å¾„ï¼Œå¯ä»¥æŠŠä¹¦ç­¾è¿™æ ·çš„ç”¨æˆ·æ•°æ®ä¿å­˜åœ¨ç³»ç»Ÿåˆ†åŒºä»¥å¤–çš„åˆ†åŒº â€“disk-cache-dir=â€[PATH]â€œ # æŒ‡å®šç¼“å­˜Cacheè·¯å¾„ â€“disk-cache-size= # æŒ‡å®šCacheå¤§å°ï¼Œå•ä½Byte â€“first run # é‡ç½®åˆ°åˆå§‹çŠ¶æ€ï¼Œç¬¬ä¸€æ¬¡è¿è¡Œ â€“incognito # éšèº«æ¨¡å¼å¯åŠ¨ â€“disable-javascript # ç¦ç”¨Javascript --omnibox-popup-count=&quot;num&quot; # å°†åœ°å€æ å¼¹å‡ºçš„æç¤ºèœå•æ•°é‡æ”¹ä¸ºnumä¸ª --user-agent=&quot;xxxxxxxx&quot; # ä¿®æ”¹HTTPè¯·æ±‚å¤´éƒ¨çš„Agentå­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡about:versioné¡µé¢æŸ¥çœ‹ä¿®æ”¹æ•ˆæœ --disable-plugins # ç¦æ­¢åŠ è½½æ‰€æœ‰æ’ä»¶ï¼Œå¯ä»¥å¢åŠ é€Ÿåº¦ã€‚å¯ä»¥é€šè¿‡about:pluginsé¡µé¢æŸ¥çœ‹æ•ˆæœ --disable-javascript # ç¦ç”¨JavaScriptï¼Œå¦‚æœè§‰å¾—é€Ÿåº¦æ…¢åœ¨åŠ ä¸Šè¿™ä¸ª --disable-java # ç¦ç”¨java --start-maximized # å¯åŠ¨å°±æœ€å¤§åŒ– --no-sandbox # å–æ¶ˆæ²™ç›’æ¨¡å¼ --single-process # å•è¿›ç¨‹è¿è¡Œ --process-per-tab # æ¯ä¸ªæ ‡ç­¾ä½¿ç”¨å•ç‹¬è¿›ç¨‹ --process-per-site # æ¯ä¸ªç«™ç‚¹ä½¿ç”¨å•ç‹¬è¿›ç¨‹ --in-process-plugins # æ’ä»¶ä¸å¯ç”¨å•ç‹¬è¿›ç¨‹ --disable-popup-blocking # ç¦ç”¨å¼¹å‡ºæ‹¦æˆª --disable-plugins # ç¦ç”¨æ’ä»¶ --disable-images # ç¦ç”¨å›¾åƒ --incognito # å¯åŠ¨è¿›å…¥éšèº«æ¨¡å¼ --enable-udd-profiles # å¯ç”¨è´¦æˆ·åˆ‡æ¢èœå• --proxy-pac-url # ä½¿ç”¨pacä»£ç† [via 1/2] --lang=zh-CN # è®¾ç½®è¯­è¨€ä¸ºç®€ä½“ä¸­æ–‡ --disk-cache-dir # è‡ªå®šä¹‰ç¼“å­˜ç›®å½• --disk-cache-size # è‡ªå®šä¹‰ç¼“å­˜æœ€å¤§å€¼ï¼ˆå•ä½byteï¼‰ --media-cache-size # è‡ªå®šä¹‰å¤šåª’ä½“ç¼“å­˜æœ€å¤§å€¼ï¼ˆå•ä½byteï¼‰ --bookmark-menu # åœ¨å·¥å…· æ å¢åŠ ä¸€ä¸ªä¹¦ç­¾æŒ‰é’® --enable-sync # å¯ç”¨ä¹¦ç­¾åŒæ­¥ 3.2 æµè§ˆå™¨æ“ä½œ æ§åˆ¶æµè§ˆå™¨çª—å£å¤§å° 1driver.set_window_size(480, 800) æµè§ˆå™¨åé€€ï¼Œå‰è¿› 1234# åé€€ driver.back() # å‰è¿› driver.forward() åˆ·æ–° 1driver.refresh() # åˆ·æ–° 4ï¼šå…ƒç´ å®šä½å’Œæ“ä½œ4.1 å…ƒç´ å®šä½è·å–é¦–ä¸ªåŒ¹é…å…ƒç´ ï¼š 12345678find_element_by_id()find_element_by_name()find_element_by_class_name()find_element_by_tag_name()find_element_by_link_text()find_element_by_partial_link_text()find_element_by_xpath()find_element_by_css_selector() å¦‚æœå…·æœ‰å¤šä¸ªåŒ¹é…å±æ€§å…ƒç´ ï¼Œå¯ä½¿ç”¨ï¼š 1find_elements_by_class_name() å³åœ¨elementååŠ s 4.2 è¾“å…¥ã€æäº¤ ç‚¹å‡»å’Œè¾“å…¥ 1driver.find_element_by_id(&quot;kw&quot;).clear() # æ¸…æ¥šæ–‡æœ¬ driver.find_element_by_id(&quot;kw&quot;).send_keys(&quot;selenium&quot;) # æ¨¡æ‹ŸæŒ‰é”®è¾“å…¥ driver.find_element_by_id(&quot;su&quot;).click() # å•æœºå…ƒç´  æäº¤ å¯ä»¥åœ¨æœç´¢æ¡†æ¨¡æ‹Ÿå›è½¦æ“ä½œ 12search_text = driver.find_element_by_id(&#x27;kw&#x27;) search_text.send_keys(&#x27;selenium&#x27;) search_text.submit() å…¶ä»– sizeï¼š è¿”å›å…ƒç´ çš„å°ºå¯¸ã€‚ textï¼š è·å–å…ƒç´ çš„æ–‡æœ¬ã€‚ get_attribute(name)ï¼š è·å¾—å±æ€§å€¼ã€‚ is_displayed()ï¼š è®¾ç½®è¯¥å…ƒç´ æ˜¯å¦ç”¨æˆ·å¯è§ã€‚ 4.3 é¼ æ ‡æ“ä½œåœ¨ WebDriver ä¸­ï¼Œ å°†è¿™äº›å…³äºé¼ æ ‡æ“ä½œçš„æ–¹æ³•å°è£…åœ¨ ActionChains ç±»æä¾›ã€‚ ActionChains ç±»æä¾›äº†é¼ æ ‡æ“ä½œçš„å¸¸ç”¨æ–¹æ³•ï¼š 1234567891011121314151617181920212223242526272829clickï¼ˆon_element &#x3D; Noneï¼‰-é¼ æ ‡å·¦é”®click_and_holdï¼ˆon_element &#x3D; Noneï¼‰-å•å‡»é¼ æ ‡å·¦é”®ï¼Œä¸æ¾å¼€context_clickï¼ˆon_element &#x3D; Noneï¼‰-ç‚¹å‡»é¼ æ ‡å³é”®double_clickï¼ˆon_element &#x3D; Noneï¼‰-åŒå‡»é¼ æ ‡å·¦é”®drag_and_dropï¼ˆæºï¼Œç›®æ ‡ï¼‰-æ‹–æ‹½åˆ°æŸä¸ªå…ƒç´ ç„¶åæ¾å¼€drag_and_drop_by_offsetï¼ˆsourceï¼Œxoffsetï¼Œyoffsetï¼‰-æ‹–æ‹½åˆ°æŸä¸ªåæ ‡ç„¶åæ¾å¼€key_downï¼ˆvalueï¼Œelement &#x3D; Noneï¼‰-ç‚¹å‡»æŸä¸ªé”®ç›˜ä¸Šçš„é”®key_upï¼ˆvalueï¼Œelement &#x3D; Noneï¼‰-æ¾å¼€æŸä¸ªé”®move_by_offsetï¼ˆxoffsetï¼Œyoffsetï¼‰-é¼ æ ‡ä»å½“å‰ä½ç½®ç§»åŠ¨åˆ°æŸä¸ªåæ ‡move_to_elementï¼ˆto_elementï¼‰-é¼ æ ‡ç§»åŠ¨åˆ°æŸä¸ªå…ƒç´ move_to_element_with_offsetï¼ˆto_elementï¼Œxoffsetï¼Œyoffsetï¼‰-ç§»åŠ¨åˆ°è·ç¦»æŸä¸ªå…ƒç´ ï¼ˆå·¦ä¸Šè§’åæ ‡ï¼‰å¤šå°‘è·ç¦»çš„ä½ç½®performï¼ˆï¼‰-æ‰§è¡Œé“¾ä¸­çš„æ‰€æœ‰åŠ¨ä½œé‡Šæ”¾ï¼ˆon_element &#x3D; Noneï¼‰-åœ¨æŸä¸ªå…ƒç´ ä½ç½®æ¾å¼€é¼ æ ‡å·¦é”®send_keysï¼ˆ* keys_to_sendï¼‰-å‘é€æŸä¸ªé”®åˆ°å½“å‰ç„¦ç‚¹çš„å…ƒç´ send_keys_to_elementï¼ˆelementï¼Œ* keys_to_sendï¼‰-å‘é€æŸä¸ªé”®åˆ°æŒ‡å®šå…ƒç´  ä¸¾ä¸ªä¾‹å­ï¼š 1234567891011from selenium import webdriver# å¼•å…¥ ActionChains ç±»from selenium.webdriver.common.action_chains import ActionChainsdriver = webdriver.Chrome()driver.get(&quot;https://www.baidu.cn&quot;)# å®šä½åˆ°è¦æ‚¬åœçš„å…ƒç´ above = driver.find_element_by_link_text(&quot;è®¾ç½®&quot;)# å¯¹å®šä½åˆ°çš„å…ƒç´ æ‰§è¡Œé¼ æ ‡æ‚¬åœæ“ä½œActionChains(driver).move_to_element(above).perform() 4.4 é”®ç›˜äº‹ä»¶ä»¥ä¸‹ä¸ºå¸¸ç”¨çš„é”®ç›˜æ“ä½œï¼š send_keys(Keys.BACK_SPACE) åˆ é™¤é”®ï¼ˆBackSpaceï¼‰ send_keys(Keys.SPACE) ç©ºæ ¼é”®(Space) send_keys(Keys.TAB) åˆ¶è¡¨é”®(Tab) send_keys(Keys.ESCAPE) å›é€€é”®ï¼ˆEscï¼‰ send_keys(Keys.ENTER) å›è½¦é”®ï¼ˆEnterï¼‰ send_keys(Keys.CONTROL,â€™aâ€™) å…¨é€‰ï¼ˆCtrl+Aï¼‰ send_keys(Keys.CONTROL,â€™câ€™) å¤åˆ¶ï¼ˆCtrl+Cï¼‰ send_keys(Keys.CONTROL,â€™xâ€™) å‰ªåˆ‡ï¼ˆCtrl+Xï¼‰ send_keys(Keys.CONTROL,â€™vâ€™) ç²˜è´´ï¼ˆCtrl+Vï¼‰ send_keys(Keys.F1) é”®ç›˜ F1 â€¦â€¦ send_keys(Keys.F12) é”®ç›˜ F12 12345# è¾“å…¥æ¡†è¾“å…¥å†…å®¹driver.find_element_by_id(&quot;kw&quot;).send_keys(&quot;seleniumm&quot;)# åˆ é™¤å¤šè¾“å…¥çš„ä¸€ä¸ª mdriver.find_element_by_id(&quot;kw&quot;).send_keys(Keys.BACK_SPACE) 4.5 è·å–æ–­è¨€ä¿¡æ¯123title = driver.title # æ‰“å°å½“å‰é¡µé¢titlenow_url = driver.current_url # æ‰“å°å½“å‰é¡µé¢URLuser = driver.find_element_by_class_name(&#x27;nums&#x27;).text # # è·å–ç»“æœæ•°ç›® 4.6 ç­‰å¾…é¡µé¢åŠ è½½å®Œæˆ æ˜¾ç¤ºç­‰å¾… æ˜¾å¼ç­‰å¾…ä½¿WebdDriverç­‰å¾…æŸä¸ªæ¡ä»¶æˆç«‹æ—¶ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™åœ¨è¾¾åˆ°æœ€å¤§æ—¶é•¿æ—¶æŠ›å‡ºè¶…æ—¶å¼‚å¸¸ï¼ˆTimeoutExceptionï¼‰ã€‚ 12345678910111213from selenium import webdriverfrom selenium.webdriver.common.by import Byfrom selenium.webdriver.support.ui import WebDriverWaitfrom selenium.webdriver.support import expected_conditions as ECdriver = webdriver.Firefox()driver.get(&quot;http://www.baidu.com&quot;)element = WebDriverWait(driver, 5, 0.5).until( EC.presence_of_element_located((By.ID, &quot;kw&quot;)) )element.send_keys(&#x27;selenium&#x27;)driver.quit() WebDriverWaitç±»æ˜¯ç”±WebDirver æä¾›çš„ç­‰å¾…æ–¹æ³•ã€‚åœ¨è®¾ç½®æ—¶é—´å†…ï¼Œé»˜è®¤æ¯éš”ä¸€æ®µæ—¶é—´æ£€æµ‹ä¸€æ¬¡å½“å‰é¡µé¢å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœè¶…è¿‡è®¾ç½®æ—¶é—´æ£€æµ‹ä¸åˆ°åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚å…·ä½“æ ¼å¼å¦‚ä¸‹ï¼š 1WebDriverWait(driver, timeout, poll_frequency=0.5, ignored_exceptions=None) driver ï¼šæµè§ˆå™¨é©±åŠ¨ã€‚ timeout ï¼šæœ€é•¿è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä»¥ç§’ä¸ºå•ä½ã€‚ poll_frequency ï¼šæ£€æµ‹çš„é—´éš”ï¼ˆæ­¥é•¿ï¼‰æ—¶é—´ï¼Œé»˜è®¤ä¸º0.5Sã€‚ ignored_exceptions ï¼šè¶…æ—¶åçš„å¼‚å¸¸ä¿¡æ¯ï¼Œé»˜è®¤æƒ…å†µä¸‹æŠ›NoSuchElementExceptionå¼‚å¸¸ã€‚ WebDriverWait()ä¸€èˆ¬ç”±until()æˆ–until_not()æ–¹æ³•é…åˆä½¿ç”¨ï¼Œä¸‹é¢æ˜¯until()å’Œuntil_not()æ–¹æ³•çš„è¯´æ˜ã€‚ until(method, message=â€˜â€™) è°ƒç”¨è¯¥æ–¹æ³•æä¾›çš„é©±åŠ¨ç¨‹åºä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œç›´åˆ°è¿”å›å€¼ä¸ºTrueã€‚ until_not(method, message=â€˜â€™) è°ƒç”¨è¯¥æ–¹æ³•æä¾›çš„é©±åŠ¨ç¨‹åºä½œä¸ºä¸€ä¸ªå‚æ•°ï¼Œç›´åˆ°è¿”å›å€¼ä¸ºFalseã€‚ åœ¨æœ¬ä¾‹ä¸­ï¼Œé€šè¿‡aså…³é”®å­—å°†expected_conditions é‡å‘½åä¸ºECï¼Œå¹¶è°ƒç”¨presence_of_element_located()æ–¹æ³•åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨ã€‚ éšå¼ç­‰å¾… å¦‚æœæŸäº›å…ƒç´ ä¸æ˜¯ç«‹å³å¯ç”¨çš„ï¼Œéšå¼ç­‰å¾…æ˜¯å‘Šè¯‰WebDriverå»ç­‰å¾…ä¸€å®šçš„æ—¶é—´åå»æŸ¥æ‰¾å…ƒç´ ã€‚ é»˜è®¤ç­‰å¾…æ—¶é—´æ˜¯0ç§’ï¼Œä¸€æ—¦è®¾ç½®è¯¥å€¼ï¼Œéšå¼ç­‰å¾…æ˜¯è®¾ç½®è¯¥WebDriverçš„å®ä¾‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ 12345from selenium import webdriverdriver = webdriver.Firefox() driver.implicitly_wait(10) # seconds driver.get(&quot;http://somedomain/url_that_delays_loading&quot;) myDynamicElement = driver.find_element_by_id(&quot;myDynamicElement&quot;) 4.7 åœ¨ä¸åŒçš„iframeä¹‹é—´ç§»åŠ¨12driver.switch_to_window(&quot;windowName&quot;)driver.switch_to_frame(&quot;frameName&quot;) ä»¥ç›´æ¥å–è¡¨å•çš„id æˆ–nameå±æ€§ã€‚å¦‚æœiframeæ²¡æœ‰å¯ç”¨çš„idå’Œnameå±æ€§ï¼Œåˆ™å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼è¿›è¡Œå®šä½ã€‚ 12345#å…ˆé€šè¿‡xpthå®šä½åˆ°iframexf = driver.find_element_by_xpath(&#x27;//*[@id=&quot;x-URS-iframe&quot;]&#x27;)#å†å°†å®šä½å¯¹è±¡ä¼ ç»™switch_to_frame()æ–¹æ³•driver.switch_to_frame(xf) ä¸€æ—¦æˆ‘ä»¬å®Œæˆäº†frameä¸­çš„å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è¿”å›çˆ¶frame: 1driver.switch_to_default_content() 4.8 è­¦å‘Šæ¡†å¤„ç†1alert = driver.switch_to_alert() textï¼šè¿”å› alert/confirm/prompt ä¸­çš„æ–‡å­—ä¿¡æ¯ã€‚ accept()ï¼šæ¥å—ç°æœ‰è­¦å‘Šæ¡†ã€‚ dismiss()ï¼šè§£æ•£ç°æœ‰è­¦å‘Šæ¡†ã€‚ send_keys(keysToSend)ï¼šå‘é€æ–‡æœ¬è‡³è­¦å‘Šæ¡†ã€‚keysToSendï¼šå°†æ–‡æœ¬å‘é€è‡³è­¦å‘Šæ¡†ã€‚ 4.9 ä¸‹æ‹‰æ¡†é€‰æ‹©123456789from selenium import webdriverfrom selenium.webdriver.support.select import Selectfrom time import sleepdriver = webdriver.Chrome()driver.implicitly_wait(10)driver.get(&#x27;http://www.baidu.com&#x27;)sel = driver.find_element_by_xpath(&quot;//select[@id=&#x27;nr&#x27;]&quot;)Select(sel).select_by_value(&#x27;50&#x27;) # æ˜¾ç¤º50æ¡ 4.10 æ–‡ä»¶ä¸Šä¼ 1driver.find_element_by_name(&quot;file&quot;).send_keys(&#x27;D:\\\\upload_file.txt&#x27;) # # å®šä½ä¸Šä¼ æŒ‰é’®ï¼Œæ·»åŠ æœ¬åœ°æ–‡ä»¶ 4.11 cookieæ“ä½œWebDriveræ“ä½œcookieçš„æ–¹æ³•ï¼š get_cookies()ï¼š è·å¾—æ‰€æœ‰cookieä¿¡æ¯ã€‚ get_cookie(name)ï¼š è¿”å›å­—å…¸çš„keyä¸ºâ€œnameâ€çš„cookieä¿¡æ¯ã€‚ add_cookie(cookie_dict) ï¼š æ·»åŠ cookieã€‚â€œcookie_dictâ€æŒ‡å­—å…¸å¯¹è±¡ï¼Œå¿…é¡»æœ‰name å’Œvalue å€¼ã€‚ delete_cookie(name,optionsString)ï¼šåˆ é™¤cookieä¿¡æ¯ã€‚â€œnameâ€æ˜¯è¦åˆ é™¤çš„cookieçš„åç§°ï¼Œâ€œoptionsStringâ€æ˜¯è¯¥cookieçš„é€‰é¡¹ï¼Œç›®å‰æ”¯æŒçš„é€‰é¡¹åŒ…æ‹¬â€œè·¯å¾„â€ï¼Œâ€œåŸŸâ€ã€‚ delete_all_cookies()ï¼š åˆ é™¤æ‰€æœ‰cookieä¿¡æ¯ 4.12 è°ƒç”¨JavaScriptä»£ç 12js=&quot;window.scrollTo(100,450);&quot;driver.execute_script(js) # é€šè¿‡javascriptè®¾ç½®æµè§ˆå™¨çª—å£çš„æ»šåŠ¨æ¡ä½ç½® é€šè¿‡execute_script()æ–¹æ³•æ‰§è¡ŒJavaScriptsä»£ç æ¥ç§»åŠ¨æ»šåŠ¨æ¡çš„ä½ç½®ã€‚ 4.13 çª—å£æˆªå›¾1driver.get_screenshot_as_file(&quot;D:\\\\baidu_img.jpg&quot;) # æˆªå–å½“å‰çª—å£ï¼Œå¹¶æŒ‡å®šæˆªå›¾å›¾ç‰‡çš„ä¿å­˜ä½ç½® 4.14 å…³é—­æµè§ˆå™¨ close() å…³é—­å•ä¸ªçª—å£ quit() å…³é—­æ‰€æœ‰çª—å£ 4.15 ç›´æ¥ç”¨cookieç™»å½•æ–¹æ³•é“¾æ¥ï¼šhttps://www.jianshu.com/p/773c58406bdb æ‰‹åŠ¨è·å–ç½‘é¡µçš„cookieï¼Œå°†å…¶åºåˆ—åŒ–å¹¶å­˜å‚¨åœ¨æœ¬åœ° å†™å…¥ä»£ç  12for item in cookies: driver.add_cookie(item) 4.16 å¯¼å‡ºhtmlåˆ°beautifulsoupæˆ–æ–‡ä»¶1soup = BeautifulSoup(driver.page_source,&quot;html.parser&quot;) 1234def writetohtml(driver,path): f = open(path,&#x27;wb&#x27;) f.write(driver.page_source.encode(&quot;utf-8&quot;, &quot;ignore&quot;)) f.close() 5ï¼šæ§ä»¶æ“ä½œ5.1 SelectSelectç±»æä¾›äº†ä¸‰ç§é€‰æ‹©æŸäº›é€‰é¡¹çš„æ–¹æ³•ï¼š 123select_by_index(index)select_by_value(value)select_by_visible_text(text) indexä»0å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªoptionä¸º0 valueæ˜¯æ ‡ç­¾çš„å±æ€§å€¼ visible_textæ˜¯optionæ ‡ç­¾ä¸­é—´çš„å€¼ï¼Œå³ä¸‹æ‹‰æ¡†å¯è§å€¼ è‡ªç„¶çš„ï¼Œæœ‰é€‰æ‹©å¿…ç„¶æœ‰åé€‰ï¼Œå³å–æ¶ˆé€‰æ‹©ã€‚Selectæä¾›äº†å››ä¸ªæ–¹æ³•ç»™æˆ‘ä»¬å–æ¶ˆåŸæ¥çš„é€‰æ‹©ï¼š 1234deselect_by_index(index)deselect_by_value(value)deselect_by_visible_text(text)deselect_all() å‰ä¸€ç§åˆ†åˆ«äºselectç›¸å¯¹åº”ï¼Œç¬¬å››ç§æ˜¯å…¨éƒ¨å–æ¶ˆé€‰æ‹©ï¼Œæ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼Œæ˜¯å…¨éƒ¨å–æ¶ˆã€‚æœ‰ä¸€ç§ç‰¹æ®Šçš„é€‰æ‹©æ ‡ç­¾ï¼Œå³è®¾ç½®äº†multiple=&quot;multiple&quot;å±æ€§çš„selectï¼Œè¿™ç§selectæ¡†æ˜¯å¯ä»¥å¤šé€‰çš„ï¼Œä½ å¯ä»¥é€šè¿‡å¤šæ¬¡selectï¼Œé€‰æ‹©å¤šä¸ªé€‰é¡¹ï¼Œè€Œé€šè¿‡deselect_all()æ¥å°†ä»–ä»¬å…¨éƒ¨å–æ¶ˆã€‚ å½“æˆ‘ä»¬é€‰æ‹©äº†é€‰é¡¹ä¹‹åï¼Œæƒ³è¦çœ‹çœ‹é€‰æ‹©çš„æ˜¯å“ªé¡¹ï¼Œæ›¿ä»£çš„æ˜¯å¦æ˜¯æˆ‘æƒ³é€‰çš„ï¼Œæ€ä¹ˆåŠï¼Ÿåˆ«æ‹…å¿ƒï¼ŒSelectä¸ºä½ æä¾›äº†ç›¸åº”çš„æ–¹æ³•ï¼ˆæˆ–è€…åº”è¯¥è¯´æ˜¯å±æ€§äº†ï¼‰ï¼š 123optionsall_selected_optionsfirst_selected_option ä¸Šé¢ä¸‰ä¸ªå±æ€§ï¼Œåˆ†åˆ«è¿”å›è¿™ä¸ªselectå…ƒç´ æ‰€æœ‰çš„optionsï¼Œæ‰€æœ‰è¢«é€‰ä¸­çš„optionsä»¥åŠç¬¬ä¸€ä¸ªè¢«é€‰ä¸­çš„optionã€‚ 5.2 Radioå’ŒCheckbox12345678910111213&lt;html&gt;&lt;body&gt;Checkbox:&lt;input type=&quot;checkbox&quot; value=&quot;cv1&quot; name=&quot;c1&quot;&gt;&lt;input type=&quot;checkbox&quot; value=&quot;cv2&quot;&gt;&lt;input type=&quot;checkbox&quot; value=&quot;cv3&quot; name=&quot;c1&quot;&gt;&lt;input type=&quot;checkbox&quot; value=&quot;cv4&quot;&gt;&lt;p&gt;Radio:&lt;input type=&quot;radio&quot; value=&quot;rv1&quot; name=&quot;r1&quot;&gt;&lt;input type=&quot;radio&quot; value=&quot;rv2&quot; name=&quot;r1&quot;&gt;&lt;/body&gt;&lt;/html&gt; é€‰æ‹©æ“ä½œå³ç‚¹å‡»äº‹ä»¶ï¼Œæ¸…é™¤é€‰æ‹©å³é”®ç›˜æ“ä½œ 12345678# checkboxdriver.find_element_by_xpath(&#x27;//input[@value=&quot;cv1&quot;]&#x27;).click() # clickdriver.find_element_by_xpath(&#x27;//input[@value=&quot;cv2&quot;]&#x27;).send_keys(Keys.SPACE) # send space# radiodriver.find_element_by_xpath(&#x27;//input[@value=&quot;rv1&quot;]&#x27;).send_keys(Keys.SPACE) # send spacesleep(1)driver.find_element_by_xpath(&#x27;//input[@value=&quot;rv2&quot;]&#x27;).click() # click 6ï¼šå‚è€ƒèµ„æ–™ã€ŠSelenium Python æ•™ç¨‹ã€‹ ã€Šseleniumå¯åŠ¨Chromeé…ç½®å‚æ•°é—®é¢˜ã€‹ ã€ŠPythonç¡’-æ¨¡æ‹Ÿé¼ æ ‡é”®ç›˜æ“ä½œï¼ˆActionChainsï¼‰ã€‹ ã€ŠPythonç¡’-æ“ä½œé€‰æ‹©æ ‡ç­¾çš„ä¸‹æ‹‰é€‰æ‹©æ¡†ã€‹ ã€ŠPython+seleniumä½¿ç”¨cookieç™»å½•æ·˜å®ã€‹","categories":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/categories/Python/"}],"tags":[{"name":"Selenium","slug":"Selenium","permalink":"https://sci.ci/tags/Selenium/"}]},{"title":"åˆ©ç”¨æ ‘è“æ´¾+å†…ç½‘ç©¿é€æ­å»ºç½‘ç«™æœåŠ¡å™¨","slug":"åˆ©ç”¨æ ‘è“æ´¾-å†…ç½‘ç©¿é€æ­å»ºç½‘ç«™æœåŠ¡å™¨","date":"2020-09-10T14:08:39.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/09/10/åˆ©ç”¨æ ‘è“æ´¾-å†…ç½‘ç©¿é€æ­å»ºç½‘ç«™æœåŠ¡å™¨/","link":"","permalink":"https://sci.ci/2020/09/10/%E5%88%A9%E7%94%A8%E6%A0%91%E8%8E%93%E6%B4%BE-%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F%E6%90%AD%E5%BB%BA%E7%BD%91%E7%AB%99%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"","text":"1ï¼šå‰è¨€åœ¨è´­ä¹°äº†æ ‘è“æ´¾ä¹‹åï¼Œæˆ‘ä¸€ç›´åœ¨æ‰¾å¯»å®ƒçš„ç”¨å¤„ï¼Œæœ€è¿‘æƒ³å­¦åŸºäºPythonçš„ç½‘ç«™åç«¯æ¡†æ¶Djangoï¼Œè€Œæ ‘è“æ´¾ä»¥linuxä¸ºæ“ä½œç³»ç»Ÿï¼Œæœ‰å¤©ç”Ÿä½œä¸ºç½‘ç«™æœåŠ¡å™¨çš„ä¼˜ç‚¹ã€‚ä»¥ä¸‹åˆ—ä¸¾éƒ¨åˆ†ã€‚ ç›¸æ¯”äºç›´æ¥è´­ä¹°é«˜é…ç½®VPSï¼Œä½¿ç”¨æ ‘è“æ´¾+å»‰ä»·ä½é…VPSåšå†…ç½‘ç©¿é€ï¼Œæ›´åŠ åˆ’ç®—ã€‚ ç›¸æ¯”äºä½¿ç”¨windowsä½œä¸ºç½‘ç«™æœåŠ¡å™¨è”ç³»ï¼Œæ ‘è“æ´¾å¯ä»¥ä¿æŒ24*7ä¸å®•æœºï¼Œé¿å…æ¯æ¬¡å¼€å¯ç”µè„‘éƒ½è¦é‡æ–°è¿è¡ŒæœåŠ¡å™¨ç¨‹åºçš„éº»çƒ¦ã€‚ å¼€å§‹ä¹‹å‰ï¼Œéœ€è¦è¯´æ˜çš„ä¸€äº›è½¯ç¡¬ä»¶é…ç½®ã€‚ 4B+æ ‘è“æ´¾ï¼Œ4gå†…å­˜+32gå†…å­˜å¡ ä¸€å°ä½é…ç½®å¸¦ipv4åœ°å€çš„VPSã€‚æœ¬äººä½¿ç”¨Ubuntuç³»ç»Ÿ ä¸€ä¸ªåŸŸåï¼Œéœ€è¦å°†Aè®°å½•è§£æåˆ°VPSçš„ipv4åœ°å€ä¸Šã€‚éå¿…é¡»ï¼Œå¯ç›´æ¥ç”¨vpsçš„ipåœ°å€è®¿é—®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ 2ï¼šæ ‘è“æ´¾ä¸Šæ­å»ºDjangoæœåŠ¡å™¨å®‰è£…Djangoæ•™ç¨‹ï¼šã€ŠDjangoå®‰è£…ã€‹ åœ¨æ ‘è“æ´¾ä¸Šå®‰è£…Djangoã€‚ å¹¶åˆ›å»ºç¬¬ä¸€ä¸ªDjangoé¡¹ç›®ã€‚ åœ¨ä½¿ç”¨python3 manage.py runserver 0.0.0.0:8000æ‰“å¼€æœåŠ¡åï¼Œ åœ¨shellç»ˆç«¯ä¸Šä½¿ç”¨ 1curl 127.0.0.1:8000 æ˜¯å¯ä»¥è®¿é—®æ–°å»ºçš„ç½‘ç«™çš„ã€‚ ä½†æ˜¯ï¼Œä½¿ç”¨æ ‘è“æ´¾å†…ç½‘ip:8000åœ¨ç›¸åŒå±€åŸŸç½‘ä¸‹çš„ç¬”è®°æœ¬ï¼Œæ— æ³•è®¿é—®ç½‘ç«™ï¼Œå¿…é¡»ä¿®æ”¹é¡¹ç›®é…ç½®æ–‡ä»¶ã€‚åæœŸå¯ä¿®æ”¹å›æ¥ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨æ ‘è“æ´¾ä¸Šä¹Ÿå®‰è£…nginxä»¥ä½œä¸ºç”Ÿäº§ç¯å¢ƒï¼Œç°åœ¨åªæ˜¯æµ‹è¯•ã€‚ä¿®æ”¹é¡¹ç›®ä¸‹çš„setting.pyæ–‡ä»¶ 12DEBUG = FalseALLOWED_HOSTS = [&quot;*&quot;] æ­¤æ—¶ï¼Œåœ¨ç¬”è®°æœ¬ä¸Šè®¿é—®æ ‘è“æ´¾ä¸Šé¢çš„ç½‘ç«™ï¼Œåº”è¯¥å·²ç»èƒ½å¤Ÿè®¿é—®äº†ã€‚ 3ï¼šå†…ç½‘ç©¿é€ä¸ºäº†è®©å¤–ç½‘çš„äººï¼Œèƒ½å¤Ÿä½¿ç”¨ipåœ°å€æˆ–è€…åŸŸåï¼Œè®¿é—®åˆ°æ ‘è“æ´¾ä¸Šçš„ç½‘ç«™ï¼Œéœ€è¦åšå†…ç½‘ç©¿é€ï¼Œé¦–å…ˆï¼Œéœ€è¦è®©VPSèƒ½å¤Ÿè®¿é—®åˆ°æ ‘è“æ´¾ã€‚ ä½¿ç”¨èŠ±ç”Ÿå£³ä¹‹ç±»çš„è½¯ä»¶ä¹Ÿèƒ½å®ç°å†…ç½‘ç©¿é€ï¼Œä¸”ä¸ç”¨VPSï¼Œä½†æ˜¯è¿™ç±»è½¯ä»¶æ”¶è´¹æ¯”è¾ƒé«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨VPSè‡ªå·±æä¸€ä¸ªå†…ç½‘ç©¿é€ã€‚ ä½¿ç”¨p2pç»„ç½‘çš„å†…ç½‘ç©¿é€è½¯ä»¶ï¼Œæ¯”å¦‚n2nã€zerotierã€frpã€‚åœ¨githubä¸Šéƒ½èƒ½æœå¾—åˆ°ã€‚frpæ˜¯ä¸€ä¸ªç«¯å£è½¬å‘çš„è½¯ä»¶ï¼Œä¸éœ€è¦å€ŸåŠ©åˆ«äººæä¾›çš„æœåŠ¡å™¨æ¥åšå¯¼èˆªï¼Œå¦‚æœåªæ˜¯åšç½‘ç«™æ˜¯éå¸¸æ¨èçš„ï¼Œå› ä¸ºè¿™ä¸è®¾åŠåé¢è®²çš„nginxåšåå‘ä»£ç†çš„æ­¥éª¤ï¼Œä¸ªäººæ˜¯å¾ˆæ¨èçš„ã€‚ä½†ï¼Œå¦‚æœä½ æœ‰å¤šä¸ªVPSæˆ–è€…å¤šä¸ªç”µè„‘ï¼Œæƒ³ç»„æˆå±€åŸŸç½‘ï¼Œå»ºè®®ä½¿ç”¨zerotierã€‚æˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯zerotierï¼Œå› ä¸ºå®ƒé…ç½®æ¯”è¾ƒç®€å•ã€‚å¹¶åœ¨æ­¤åŸºç¡€ä¸Šåšäº†ç½‘ç«™çš„åå‘ä»£ç†ï¼Œä»¥å®ç°å¤–ç½‘è®¿é—®å†…ç½‘ï¼Œå’Œfrpç›´æ¥åšç«¯å£è½¬å‘çš„åŸç†æ˜¯ä¸åŒçš„ã€‚ æˆ‘ä»¬éœ€è¦åˆ†åˆ«åœ¨æ ‘è“æ´¾å’Œvpsä¸Šå®‰è£…zerotierã€‚ 1curl -s https://install.zerotier.com | sudo bash ç„¶ååœ¨zerotierå®˜ç½‘åˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªç½‘ç»œã€‚å¯å‚è€ƒæ•™ç¨‹ï¼š å†…ç½‘ç©¿é€å·¥å…·â€”â€”ZeroTier Oneçš„ä½¿ç”¨ å»ºå¥½ç½‘ç»œåï¼Œè·å¾—åå…­ä½ç½‘ç»œç  ç„¶åï¼Œåœ¨æ ‘è“æ´¾å’Œvpsè¾“å…¥å‘½ä»¤ 1zerotier-cli join ç½‘ç»œç  å³å¯åŠ å…¥æ­¤ç½‘ç»œ ç„¶åå›åˆ°zerotierå®˜ç½‘ï¼Œç®¡ç†è¿™ä¸¤ä¸ªç½‘ç»œï¼Œè®©ä»–ä»¬ä¹‹é—´èƒ½å¤Ÿäº’ç›¸pingé€šã€‚æ­¤é—´æ­¥éª¤æ¯”è¾ƒå¤šï¼Œéœ€è¦è€å¿ƒè‡ªå­¦ã€‚ å†…ç½‘ç©¿é€å®ç°åï¼Œåœ¨vpsä¸Šä¸ä»…åº”è¯¥èƒ½å¤Ÿpingé€šæ ‘è“æ´¾è™šæ‹Ÿå±€åŸŸç½‘åˆ†é…çš„ipï¼Œè€Œä¸”ä½¿ç”¨è™šæ‹Ÿå±€åŸŸç½‘ip:ç«¯å£ï¼Œåº”è¯¥èƒ½å¤Ÿè®¿é—®åˆ°æ ‘è“æ´¾ä¸Šçš„ç½‘ç«™ã€‚ åœ¨vpsä½¿ç”¨ 1curl http://ip:port è®¿é—®ã€‚è·å–htmlä»£ç ï¼Œåˆ™å†…ç½‘ç©¿é€å¯ä»¥è®¿é—®ç½‘ç«™äº†ã€‚ 4ï¼šNginxåå‘ä»£ç†ä¸ºäº†è®©æ‰€æœ‰å¤–éƒ¨çš„äººï¼Œéƒ½èƒ½å¤Ÿé€šè¿‡åŸŸåæˆ–è€…vpså…¬ç½‘ipè®¿é—®åˆ°æ ‘è“æ´¾çš„ç½‘ç«™ï¼Œéœ€è¦åœ¨vpsä¸Šå®‰è£…nginxï¼Œä½œåå‘ä»£ç†ã€‚ åŸç†å¤§æ¦‚æ˜¯ï¼Œå¤–éƒ¨ç”¨æˆ·ï¼Œè®¿é—®vpsçš„ipï¼Œæµè§ˆå™¨é»˜è®¤ä¸è¾“å…¥ç«¯å£åˆ™è®¿é—®80ç«¯å£ï¼Œhttpå¯¹åº”80ï¼Œhttpså¯¹åº”443ã€‚æ¯”å¦‚ç”¨æˆ·è¾“å…¥http://x.x.x.xæˆ–è€…http://example.comåˆ™é»˜è®¤è®¿é—®vpsçš„80ç«¯å£ã€‚ æˆ‘ä»¬éœ€è¦ä¸ºvpså¼€æ”¾80ç«¯å£ï¼Œå¹¶å°†80ç«¯å£çš„è®¿é—®è¯·æ±‚è½¬åˆ°æ ‘è“æ´¾çš„ç½‘ç«™ç«¯å£ã€‚ å®‰è£…nginx 1apt-get install nginx é…ç½®nginxï¼Œæ–°å»ºé…ç½®æ–‡ä»¶ï¼Œå¹¶é…ç½®nginx 12touch /etc/nginx/conf.d/respberry.conf #æ–°å»ºé…ç½®æ–‡ä»¶vim /etc/nginx/conf.d/respberry.conf #ç¼–è¾‘é…ç½®æ–‡ä»¶ åœ¨æ–‡ä»¶ä¸­è¾“å…¥é…ç½® 1234567server&#123; listen 80 server_name example.com #ä½ çš„åŸŸåï¼Œæˆ–è€…vpsçš„å…¬ç½‘ip location / &#123; proxy_pass http://æ ‘è“æ´¾è™šæ‹Ÿå±€åŸŸç½‘ip:ç½‘ç«™ç«¯å£ &#125;&#125; ä¿å­˜é€€å‡ºã€‚ 1service nginx restart #é‡å¯nginx è¿™æ ·é€šè¿‡åŸŸåè®¿é—®vpså°±èƒ½å°†è¯·æ±‚è½¬ç»™æ ‘è“æ´¾äº†ã€‚å¤–ç½‘å°±èƒ½å¤Ÿè®¿é—®åˆ°æ ‘è“æ´¾äº†ã€‚ 5ï¼šå‚è€ƒèµ„æ–™ã€Šå†…ç½‘ç©¿é€å·¥å…·â€”â€”ZeroTier Oneçš„ä½¿ç”¨ã€‹ ã€ŠNginxé…ç½®æ–‡ä»¶nginx.confä¸­æ–‡è¯¦è§£ã€‹","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/tags/Linux/"},{"name":"Python","slug":"Python","permalink":"https://sci.ci/tags/Python/"},{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://sci.ci/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"}]},{"title":"è®°å½•ä¸€æ¬¡åœ¨Linuxä¸Šå½»åº•å¸è½½nginx","slug":"è®°å½•ä¸€æ¬¡åœ¨Linuxä¸Šå½»åº•å¸è½½nginx","date":"2020-09-10T13:34:01.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/09/10/è®°å½•ä¸€æ¬¡åœ¨Linuxä¸Šå½»åº•å¸è½½nginx/","link":"","permalink":"https://sci.ci/2020/09/10/%E8%AE%B0%E5%BD%95%E4%B8%80%E6%AC%A1%E5%9C%A8Linux%E4%B8%8A%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BDnginx/","excerpt":"","text":"åˆšæƒ³é€šè¿‡nginxåšåå‘ä»£ç†ï¼Œä»¥å®ç°å†…ç½‘ç©¿é€ï¼Œä½†æ˜¯80ç«¯å£å§‹ç»ˆæ— æ³•pingé€šï¼ŒæŸ¥çœ‹linuxç«¯å£æ˜¯å¼€ç€çš„ã€‚æ€æƒ³ç®€å•çš„æˆ‘ï¼Œå°è¯•é‡æ–°å®‰è£…nginxï¼Œç„¶è€Œæ— è®ºå¦‚ä½•éƒ½æ— æ³•å¸è½½å¹²å‡€ã€‚é¦–å…ˆï¼Œnginxå¯èƒ½ä¸æ˜¯é€šè¿‡apt-getå®‰è£…çš„ï¼Œä½¿ç”¨apt removeæŒ‡ä»¤æ²¡æœ‰å¸è½½æ‰ï¼Œäºæ˜¯å°è¯•find / -name nginx -exec rm -rf &#123;&#125; \\;æ¥åˆ é™¤æ‰€æœ‰ä»¥nginxå‘½åçš„ç›®å½•ï¼Œç„¶è€Œapt-get install nginxå®‰è£…åï¼Œä»»ç„¶æ²¡æœ‰æŠŠåˆ é™¤çš„ç›®å½•é‡æ–°å®‰è£…ã€‚ æŸ¥é˜…èµ„æ–™åï¼Œé‡æ–°è¿›è¡Œäº†åˆ é™¤å’Œå®‰è£… dpkgæŒ‡ä»¤ 1dpkg -l #æŸ¥çœ‹å®‰è£…çš„è½¯ä»¶åŒ… å°½ç®¡å·²ç»é€šè¿‡åˆ é™¤ç›®å½•ç§»é™¤äº†nginxï¼Œåœ¨è½¯ä»¶åŒ…åˆ—è¡¨é‡Œä»ç„¶å­˜åœ¨ä¸‰ä¸ªåŒ…å«nginxçš„è½¯ä»¶ï¼Œnginxã€nginx-coreã€nginx-common ä½¿ç”¨æŒ‡ä»¤ 1sudo dpkg -r è½¯ä»¶å #åˆ†åˆ«åˆ é™¤ä¸‰ä¸ªè½¯ä»¶ å…¶ä¸­nginx-commonæ— æ³•ä½¿ç”¨ä¸Šè¿°å‘½ä»¤åˆ é™¤ï¼Œ 1sudo apt-get --purge remove nginx-common è‡³æ­¤nginxä»¥å½»åº•ç§»é™¤ã€‚ ä½¿ç”¨ 1apt-get install nginx é‡æ–°å®‰è£…nginxã€‚ å®‰è£…ç»“æŸï¼Œè®¿é—®ipå¯å‡ºç°welcome to nginxç½‘é¡µã€‚ å¦‚æœæ²¡æœ‰å‡ºç°ï¼Œ 1curl http://ip å¦‚æœä¸»æœºä¸Šå‡ºç°htmlæ–‡æœ¬ï¼Œè€Œæµè§ˆå™¨å¤–éƒ¨æ— æ³•è®¿é—®ï¼Œåˆ™æ˜¯é˜²ç«å¢™é—®é¢˜ã€‚ æˆ‘åœ¨ubuntuä¸Šå®‰è£…äº†firewallè½¯ä»¶ï¼Œå› æ­¤å¯¼è‡´å¤–éƒ¨æ— æ³•è®¿é—®80ç«¯å£ï¼Œä½¿ç”¨æŒ‡ä»¤ 1systemctl stop firewall.service å…³é—­firewallã€‚ä¹Ÿå¯èƒ½æ˜¯iptableså¼€å¯äº†ï¼Œç›¸åŒçš„åŠæ³•å¯ä»¥å…³é—­iptablesé˜²ç«å¢™ã€‚ å‚è€ƒæ–‡çŒ®ï¼š ã€ŠLinuxä¹‹Ubuntuä¸‹å¦‚ä½•æŸ¥çœ‹å·²å®‰è£…çš„è½¯ä»¶/åº“æ–‡ä»¶ã€‹","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://sci.ci/tags/Nginx/"}]},{"title":"è®¡åˆ’ä¸ºHexoåšå®¢æ·»åŠ ç›¸å†Œå’ŒVlogé¡µé¢","slug":"è®¡åˆ’ä¸ºHexoåšå®¢æ·»åŠ ç›¸å†Œå’ŒVlogé¡µé¢","date":"2020-09-08T07:07:33.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/09/08/è®¡åˆ’ä¸ºHexoåšå®¢æ·»åŠ ç›¸å†Œå’ŒVlogé¡µé¢/","link":"","permalink":"https://sci.ci/2020/09/08/%E8%AE%A1%E5%88%92%E4%B8%BAHexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E7%9B%B8%E5%86%8C%E5%92%8CVlog%E9%A1%B5%E9%9D%A2/","excerpt":"","text":"è®¡åˆ’å†…å®¹ï¼š æ–°å»ºç›¸å†Œé¡µé¢ï¼Œä¸‹å±å›¾ç‰‡å’Œvlogåˆ†æ”¯ ä»¥Onedriveä½œä¸ºå‚¨å­˜åº“ï¼Œå‚¨å­˜ç›¸å†ŒåŠè§†é¢‘ é¡µé¢è‡ªåŠ¨è·å–ç›¸å†Œå’Œè§†é¢‘ï¼Œå¹¶å±•ç¤º é¦–é¡µæ ‡é¢˜æ”¹ä¸ºè®¡æ—¶é¡¹ç›® é¡¹ç›®jsæºç ï¼šhttps://www.bingyublog.com/2019/02/20/hexo%E5%A2%9E%E5%8A%A0%E7%BD%91%E7%AB%99%E8%BF%90%E8%A1%8C%E6%97%B6%E9%97%B4%E7%BB%9F%E8%AE%A1/","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://sci.ci/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"Hexo","slug":"Hexo","permalink":"https://sci.ci/tags/Hexo/"},{"name":"Vlantis","slug":"Vlantis","permalink":"https://sci.ci/tags/Vlantis/"}]},{"title":"åˆ©ç”¨æµ·è´éŸ³ä¹åšä¸€ä¸ªè‡ªç”¨éŸ³ä¹æ’­æ”¾å™¨","slug":"åˆ©ç”¨æµ·è´éŸ³ä¹åšä¸€ä¸ªè‡ªç”¨éŸ³ä¹æ’­æ”¾å™¨","date":"2020-09-06T10:45:48.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/09/06/åˆ©ç”¨æµ·è´éŸ³ä¹åšä¸€ä¸ªè‡ªç”¨éŸ³ä¹æ’­æ”¾å™¨/","link":"","permalink":"https://sci.ci/2020/09/06/%E5%88%A9%E7%94%A8%E6%B5%B7%E8%B4%9D%E9%9F%B3%E4%B9%90%E5%81%9A%E4%B8%80%E4%B8%AA%E8%87%AA%E7%94%A8%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/","excerpt":"","text":"1ï¼šé¡¹ç›®ç®€ä»‹å¯¹äºæˆ‘è¿™ä¸ªç»å¸¸å¬æ­Œçš„äººæ¥è¯´ï¼Œå…è´¹çš„å¬æ­Œè½¯ä»¶æ€»æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚æˆ‘åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†ä¸€æ¬¾å«åšæµ·è´éŸ³ä¹çš„æ’­æ”¾å™¨ï¼Œè¿™ä¸ªæ’­æ”¾å™¨ä¸æä¾›éŸ³ä¹èµ„æºï¼Œä»…ä»…æ˜¯ä¸€ä¸ªæ’­æ”¾å™¨ï¼Œå¯ä»¥æ’­æ”¾æœ¬åœ°éŸ³ä¹ã€Onedriveäº‘éŸ³ä¹ï¼Œä»¥åŠDLNAå±€åŸŸç½‘é‡Œçš„éŸ³ä¹ã€‚å¯¹äºå¾ˆå¤šäººæ¥è¯´ï¼Œå°†å¥½å¬å–œæ¬¢çš„éŸ³ä¹ä¸‹è½½ä¸‹æ¥ä¿å­˜åˆ°æ‰‹æœºï¼Œæ€»å½’æ˜¯ä¸ªéº»çƒ¦çš„æ“ä½œï¼Œå¦‚æœæƒ³åœ¨çº¿å¬æ­Œï¼Œåˆéœ€è¦è´­ä¹°éŸ³ä¹è½¯ä»¶çš„VIPã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å…è´¹è€Œåˆåœ¨ä¸ä¸‹è½½éŸ³ä¹åœ¨çº¿å¬æ­Œå‘¢ï¼Ÿ æˆ‘å°†åˆ©ç”¨Onedriveä½œä¸ºéŸ³ä¹å‚¨å­˜äº‘ç›˜ï¼Œå¹¶åœ¨æµ·è´éŸ³ä¹æ’­æ”¾å™¨ä¸Šï¼Œå®ç°åœ¨çº¿å¬æ­Œã€‚å°†å–œæ¬¢çš„éŸ³ä¹ä¸‹è½½åˆ°Onedriveæ˜¯ä¸ªéå¸¸éº»çƒ¦çš„æ­¥éª¤ï¼Œä¸ºæ­¤æˆ‘å°†åœ¨ä¹‹åç¼–å†™ä¸€ä¸ªé¡¹ç›®ï¼Œæ¥å®ç°è‡ªåŠ¨ä¸‹è½½çƒ­æ¦œéŸ³ä¹è‡³äº‘ç›˜æŒ‡å®šç›®å½•ï¼Œå¹¶ç¼–å†™ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œç”¨ä½œæœç´¢æŒ‡å®šéŸ³ä¹ï¼Œå¹¶ä¿å­˜åˆ°äº‘ç›˜çš„æ¥å£ã€‚æ­¤é¡¹ç›®ï¼Œæˆ‘å°†ä½¿ç”¨pythonè¿›è¡Œç¼–å†™ï¼Œå¹¶åœ¨linuxç³»ç»Ÿä¸Šè¿è¡Œã€‚ 2ï¼šå®ç°åŸç†2.1 éŸ³ä¹æ¥æºå…è´¹éŸ³ä¹æ¥å£æ€»æ˜¯å¾ˆéš¾è·å–ï¼Œç”šè‡³å¾ˆä¸ç¨³å®šï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦åˆæ³•çš„è·å–éŸ³ä¹èµ„æºã€‚ä¸ºæ­¤ï¼Œæˆ‘è€ƒè™‘ä»YouTubeä¸Šè·å–éŸ³ä¹èµ„æºï¼Œå› ä¸ºéŸ³ä¹MVå’ŒMP3æ ¼å¼çš„éš¶å±ä¸åŒç‰ˆæƒï¼Œè€ŒMVå¾€å¾€æ˜¯ä¸æ”¶è´¹çš„ï¼Œæ‰€ä»¥ç›´æ¥ä»youtubeä¸Šä¸‹è½½mvçš„mp4æ ¼å¼æ–‡ä»¶ï¼Œè¿™é‡Œåˆ©ç”¨åŸºäºpythonç¼–å†™çš„you-getç¨‹åºå³å¯ï¼Œç„¶åï¼Œåˆ©ç”¨ffmpegè½¯ä»¶å°†mp4æ ¼å¼æ–‡ä»¶è½¬ä¸ºmp3æ ¼å¼ã€‚ 2.2 éŸ³ä¹è·å–è·å–éŸ³ä¹å½“ç„¶ä¸èƒ½ä¸€ä¸ªä¸€ä¸ªçš„è·å–ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç½‘ä¸Šæ‰¾åˆ°ç½‘æ˜“æˆ–è€…qqéŸ³ä¹çš„æ¦œå•apiï¼Œè·å–æ¦œå•åˆ—è¡¨ï¼Œæ ¹æ®åˆ—è¡¨å†…å®¹ä½¿ç”¨ç¨‹åºæ¥æ£€ç´¢éŸ³ä¹ã€‚ å¦å¤–åœ¨å•ç‹¬åšä¸€ä¸ªwebç«¯ï¼Œç”¨äºæœç´¢éŸ³ä¹ã€‚åå°æ ¹æ®æœç´¢æŒ‡ä»¤ä¸‹è½½éŸ³ä¹ã€‚ æ­Œè¯å¯ä»¥é€šè¿‡æ­Œè¯è¿·æ¥å£https://hacpai.com/article/1364440883834 è·å–ã€‚ 2.3 éŸ³ä¹ä¿å­˜åå°è½¬æ¢åçš„éŸ³ä¹ï¼Œå¯ä»¥åˆ©ç”¨onedriveæä¾›çš„ä¸Šä¼ æ¥å£ï¼ŒæŠŠéŸ³ä¹ä¸Šä¼ åˆ°onedriveç›®å½•ï¼Œæ¯”å¦‚æ¦œå•ç›®å½•å’Œè‡ªè¡Œæœç´¢çš„likeç›®å½•ã€‚ å®šæœŸä½¿ç”¨onedriveæ¥å£æ¸…é™¤è¿‡æ—¶çš„éŸ³ä¹ä¹Ÿå¾ˆé‡è¦ã€‚ 2.4 éŸ³ä¹æ”¶å¬æµ·è´éŸ³ä¹appæä¾›äº†ä»onedriveæºæ”¶å¬éŸ³ä¹çš„åŠŸèƒ½ï¼Œå› æ­¤ï¼Œç›´æ¥åœ¨æµ·è´éŸ³ä¹ä¸Šæˆæƒonedriveå°±èƒ½å¤Ÿåœ¨çº¿æ”¶å¬äº†ï¼Œè€Œä¸€ä¸ªonedriveç›®å½•å°±æ˜¯ä¸€ä¸ªæ’­æ”¾åˆ—è¡¨ã€‚","categories":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/categories/Python/"}],"tags":[{"name":"éŸ³ä¹æ’­æ”¾å™¨","slug":"éŸ³ä¹æ’­æ”¾å™¨","permalink":"https://sci.ci/tags/%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/"}]},{"title":"æ ‘è“æ´¾4Bæ— ç½‘çº¿æ— æ˜¾ç¤ºå™¨å‡ºå‘","slug":"æ ‘è“æ´¾4Bæ— ç½‘çº¿æ— æ˜¾ç¤ºå™¨å‡ºå‘","date":"2020-08-28T14:22:40.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/08/28/æ ‘è“æ´¾4Bæ— ç½‘çº¿æ— æ˜¾ç¤ºå™¨å‡ºå‘/","link":"","permalink":"https://sci.ci/2020/08/28/%E6%A0%91%E8%8E%93%E6%B4%BE4B%E6%97%A0%E7%BD%91%E7%BA%BF%E6%97%A0%E6%98%BE%E7%A4%BA%E5%99%A8%E5%87%BA%E5%8F%91/","excerpt":"","text":"ä»äºšé©¬é€Šæ–°å…¥æ‰‹äº†æœ€æ–°æ¬¾æ ‘è“æ´¾4Bä»¥åŠç›¸å…³é…ä»¶ï¼ŒèŠ±äº†ä¸€å…±109æ¬§ã€‚è¿™æ˜¯ç¬¬ä¸€æ¬¡æŠŠç©æ ‘è“æ´¾ã€‚å› ä¸ºé•¿æœŸæµ¸æ·«äºLinuxç³»ç»Ÿï¼Œè€Œå—åˆ¶äºsurfaceçš„å°å®¹é‡ç¡¬ç›˜ï¼Œå®åœ¨ä¸å¿å¿ƒåœ¨ç”µè„‘ä¸Šå®‰è£…ä¸€ä¸ªè™šæ‹Ÿæœºäº†ã€‚ä¹‹å‰æŠŠç©Linuxä¹Ÿæ˜¯è´­ä¹°çš„äº‘æœåŠ¡å™¨ï¼Œä½†æ˜¯äº‘æœåŠ¡å™¨æ˜¯ä¸ªæ¶ˆè€—å“å•Šï¼Œè€Œä¸”æ¯•ç«Ÿæ˜¯å¤–ç½‘ï¼Œè¦æ“åšå†…ç½‘è®¾å¤‡ï¼Œæ¯”å¦‚æ‰“å°æœºï¼Œå°±å¾—å†…ç½‘ç©¿é€ï¼Œè¿˜æ˜¯å¾—ä¾èµ–ä¸€ä¸ªåœ¨å†…ç½‘èƒ½å¤Ÿé•¿æœŸåœ¨çº¿å¾—è®¾å¤‡ï¼Œé‚£ä¹ˆæ ‘è“æ´¾çš„ä½œç”¨å°±ä¸è¨€è€Œå–»äº†ã€‚ æ ‘è“æ´¾è‡ªå¸¦GPIOè¿™ä¸€ç‚¹ï¼Œå¯ç©æ€§ä¹Ÿéå¸¸é«˜ã€‚ç°åœ¨å¼€å§‹å®‰è£…æ ‘è“æ´¾ç³»ç»Ÿã€‚ ä¸€ï¼šå‡†å¤‡å·¥ä½œ1.1 ç¡¬ä»¶å‡†å¤‡ æ ‘è“æ´¾4BåŠå…¶ç”µæºè®¾å¤‡ 8GåŠä»¥ä¸Šå†…å­˜å¡ ç¬”è®°æœ¬ç”µè„‘ä¸€å° WIFIç½‘ç»œï¼Œä½¿ç”¨æ‰‹æœºçƒ­ç‚¹æˆ–è€…WIFI 1.2 è½¯ä»¶å‡†å¤‡ SSHè¿æ¥å·¥å…·ï¼Œæ¯”å¦‚Xshellã€Puttyã€‚Puttyä¸‹è½½ï¼Œç‚¹å‡»ä¸‹è½½ Windows ä¸‹å®‰è£…é•œåƒçš„å·¥å…· win32diskimagerï¼Œæœ¬åœ°ä¸‹è½½ å®˜ç½‘ä¸‹è½½ æ ‘è“æ´¾ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼Œä¸‹è½½åœ°å€ï¼šhttps://shumeipai.nxez.com/download å¦‚æœéœ€è¦å›¾å½¢æ¡Œé¢ï¼Œå°±ä¸‹è½½VNC Viewerï¼Œç‚¹å‡»ä¸‹è½½ äºŒï¼šå®‰è£…ç³»ç»Ÿä¸‹è½½æ ‘è“æ´¾é•œåƒåï¼Œè§£å‹ä¸º.iosåç¼€çš„æ–‡ä»¶ã€‚ç„¶ååˆ©ç”¨win32diskimagerçƒ§å½•åˆ°SDå¡ä¸­ã€‚ç‚¹å‡»æŸ¥çœ‹è¯¦ç»†æ•™ç¨‹ æ‰“å¼€SDå¡ï¼Œåœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶åä¸ºsshæ— åç¼€åç©ºæ–‡ä»¶ã€‚ åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶åä¸ºwpa_supplicant.confçš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸º 12345678country=GBctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdevupdate_config=1network=&#123; ssid=&quot;spzmi8&quot; psk=&quot;yatoummd233&quot;&#125; ssidï¼šwifiåç§° pskï¼šwifiå¯†ç  å°†SDå¡æ’å…¥æ ‘è“æ´¾ã€‚ ä¸‰ï¼šç™»é™†æ ‘è“æ´¾å°†æ ‘è“æ´¾æ¥é€šç”µæºï¼Œæ‰“å¼€sshè½¯ä»¶å…¥puttyæˆ–è€…xshellã€‚ä¹‹åå³å¯ç™»é™†æ ‘è“æ´¾ã€‚ ä½¿ç”¨ä»¥ä¸‹ä¿¡æ¯ç™»é™†æ ‘è“æ´¾ ä¸»æœºå ç”¨æˆ·å å¯†ç  ç«¯å£ raspberrypi.local pi raspberry 22 è‡³æ­¤æ ‘è“æ´¾å·²è¿æ¥æˆåŠŸã€‚ å››ï¼šå‚è€ƒèµ„æ–™ã€Šæ— æ˜¾ç¤ºå™¨ã€è·¯ç”±å™¨ã€ç½‘çº¿å®‰è£…æ ‘è“æ´¾ç³»ç»Ÿã€‹ ã€Šæ ‘è“æ´¾3B+æ— æ˜¾ç¤ºå™¨é…ç½®è¯¦ç»†æ•™ç¨‹ã€‹ ã€Šæ ‘è“æ´¾3-ç³»ç»Ÿå®‰è£…-Windowsä¸‹åˆ©ç”¨Win32DiskImagerè¿›è¡Œç³»ç»Ÿå®‰è£…ã€‹","categories":[{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://sci.ci/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/tags/Linux/"},{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://sci.ci/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"}]},{"title":"åœ¨è®¢å•ä¸­æ‰“å°æ”¶è´§åœ°å€äºŒç»´ç ","slug":"åœ¨è®¢å•ä¸­æ‰“å°æ”¶è´§åœ°å€äºŒç»´ç ","date":"2020-08-28T09:14:28.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/08/28/åœ¨è®¢å•ä¸­æ‰“å°æ”¶è´§åœ°å€äºŒç»´ç /","link":"","permalink":"https://sci.ci/2020/08/28/%E5%9C%A8%E8%AE%A2%E5%8D%95%E4%B8%AD%E6%89%93%E5%8D%B0%E6%94%B6%E8%B4%A7%E5%9C%B0%E5%9D%80%E4%BA%8C%E7%BB%B4%E7%A0%81/","excerpt":"","text":"ä¸€ï¼šç®€ä»‹ä¸ƒå¤•èŠ‚åœ¨é…é€è¿‡ç¨‹ä¸­ï¼Œå‘ç°é…é€å‘˜ç”±äºæ–‡åŒ–æœ‰é™ï¼Œåœ¨ä½¿ç”¨å¯¼èˆªè½¯ä»¶ä¸Šæœ‰æå¤§çš„éšœç¢ã€‚è¿™ä¸ä»…æ‹–æ…¢äº†æ•´ä¸ªé…é€è¿‡ç¨‹ï¼Œä¹Ÿä¸åˆ©äºä¸šåŠ¡çš„å¢é•¿ã€‚äºæ˜¯æˆ‘æƒ³åˆ°äº†ï¼Œåœ¨è®¢å•ä¸Šæ‰“å°ä¸€ä¸ªäºŒç»´ç ï¼Œæ‰«æäºŒç»´ç ï¼Œåˆ™å°±å¯ä»¥å¯¼èˆªåˆ°æ”¶è´§åœ°ç‚¹ã€‚ åœ¨ä¸€æ®µæ—¶é—´çš„å°è¯•åï¼Œæˆ‘æ•²å®šäº†æ­¤æ–¹æ¡ˆçš„å¯è¡Œæ€§ã€‚ ç”±äºç¾å›¾å’Œé¥¿äº†ä¹ˆè®¢å•æ‰“å°ï¼Œå·²åœ¨é£é¹…æ‰“å°æœºä¸Šå›ºå®šäº†æ¨¡æ¿ï¼Œæˆ‘æ— æ³•ä¿®æ”¹ä»–ä»¬çš„æ‰“å°æ¨¡æ¿ã€‚æ‰€ä»¥ï¼Œåªèƒ½ä¸ºå°ç¨‹åºçš„è®¢å•ï¼Œæ‰“å°åœ°å€äºŒç»´ç ã€‚ äºŒï¼šæ–¹æ¡ˆç”±äºå„ä¸ªåœ°å›¾å…¬å¸éƒ½æ²¡æœ‰æä¾›ç›´æ¥çš„æ¥å£ï¼Œè®©åœ°å›¾è½¬ä¸ºäºŒç»´ç ï¼Œæ‰€ä»¥é€€è€Œæ±‚å…¶æ¬¡ï¼Œéœ€è¦å…ˆå°†åœ°å€è½¬ä¸ºurlï¼Œè¿›å…¥è¿™ä¸ªurlå¯ä»¥è¿›å…¥åœ°å›¾ç•Œé¢ï¼Œç„¶åå°†urlè½¬ä¸ºäºŒç»´ç ã€‚ 2.1 åœ°å›¾è½¬url ç™¾åº¦åœ°å›¾æ–¹æ¡ˆ åœ¨æŸ¥çœ‹äº†å‡ ä¸ªåœ°å›¾æŠ€æœ¯æ–‡æ¡£åï¼Œæˆ‘æ‰¾åˆ°äº†ç™¾åº¦åœ°å›¾çš„æ¥å£ã€‚ åœ°å€ï¼šhttp://lbsyun.baidu.com/index.php?title=uri/api/web æ­¤æ¥å£æä¾›äº†å…è´¹çš„è°ƒèµ·åœ°å›¾çš„urlæ–¹æ¡ˆã€‚ç”±äºæˆ‘ä»¬åªèƒ½æ‹¿åˆ°æ”¶è´§åœ°å€ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ¥å£ æœåŠ¡åœ°å€ 1http:&#x2F;&#x2F;api.map.baidu.com&#x2F;geocoder &#x2F;&#x2F;PC&amp;WebappæœåŠ¡åœ°å€ ç¤ºä¾‹ 1http:&#x2F;&#x2F;api.map.baidu.com&#x2F;geocoder?address&#x3D;åŒ—äº¬å¸‚æµ·æ·€åŒºä¸Šåœ°ä¿¡æ¯è·¯9å·å¥ç§‘ç§‘æŠ€å¤§å¦&amp;output&#x3D;html&amp;src&#x3D;webapp.baidu.openAPIdemo æ‰“å¼€åçš„é¡µé¢ 2 é«˜å¾·åœ°å›¾æ–¹æ¡ˆ é«˜å¾·åœ°å›¾æä¾›Webè°ƒèµ·åœ°å›¾çš„æ¥å£æ ¼å¼å¦‚ä¸‹ï¼š 1https:&#x2F;&#x2F;uri.amap.com&#x2F;marker?position&#x3D;116.473195,39.993253 urlå‚æ•°ï¼š å‚æ•°åç§° å€¼(ç‚¹å‡»å¯ç¼–è¾‘) å‚æ•°è¯´æ˜ æ˜¯å¦å¿…é€‰ å¤‡æ³¨ position 116.473195,39.993253 ä½ç½®ç‚¹ç»çº¬åº¦åæ ‡ï¼Œæ ¼å¼ä¸º: position=lon,lat æ˜¯ lonè¡¨ç¤ºç»åº¦ï¼Œlatè¡¨ç¤ºçº¬åº¦ name é¦–å¼€å¹¿åœº ç”¨æˆ·è‡ªå®šä¹‰æ˜¾ç¤ºåç§° å¦ src mypage ä½¿ç”¨æ–¹æ¥æºä¿¡æ¯ å¦ ä¸ºä¿è¯æœåŠ¡è´¨é‡å»ºè®®å¡«å†™ coordinate gaode åæ ‡ç³»å‚æ•°coordinate=gaode,è¡¨ç¤ºé«˜å¾·åæ ‡ï¼ˆgcj02åæ ‡ï¼‰ï¼Œcoordinate=wgs84,è¡¨ç¤ºwgs84åæ ‡ï¼ˆGPSåŸå§‹åæ ‡ï¼‰ å¦ é»˜è®¤ä¸ºé«˜å¾·åæ ‡ç³»ï¼ˆgcj02åæ ‡ç³»ï¼‰ callnative 0 æ˜¯å¦å°è¯•è°ƒèµ·é«˜å¾·åœ°å›¾APPå¹¶åœ¨APPä¸­æŸ¥çœ‹ï¼Œ0è¡¨ç¤ºä¸è°ƒèµ·ï¼Œ1è¡¨ç¤ºè°ƒèµ·, é»˜è®¤å€¼ä¸º0 å¦ è¯¥å‚æ•°ä»…åœ¨ç§»åŠ¨ç«¯æœ‰æ•ˆ å’Œç™¾åº¦åœ°å›¾ä¸åŒçš„æ˜¯ï¼Œè¿™ä¸ªæ¥å£ä¸æä¾›ç±»ä¼¼æœç´¢åŠŸèƒ½çš„æ¥å£æ–¹å¼ï¼Œå…¶ä¸­ç»çº¬åº¦ä¸ºå¿…å¡«é¡¹ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å°†è®¢å•åœ°å€ï¼Œå…ˆè°ƒç”¨é«˜å¾·çš„åœ°ç†åç§°è½¬ç»çº¬åº¦apiï¼Œåœ¨è°ƒç”¨æ­¤æ¥å£ã€‚ è¯¦ç»†çš„åœ°ç†ç¼–ç apiå‚è§ï¼šhttps://lbs.amap.com/api/webservice/guide/api/georegeo/ é€šè¿‡ä¸Šè¿°ä¸¤ä¸ªapiè·å–ï¼Œåœ°å€çš„é“¾æ¥ï¼Œè¯¦ç»†phpå‡½æ•°å¦‚ä¸‹ï¼š 12345678910111213141516171819/** * [getAddressUrl ç”Ÿæˆåœ°å€url] * @param [string] $taddress [è®¢å•åœ°å€] * @return [string] [è¿”å›åœ°å€url] */public function getAddressUrl($address)&#123; $api = &quot;https://restapi.amap.com/v3/geocode/geo&quot;; $key = &quot;ä½ ç”³è¯·çš„é«˜å¾·åœ°å›¾key&quot;; $request_url = $api.&quot;?address=&quot;.$address.&quot;&amp;output=JSON&amp;key=&quot;.$key; $response = file_get_contents($request_url); $obj = json_decode($response); if(strcmp($obj-&gt;status,&quot;1&quot;)==0)&#123; $location_code = $obj-&gt;geocodes[&quot;0&quot;]-&gt;location; $address_url = &quot;https://uri.amap.com/marker?position=&quot;.$location_code.&quot;&amp;name=&quot;.$address; &#125;else&#123; return 0; &#125; return $address_url; &#125; å¯¹æ¯”é«˜å¾·åœ°å›¾å’Œç™¾åº¦åœ°å›¾ã€‚ç™¾åº¦åœ°å›¾åœ¨ç¼–ç¨‹æ–¹é¢æ›´åŠ æ–¹ä¾¿ï¼Œä½†æ˜¯å¯¹äºæ‰«æäºŒç»´ç ä½“éªŒè€Œè¨€ï¼Œç™¾åº¦åœ°å›¾å¿…é¡»ä½¿ç”¨æµè§ˆå™¨æ‰«æï¼Œæˆ–è€…å¾®ä¿¡æ‰«æåæ ¹æ®æç¤ºæ‰“å¼€æµè§ˆå™¨ï¼Œç„¶åç”±æµè§ˆå™¨è°ƒèµ·ç™¾åº¦åœ°å›¾è¿›å…¥å¯¼èˆªã€‚ç›´æ¥ä½¿ç”¨ç™¾åº¦åœ°å›¾æ‰«æäºŒç»´ç æ˜¯æ— æ³•è°ƒå‡ºå¯¼èˆªçš„ï¼Œè€Œä¸”ç™¾åº¦åœ°å›¾æ‰«æåŠŸèƒ½éšè—åœ¨æœç´¢æ¡†ä¹‹ä¸­ï¼Œä½¿ç”¨éå¸¸ä¸æ–¹ä¾¿ã€‚ç›¸å¯¹è€Œè¨€ï¼Œç”¨æˆ·ä½¿ç”¨é«˜å¾·åœ°å›¾apiç”Ÿæˆçš„äºŒç»´ç ä½¿ç”¨é«˜å¾·åœ°å›¾é¦–é¡µçš„æ‰«ä¸€æ‰«åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥è¿›å…¥å¯¼èˆªç•Œé¢ã€‚ 2.2 urlè½¬äºŒç»´ç åœ¨ç½‘ä¸Šèƒ½æ‰¾åˆ°è®¸å¤šæä¾›urlè½¬äºŒç»´ç çš„apiæ¥å£ã€‚ åœ¨ç®€ä¹¦https://www.jianshu.com/p/064ab5c811cf é‡Œï¼Œæä¾›äº†è®¸å¤šæ¥å£ã€‚ ç”±äºé£é¹…æ‰“å°æœºçš„æŠ€æœ¯æ–‡æ¡£ä¸­è¯´æ˜äº†ï¼Œåªéœ€è¦åœ¨æ‰“å°æ—¶åœ¨&lt;QR&gt;æ ‡ç­¾ä¸­è¾“å…¥urlå³å¯è‡ªåŠ¨è½¬æ¢ï¼Œæ‰€ä»¥ï¼Œä¸åœ¨éœ€è¦ä½¿ç”¨é¢å¤–çš„æ¥å£ã€‚ â­ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡getæ¥è·å–urläºŒç»´ç ï¼Œå¿…é¡»å…ˆä½¿ç”¨url_encodeå°†urlç¼–ç ï¼Œå¦åˆ™äºŒç»´ç ä¸­å°†ä¸¢å¤±urlçš„å‚æ•°ä¿¡æ¯ã€‚","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"ç”µå•†","slug":"ç”µå•†","permalink":"https://sci.ci/tags/%E7%94%B5%E5%95%86/"}]},{"title":"è®¢å•å¡ç‰‡å¤‡æ³¨è‡ªåŠ¨æ‰“å°ç³»ç»Ÿ","slug":"è®¢å•å¡ç‰‡å¤‡æ³¨è‡ªåŠ¨æ‰“å°ç³»ç»Ÿ","date":"2020-08-26T07:51:39.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/08/26/è®¢å•å¡ç‰‡å¤‡æ³¨è‡ªåŠ¨æ‰“å°ç³»ç»Ÿ/","link":"","permalink":"https://sci.ci/2020/08/26/%E8%AE%A2%E5%8D%95%E5%8D%A1%E7%89%87%E5%A4%87%E6%B3%A8%E8%87%AA%E5%8A%A8%E6%89%93%E5%8D%B0%E7%B3%BB%E7%BB%9F/","excerpt":"","text":"ä¸€ï¼šç³»ç»Ÿè®¾è®¡ç³»ç»Ÿæ€ç»´å¯¼å›¾ï¼š å„ä¸ªæ¥å•å¹³å°åœ¨æ”¶åˆ°è®¢å•åï¼Œå°†è®¢å•ä¿¡æ¯å‘é€ç»™å…¬ç½‘æœåŠ¡å™¨ï¼Œå…¬ç½‘æœåŠ¡å™¨ä»è®¢å•ä¿¡æ¯ä¸­æå–å¡ç‰‡å†…å®¹ï¼Œå¹¶å°†å¡ç‰‡å†…å®¹å‘é€ç»™å’Œæ‰“å°æœºå¤„åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ç¯å¢ƒä¸‹çš„æ ‘è“æ´¾ï¼Œæ ‘è“æ´¾å‘é€æ‰“å°è¯·æ±‚ã€‚ ç”±äºæ‰“å°æœºçš„æ‰“å°è¯·æ±‚å¿…é¡»åœ¨å±€åŸŸç½‘ç¯å¢ƒä¸‹å‘å‡ºï¼Œå†…ç½‘ç©¿é€å°±æ˜¯å¿…é¡»çš„æ­¥éª¤ï¼Œæ‰€ä»¥è¿™é‡Œçš„æ ‘è“æ´¾å’Œå…¬ç½‘æœåŠ¡å™¨ç¼ºä¸€ä¸å¯ï¼Œå¦‚æœæœ‰å›ºå®šçš„å…¬ç½‘ipï¼Œåˆ™å¯å–æ¶ˆå…¬ç½‘æœåŠ¡å™¨æ­¥éª¤ï¼Œå¦‚æœæ‰“å°æœºæ”¯æŒhttpå‘é€apiè¯·æ±‚åˆ›å»ºæ‰“å°è¿›ç¨‹ï¼Œåˆ™å¯å–æ¶ˆæ ‘è“æ´¾çš„ä½œç”¨ã€‚ äºŒï¼šå‡†å¤‡å·¥ä½œ ç”³è¯·ç¾å›¢å’Œé¥¿äº†ä¹ˆAPIæ¥å£ã€‚ è´­ä¹°å…¬ç½‘æœåŠ¡å™¨ï¼Œæ¨èé˜¿é‡Œäº‘å’Œè…¾è®¯äº‘ï¼Œå­¦ç”Ÿä»·è´­ä¹°è½»é‡çº§åº”ç”¨æœåŠ¡å™¨ï¼Œä¸€å¹´100å…ƒå·¦å³ã€‚æˆ‘ç”±äºå·²æœ‰å°ç¨‹åºï¼Œå› æ­¤å’Œå°ç¨‹åºå…¬ç”¨äº†åŒä¸€å°æœåŠ¡å™¨ã€‚å°ç¨‹åºä½¿ç”¨çš„æ˜¯å¼€æºç”µå•†å¹³å°â€œShopXOâ€ã€‚ æ ‘è“æ´¾4Bå’Œä¸€å°æ‰“å°æœºã€‚æ‰“å°æœºå¯é€‰æ™®é€šçš„å–·å¢¨æ‰“å°æœºæˆ–è€…æ ‡ç­¾æ‰“å°æœºã€‚å–·å¢¨æ‰“å°æœºæ‰“å°çš„æ—¶å€™éœ€è¦é—´æ­‡çš„å°†è´ºå¡æ”¾å…¥æ‰“å°æœºï¼Œè€Œæ ‡ç­¾æœºåˆ™å¯è¿ç»­çš„æ‰“å°æ ‡ç­¾ï¼Œå¯å°†æ‰“å°åçš„æ ‡ç­¾è´´åœ¨è´ºå¡ä¸Šã€‚å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œä¸“é—¨è´­ä¹°ä¸€ä¸ªè¿ç»­æ‰“å°è´ºå¡çš„æœºå™¨é€šå¸¸æ¯”è¾ƒè´µã€‚æ­¤ç³»ç»Ÿé¢„ç®—åœ¨1kå…ƒäººæ°‘å¸ã€‚å…¶ä¸­å…¬ç½‘æœåŠ¡å™¨100å…ƒ/å¹´ï¼Œæ ‘è“æ´¾å¯æ ¹æ®è‡ªèº«èµ„é‡‘é€‰æ‹©ï¼Œå»ºè®®åœ¨100~500ï¼Œæ‰“å°æœºåœ¨300~800ã€‚ä¸åŒçš„æ‰“å°æœºåœ¨æ ‘è“æ´¾ç¼–ç¨‹æ—¶ï¼Œæ¶‰åŠçš„æŒ‡ä»¤é›†æ˜¯ä¸åŒçš„ã€‚ç»†èŠ‚å¯èƒ½åœ¨åé¢é€‰å¥½åï¼Œåœ¨ä¿®æ”¹è¿™é‡Œçš„å†…å®¹ã€‚","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"ç”µå•†ç³»ç»Ÿ","slug":"ç”µå•†ç³»ç»Ÿ","permalink":"https://sci.ci/tags/%E7%94%B5%E5%95%86%E7%B3%BB%E7%BB%9F/"}]},{"title":"çˆ¬è™«åŸºç¡€","slug":"çˆ¬è™«åŸºç¡€","date":"2020-07-26T02:55:04.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/07/26/çˆ¬è™«åŸºç¡€/","link":"","permalink":"https://sci.ci/2020/07/26/%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80/","excerpt":"","text":"1: ä»»åŠ¡ä»‹ç»å’Œå‡†å¤‡å·¥ä½œçˆ¬å–è±†ç“£ç”µå½±Top250çš„åŸºæœ¬ä¿¡æ¯ã€‚ https://movie.douban.com/top250 ç¼–ç è§„èŒƒï¼š 1234567#coding=utf-8def hello(): print(&quot;hello&quot;) if __name__ = &quot;__main__&quot;: #å…¥å£å‡½æ•°ï¼Œæ§åˆ¶å‡½æ•°çš„æ‰§è¡Œé¡ºåº hello() å¼•å…¥æ¨¡å—ï¼š ç›®å½•ç»“æ„ï¼š - test1 â€‹ - t1.py - test2 â€‹ - t2.py t1.py 123def add(a,b): return a+bprint(add(a,b)) åœ¨t2.pyä¸­å¼•å…¥ï¼Œt1.py 12from test1 import t1print(t1.add(3,5)) å¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡å— 12345from bs4 import BeautifulSoup #ç½‘é¡µè§£æimport re #æ­£åˆ™è¡¨è¾¾å¼import urllib.request,urllib.error #æŒ‡å®šurlï¼Œè·å–ç½‘é¡µæ•°æ®import xlwt #è¿›è¡Œexcelæ“ä½œimport sqlite3 #è¿›è¡ŒSQLiteæ•°æ®åº“æ“ä½œ 2ï¼šæ„å»ºæµç¨‹2.1 åŸºæœ¬æ¡†æ¶1234567891011121314151617def main(): baseurl = &quot;https://movie.douban.com/top250?start=&quot; #1.çˆ¬å–ç½‘é¡µ datalist = getData(baseurl) savepath = &quot;.\\\\è±†ç“£ç”µå½±Top250&quot; #3.ä¿å­˜æ•°æ® saveData(savepath) #çˆ¬å–ç½‘é¡µdef getData(baseurl): datalist = [] #2.é€ä¸€è§£ææ•°æ® return datalist#ä¿å­˜æ•°æ®def saveData(savepath): #ä¿å­˜ 2.2 è·å–æ•°æ®12345678910111213141516171819202122def askURL(url): #ç”¨æˆ·ä»£ç†ï¼Œå‘Šè¯‰è±†ç“£ï¼Œæµè§ˆå™¨ç±»å‹ head = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.83 Safari/537.36&quot;&#125; req = urllib.request.Request(url,headers=head) html = &quot;&quot; try: response = urllib.request.urlospen(req) html = response.read().decode(&quot;utf-8&quot;) print(html) except urllib.error.URLError as e: if hasattr(e,&quot;code&quot;):s print(e.code) if hasattr(e,&quot;reason&quot;): print(e.reason)def getData(baseurl): datalist = [] for i in range(0,10): url = baseurl + str(i*25) html = askURL(url) #é€ä¸€è§£æç½‘é¡µ return datalist 3ï¼šè¡¥å……Urllibåº“getè¯·æ±‚ 1234import urllib.requestresponse = urllib.request.urlopen(&quot;https://www.baidu.com&quot;)print(response.read().decode(&#x27;utf-8&#x27;)) #å¯¹è·å–åˆ°çš„æºç è¿›è¡Œè§£ç  Postè¯·æ±‚ 123456import urllib.requestimport urllib,parsedata = bytes(urllib.parse.urlencode(&#123;&quot;hello&quot;:&quot;world&quot;&#125;),encoding=&quot;utf-8&quot;)response = urlib.request.urlopen(&quot;http://httpbin.org/post&quot;,data = data)print(response.read().decode(&quot;utf-8&quot;)) è¶…æ—¶å¤„ç†ï¼š0.01ç§’å†…æ— ååº” 12345try: response = urlib.request.urlopen(&quot;http://httpbin.org/get&quot;,timeout = 0.01) print(response.read().decode(&quot;utf-8&quot;))except urllib.error.URLError as e: print(&quot;time out&quot;) å“åº”å†…å®¹ï¼š 123response.statusresponse.getheader()response.getheader(&quot;Server&quot;) ä¼ªè£…ï¼šheaderså†…å®¹å¯ä»¥åœ¨è®¿é—®ç½‘ç«™æ—¶æŸ¥çœ‹ï¼Œrequest header 123456url = &quot;https://www.douban.com&quot;headers = &#123;&quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.83 Safari/537.36&quot;&#125;data = bytes(urllib.parse.urlencode(&#123;&quot;name&quot;:&quot;eric&quot;&#125;),encoding=&quot;utf-8&quot;)#å°è£…è¯·æ±‚req = urllib.request.Request(url=url,data=data,headers=headers,method=method)response = urllib.request.urlopen(req) 4ï¼šè¡¥å……BeautifSoupåº“å°†å¤æ‚çš„htmlæ–‡æ¡£è½¬åŒ–ä¸ºæ ‘å½¢æ–‡æ¡£ 1234567891011121314151617181920212223242526272829303132from bs4 import BeautifulSoupfile = open(&quot;./baidu.html&quot;,&quot;rb&quot;)html = file.read()bs = BeautifulSoup(html,&quot;html.parser&quot;)print(bs.title)# &lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;print(bs.title.string)#The Dormouse&#x27;s storyprint(bs.a.attrs)#è·å–æ‰€æœ‰å±æ€§#find_all()æŸ¥æ‰¾æ‰€æœ‰çš„aæ ‡ç­¾t_lists = bs.find_all(&quot;a&quot;)t_lists = bs.find_all(re.compile(&quot;a&quot;))t_lists = bs.find_all(class=&quot;head&quot;)t_lists = bs.find_all(class_=True)t_lists = bs.find_all(text = re.compile(&quot;\\d&quot;)) #æŸ¥æ‰¾å¸¦æ•°å­—çš„æ–‡å­—t_lists = bs.find_all(&quot;a&quot;,limit=3) #é™å®šä¸‰ä¸ªå…ƒç´ #Cssé€‰æ‹©å™¨bs.select(&#x27;title&#x27;)#&lt;title&gt;sbianm&lt;title&gt;bs.select(&quot;.mnav&quot;)#æŒ‰ç±»åæŸ¥æ‰¾bs.select(&quot;#u1&quot;)#æŒ‰idæŸ¥æ‰¾bs.select(&quot;a[class=&#x27;bri&#x27;]&quot;)#æŒ‰ç…§å±æ€§æŸ¥æ‰¾bs.select(&quot;head&gt;title&quot;)#é€šè¿‡å­æ ‡ç­¾æ¥æŸ¥æ‰¾bs.select(&quot;.mnv ~ .bri&quot;)#æŸ¥æ‰¾.mnvç±»çš„å…„å¼Ÿæ ‡ç­¾ï¼Œä¸”ç±»åä¸ºbri æ›´å¤šå†…å®¹ï¼šhttps://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/ 5ï¼šè¡¥å……æ­£åˆ™è¡¨è¾¾å¼","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/tags/%E7%88%AC%E8%99%AB/"}]},{"title":"httponlyçš„Cookie","slug":"httponlyçš„Cookie","date":"2020-07-22T09:24:14.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/07/22/httponlyçš„Cookie/","link":"","permalink":"https://sci.ci/2020/07/22/httponly%E7%9A%84Cookie/","excerpt":"","text":"JSè·å–cookieçš„ç¨‹åºæ˜¯document.cookieï¼Œä½†æ˜¯ä¸ºäº†ç½‘ç«™å®‰å…¨ã€‚æœåŠ¡å™¨å¯ä»¥è®¾ç½®æŸäº›cookieä¸èƒ½ä½¿ç”¨jsè·å–ã€‚è¿™ç§ç±»å‹çš„cookieå³ä½¿httponlyçš„cookieï¼Œè€Œä¸”åªæœ‰æœåŠ¡å™¨èƒ½å‘é€æ­¤ç±»cookieã€‚ 1setcookie(&quot;abc&quot;, &quot;test&quot;, NULL, NULL, NULL, NULL, TRUE); åœ¨æœ€æ–°phpä¸­è®¾ç½®cookieçš„httponlyå±æ€§ï¼Œéœ€è¦å°†ç¬¬ä¸ƒä¸ªå€¼è®¾ç½®ä¸ºtrueã€‚ åœ¨æµè§ˆå™¨å¦‚ä½•è·å–httponlyå±æ€§çš„cookieå‘¢ã€‚éœ€è¦è¿›å…¥æ§åˆ¶å°ï¼Œæ‰“å¼€Application è®¾ç½®httponlyå±æ€§ï¼Œå¯¹äºcookieå®‰å…¨éå¸¸é‡è¦ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢XSSæ”»å‡»ï¼Œæ”»å‡»è€…é€šè¿‡æ¤å…¥JSä»£ç ï¼Œè·å–ç½‘ç«™çš„cookieï¼Œä»è€Œä»¥ç”¨æˆ·èº«ä»½æµè§ˆæœåŠ¡å™¨ã€‚ å¦å¤–è®¾ç½®cookieè¿‡æœŸæ—¶é—´ä¸ä¼šè¯Sessionæ—¶é—´ç›¸åŒï¼Œä¹Ÿèƒ½æœ‰æ•ˆä¿æŠ¤ç”¨æˆ·ä¿¡æ¯å®‰å…¨ã€‚","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Cookie","slug":"Cookie","permalink":"https://sci.ci/tags/Cookie/"}]},{"title":"PythonåŸºç¡€","slug":"PythonåŸºç¡€","date":"2020-07-22T05:51:02.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/07/22/PythonåŸºç¡€/","link":"","permalink":"https://sci.ci/2020/07/22/Python%E5%9F%BA%E7%A1%80/","excerpt":"","text":"1: Hello Worldwindows win+Ræ‰“å¼€è¿è¡Œèœå•ï¼Œè¾“å…¥CMDï¼Œè¿›å…¥ç»ˆç«¯ã€‚è¾“å…¥pythonè¿›å…¥pythonç»ˆç«¯ç¨‹åºã€‚è¾“å…¥print(&quot;hello,world&quot;)æ‰“å°æ–‡å­—ã€‚ import thisæ‰“å°pythonä¹‹ç¦… ç»“æŸå‘½ä»¤æç¤ºç¬¦ï¼š exit() ctrl+z å‘½ä»¤æç¤ºç¬¦ä¸­çš„æ¯ä¸€è¡Œæ˜¯ç›¸å…³è”çš„ã€‚ æ‰§è¡Œä»¥.pyç»“å°¾æ–‡ä»¶ã€‚ å‘½ä»¤æç¤ºç¬¦ä¸­è¾“å…¥python hello.world.py 2: åŸºç¡€2.1 æ³¨é‡Š#æ³¨é‡Šï¼šå•è¡Œæ³¨é‡Š ***æ³¨é‡Š***ï¼šå¤šè¡Œæ³¨é‡Š 2.2 æ ‡å‡†åŒ–è¾“å‡º12345678910111213141516171819#å¸¸è§„è¾“å‡ºprint(&quot;æ ‡å‡†åŒ–è¾“å‡ºå­—ç¬¦ä¸²&quot;)a = 10#å­—ç¬¦è¿æ¥å˜é‡print(&quot;è¿™æ˜¯å˜é‡&quot;, a)#å˜é‡å ä½print(&quot;æˆ‘çš„å¹´çºªæ˜¯ï¼š%d å²&quot;%a)#å¤šå˜é‡å ä½print(&quot;æˆ‘çš„åå­—æ˜¯%sï¼Œæˆ‘çš„å›½ç±æ˜¯%s&quot;%(&quot;å°å¼ &quot;,&quot;ä¸­å›½&quot;))#å¤šä¸ªå­—ç¬¦ä¸²ï¼Œç©ºæ ¼éš”å¼€print(&quot;aaa&quot;,&quot;bbb&quot;,&quot;ccc&quot;)#å¤šä¸ªå­—ç¬¦ä¸²ï¼ŒæŒ‡å®š.éš”å¼€print(&quot;www&quot;,&quot;baidu&quot;,&quot;com&quot;,sep=&quot;.&quot;)#æ— å­—ç¬¦ä¸²ç»“å°¾print(&quot;hello&quot;,end=&quot;&quot;)#ä»¥ç©ºæ ¼ç»“å°¾print(&quot;world&quot;,end=&quot;\\t&quot;)#ä»¥å›è½¦ç¬¦ç»“å°¾print(&quot;python&quot;,end=&quot;\\n&quot;) è¾“å‡ºï¼š æ ‡å‡†åŒ–è¾“å‡ºå­—ç¬¦ä¸²è¿™æ˜¯å˜é‡ 10æˆ‘çš„å¹´çºªæ˜¯ï¼š10 å²æˆ‘çš„åå­—æ˜¯å°å¼ ï¼Œæˆ‘çš„å›½ç±æ˜¯ä¸­å›½aaa bbb cccwww.baidu.comhelloworld python å ä½ç¬¦ï¼š 2.3 æ ‡å‡†åŒ–è¾“å…¥1234password = input(&quot;è¯·è¾“å…¥å¯†ç &quot;)print(&quot;æ‚¨åˆšæ‰è¾“å…¥çš„å¯†ç æ˜¯&quot;,password)#æµ‹è¯•å˜é‡ç±»å‹print(type(password)) è¾“å‡ºï¼š è¯·è¾“å…¥å¯†ç 123æ‚¨åˆšæ‰è¾“å…¥çš„å¯†ç æ˜¯ 123&lt;class â€˜strâ€™&gt; å³ä½¿è¾“å…¥æ•°å­—ï¼Œinputä¹Ÿæ˜¯å­—ç¬¦ä¸² å¦‚æœæƒ³è¦è¾“å…¥æ•´å‹æ•°ã€‚ä½¿ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ 123a = int(&quot;123&quot;)print(type(a))print(&quot;è¾“å‡ºçš„æ˜¯æ•´å‹%d&quot;%a) 2.4 è¿ç®—ç¬¦ 3: åˆ¤æ–­å’Œå¾ªç¯è¯­å¥3.1 åˆ¤æ–­è¯­å¥ï¼š123456if conditino1: codeselif condition2: codeselse: codes :warning:ç¼©è¿›ã€å†’å·å¾ˆé‡è¦ 3.2 éšæœºç”Ÿæˆæ•°ï¼š123import random#éšæœºç”Ÿæˆ[0,2]ä¹‹é—´çš„æ•´æ•°ï¼Œ0ã€1ã€2x = random.randint(0,2) 3.3 å¯¼å…¥æ¨¡å—å’Œå‡½æ•°å¯¼å…¥æ•´ä¸ªæ¨¡å—ï¼šimport module ä»æŸä¸ªæ¨¡å—ä¸­å¯¼å…¥æŸä¸ªå‡½æ•°ï¼šfrom module import function ä»æŸä¸ªæ¨¡å—å¯¼å…¥å¤šä¸ªå‡½æ•°ï¼šfrom module import function1, function2 å°†æŸä¸ªæ¨¡å—çš„å‡½æ•°å…¨éƒ¨å¯¼å…¥ï¼šfrom module import * 3.4 å¾ªç¯3.4.1 forå¾ªç¯1234567891011121314151617#[0,4]for i in range(5): print(i)#æ­¥é•¿ä¸º3ï¼Œ[0,10]for i in range(0,10,3): print(i) #æ‰“å°æ¯ä¸ªå­—ç¬¦ name = &quot;chengdu&quot;for x in name: print(x,end=&quot;\\t&quot;)#æ‰“å°åˆ—è¡¨a = [&quot;aa&quot;,&quot;bb&quot;,&quot;cc&quot;]for i in range(len(a)): print(i,a[i]) 3.4.2 whileå¾ªç¯123456i=0while i&lt;5 : print(i) i += 1else: print(&quot;whileç»“æŸ&quot;) 3.4.3 breakå’Œcontinuebreakï¼šç»“æŸæ‰€æœ‰å¾ªç¯ï¼› continueï¼šç»“æŸæœ¬æ¬¡å¾ªç¯ï¼Œè¿›å…¥ä¸‹æ¬¡å¾ªç¯ã€‚ passï¼šå ä½ï¼Œä»€ä¹ˆä¹Ÿä¸æ‰§è¡Œï¼Œä½†passåçš„åŒçº§è¯­å¥ä¼šæ‰§è¡Œï¼Œå’Œç©ºè¡Œæ²¡åŒºåˆ«ã€‚ 4: æ ¸å¿ƒæ•°æ®ç±»å‹4.1 å­—ç¬¦ä¸²å¯ä½¿ç”¨ï¼šå•å¼•å·ã€åŒå¼•å·å’Œä¸‰å¼•å·ï¼ˆä¸‰ä¸ªå•æˆ–åŒå¼•å·ï¼‰ï¼Œä½¿ç”¨åæ–œæ \\è½¬ä¹‰ 4.1.1 å­—ç¬¦ä¸²ä½œä¸ºæ•°ç»„12345str = &quot;chengdu&quot;print(str)print(str[0])print(str[5:]) #ä»ç´¢å¼•5åˆ°æœ€åprint(str[0:5:2]) #[èµ·å§‹ä½ç½®:ç»“æŸä½ç½®:æ­¥è¿›å€¼] chengdu c du ceg 4.1.2 å­—ç¬¦ä¸²è¿æ¥1234print(str+&quot;,nihao&quot;) #chengdu,nihaoprint(str*3) #è¿ç»­æ‰“å°ä¸‰æ¬¡print(&quot;hello\\nchengdu&quot;) #\\nè½¬ä¹‰ä¸ºæ¢è¡Œprint(r&quot;hello\\nchengdu&quot;) #è½¬ä¹‰å­—ç¬¦ä¸èµ·ä½œç”¨ï¼Œç›´æ¥æ˜¾ç¤º 4.1.3 å­—ç¬¦ä¸²æ“ä½œå‡½æ•°bytes.decodeå­—ç¬¦ä¸²è§£ç  isalnum()åŒ…å«è‡³å°‘ä¸€ä¸ªå­—æ¯æˆ–æ•°å­— isalpha()è‡³å°‘ä¸€ä¸ªä¸”å…¨ä¸ºå­—æ¯ isdigit()è‡³å°‘ä¸€ä¸ªä¸”å…¨ä¸ºæ•°å­— join(seq)æŒ‡å®šå­—ç¬¦ä¸²åšåˆ†éš”ç¬¦ï¼Œåˆå¹¶æ–°çš„å­—ç¬¦ä¸² split()æ‹†åˆ†å­—ç¬¦ä¸² lstrip()æˆªæ‰å­—ç¬¦ä¸²å·¦è¾¹çš„ç©ºæ ¼æˆ–æŒ‡å®šå­—ç¬¦ rstrip()æˆªæ‰å³è¾¹ 4.2 åˆ—è¡¨4.2.1 å®šä¹‰åˆ—è¡¨12list = []namelist = [&quot;zhang&quot;,&quot;wang&quot;,3] #åˆ—è¡¨ä¸­å¯ä»¥å­˜å‚¨æ··åˆç±»å‹ 4.2.2 æ‰“å°123print(namelist[0])print(namelist[1])print(namelist[2]) 4.2.3 éå†åˆ—è¡¨for: 123for name in namelist: print(name)print(len(namelist)) #len()è·å–åˆ—è¡¨é•¿åº¦ while: 1234i = 0while i&lt;len(namelist): print(namelist[i]) i++ 4.2.4 åˆ—è¡¨æ“ä½œå‡½æ•°[ : : ]åˆ—è¡¨åˆ‡ç‰‡ appendæ–°å¢æ•°æ®åˆ°åˆ—è¡¨å°¾éƒ¨ 123456789namelist.append(&quot;qian&quot;)a=[1,2]b=[3,4]a.append(b)#è¾“å‡º[1,2,[3,4]] å°†åˆ—è¡¨ä½œä¸ºä¸€ä¸ªå…ƒç´ åŠ å…¥åˆ°aä¸­a.extend(b) #å°†bä¸­çš„æ¯ä¸ªå…ƒç´ é€ä¸€è¿½åŠ åˆ°aä¸­#è¾“å‡º[1,2,[3,4],3,4] insertæŒ‡å®šä¸‹æ ‡ä½ç½®æ’å…¥å…ƒç´ ï¼Œ 123a = [0,1,2]a.insert(1,3) #ç¬¬ä¸€ä¸ªè¡¨ç¤ºç´¢å¼•ä¸‹æ ‡ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºæ’å…¥çš„å…ƒç´ ï¼ˆå¯¹è±¡ï¼‰#è¾“å‡º[0,3,1,2] del list[index] åœ¨æŒ‡å®šä½ç½®åˆ é™¤å…ƒç´  list.pop()å¼¹å‡ºæœ«å°¾æœ€åä¸€ä¸ªå…ƒç´  list.remove(&quot;é’¢é“ä¾ &quot;)ç›´æ¥åˆ é™¤ç¬¬ä¸€ä¸ªæŒ‡å®šå†…å®¹çš„å…ƒç´ ï¼Œè¿˜æœ‰çš„åŒåå…ƒç´ ä¸ä¼šè¢«åˆ é™¤ã€‚ 12movieName = [&quot;åŠ å‹’æ¯”æµ·ç›—&quot;,&quot;å¤ä»‡è€…&quot;,&quot;é’¢é“ä¾ &quot;,&quot;èœ˜è››ä¾ &quot;]del movieName[2] #åˆ é™¤é’¢é“ä¾  inæŸå…ƒç´ æ˜¯å¦åœ¨åˆ—è¡¨ä¸­ not inä¸åœ¨åˆ—è¡¨ä¸­ 12345name = &quot;wang&quot;if name in namelist: print(&quot;æ‰¾åˆ°åå­—wang&quot;)else: print(&quot;æ²¡æ‰¾åˆ°&quot;) indexæŸ¥æ‰¾æŒ‡å®šä¸‹æ ‡èŒƒå›´çš„å…ƒç´ ï¼Œè¿”å›å…ƒç´ åœ¨åˆ—è¡¨ä¸­çš„ç´¢å¼•ä¸‹æ ‡ï¼ŒèŒƒå›´åŒºé—´ï¼Œå·¦é—­å³å¼€ 1234a = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;,&quot;e&quot;]a.index(&quot;c&quot;,1,4) #èŒƒå›´æ˜¯[1,4)#è¾“å‡º2#å¦‚æœæ²¡æ‰¾åˆ°ä¼šæŠ¥é”™ count()æŸ¥æ‰¾æœ‰å¤šå°‘ä¸ªå…ƒç´  12a.count(&quot;c&quot;) #è¾“å‡º1 reverse()å°†åˆ—è¡¨å…ƒç´ ä»åå‘å‰åè½¬ 123a = [1,4,2,3]a.reverce()#è¾“å‡º[3,2,4,1] sort()æ’åº 1234a.sort()#è¾“å‡º[1,2,3,4]a.sort(reverse=True)#è¾“å‡º[4,3,2,1] 4.3 å…ƒç»„tuple(å…ƒç»„):ä¸listç›¸ä¼¼ï¼Œä½†tupleå…ƒç´ ä¸èƒ½ä¿®æ”¹ã€‚ å…ƒç»„çš„å…ƒç´ ä¸èƒ½æ”¹ï¼Œä½†åŒ…å«çš„å¯¹è±¡å¯ä»¥ä¿®æ”¹ã€‚ 123tup1 = () #åˆ›å»ºç©ºå…ƒç»„ï¼Œå¸¦å¼•æˆtupleç±»å‹tup2 = (58) #ä¼šæ‰“å°æˆæ•´å‹tup3 = (58,) #æ‰“å°æˆtupleç±»å‹ å…ƒç»„å¯»å€ï¼š 123tup1 = (&quot;abc&quot;,&quot;def&quot;,1421)print(tup1[0])print(tup1[-1]) #å€’æ•°ç¬¬ä¸€ä¸ª å…ƒç»„ä¸èƒ½ä¿®æ”¹ï¼š tup[0] = 1; å…ƒç»„å¢ï¼š 123tup1 = (12,34,56)tup2 = (&quot;abc&quot;,xyz)tup3 = tup1 + tup2 å…ƒç»„åˆ ï¼š 1del tup 4.4 å­—å…¸æ— åºçš„å¯¹è±¡é›†åˆï¼Œä½¿ç”¨é”®å€¼å‚¨å­˜ã€‚ 12info = &#123;&quot;name&quot;:&quot;å´å½¦ç¥–&quot;,&quot;age&quot;:18&#125;print(info[&quot;name&quot;]) è®¿é—®å¯èƒ½ä¸å­˜åœ¨çš„é”®ï¼š 123456print(info[&quot;gender&quot;])#æŠ¥é”™print(info.get(&quot;gender&quot;))#è¾“å‡ºNoneprint(info,get(&quot;gender&quot;,&quot;m&quot;))#æ²¡æ‰¾åˆ°é»˜è®¤ä¸ºmï¼Œæ‰¾åˆ°æ—¶æ˜¾ç¤ºæ‰¾åˆ°çš„å€¼ å­—å…¸å¢ï¼š 1info[&quot;id&quot;] = 12 å­—å…¸åˆ ï¼š 12del info[&quot;name&quot;] #åˆ é™¤é”®å€¼å¯¹ã€‚ç›´æ¥è®¿é—®é”®ä¼šæŠ¥é”™ã€‚info.clear #æ¸…ç©ºæ•°ç»„ï¼Œæ‰“å°ï¼šinfo = &#123;&#125; å­—å…¸æ”¹ï¼š 1info[&quot;name&quot;] = &quot;æˆé¾™&quot; å­—å…¸æŸ¥ï¼š 12345678910111213141516info.keys() #å¾—åˆ°æ‰€æœ‰çš„é”®ï¼Œåˆ—è¡¨å½¢å¼info.values() #å¾—åˆ°æ‰€æœ‰çš„å€¼info.items() #å¾—åˆ°æ‰€æœ‰çš„é¡¹#éå†for key in info.keys(): print(key)for values in info.values(): print(value)for key,value in info.items(): print(&quot;key=$s,value=%s&quot;%(key,value))mylist = [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]#enumerateæšä¸¾ç±»å‹å¯¹è±¡for i,x in enumerate(mylist): print(i,x) 4.5 é›†åˆä¸å­—å…¸ç›¸ä¼¼ï¼Œæ˜¯keyçš„é›†åˆï¼Œä½†æ˜¯keyä¸èƒ½é‡å¤ã€‚ setå¯ä»¥ç”¨æ¥å»é‡ã€‚ å°ç»“ï¼š 5: å‡½æ•°12345def printInfo(): print(&quot;---------------------------&quot;) print(&quot; äººç”Ÿè‹¦çŸ­ï¼Œæˆ‘ç”¨python &quot;) print(&quot;---------------------------&quot;)printInfo() å¸¦å‚æ•°çš„å‡½æ•°ï¼š 1234def add2Num(a,b): c = a + b print(c)add2Num(11,22) å¸¦è¿”å›å€¼çš„å‡½æ•°ï¼š 1234def add2Num(a,b): return a+bresult = add2Num(1,2)print(result) è¿”å›å¤šä¸ªå€¼ï¼š 123456def divid(a,b): shang = a/b yushu = a%b return shang,yushush,yu = divid(5,2)print(sh,yu) å‡½æ•°ç±»ï¼Œå±€éƒ¨å˜é‡ä¼˜å…ˆäºå…¨å±€å˜é‡ åœ¨å‡½æ•°ä¸­ä½¿ç”¨å…¨å±€å˜é‡ï¼š 123456a = 100def test1(): global a #å…¨å±€å˜é‡æ ‡è¯†ç¬¦ print(a) a = 200print(a) 6: æ–‡ä»¶æ“ä½œ6.1 æ‰“å¼€å…³é—­12f = open(&quot;test.txt&quot;,&quot;w&quot;) #æ‰“å¼€æ–‡ä»¶ï¼Œå†™æ¨¡å¼ï¼Œä¸å­˜åœ¨æ–‡ä»¶æ—¶ï¼Œåœ¨å‡½æ•°ç›®å½•è·¯å¾„æ–°å»ºè¿™ä¸ªæ–‡ä»¶ã€‚f.close() #å…³é—­æ–‡ä»¶ æ¨¡å¼ æè¿° t æ–‡æœ¬æ¨¡å¼ (é»˜è®¤)ã€‚ x å†™æ¨¡å¼ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™ä¼šæŠ¥é”™ã€‚ b äºŒè¿›åˆ¶æ¨¡å¼ã€‚ + æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œæ›´æ–°(å¯è¯»å¯å†™)ã€‚ U é€šç”¨æ¢è¡Œæ¨¡å¼ï¼ˆä¸æ¨èï¼‰ã€‚ r ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ rb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºåªè¯»ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚ r+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ rb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚æ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚ w æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ wb ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚ w+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ wb+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ï¼Œå³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶å¦‚å›¾ç‰‡ç­‰ã€‚ a æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ ab ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚ a+ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¯»å†™ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚æ–‡ä»¶æ‰“å¼€æ—¶ä¼šæ˜¯è¿½åŠ æ¨¡å¼ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚ ab+ ä»¥äºŒè¿›åˆ¶æ ¼å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ç”¨äºè¯»å†™ã€‚ 6.2 è¯»å–å­—ç¬¦è¯»å–å…¨éƒ¨è¡Œ 1234f = open(&quot;test.txt&quot;,&quot;r&quot;)content = f.read(5) #è¯»äº”ä¸ªå­—ç¬¦ï¼Œè¯»å–åï¼ŒæŒ‡é’ˆå‘åç§»åˆ°5çš„ä½ç½®content1 = f.readlines() #å°†æ–‡æ¡£å…¨éƒ¨è¯»å–å‡ºæ¥ï¼ŒæŒ‰è¡Œä½œä¸ºä¸€ä¸ªå…ƒç´ æ”¾åœ¨åˆ—è¡¨é‡Œã€‚f.close() è¯»å–ä¸€è¡Œï¼š 123f = open(&quot;test.txt&quot;,&quot;r&quot;)content1 = f.readline() #è¯»å–ä¸€è¡Œï¼ŒæŒ‡é’ˆåç§»f.close() 6.3 osåº“12import osos.rename(&quot;test.txt&quot;,&quot;abc.txt&quot;) 7: é”™è¯¯ä¸å¼‚å¸¸1f = open(&quot;123.txt&quot;,&quot;r&quot;) #å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šæŠ¥é”™ 123456try: print(&quot;---1---&quot;) f = open(&quot;123.txt&quot;,&quot;r&quot;) print(&quot;---2---&quot;)except IOError: #æ–‡ä»¶æ²¡æ‰¾åˆ°å±äºIOå¼‚å¸¸ pass #æ•è·å¼‚å¸¸åçš„å¤„ç† è¦æ•è·å¼‚å¸¸ç±»å‹ï¼Œæ‰ä¸ä¼šæŠ¥é”™ æ•è·å¤šä¸ªå¼‚å¸¸ï¼š 123456try: print(&quot;---1---&quot;) f = open(&quot;123.txt&quot;,&quot;r&quot;) print(&quot;---2---&quot;)except (IOError,NameError): pass è·å–é”™è¯¯æè¿°ï¼š 123456try: print(&quot;---1---&quot;) f = open(&quot;123.txt&quot;,&quot;r&quot;) print(&quot;---2---&quot;)except IOError as result: print(result) æ•è·æ‰€æœ‰å¼‚å¸¸ï¼š 123456try: print(&quot;---1---&quot;) f = open(&quot;123.txt&quot;,&quot;r&quot;) print(&quot;---2---&quot;)except Exception as result: print(result) #æ•è·å¼‚å¸¸åçš„å¤„ç† try finally: 123456try: f = open(&quot;123.txt&quot;,&quot;r&quot;)except Exception as result: print(result)finally: f.close()","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://sci.ci/tags/Python/"}]},{"title":"phpå’Œjsä¸­çš„JSONæ“ä½œ","slug":"phpå’Œjsä¸­çš„JSONæ“ä½œ","date":"2020-07-17T03:45:51.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/07/17/phpå’Œjsä¸­çš„JSONæ“ä½œ/","link":"","permalink":"https://sci.ci/2020/07/17/php%E5%92%8Cjs%E4%B8%AD%E7%9A%84JSON%E6%93%8D%E4%BD%9C/","excerpt":"","text":"1ï¼šåŸºæœ¬çŸ¥è¯†JSON(JavaScript Object Notation, JS å¯¹è±¡ç®€è°±) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚è¿™ç§æ ¼å¼çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š 12&#123;[&#123;&quot;name&quot;:&quot;zhangsan&quot;,&quot;age&quot;:54&#125;],[&#123;&quot;name&quot;:&quot;lisi&quot;,&quot;age&quot;:56&#125;]&#125; è¯´æ˜ï¼š ä»¥ä¸ŠJSONæ•°æ®åŒ…å«äº†ä¸€ä¸ªå¯¹è±¡ï¼Œæœ€å¤–ä¾§çš„&#123;&#125;ï¼Œå¯¹è±¡å†…éƒ¨åŒ…å«äº†ä¸¤ä¸ªæ•°ç»„[],æ¯ä¸ªæ•°ç»„å†…éƒ½æœ‰ä¸€ä¸ªç»“æ„ç±»ä¼¼çš„å¯¹è±¡ï¼Œå†…ä¾§çš„&#123;&#125;ã€‚ å¯¹è±¡å’Œæ•°ç»„æ˜¯æ„æˆJSONçš„åŸºæœ¬è¦ç´ ï¼Œæ•°ç»„çš„å‡ºç°æ˜¯ä¸ºäº†è®©ç»“æ„ç›¸åŒï¼Œå³é”®åä¾‹å¦‚ï¼šnameã€ageç›¸åŒçš„å¯¹è±¡ï¼Œæ’åˆ—æ›´åŠ æ•´é½ï¼Œä¹Ÿæ–¹ä¾¿æˆ‘ä»¬ç”¨æ•°ç»„çš„æ–¹æ³•æå–ã€‚ ç”±äºå‰åç«¯æ•°æ®ä¼ é€’çš„ç‰¹ç‚¹ï¼Œå¯¹è±¡æˆ–è€…æ•°ç»„æ ¼å¼çš„æ•°æ®ä¸èƒ½ç›´æ¥ä»phpä¼ é€’åˆ°å‰ç«¯jsã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†phpä¸­çš„å¯¹è±¡/æ•°ç»„æ•°æ®ï¼Œè½¬ä¸ºå­—ç¬¦ä¸²æ ¼å¼çš„JSONæ•°æ®ï¼Œç„¶åä¼ é€’åˆ°å‰ç«¯ï¼Œå‰ç«¯jså†å°†å…¶è½¬ä¸ºå¯¹è±¡æˆ–æ•°ç»„æ ¼å¼ã€‚åä¹‹äº¦ç„¶ã€‚ 2ï¼šphpä¸­çš„jsonå¤„ç†phpä¸­ä¸»è¦æœ‰ä¸¤ä¸ªå‡½æ•°å¤„ç†jsonæ•°æ®: json_encodeã€json_decode 2.1 json_encodejson_encode:å°†æ•°ç»„ã€å¯¹è±¡è½¬ä¸ºjsonæ ¼å¼çš„å­—ç¬¦ä¸²ã€‚ ä¾‹å¦‚ï¼šphpä¸­æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œå…¶åŒ…å«é”®åå’Œé”®å€¼ã€‚ 123456789101112$arr = [ &#x27;appid&#x27; =&gt; &#x27;121434352&#x27;, &#x27;appkey&#x27; =&gt; &#x27;19b8b372c501e1fbedead782d46199a&#x27;, &#x27;callback&#x27; =&gt; &#x27;http://example.com/callback.php&#x27;, &#x27;scope&#x27; =&gt; &#x27;add_t,add_pic_t,del_t&#x27;, &#x27;errorReport&#x27; =&gt; true, &#x27;storageType&#x27; =&gt; &#x27;file&#x27;, &#x27;host&#x27; =&gt; &#x27;localhost&#x27;, &#x27;user&#x27; =&gt; &#x27;root&#x27;, &#x27;password&#x27; =&gt; &#x27;root&#x27;, &#x27;database&#x27; =&gt; &#x27;test&#x27;]; ä½¿ç”¨å°†å…¶è½¬ä¸ºå­—ç¬¦ä¸² 12$str = json_encode($arr);echo $str; è¾“å‡ºï¼š 1&#123;&quot;appid&quot;:&quot;121434352&quot;,&quot;appkey&quot;:&quot;19b8b372c501e1fbedead782d46199a&quot;,&quot;callback&quot;:&quot;http:\\/\\/example.com\\/callback.php&quot;,&quot;scope&quot;:&quot;add_t,add_pic_t,del_t&quot;,&quot;errorReport&quot;:true,&quot;storageType&quot;:&quot;file&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;user&quot;:&quot;root&quot;,&quot;password&quot;:&quot;root&quot;,&quot;database&quot;:&quot;test&quot;&#125; å¯ä»¥çœ‹åˆ°ï¼Œæ•°ç»„è¢«è½¬æ¢æˆäº†ä¸€ä¸ªå¯¹è±¡æ ·å¼çš„JSONæ•°æ®ã€‚ å¦‚æœä¸€ä¸ªæ•°ç»„ï¼Œç´¢å¼•ä¸ºæ•°å­—ã€‚ ä¾‹å¦‚ï¼š 12$arr = array(&#x27;a&#x27; , &#x27;b&#x27;, &#x27;c&#x27;);json_encode($arr); è¾“å‡ºï¼š 1[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;] å¯çœ‹åˆ°å…¶è¾“å‡ºä»ä¸ºæ•°ç»„æ ¼å¼ã€‚ å¦‚æœå¸Œæœ›å°†é”®åé”®å€¼æ ¼å¼çš„æ•°ç»„è½¬æ¢åæ ¼å¼ä»ä¿ç•™ã€‚å¯ä»¥å¯¹å…¶æ’åºï¼Œæ’åºåï¼Œä¼šä¸¢å¤±é”®åã€‚ç´¢å¼•ç»Ÿä¸€å˜ä¸ºæ•°å­—ã€‚ 123$arr = array(&#x27;1&#x27; =&gt; &#x27;a&#x27; , &#x27;2&#x27; =&gt; &#x27;b&#x27;, &#x27;3&#x27; =&gt; &#x27;c&#x27;);sort($arr);json_encode($arr); è¾“å‡ºï¼š 1[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;] 2.2 json_decodejson_decode:å°†å­—ç¬¦ä¸²è½¬ä¸ºå¯¹è±¡/æ•°ç»„æ ¼å¼ã€‚ 123$str = &#x27;&#123;&quot;appid&quot;:&quot;121434352&quot;,&quot;appkey&quot;:&quot;19b8b372c501e1fbedead782d46199a&quot;,&quot;callback&quot;:&quot;http:\\/\\/example.com\\/callback.php&quot;,&quot;scope&quot;:&quot;add_t,add_pic_t,del_t&quot;,&quot;errorReport&quot;:true,&quot;storageType&quot;:&quot;file&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;user&quot;:&quot;root&quot;,&quot;password&quot;:&quot;root&quot;,&quot;database&quot;:&quot;test&quot;&#125;&#x27;;$obj = json_decode($str);print_r($obj); ç”±äºechoåªèƒ½è¾“å‡ºå­—ç¬¦ä¸²æ ¼å¼æ•°æ®ï¼Œprint_rå’Œvar_dumpå¯ä»¥å°†æ•°ç»„å’Œå¯¹è±¡ç”¨ç‰¹å®šçš„æ ¼å¼è¾“å‡ºã€‚æ‰€ä»¥è¿™é‡Œä½¿ç”¨äº†print_rã€‚ è¾“å‡ºï¼š 12345678910111213stdClass Object( [appid] =&gt; 121434352 [appkey] =&gt; 19b8b372c501e1fbedead782d46199a [callback] =&gt; http://example.com/callback.php [scope] =&gt; add_t,add_pic_t,del_t [errorReport] =&gt; 1 [storageType] =&gt; file [host] =&gt; localhost [user] =&gt; root [password] =&gt; root [database] =&gt; test) å¯ä»¥çœ‹åˆ°ï¼Œjsonæ•°æ®è¢«è½¬æ¢æˆäº†ä¸€ä¸ªå¯¹è±¡ã€‚ ä¹Ÿå¯ä»¥ä¿®æ”¹json_decodeå‚æ•°ï¼Œå°†jsonè½¬ä¸ºæ•°ç»„ 123$str = &#x27;&#123;&quot;appid&quot;:&quot;121434352&quot;,&quot;appkey&quot;:&quot;19b8b372c501e1fbedead782d46199a&quot;,&quot;callback&quot;:&quot;http:\\/\\/example.com\\/callback.php&quot;,&quot;scope&quot;:&quot;add_t,add_pic_t,del_t&quot;,&quot;errorReport&quot;:true,&quot;storageType&quot;:&quot;file&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;user&quot;:&quot;root&quot;,&quot;password&quot;:&quot;root&quot;,&quot;database&quot;:&quot;test&quot;&#125;&#x27;;$arr = json_decode($str, true);var_dump($arr); è¿™é‡Œï¼Œå†json_decodeå‚æ•°é‡Œæ·»åŠ trueï¼Œè¡¨ç¤ºå°†jsonè½¬ä¸ºæ•°ç»„ã€‚å¹¶ä½¿ç”¨var_dumpæ¥è¾“å‡ºæ•°ç»„ã€‚ var_dumpè¾“å‡ºç»“æœï¼š 12345678910111213141516171819202122array(10) &#123; [&quot;appid&quot;]=&gt; string(9) &quot;121434352&quot; [&quot;appkey&quot;]=&gt; string(31) &quot;19b8b372c501e1fbedead782d46199a&quot; [&quot;callback&quot;]=&gt; string(31) &quot;http://example.com/callback.php&quot; [&quot;scope&quot;]=&gt; string(21) &quot;add_t,add_pic_t,del_t&quot; [&quot;errorReport&quot;]=&gt; bool(true) [&quot;storageType&quot;]=&gt; string(4) &quot;file&quot; [&quot;host&quot;]=&gt; string(9) &quot;localhost&quot; [&quot;user&quot;]=&gt; string(4) &quot;root&quot; [&quot;password&quot;]=&gt; string(4) &quot;root&quot; [&quot;database&quot;]=&gt; string(4) &quot;test&quot;&#125; å¯¹æ¯”print_rè¾“å‡ºç»“æœï¼š 1234567891011121314Array( [appid] =&gt; 121434352 [appkey] =&gt; 19b8b372c501e1fbedead782d46199a [callback] =&gt; http://example.com/callback.php [scope] =&gt; add_t,add_pic_t,del_t [errorReport] =&gt; 1 [storageType] =&gt; file [host] =&gt; localhost [user] =&gt; root [password] =&gt; root [database] =&gt; test) 2.3 å¯¹è±¡æ•°ç»„æ“ä½œ2.3.1 å¯¹è±¡æ“ä½œphpä¸­ï¼Œæ ¹æ®å¯¹è±¡é”®åè·å–é”®å€¼çš„æ–¹å¼æ˜¯-&gt; æ¯”å¦‚æˆ‘ä»¬è½¬æ¢äº†ä»¥ä¸‹å¯¹è±¡ï¼Œ 12$str = &#x27;&#123;&quot;appid&quot;:&quot;121434352&quot;,&quot;appkey&quot;:&quot;19b8b372c501e1fbedead782d46199a&quot;,&quot;callback&quot;:&quot;http:\\/\\/example.com\\/callback.php&quot;,&quot;scope&quot;:&quot;add_t,add_pic_t,del_t&quot;,&quot;errorReport&quot;:true,&quot;storageType&quot;:&quot;file&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;user&quot;:&quot;root&quot;,&quot;password&quot;:&quot;root&quot;,&quot;database&quot;:&quot;test&quot;&#125;&#x27;;$obj = json_decode($str); ç°åœ¨è·å–appkey 12$appkey = $obj-&gt;appkey;echo $appkey; è¾“å‡ºï¼š 119b8b372c501e1fbedead782d46199a 2.3.2 æ•°ç»„æ“ä½œè½¬æ¢çš„æ•°ç»„ï¼š 12$str = &#x27;&#123;&quot;appid&quot;:&quot;121434352&quot;,&quot;appkey&quot;:&quot;19b8b372c501e1fbedead782d46199a&quot;,&quot;callback&quot;:&quot;http:\\/\\/example.com\\/callback.php&quot;,&quot;scope&quot;:&quot;add_t,add_pic_t,del_t&quot;,&quot;errorReport&quot;:true,&quot;storageType&quot;:&quot;file&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;user&quot;:&quot;root&quot;,&quot;password&quot;:&quot;root&quot;,&quot;database&quot;:&quot;test&quot;&#125;&#x27;;$arr = json_decode($str, true); æ“ä½œæ•°ç»„ï¼Œè·å–appkeyï¼š 12$appkey = $arr[&#x27;appkey&#x27;];echo $appkey è¾“å‡ºï¼š 119b8b372c501e1fbedead782d46199a 3ï¼šJSä¸­çš„jsonå¤„ç†ä¸phpä¸­å¤„ç†æ–¹å¼ç›¸å¯¹åº”ï¼Œå­˜åœ¨JSON.stringifyå’ŒJSON.parseä¸¤ä¸ªå‡½æ•° 3.1 JSON.stringifyå¯¹è±¡ã€æ•°ç»„è½¬ä¸ºå­—ç¬¦ä¸²æ ¼å¼ã€‚ å¯¹è±¡å­—ç¬¦ä¸²åŒ–ï¼š 1234567var Person=&#123;&#125;; //ç­‰åŒäºvar Person =new Object();var Person=&#123;name:&quot;Jason&quot;,age:21&#125;var str=JSON.stringify(Person)alert(str); è¾“å‡ºï¼š 1&#123;&quot;name&quot;:&quot;Jason&quot;,&quot;age&quot;:21&#125; æ•°ç»„å­—ç¬¦ä¸²åŒ–ï¼š 12345var mycars=new Array();mycars[0]=&quot;Saab&quot;;mycars[1]=&quot;Volvo&quot;;mycars[2]=&quot;BMW&quot;;alert(JSON.stringify(mycars)); è¾“å‡ºï¼š 1[&quot;Saab&quot;,&quot;Volvo&quot;,&quot;BMW&quot;] 3.2 JSON.parseå­—ç¬¦ä¸²è½¬æ•°ç»„ã€å¯¹è±¡ã€‚ è½¬å¯¹è±¡ï¼š 123var str = &#x27;&#123;&quot;appid&quot;:&quot;121434352&quot;,&quot;appkey&quot;:&quot;19b8b372c501e1fbedead782d46199a&quot;,&quot;callback&quot;:&quot;http:\\/\\/example.com\\/callback.php&quot;,&quot;scope&quot;:&quot;add_t,add_pic_t,del_t&quot;,&quot;errorReport&quot;:true,&quot;storageType&quot;:&quot;file&quot;,&quot;host&quot;:&quot;localhost&quot;,&quot;user&quot;:&quot;root&quot;,&quot;password&quot;:&quot;root&quot;,&quot;database&quot;:&quot;test&quot;&#125;&#x27;;var obj= JSON.parse(str);alert(obj); è¾“å‡ºï¼š 1[object Object] ä»¥ä¸Šè¯´æ˜è¾“å‡ºçš„æ•°æ®æ ¼å¼ä¸ºå¯¹è±¡ã€‚ è½¬æ•°ç»„ï¼š 123var str = &#x27;[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]&#x27;;var arr= JSON.parse(str);alert(arr); è¾“å‡ºï¼š 1a,b,c 3.3 å¯¹è±¡æ•°ç»„æ“ä½œ3.3.1 å¯¹è±¡æ“ä½œåˆ›å»ºå¯¹è±¡ï¼š 12345var Person=&#123;&#125;; //ç­‰åŒäºvar Person =new Object();var Person=&#123;name:&quot;Jason&quot;,age:21&#125; è·å–nameå¯¹åº”çš„é”®å€¼ï¼š 12var name = Person.name;alert(name); æˆ–è€…ï¼š 12var name = Person[&#x27;name&#x27;];alert(name); 3.3.2 æ•°ç»„æ“ä½œ12var arr = [&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;];alert(arr[0]);","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"JSON","slug":"JSON","permalink":"https://sci.ci/tags/JSON/"}]},{"title":"gitä½¿ç”¨è®°å½•","slug":"gitä½¿ç”¨è®°å½•","date":"2020-07-11T17:03:53.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/07/12/gitä½¿ç”¨è®°å½•/","link":"","permalink":"https://sci.ci/2020/07/12/git%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1ï¼šgitæŒ‡ä»¤1git clone https://github.com/user/repo/program.git å°†è¿œç¨‹ä»“åº“å…‹éš†åˆ°gitæ‰“å¼€çš„ç›®å½•ã€‚ 1git switch -c dev æ–°å»ºå¹¶åˆ‡æ¢è‡³devåˆ†æ”¯ã€‚ 1git switch dev åˆ‡æ¢åˆ°devåˆ†æ”¯ 1git add . å°†æ‰€æœ‰å˜æ›´æäº¤è‡³ç¼“å†²åŒº 1git commit -m &quot;message&quot; ä¸ºç¼“å†²åŒºçš„å˜æ›´æ·»åŠ æ›´æ–°çš„æç¤º 1git push origin dev å°†æœ¬åœ°ç¼“å†²åŒºçš„å˜æ›´æ›´æ–°åˆ°è¿œç¨‹ä»“åº“devåˆ†æ”¯ã€‚ 1git merge dev å°†devåˆ†æ”¯çš„å†…å®¹æ›´æ–°è‡³å½“å‰æ‰€åœ¨åˆ†æ”¯ã€‚ 1git pull origin dev æ‹‰å»è¿œç¨‹ä»“åº“devåˆ†æ”¯çš„å†…å®¹åˆ°æœ¬åœ°ä»“åº“ 2ï¼š.gitignoreåœ¨æ›´æ–°è¿œç¨‹ä»“åº“æ—¶ï¼Œå¯ä»¥æŒ‡å®šéƒ¨åˆ†æœ¬åœ°ä»“åº“çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ä¸æ¨é€è‡³è¿œç¨‹ä»“åº“ã€‚ åœ¨ä»“åº“æ ¹ç›®å½•ä¸‹æ–°å»º.gitignoreæ–‡ä»¶ï¼Œç›´æ¥ç¼–è¾‘å†…å®¹å³å¯ 1&#x2F;config&#x2F;* å¿½ç•¥æ ¹ç›®å½•ä¸‹çš„/configæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚ 1config&#x2F;* å¿½ç•¥ä»»æ„è·¯å¾„ä¸‹çš„/configæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ã€‚ 1&#x2F;config&#x2F;*!README.md å¿½ç•¥æ ¹ç›®å½•ä¸‹çš„/configæ–‡ä»¶å¤¹ä¸‹é™¤README.mdä»¥å¤–çš„æ‰€æœ‰æ–‡ä»¶ 1&#x2F;config&#x2F;README.md å¿½ç•¥æ ¹ç›®å½•ä¸‹çš„/configæ–‡ä»¶å¤¹ä¸‹çš„README.mdæ–‡ä»¶ 3ï¼šç‰ˆæœ¬æ§åˆ¶releaseç‰ˆæœ¬ï¼Œæœ‰åŠ©äºä¿å­˜é˜¶æ®µæ€§æˆæœã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://sci.ci/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"Git","slug":"Git","permalink":"https://sci.ci/tags/Git/"}]},{"title":"ä½¿ç”¨JsDelivrç»™é™æ€èµ„æºåŠ é€Ÿ","slug":"ä½¿ç”¨JsDelivrç»™é™æ€èµ„æºåŠ é€Ÿ","date":"2020-07-11T14:37:07.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/07/11/ä½¿ç”¨JsDelivrç»™é™æ€èµ„æºåŠ é€Ÿ/","link":"","permalink":"https://sci.ci/2020/07/11/%E4%BD%BF%E7%94%A8JsDelivr%E7%BB%99%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E5%8A%A0%E9%80%9F/","excerpt":"","text":"githubä»“åº“é‡Œçš„jsã€cssé™æ€èµ„æºæ˜¯æ— æ³•è¢«ç›´æ¥æ”¾åœ¨ç½‘é¡µçš„é™æ€èµ„æºurlé‡Œçš„ï¼Œå› æ­¤ï¼Œéœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·æ¥å¼•ç”¨ã€‚ è¿™é‡Œä½¿ç”¨JsDelivrã€‚ è¯´æ˜æ‰“å¼€jsDeliverå®˜ç½‘ï¼Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨æ–¹å¼ï¼š 12345&#x2F;&#x2F; load any GitHub release or commit&#x2F;&#x2F; note: we recommend using npm for projects that support ithttps:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;user&#x2F;repo@version&#x2F;file userï¼šgithubç”¨æˆ·å repoï¼šä»“åº“å versionï¼š(Tag)ç‰ˆæœ¬å fileï¼šæ–‡ä»¶è·¯å¾„ æ­¥éª¤ç¬¬ä¸€æ­¥ï¼šå°†é™æ€èµ„æºpushåˆ°ä»“åº“ ç¬¬äºŒæ­¥ï¼šreleaseä¸€ä¸ªç‰ˆæœ¬ ç¬¬ä¸‰æ­¥ï¼šæ ¹æ®ä¸Šé¢çš„cdnæ–¹å¼ï¼Œè·å–é™æ€èµ„æºcdnèµ„æºã€‚ å‚è€ƒèµ„æ–™ã€Šä½¿ç”¨Githubæ‰˜ç®¡jså’Œcssæ–‡ä»¶ã€‹","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"JsDelivr","slug":"JsDelivr","permalink":"https://sci.ci/tags/JsDelivr/"}]},{"title":"Oneindex+YAAWå¢åŠ åå°ç¦»çº¿ä¸Šä¼ ","slug":"Oneindex-YAAWå¢åŠ åå°ç¦»çº¿ä¸Šä¼ ","date":"2020-06-25T03:07:03.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/25/Oneindex-YAAWå¢åŠ åå°ç¦»çº¿ä¸Šä¼ /","link":"","permalink":"https://sci.ci/2020/06/25/Oneindex-YAAW%E5%A2%9E%E5%8A%A0%E5%90%8E%E5%8F%B0%E7%A6%BB%E7%BA%BF%E4%B8%8A%E4%BC%A0/","excerpt":"","text":"ä¸€ï¼šç®€ä»‹Yaawæ˜¯ä¸ªå¼€æºçš„aria2çš„WebUIï¼Œé€šè¿‡è¿™ä¸ªUIå¯ä»¥ä½¿ç”¨aria2çš„rpcåŠŸèƒ½ï¼Œå‘aria2å‘é€ä¸‹è½½æŸæ–‡ä»¶çš„æŒ‡ä»¤ã€‚æˆ‘å°†yaawåµŒå…¥åˆ°äº†Oneindexåå°ï¼ŒåŒæ—¶åœ¨å‰å°ä¹Ÿéƒ¨ç½²äº†yaawä¾›æ¸¸å®¢ä½¿ç”¨ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/xieqifei/OneindexN Demoï¼šhttps://pan.sci.ci åå°é¢„è§ˆï¼š äºŒï¼šéƒ¨ç½²ç½‘ç«™ç½‘ç«™ç¯å¢ƒå°½é‡ä½¿ç”¨nginxã€‚åé¢ä¼šç”¨nginxåšåä»£ï¼Œå¯ä»¥é¿å…ä¿®æ”¹yaawçš„rpcå‚æ•°ã€‚ åœ¨githubä¸Šå°†ç½‘ç«™ä¸‹è½½ä¸‹æ¥ã€‚å¯ä»¥ç›´æ¥ä¸‹è½½ä¸ºzipå‹ç¼©åŒ… å°†æ–‡ä»¶è§£å‹åˆ°ç½‘ç«™æ ¹ç›®å½•ã€‚ è¿›å…¥ç½‘ç«™é¦–é¡µã€‚é…ç½®ç½‘ç«™ã€‚ ä¸‰ï¼šä¿®æ”¹Nginxé…ç½®æ·»åŠ  12345678location &#x2F;jsonrpc &#123; proxy_pass http:&#x2F;&#x2F;localhost:6800&#x2F;jsonrpc; proxy_redirect off; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header Host $host; &#125; è¿™æ ·RPCå¯ä»¥é…ç½®ä¸ºhttp://yoursite/jsonrpcã€‚ç½‘ç«™åå°é»˜è®¤çš„RPCå°±æ˜¯http://yoursite/jsonrpc å…³é—­aria2è¿œç¨‹RPC ä»…æœ¬åœ°ä¹Ÿå°±æ˜¯443è½¬å‘çš„è¯·æ±‚èƒ½åˆ°è¾¾6800ã€‚ 1vim /root/.aria2c/aria2.conf ä¿®æ”¹aria2é…ç½®å†…å®¹ 12345678# å¯ç”¨RPC, é»˜è®¤:falseenable-rpc&#x3D;true# æ¥å—æ‰€æœ‰è¿œç¨‹è¯·æ±‚, é»˜è®¤:falserpc-allow-origin-all&#x3D;false# å…è®¸å¤–éƒ¨è®¿é—®, é»˜è®¤:falserpc-listen-all&#x3D;false# RPCç›‘å¬ç«¯å£, ç«¯å£è¢«å ç”¨æ—¶å¯ä»¥ä¿®æ”¹, é»˜è®¤:6800rpc-listen-port&#x3D;6800 å¦‚æœä¸é…ç½®nginxï¼Œéœ€è¦è‡ªå·±ä¿®æ”¹RPCè®¾ç½®ã€‚å¹¶ä¸”aria2é…ç½®éœ€è¦å¼€æ”¾è¿œç¨‹RPC å››ï¼šå‚è€ƒèµ„æ–™ã€Šgithub YAAWé¡¹ç›®ã€‹ ã€ŠIssueï¼šä¸€æ—¦ä½¿ç”¨HTTPSåè®®å°±æ— æ³•è¿æ¥ã€‹ ã€ŠNginx åå‘ä»£ç† Aria2 JSONRPCã€‹","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"YAAW","slug":"YAAW","permalink":"https://sci.ci/tags/YAAW/"},{"name":"Oneindex","slug":"Oneindex","permalink":"https://sci.ci/tags/Oneindex/"}]},{"title":"éƒ¨ç½²Aria2+Rcloneå®ç°ç¦»çº¿ä¸‹è½½æ–‡ä»¶åˆ°Onedrive","slug":"éƒ¨ç½²Aria2-Rcloneå®ç°ç¦»çº¿ä¸‹è½½æ–‡ä»¶åˆ°Onedrive","date":"2020-06-25T01:55:43.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/06/25/éƒ¨ç½²Aria2-Rcloneå®ç°ç¦»çº¿ä¸‹è½½æ–‡ä»¶åˆ°Onedrive/","link":"","permalink":"https://sci.ci/2020/06/25/%E9%83%A8%E7%BD%B2Aria2-Rclone%E5%AE%9E%E7%8E%B0%E7%A6%BB%E7%BA%BF%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E5%88%B0Onedrive/","excerpt":"","text":"ä¸€ï¼šå‰è¨€Aria2æ˜¯ä¸€æ¬¾å¤šçº¿ç¨‹ä¸‹è½½çš„åº”ç”¨ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨ç½‘ç»œå¸¦å®½ï¼Œå®ç°æ»¡é€Ÿä¸‹è½½ã€‚Rcloneæ˜¯ä¸ªç½‘ç›˜ç®¡ç†å·¥å…·ï¼Œå¯ä»¥ç»‘å®šOnedriveå®ç°å°†ç½‘ç›˜æŒ‚è½½åˆ°æœ¬åœ°ã€‚åˆ©ç”¨aria2å’ŒRcloneï¼Œå¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šé€šè¿‡æŒ‡ä»¤ï¼Œç›´æ¥å°†è¿œç¨‹æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¹¶è‡ªåŠ¨ä¿å­˜åˆ°Onedriveã€‚ äºŒï¼šå®‰è£…Aria2æ¨èä½¿ç”¨ä¸€é”®è„šæœ¬ï¼š 1wget -N git.io/aria2.sh &amp;&amp; chmod +x aria2.sh &amp;&amp; ./aria2.sh æ­¤è„šæœ¬ä¼šè‡ªåŠ¨ä¸‹è½½å…³è”Rcloneçš„è„šæœ¬ï¼Œå³aria2æ–‡ä»¶ä¸‹è½½ç»“æŸè‡ªåŠ¨æ–‡ä»¶ä¸Šä¼ åˆ°Onedriveã€‚ ä¸‰ï¼šå®‰è£…rclone1curl https://rclone.org/install.sh | sudo bash å®‰è£…å®Œæ¯•ï¼Œé…ç½®rclone 1rclone config é…ç½®æ–¹å¼å‚è€ƒã€ŠRcloneåœ¨winä¸ŠæŒ‚åœ¨Onedriveã€‹ï¼Œä½†æ˜¯ä¸å®Œå…¨ç›¸åŒã€‚ å¦‚æœä½ çš„ç³»ç»Ÿæœ‰UIï¼Œé‚£ä¹ˆå¯ä»¥å’Œåœ¨winä¸Šä¸€æ ·é…ç½®rcloneã€‚å¦‚æœæ˜¯çº¯æŒ‡ä»¤ç•Œé¢ï¼Œåˆ™æŒ‰ä¸‹é¢æ“ä½œé…ç½®ã€‚ ä½ éœ€è¦ç°åœ¨windowsä¸Šéƒ¨ç½²rcloneï¼Œä»¥è·å–onedriveæˆæƒçš„tokenã€‚tokenåœ¨C:\\Users\\ä½ çš„ç”¨æˆ·å\\.config\\rcloneä¸­ æ‰“å¼€rclone.confå°†tokenä»&#123;&quot;access_token&quot;:å¼€å§‹åˆ°&#125;ç»“æŸçš„å†…å®¹å¤åˆ¶ä¸‹æ¥ã€‚ åœ¨rclone configå‡ºç° 1234567Remote config Use auto config? * Say Y if not sure * Say N if you are working on a remote or headless machiney) Yes (default) n) No y/n&gt; æ—¶è¾“å…¥ nï¼Œä¸è‡ªåŠ¨é…ç½®ã€‚ åœ¨æ¥ä¸‹æ¥å‡ºç°çš„ 1result&gt; ä¸­ï¼Œè¾“å…¥ä½ æ‹·è´çš„tokenã€‚ å‰©ä¸‹çš„å’Œwindowsé…ç½®ç›¸åŒã€‚ ç„¶åä¿®æ”¹aria2é…ç½®ï¼Œä»¥é…ç½®å°†ä¸‹è½½æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ åˆ°onedrive å››ï¼šé…ç½®è‡ªåŠ¨ä¸Šä¼ è„šæœ¬Aria2 ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬ å¢å¼ºç‰ˆ æ•´åˆäº† Aria2 å®Œç¾é…ç½® ï¼Œå®‰è£…åä¼šé™„å¸¦ä¸€äº›åˆ—å¢å¼ºåŠŸèƒ½è„šæœ¬ï¼ŒRclone è‡ªåŠ¨ä¸Šä¼ è„šæœ¬å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚ç”±äºé»˜è®¤ä¸å¯ç”¨ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨å¯ç”¨ã€‚ è¾“å…¥vim /root/.aria2c/autoupload.shæ‰“å¼€è‡ªåŠ¨ä¸Šä¼ è„šæœ¬è¿›è¡Œç¼–è¾‘ï¼Œè„šæœ¬ä¸­æœ‰ä¸­æ–‡æ³¨é‡Šï¼ŒæŒ‰ç…§è‡ªå·±çš„å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ï¼Œä¸€èˆ¬åªéœ€è¦ä¿®æ”¹ä¸‹é¢2ä¸ªéƒ¨åˆ†ã€‚ 1234# Rclone é…ç½®æ—¶å¡«å†™çš„ç½‘ç›˜å(name)DRIVE_NAME&#x3D;&#39;Onedrive&#39;# ç½‘ç›˜ç›®å½•ã€‚å³ä¸Šä¼ ç›®æ ‡è·¯å¾„ï¼Œç•™ç©ºä¸ºç½‘ç›˜æ ¹ç›®å½•ï¼Œæœ«å°¾ä¸è¦æœ‰æ–œæ ã€‚DRIVE_PATH&#x3D;&#39;&#x2F;DRIVEX&#x2F;Download&#39; è¾“å…¥vim /root/.aria2c/aria2.confæ‰“å¼€ Aria2 é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚æˆ–ä½¿ç”¨Aria2 ä¸€é”®å®‰è£…ç®¡ç†è„šæœ¬ å¢å¼ºç‰ˆä¸­çš„æ‰‹åŠ¨ä¿®æ”¹é€‰é¡¹æ‰“å¼€é…ç½®æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚æ‰¾åˆ°â€œä¸‹è½½å®Œæˆåæ‰§è¡Œçš„å‘½ä»¤â€ï¼ŒæŠŠdelete.aria2.shæ›¿æ¢ä¸ºautoupload.shã€‚ 12# ä¸‹è½½å®Œæˆåæ‰§è¡Œçš„å‘½ä»¤on-download-complete&#x3D;&#x2F;root&#x2F;.aria2c&#x2F;autoupload.sh é‡å¯ Aria2 1service aria2 restart äº”ï¼šå‚è€ƒèµ„æ–™ã€ŠAria2 + Rclone å®ç° OneDriveã€Google Drive ç­‰ç½‘ç›˜ç¦»çº¿ä¸‹è½½ã€‹","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"Rclone","slug":"Rclone","permalink":"https://sci.ci/tags/Rclone/"},{"name":"Aria2","slug":"Aria2","permalink":"https://sci.ci/tags/Aria2/"}]},{"title":"Rcloneåœ¨winä¸ŠæŒ‚åœ¨Onedrive","slug":"Rcloneåœ¨winä¸ŠæŒ‚åœ¨Onedrive","date":"2020-06-22T12:07:26.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/22/Rcloneåœ¨winä¸ŠæŒ‚åœ¨Onedrive/","link":"","permalink":"https://sci.ci/2020/06/22/Rclone%E5%9C%A8win%E4%B8%8A%E6%8C%82%E5%9C%A8Onedrive/","excerpt":"","text":"ä¸€ï¼šRcloneä¸‹è½½é¦–å…ˆä¸‹è½½é€‚ç”¨äº Windows çš„ rclone ğŸ‘‡ å®˜ç½‘ä¸‹è½½ï¼šhttps://rclone.org/downloads/GitHubä¸‹è½½ï¼šhttps://github.com/ncw/rclone åœ¨rcloneå®˜ç½‘ä¸­ï¼ŒWindows å¹³å°ä¸‹é€‰æ‹©ä¸‹è½½ AMD64 - 64 Bit æˆ–è€…åœ¨githubä¸‹è½½ã€‚ ä¸‹è½½åè§£å‹åˆ°ä¸€ä¸ªè‹±æ–‡è·¯å¾„ä¸­ã€‚ å¦å¤–åœ¨Windowså¹³å°ä½¿ç”¨rcloneè¿˜éœ€è¦å¦ä¸€ä¸ªä¾èµ–å·¥å…·winfspï¼Œä¸‹è½½åœ°å€ï¼šhttp://www.secfs.net/winfsp/download/ ï¼Œä¸‹è½½åä¸€è·¯å®‰è£…å³å¯ã€‚ äºŒï¼š é…ç½®ç¯å¢ƒå˜é‡ åœ¨ç”µè„‘æ¡Œé¢å³é”®ç‚¹å‡»â€œæ­¤ç”µè„‘â€çš„â€œå±æ€§â€é€‰é¡¹ é€‰æ‹©â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€é€‰é¡¹ åœ¨ç³»ç»Ÿå˜é‡ä¸­æ‰¾åˆ°pathï¼Œæ–°å»ºæ·»åŠ åˆšæ‰è§£å‹åçš„è·¯å¾„ æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æˆåŠŸã€‚ æŒ‰win+Xï¼Œç„¶åæŒ‰A æ‰“å¼€ powershell ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å»æ‰“å¼€ cmd ï¼Œè¾“å…¥rclone --versionï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„è¾“å‡ºåˆ™å®‰è£…æˆåŠŸï¼Œå¦åˆ™æ£€æŸ¥ä¸Šé¢æ­¥éª¤çš„ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æ­£ç¡®ã€‚ ä¸‰ï¼šé…ç½®Rcloneåœ¨ç»ˆç«¯ä¸­ä¾æ¬¡è¾“å…¥ä»¥ä¸‹å‘½ä»¤è¡Œï¼Œè¯·æ ¹æ®æˆ‘ä¸‹çš„æ­¥éª¤è¿›æ“ä½œã€‚ ä¸‹è½½ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158PS C:\\WINDOWS\\system32&gt; rclone config // ç¬¬ä¸€æ­¥åœ¨ç»ˆç«¯è¾“å…¥ rclone config2020/06/22 19:36:22 NOTICE: Config file &quot;C:\\\\Users\\\\12412\\\\.config\\\\rclone\\\\rclone.conf&quot; not found - using defaultsNo remotes found - make a new onen) New remotes) Set configuration passwordq) Quit confign/s/q&gt; n //ç¬¬äºŒæ­¥è¾“å…¥nåˆ›å»ºæ–°çš„é…ç½®ï¼Œ name&gt; Onedrive_local //ç¬¬ä¸‰æ­¥ è¾“å…¥ä¸€ä¸ªè‹±æ–‡åç§° ï¼Œä¸­é—´ä¹Ÿä¸è¦æœ‰ç©ºæ ¼Type of storage to configure.Enter a string value. Press Enter for the default (&quot;&quot;).Choose a number from below, or type in your own value 1 / 1Fichier \\ &quot;fichier&quot; 2 / Alias for an existing remote \\ &quot;alias&quot; 3 / Amazon Drive \\ &quot;amazon cloud drive&quot; 4 / Amazon S3 Compliant Storage Provider (AWS, Alibaba, Ceph, Digital Ocean, Dreamhost, IBM COS, Minio, etc) \\ &quot;s3&quot; 5 / Backblaze B2 \\ &quot;b2&quot; 6 / Box \\ &quot;box&quot; 7 / Cache a remote \\ &quot;cache&quot; 8 / Citrix Sharefile \\ &quot;sharefile&quot; 9 / Dropbox \\ &quot;dropbox&quot;10 / Encrypt/Decrypt a remote \\ &quot;crypt&quot;11 / FTP Connection \\ &quot;ftp&quot;12 / Google Cloud Storage (this is not Google Drive) \\ &quot;google cloud storage&quot;13 / Google Drive \\ &quot;drive&quot;14 / Google Photos \\ &quot;google photos&quot;15 / Hubic \\ &quot;hubic&quot;16 / In memory object storage system. \\ &quot;memory&quot;17 / Jottacloud \\ &quot;jottacloud&quot;18 / Koofr \\ &quot;koofr&quot;19 / Local Disk \\ &quot;local&quot;20 / Mail.ru Cloud \\ &quot;mailru&quot;21 / Mega \\ &quot;mega&quot;22 / Microsoft Azure Blob Storage \\ &quot;azureblob&quot;23 / Microsoft OneDrive \\ &quot;onedrive&quot;24 / OpenDrive \\ &quot;opendrive&quot;25 / OpenStack Swift (Rackspace Cloud Files, Memset Memstore, OVH) \\ &quot;swift&quot;26 / Pcloud \\ &quot;pcloud&quot;27 / Put.io \\ &quot;putio&quot;28 / QingCloud Object Storage \\ &quot;qingstor&quot;29 / SSH/SFTP Connection \\ &quot;sftp&quot;30 / Sugarsync \\ &quot;sugarsync&quot;31 / Tardigrade Decentralized Cloud Storage \\ &quot;tardigrade&quot;32 / Transparently chunk/split large files \\ &quot;chunker&quot;33 / Union merges the contents of several upstream fs \\ &quot;union&quot;34 / Webdav \\ &quot;webdav&quot;35 / Yandex Disk \\ &quot;yandex&quot;36 / http Connection \\ &quot;http&quot;37 / premiumize.me \\ &quot;premiumizeme&quot;38 / seafile \\ &quot;seafile&quot;Storage&gt; 23 //ç¬¬å››æ­¥ è¾“å…¥è¦é…ç½®çš„ç½‘ç›˜ç±»å‹ å› ä¸ºæˆ‘ä»¬è¦é…ç½®Microsoft OneDrive å› æ­¤è¾“å…¥23** See help for onedrive backend at: https://rclone.org/onedrive/ **Microsoft App Client IdLeave blank normally.Enter a string value. Press Enter for the default (&quot;&quot;).client_id&gt; //ç¬¬äº”æ­¥ ç›´æ¥å›è½¦Microsoft App Client SecretLeave blank normally.Enter a string value. Press Enter for the default (&quot;&quot;).client_secret&gt; //ç¬¬å…­æ­¥ ç›´æ¥å›è½¦ Edit advanced config? (y/n)y) Yesn) No (default)y/n&gt; n //ç¬¬ä¸ƒæ­¥ è¾“å…¥n ä¸è¿›è¡Œé«˜çº§é…ç½® Remote configUse auto config? * Say Y if not sure * Say N if you are working on a remote or headless machiney) Yes (default)n) Noy/n&gt; y //ç¬¬å…«æ­¥ è¾“å…¥y ä½¿ç”¨è‡ªåŠ¨é…ç½®æˆæƒIf your browser doesn&#x27;t open automatically go to the following link: http://127.0.0.1:53682/auth?state=DWKiZ1cLZoWl9buxJbPXgwLog in and authorize rclone for accessWaiting for code...Got codeChoose a number from below, or type in an existing value 1 / OneDrive Personal or Business \\ &quot;onedrive&quot; 2 / Root Sharepoint site \\ &quot;sharepoint&quot; 3 / Type in driveID \\ &quot;driveid&quot; 4 / Type in SiteID \\ &quot;siteid&quot; 5 / Search a Sharepoint site \\ &quot;search&quot;Your choice&gt; 1 //ç¬¬ä¹æ­¥ è¾“å…¥1 å› ä¸ºç°åœ¨æˆ‘é…ç½®çš„æ˜¯ OneDrive Personal or Business ç±»å‹çš„ç½‘ç›˜Found 1 drives, please select the one you want to use:0: (personal) id=58719e3298535c9Chose drive to use:&gt; 0 //ç¬¬åæ­¥ è¾“å…¥0Found drive &#x27;root&#x27; of type &#x27;personal&#x27;, URL: https://onedrive.live.com/?cid=058719e3298535c9Is that okay?y) Yes (default)n) No //ç¬¬åä¸€æ­¥ ç›´æ¥å›è½¦y/n&gt;--------------------[Onedrive_local]type = onedrivetoken = &#123;&quot;access_token&quot;:&quot;BAAUO9chh8cJscQLmU+LSWpbnr0vmwwAAZ6th5X8qdv3jqko0KCKeFVHdJigXdmpkGf3aO/W9HQahNAmDTxEVF2TnPtPNCw7M/me6FRz4mD9+x/jfJIb8Qewi8NpYMfYXdmPyUUVcPp1G+bwKOIFfJlNa6Can21gaGhTKgdEaz27GwetIvwjy7Qo/eDh/jarwoHEKljM8fN3UF1xz/RS0Ir+DC6CrvNIP3MUpbBF31/qUWJekWn3XqdT1j6m9bBfJ9Xk8heaY1/MT+1SA6fs6IPV5mO5m6dtjfsr1wO3xLGuaEutBPlNT9t219R55MZibwt746mw+VRTMCLsMrFZqVGK6IHzXyG3t+5NOrdP9yelb0AVQDZgAACJVvxd1cmt0LOAKEWlmYeQi3Eo6NKs9l5Abb4AsL2V02tbQt3AheMGLOxpOfyWOUUNaqvFAdSWRGQU8JLgFOA0YWy+UtYHSBG8SIy40jFI5czeqFoCzXguNijP2eiE+JdJREz9fO0q947/QK0K4MxVBqQxmlD1RDujCtnIDsT5r1ICG2AN40wSWqGvanKyctRNPdEm0BjmTrmXh0qTinmJ+BBVe70AU3ZigEzfMULxP+i+vwI2rA7VbiAuXnDUE75t49RGBiCMS+p00x0smGI685pmbPYQoOcMuVLHVdIxSDCO+YLSgpaHaBrruIvFbhto0OczwvYKn8XXEIp0CM6XEy55UYTuLkJFRDWX9VB/mSHarvexYqtEi4EYK2nABm4KrngexH0IdyhdwDKx7gNnLcMP9YYXG0cybppINxx67jFxjQM8/TWQPAz4cADt/FfPPVvuVABOZdhKmpuScj6qOhWsCfh6KH385UiM2Z+Rn2t9hZaXt3ZRmu+W5XAx9+E1SnlewdTiH5/VwB8QhCuRvS89hK/51BeMz4cJ5R9dLEqjGDxZ0HHay52DDhQYta/yG0VN2pkWTg0+T7rVdXbgC607y47sWmqP540tigNZPc0AgrWK3TXFOAJAEAoV9Xg+QUhJKYQNnrtFWI9nKbSFVHEeg8vvl5efZviF2szVI4wProgIHpUydqfnMlR3vRZlei/rmGUC9IICjdNTKPWSGmilJdbdxHMUc/MDyfYhxJA69cwI=&quot;,&quot;token_type&quot;:&quot;Bearer&quot;,&quot;refresh_token&quot;:&quot;MCeVIl4QGaJb!yGdTF6FLD!8N7hR4D8Z1bV4mpta08v64kR!MLcolxhea*NOv24M5V!uqHzBvi5dSW9wVHXGqALSe9kML5HKxV12XougeYafX2dcdyxvZ*cYEa6D0l6hIzovUwFpVjv3lqiP66jpzY4KxYMtZqQHf5PN!VGJf52xDKcsIUseoKD98z7olU3E2kyaZqJW8j6o5dBTV!Lmo5DVc31VpGrfeUnwhOcZkO7xN7IUEy8Vs9YXKQ0C4cin4qpyDSQ3pLpwy09ZpVE2bKOt4XQP7JLWQa6iGQ*r8zgewRo7ULYoEpRXYsqSBdwX6pJEQnRzCDcJimHxXBEV59rE*Ykwc9SijTkBN4haK6br9y2YVQ2UKegfQiErCHY33kzmSMAPJUwiooUNc6GytUz5O6ZxsBMghhb6B6NiSBCs!U5xRon1y*zzOsh9EArHk4y2rihu7BkkC13bJqxeMvhw$&quot;,&quot;expiry&quot;:&quot;2020-06-22T20:38:09.8687266+08:00&quot;&#125;drive_id = 58719e3298825c9drive_type = personal--------------------y) Yes this is OK (default)e) Edit this remoted) Delete this remotey/e/d&gt; //ç¬¬åäºŒæ­¥ å›è½¦Current remotes:Name Type==== ====Onedrive_local onedrive //æ˜¾ç¤ºä½ çš„è®¾ç½®åˆ™æˆåŠŸï¼e) Edit existing remoten) New remoted) Delete remoter) Rename remotec) Copy remotes) Set configuration passwordq) Quit confige/n/d/r/c/s/q&gt; q //ç¬¬åä¸‰æ­¥ è¾“å…¥qç»“æŸé…ç½® å››ï¼šæŒ‚è½½Onedriveåˆ°æœ¬åœ° è‡ªè¡Œä¸‹è½½å®‰è£…git æ­¤æ—¶è¯·ä½¿ç”¨ git bash çš„ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨cmd å’Œ powershell éƒ½å‡ºç°å…³é—­ç»ˆç«¯åæŒ‚è½½ç¨‹åºé€€å‡ºã€æœ¬åœ°æŒ‚è½½çš„OneDriveé€€å‡ºçš„ç°è±¡ã€‚ å¦‚æœä½ çš„windowsæ²¡æœ‰å®‰è£…git ï¼Œ è¯·[è‡ªè¡Œå®‰è£…](https://www.baidu.com/s?wd=windows å®‰è£…git&amp;ie=utf-8)ã€‚è‹¥ä½ ä½¿ç”¨ cmd çš„è¯ ï¼Œcmd æ˜¯ä¸èƒ½é€€å‡ºçš„ï¼Œè¦ä¿æŒ cmd ä¸é€€å‡ºæœ¬åœ°ç¡¬ç›˜æ‰ä¸€ç›´æŒ‚è½½ç€ã€‚ æ¡Œé¢æ–°å»ºtxtæ–‡æœ¬æ–‡ä»¶ã€‚ç¼–è¾‘å†…å®¹ä¸ºï¼š 1start &quot;&quot; &quot;%ProgramFiles%\\Git\\git-bash.exe&quot; -c &quot;rclone mount Onedrive_local:/ Q: --cache-dir C:\\Users\\97532\\Rclone --vfs-cache-mode writes &amp;&quot; Onedrive_local æ›¿æ¢ä¸ºä½ è‡ªå·±å‰é¢è®¾ç½®çš„åç§° ã€‚ Q: æ›¿æ¢ä¸ºä½ æƒ³è¦æŒ‚è½½åç¡¬ç›˜çš„ç›˜ç¬¦åç§°å³å¯ï¼Œè®°å¾—ä¸è¦å’Œæœ¬åœ°çš„Cç›˜ã€Dç›˜ç­‰é‡å¤ã€‚ C:\\Users\\97532\\Rclone ä¸ºæœ¬åœ°ç¼“å­˜ç›®å½•ï¼Œå¯è‡ªè¡Œè®¾ç½® ã€‚ ä¸Šè¿°ä»£ç ï¼Œä½¿ç”¨git bashç¨‹åºæ‰§è¡ŒrcloneæŒ‚è½½ç£ç›˜çš„æŒ‡ä»¤ã€‚cmdæ— æ³•è¯†åˆ«&amp;ï¼Œä¹Ÿå°±æ˜¯é€€å‡ºç¨‹åºç»§ç»­æŒ‚è½½æŒ‡ä»¤ã€‚ é‡å‘½åtxtæ–‡ä»¶ä¸ºrclone_startup.bat åŒå‡»è¿è¡Œ å‡ºç°ï¼šThe service rclone has been started æˆ–è€…ç£ç›˜åˆ—è¡¨å‡ºç°Onedriveï¼Œåˆ™è¯´æ˜æŒ‚è½½æˆåŠŸã€‚ è®¾ç½®å¼€æœºå¯åŠ¨ ç”±äºgitç¨‹åºåœ¨é‡å¯åä¼šåœæ­¢ï¼Œéœ€è¦å°†rclone_startup.batç§»åŠ¨åˆ°å¼€æœºå¯åŠ¨æ–‡ä»¶é‡Œï¼Œæ¯æ¬¡å¼€æœºè®©ç£ç›˜è‡ªåŠ¨æŒ‚è½½ã€‚ å°†rclone_startup.batæ”¾åœ¨C:\\Users\\ç”¨æˆ·å\\AppData\\Roaming\\Microsoft\\Windows\\Start Menu\\Programs\\Startup ä¸­ 237.png) ç°åœ¨è¯•è¯•é‡å¯ç”µè„‘ã€‚ã€‚é‡å¯åéœ€è¦ç­‰å¾…åå‡ ç§’ï¼Œæ‰ä¼šè¿è¡Œgit bashç¨‹åºæŒ‚è½½Onedriveã€‚ git bashè¿è¡Œåä¼šæœ‰ä¸€é—ªè€Œè¿‡çš„é»‘è‰²çª—å£ã€‚æ­¤æ—¶ç£ç›˜åº”è¯¥æŒ‚è½½æˆåŠŸäº†ã€‚ åˆ æ‰ä¸Šé¢çš„æ–¹æ³•ï¼Œæ˜¯ç”±äºæ­¥éª¤å¤ªè¿‡å†—æ‚ï¼Œéœ€è¦å®‰è£…git bashï¼Œè€Œä¸”å¼€æœºå¯åŠ¨æ—¶å­˜åœ¨ä¸€é—ªè€Œè¿‡çš„é»‘è‰²çª—å£ï¼Œè¿è¡Œåçš„æŒ‚è½½ç›˜ä¹Ÿå­˜åœ¨é—®é¢˜ã€‚ æŒ‚è½½æ“ä½œåœ¨é€€å‡ºcmdåå°±è‡ªåŠ¨ç»“æŸäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è®©å®ƒåå°è¿è¡Œã€‚rcloneè™½ç„¶æä¾›äº†--daemonå‚æ•°æ¥å®è¡Œåå°è¿è¡Œï¼Œä½†æ˜¯è¯¥å‚æ•°å¹¶ä¸é€‚åˆäºwindowsç¯å¢ƒä¸­ã€‚ä¼šæœ‰å¦‚ä¸‹æç¤ºï¼š 12Î» rclone mount GDrive:&#x2F; x: --cache-dir F:\\Temp --vfs-cache-mode writes --daemon2018&#x2F;05&#x2F;01 09:54:19 background mode not supported on windows platform æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¦å¤–æƒ³ä¸ªåŠæ³•è®©rcloneèƒ½å¤Ÿåç«¯è¿è¡Œä»¥åŠå¼€æœºè‡ªåŠ¨æŒ‚è½½ã€‚ æ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ã€‚ å¡«å…¥ä»¥ä¸‹å†…å®¹ï¼Œè¯·æ³¨æ„ä¿®æ”¹å€’æ•°ç¬¬äºŒè¡Œçš„WS.Runä¸­ç›¸å…³å‘½ä»¤ä¸ºä½ ä¸Šæ­¥æˆåŠŸæ‰§è¡Œçš„å‘½ä»¤ï¼Œç„¶åå°†è¯¥æ–‡ä»¶åæ”¹ä¸ºrclone.vbs ï¼ˆåç¼€åä¸º.vbså³å¯ï¼‰ 12345678910111213141516Option ExplicitDim WMIService, Process, Processes, Flag, WSSet WMIService = GetObject(&quot;winmgmts:&#123;impersonationlevel=impersonate&#125;!\\\\.\\root\\cimv2&quot;)Set Processes = WMIService.ExecQuery(&quot;select * from win32_process&quot;)Flag = truefor each Process in Processes if strcomp(Process.name, &quot;rclone.exe&quot;) = 0 then Flag = false exit for end ifnextSet WMIService = nothingif Flag then Set WS = Wscript.CreateObject(&quot;Wscript.Shell&quot;) WS.Run &quot;rclone mount Onedrive_local:/ Q: --cache-dir C:\\Users\\97532\\Rclone --vfs-cache-mode writes&quot;, 0end if Onedrive_local æ›¿æ¢ä¸ºä½ è‡ªå·±å‰é¢è®¾ç½®çš„åç§° ã€‚ Q: æ›¿æ¢ä¸ºä½ æƒ³è¦æŒ‚è½½åç¡¬ç›˜çš„ç›˜ç¬¦åç§°å³å¯ï¼Œè®°å¾—ä¸è¦å’Œæœ¬åœ°çš„Cç›˜ã€Dç›˜ç­‰é‡å¤ã€‚ C:\\Users\\97532\\Rclone ä¸ºæœ¬åœ°ç¼“å­˜ç›®å½•ï¼Œå¯è‡ªè¡Œè®¾ç½® ã€‚ å…³äºvfs-cache-modeé¡¹è®¾ç½®ï¼Œè¿˜æ˜¯å»ºè®®çœ‹ä¸‹å®˜æ–¹çš„è¯´æ˜æ ¹æ®è‡ªå·±çš„éœ€æ±‚å’Œç½‘ç»œæƒ…å†µæ¥è¿›è¡Œé€‰æ‹© https://rclone.org/commands/rclone_mount/#file-caching ã€‚è¿™é‡Œåªåšç®€å•è¯´æ˜ï¼š offï¼š æœ¬åœ°ä¸åšä»»ä½•ç¼“å­˜ï¼Œæ‰€æœ‰æ–‡ä»¶ç›´æ¥ä»äº‘ç«¯è·å–å¹¶å†™å…¥ã€‚å»ºè®®ç½‘é€Ÿç‰¹åˆ«å¥½æ—¶ï¼ˆå¤åˆ¶ç²˜è´´å¤§æ–‡ä»¶æ—¶å»ºè®®è‡³å°‘100Mç®¡ä»¥ä¸Šé€Ÿåº¦ï¼‰ä½¿ç”¨ã€‚ minimalï¼šï¼ˆå’Œoffç±»ä¼¼ï¼Œä½†æ˜¯å·²ç»æ‰“å¼€çš„æ–‡ä»¶ä¼šè¢«ç¼“å­˜åˆ°æœ¬åœ°ã€‚ä¸ªäººæ¨èï¼Œå°æ–‡ä»¶åŸºæœ¬å¤Ÿç”¨ï¼Œä½†æ˜¯å¦‚æœä½ çš„ç½‘ç»œæƒ…å†µï¼ˆæ¢¯å­ï¼‰ä¸æ˜¯ç‰¹åˆ«å¥½çš„è¯ï¼Œç”¨writesä¹Ÿè¡Œ writesï¼šï¼ˆå¦‚æœæ–‡ä»¶å±æ€§ä¸ºåªè¯»åˆ™åªä»äº‘ç«¯è·å–ï¼Œä¸ç„¶å…ˆç¼“å­˜åœ¨æœ¬åœ°è¿›è¡Œè¯»å†™æ“ä½œï¼Œéšåè¢«åŒæ­¥ã€‚ä¸ªäººæ¨èä½¿ç”¨ï¼Œä½†æ˜¯åœ¨ç›´æ¥ä»æœ¬åœ°å¤åˆ¶æ–‡ä»¶åˆ°GDriveæ—¶è¿˜æ˜¯çœ‹ç½‘ç»œæƒ…å†µ fullï¼šï¼ˆæ‰€æœ‰çš„è¯»å†™æ“ä½œéƒ½ä¼šç¼“å­˜åˆ°ç£ç›˜ä¸­ã€‚ç„¶åæ‰ä¼šåŒæ­¥ã€‚ä¸æ˜¯å¾ˆæ¨èã€‚ä¼šå¯¼è‡´æ‰€æœ‰æ–‡ä»¶å‡è¢«ç¼“å­˜åˆ°æœ¬åœ°ã€‚ç›´åˆ°è¾¾åˆ°ä½ ç¼“å­˜æ€»é¢ï¼ˆâ€“cache-total-chunk-sizeï¼Œé»˜è®¤å¤§å°10Gï¼‰ã€‚ä½†æ˜¯ä½ ç½‘é€Ÿç‰¹åˆ«å·®æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚ å¦‚æœä½ éœ€è¦ä¸­æ–­è¿™ä¸ªæŒ‚è½½æ“ä½œï¼Œè¯·ç›´æ¥åœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­killæ‰rclone.exeè¿›ç¨‹å³å¯ã€‚ å¼€æœºè‡ªå¯ å°†è¿™ä¸ªæ–‡ä»¶rclone.vbså¤åˆ¶ï¼ˆæˆ–è€…å‰ªè´´ï¼‰åˆ°å¼€æœºé¡¹ä¸­C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\StartUpï¼ˆWindows 10ï¼‰å³å¯å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½~ äº”ï¼šå‚è€ƒèµ„æ–™ã€ŠWindowså¹³å°ä¸‹ä½¿ç”¨ Rclone æŒ‚è½½ OneDrive ä¸ºæœ¬åœ°ç¡¬ç›˜ã€‹ ã€ŠCMDæ‰“å¼€Git Bashã€‹ ã€ŠWindows-å¦‚ä½•ä»DOSå‘½ä»¤è¡Œå¯åŠ¨Git Bashï¼Ÿã€‹ ã€Šä½¿ç”¨rcloneåœ¨Windowsä¸‹æŒ‚è½½Googleä¸ªäºº/å›¢é˜Ÿäº‘ç›˜ã€‹","categories":[{"name":"Windows","slug":"Windows","permalink":"https://sci.ci/categories/Windows/"}],"tags":[{"name":"Rclone","slug":"Rclone","permalink":"https://sci.ci/tags/Rclone/"}]},{"title":"Oneindexè‡ªå»ºä¸é™é€Ÿç½‘ç›˜","slug":"Oneindexè‡ªå»ºä¸é™é€Ÿç½‘ç›˜","date":"2020-06-22T03:46:34.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/22/Oneindexè‡ªå»ºä¸é™é€Ÿç½‘ç›˜/","link":"","permalink":"https://sci.ci/2020/06/22/Oneindex%E8%87%AA%E5%BB%BA%E4%B8%8D%E9%99%90%E9%80%9F%E7%BD%91%E7%9B%98/","excerpt":"","text":"ä¸å ç”¨æœåŠ¡å™¨ç©ºé—´ï¼Œä¸èµ°æœåŠ¡å™¨æµé‡ï¼Œ ç›´æ¥åˆ—å‡º OneDrive ç›®å½•ï¼Œæ–‡ä»¶ç›´é“¾ä¸‹è½½ã€‚ ä¸€ï¼šæ³¨å†Œç”³è¯·000webhostå…è´¹ä¸»æœºè¿›å…¥ https://www.000webhost.com/ æ³¨å†Œåï¼Œåœ¨æˆ‘çš„ç½‘ç«™é‡Œåˆ›å»ºæ–°ç½‘ç«™ã€‚ åˆ›å»ºæˆåŠŸåï¼Œæ‰“å¼€ç½‘ç«™åå°ã€‚ ç‚¹å‡»File Managerï¼Œæˆ–è€…ç›´æ¥è¾“å…¥ç½‘å€ https://files.000webhost.com è¿æ¥ä½ çš„ç½‘ç«™ftp è¾“å…¥ä½ çš„ç½‘ç«™åç§°å’Œå¯†ç  /public_htmlå°±æ˜¯ç½‘ç«™çš„æ ¹ç›®å½•ã€‚å°†ç½‘é¡µçš„indexåº”æ”¾åœ¨æ­¤ç›®å½•ä¸‹ äºŒï¼šä¸‹è½½å’Œä¸Šä¼ ç½‘é¡µä¸‹è½½ç¨‹åºæºç ï¼šhttps://wwa.lanzous.com/ikFHMdxgkeb ç¡®ä¿public_htmlç›®å½•é‡Œæ²¡æœ‰ä»»ä½•æ–‡ä»¶ã€‚ åœ¨ç½‘ç«™æ–‡ä»¶ç®¡ç†é¡µé¢ï¼Œç‚¹å‡»ä¸Šä¼ æ–‡ä»¶(upload files)çš„å›¾æ ‡ã€‚å°†å‹ç¼©åŒ…ä¸Šä¼ åˆ°public_htmlã€‚ é€‰æ‹©æ–‡ä»¶å³é”®é€‰æ‹©è§£å‹(extract)ã€‚å°†è§£å‹åçš„æ‰€æœ‰æ–‡ä»¶å³index.phpæ‰€åœ¨çš„æ–‡ä»¶ç›®å½•ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ç§»åŠ¨åˆ°public_html æœ€ç»ˆç»“æœåº”å¦‚å›¾æ‰€ç¤ºã€‚ ä¸‰ï¼šç»‘å®šè‡ªå·±çš„åŸŸåwebhostç»™çš„å…è´¹åŸŸåæ˜¯webname.000webhostapp.comï¼Œéœ€è¦è‡ªè¡Œè®¾ç½®cnameè§£æã€‚è§£ææ­¥éª¤å°±ä¸è¯´äº†ã€‚ä¸ä¼šçš„å¯è‡ªè¡Œç™¾åº¦ã€‚ cnameæ·»åŠ åï¼Œè¿˜éœ€è¦åœ¨webhoståå°è®¾ç½®ç™½åå•æ‰èƒ½ç”Ÿæ•ˆã€‚ åœ¨000webhostç½‘ç«™ç®¡ç†åå°ä¸­ï¼Œç‚¹å‡»Website Settings-&gt;Generalã€‚ åœ¨Website Nameä¸‹é¢æœ‰ä¸€æ®µè‹±æ–‡ï¼Œyou can change the name of your website here ã€‚ç‚¹å‡»hereã€‚è¿›å…¥ä¿®æ”¹åŸŸåç•Œé¢ æ·»åŠ ä½ cnameè§£æçš„åŸŸå å››ï¼šå®‰è£…é…ç½®oneindexæ‰“å¼€ä½ çš„ç½‘ç›˜ç½‘é¡µï¼Œæ¯”å¦‚æˆ‘çš„ http://pan.sci.ci æŒ‰ç…§æç¤ºé…ç½®ã€‚ å…¶ä¸­åº”ç”¨å¯†é’¥å’Œidï¼Œéœ€è¦ä½ ç‚¹å‡»ç½‘ç«™ç»™çš„é“¾æ¥è·å–ã€‚å¯†é’¥è·å–ç»“æŸåï¼Œç‚¹å‡»å¯†é’¥ç•Œé¢çš„å›é€€æŒ‰é’®ï¼Œåœ¨å›é€€çš„ç½‘é¡µé‡Œå°±èƒ½æ‰¾åˆ°åº”ç”¨idã€‚ äº”ï¼šoneindexå…¶ä»–æ“ä½œonedriveæ–‡ä»¶ç®¡ç†ï¼šhttps://onedrive.live.com 5.1 è®¡åˆ’ä»»åŠ¡ [å¯é€‰]æ¨èé…ç½®ï¼Œéå¿…éœ€ã€‚åå°å®šæ—¶åˆ·æ–°ç¼“å­˜ï¼Œå¯å¢åŠ å‰å°è®¿é—®çš„é€Ÿåº¦ã€‚ 12345# æ¯å°æ—¶åˆ·æ–°ä¸€æ¬¡token0 * * * * &#x2F;å…·ä½“è·¯å¾„&#x2F;php &#x2F;ç¨‹åºå…·ä½“è·¯å¾„&#x2F;one.php token:refresh# æ¯ååˆ†é’Ÿåå°åˆ·æ–°ä¸€éç¼“å­˜*&#x2F;10 * * * * &#x2F;å…·ä½“è·¯å¾„&#x2F;php &#x2F;ç¨‹åºå…·ä½“è·¯å¾„&#x2F;one.php cache:refresh 5.2 Docker å®‰è£…è¿è¡Œ è¯·å‚è€ƒTimeBye/oneindex 5.3 ç‰¹æ®Šæ–‡ä»¶å®ç°åŠŸèƒ½ README.mdã€HEAD.md ã€ .passwordç‰¹æ®Šæ–‡ä»¶ä½¿ç”¨ å¯ä»¥å‚è€ƒhttps://github.com/donwa/oneindex/tree/files åœ¨æ–‡ä»¶å¤¹åº•éƒ¨æ·»åŠ è¯´æ˜: åœ¨ OneDrive çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ README.mdæ–‡ä»¶ï¼Œä½¿ç”¨ Markdown è¯­æ³•ã€‚ åœ¨æ–‡ä»¶å¤¹å¤´éƒ¨æ·»åŠ è¯´æ˜: åœ¨ OneDrive çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ HEAD.md æ–‡ä»¶ï¼Œä½¿ç”¨ Markdown è¯­æ³•ã€‚ åŠ å¯†æ–‡ä»¶å¤¹: åœ¨ OneDrive çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ .passwordæ–‡ä»¶ï¼Œå¡«å…¥å¯†ç ï¼Œå¯†ç ä¸èƒ½ä¸ºç©ºã€‚ ç›´æ¥è¾“å‡ºç½‘é¡µ: åœ¨ OneDrive çš„æ–‡ä»¶å¤¹ä¸­æ·»åŠ index.html æ–‡ä»¶ï¼Œç¨‹åºä¼šç›´æ¥è¾“å‡ºç½‘é¡µè€Œä¸åˆ—ç›®å½•ã€‚é…åˆ æ–‡ä»¶å±•ç¤ºè®¾ç½®-ç›´æ¥è¾“å‡º æ•ˆæœæ›´ä½³ã€‚ 5.4 å‘½ä»¤è¡ŒåŠŸèƒ½ ä»…èƒ½åœ¨PHP CLIæ¨¡å¼ä¸‹è¿è¡Œ æ¸…é™¤ç¼“å­˜: 1php one.php cache:clear åˆ·æ–°ç¼“å­˜: 1php one.php cache:refresh åˆ·æ–°ä»¤ç‰Œ: 1php one.php token:refresh ä¸Šä¼ æ–‡ä»¶: 1php one.php upload:file æœ¬åœ°æ–‡ä»¶ [OneDriveæ–‡ä»¶] ä¸Šä¼ æ–‡ä»¶å¤¹: 1php one.php upload:folder æœ¬åœ°æ–‡ä»¶å¤¹ [OneDriveæ–‡ä»¶å¤¹] ä¾‹å¦‚ï¼š 1234567891011&#x2F;&#x2F;ä¸Šä¼ demo.zip åˆ°OneDrive æ ¹ç›®å½• php one.php upload:file demo.zip &#x2F;&#x2F;ä¸Šä¼ demo.zip åˆ°OneDrive &#x2F;test&#x2F;ç›®å½• php one.php upload:file demo.zip &#x2F;test&#x2F; &#x2F;&#x2F;ä¸Šä¼ demo.zip åˆ°OneDrive &#x2F;test&#x2F;ç›®å½•å¹¶å°†å…¶å‘½åä¸º d.zip php one.php upload:file demo.zip &#x2F;test&#x2F;d.zip &#x2F;&#x2F;ä¸Šä¼ up&#x2F; åˆ°OneDrive &#x2F;test&#x2F; ç›®å½• php one.php upload:file up&#x2F; &#x2F;test&#x2F;","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Oneindex","slug":"Oneindex","permalink":"https://sci.ci/tags/Oneindex/"}]},{"title":"Volantisä¸»é¢˜ReadMoreè‡ªåŠ¨æˆªå–æ–‡ç« å†…å®¹","slug":"Valantis-ReadMoreè‡ªåŠ¨æˆªå–æ–‡ç« å†…å®¹","date":"2020-06-18T07:56:09.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/18/Valantis-ReadMoreè‡ªåŠ¨æˆªå–æ–‡ç« å†…å®¹/","link":"","permalink":"https://sci.ci/2020/06/18/Valantis-ReadMore%E8%87%AA%E5%8A%A8%E6%88%AA%E5%8F%96%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9/","excerpt":"","text":"1ï¼šåœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶é‡Œæ·»åŠ é”®å€¼å¯¹æ·»åŠ é”®å€¼å¯¹çš„ç›®çš„æ˜¯ï¼Œæ§åˆ¶æˆªå–é•¿åº¦å’Œè‡ªåŠ¨æˆªå–åŠŸèƒ½æ˜¯å¦å¼€å¯ã€‚åœ¨ä½ çš„åšå®¢ç›®å½•\\themes\\volantis\\_config.ymlä¸‹æ·»åŠ  123456# Excerpt ## Auto creat excerpt with not &lt;!--more--&gt;## Enable will truncate auto_excerpt.lines rows in post head to replace excerpt.auto_excerpt: enable: true lines: 5 2ï¼šä¿®æ”¹æ–‡ç« ä»£ç ä¿®æ”¹\\themes\\volantis\\layout\\_partialæ–‡ä»¶å†…å®¹ä¸ºï¼š 1234567891011121314151617181920212223242526272829303132333435363738&lt;article class&#x3D;&quot;post white-box &lt;%- theme.style.body.effect.join(&#39; &#39;) %&gt; reveal &lt;%&#x3D; (post.title) ? &quot;&quot; : &quot;no-title&quot; %&gt;&quot;&gt; &lt;%- partial(&#39;meta&#39;,&#123;post:post, position:&#39;header&#39;&#125;) %&gt; &lt;section class&#x3D;&quot;article typo&quot;&gt; &lt;div class&#x3D;&quot;article-entry&quot; itemprop&#x3D;&quot;articleBody&quot;&gt; &lt;% var show_all_content &#x3D; true %&gt; &lt;% if (post.excerpt) &#123; %&gt; &lt;% show_all_content &#x3D; false %&gt; &lt;%- post.excerpt %&gt; &lt;% &#125; else if (post.summary) &#123; %&gt; &lt;% show_all_content &#x3D; false %&gt; &lt;p&gt;&lt;%- post.summary %&gt;&lt;&#x2F;p&gt; &lt;% &#125; else if (theme.auto_excerpt.enable) &#123; %&gt; &lt;% var br_position &#x3D; 0 %&gt; &lt;% for (var br_count &#x3D; 0; br_count &lt; theme.auto_excerpt.lines; br_count++) &#123; %&gt; &lt;% br_position &#x3D; post.content.indexOf(&#39;\\n&#39;,br_position + 1) %&gt; &lt;% if(br_position &lt; 0) &#123; break &#125; %&gt; &lt;% &#125; %&gt; &lt;% if(br_position &gt; 0) &#123; %&gt; &lt;% show_all_content &#x3D; false %&gt; &lt;p&gt;&lt;%- post.content.substring(0, br_position + 1) %&gt;&lt;p&gt; &lt;% &#125; %&gt; &lt;% &#125; %&gt; &lt;% if (show_all_content) &#123; %&gt; &lt;%- post.content %&gt; &lt;% &#125; %&gt; &lt;&#x2F;div&gt; &lt;% if (theme.layout.on_list.readmore) &#123; %&gt; &lt;% if ((post.readmore !&#x3D; false) &amp;&amp; (show_all_content !&#x3D; true)) &#123; %&gt; &lt;div class&#x3D;&quot;button readmore&quot;&gt; &lt;a href&#x3D;&quot;&lt;%- url_for(post.link || post.path) %&gt;&quot;&gt; &lt;%- theme.layout.on_list.readmore %&gt; &lt;&#x2F;a&gt; &lt;&#x2F;div&gt; &lt;% &#125; %&gt; &lt;% &#125; %&gt; &lt;&#x2F;section&gt;&lt;&#x2F;article&gt; ä¸Šé¢çš„ä»£ç é€»è¾‘ï¼Œæ˜¯ï¼Œå¦‚æœæœ‰moreæ ‡ç­¾ï¼Œåˆ™ä½¿ç”¨moreæ ‡ç­¾å‰çš„æ–‡å­—ä½œä¸ºæ‘˜è¦ï¼Œéåˆ™ä½¿ç”¨mdæ–‡ç« scaffoldsé‡Œçš„summaryå†…å®¹ä½œä¸ºæ‘˜è¦ï¼Œä¸»é¢˜åŸæ¥ç”¨çš„scaffoldsæ˜¯descriptionã€‚å¦‚æœéœ€è¦ç”¨descriptionï¼Œå¯ä»¥è‡ªè¡Œæ›¿æ¢ä¸Šé¢çš„ä»£ç ã€‚ åœ¨scaffolds\\post.mdé‡Œå¯ä»¥ä¿®æ”¹æ–°å»ºmdæ–‡ä»¶ç”Ÿæˆçš„scaffoldã€‚ é‡è¦ï¼ï¼è¿™ç§æ–¹æ³•æ˜¯ç›´æ¥æå–çš„æ–‡ç« å‰5è¡Œã€‚å¦‚æœæå–åˆ°çš„å†…å®¹é‡Œï¼ŒåŒ…å«ä»£ç å—çš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆç”±äºæ¸²æŸ“é—®é¢˜å¸ƒå±€å°†ä¼šå‡ºç°é—®é¢˜ã€‚å»ºè®®å¦‚æœä½ çš„æ–‡ç« å‰é¢é‡Œæœ‰ä»£ç ï¼Œè‡ªè¡Œåœ¨summaryé‡Œå†™æ‘˜è¦ï¼Œæˆ–è€…moreæ ‡ç­¾å‰å†™æ‘˜è¦ã€‚ 3ï¼šå‚è€ƒæ–‡çŒ®ã€ŠHexo è‡ªåŠ¨ç»™åšæ–‡æ·»åŠ  ReadMoreã€‹","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Volantis","slug":"Volantis","permalink":"https://sci.ci/tags/Volantis/"}]},{"title":"TensorFlowå­¦ä¹ ç¬”è®°","slug":"TensorFlowå­¦ä¹ ç¬”è®°","date":"2020-06-17T12:35:46.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/17/TensorFlowå­¦ä¹ ç¬”è®°/","link":"","permalink":"https://sci.ci/2020/06/17/TensorFlow%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"P1ï¼štensorflowå®‰è£…1pip install tensorflow P2ï¼šHello Worldâ€”â€”è¡£æœåˆ†ç±»è¿™ä¸ªä¾‹å­è®­ç»ƒäº†ä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹ï¼Œç”¨äºåˆ†ç±»è¡£æœå›¾ç‰‡ï¼Œæ¯”å¦‚tshirtå’Œè¿åŠ¨é‹ã€‚ éœ€è¦ç”¨åˆ°tf.kerasï¼Œå®ƒæ˜¯ä¸ªç”¨äºå»ºç«‹å’Œè®­ç»ƒæ¨¡å‹çš„é«˜å±‚æ¬¡çš„API 1234567# TensorFlow and tf.kerasimport tensorflow as tffrom tensorflow import keras# Helper librariesimport numpy as npimport matplotlib.pyplot as pltprint(tf.__version__) 2.2.0 å¯¼å…¥Fashion MNISTæ•°æ®é›† 12fashion_mnist = keras.datasets.fashion_mnist(train_images, train_labels), (test_images, test_labels) = fashion_mnist.load_data() å¯¼å…¥æ•°æ®é›†ï¼Œè¿”å›Numpyæ•°ç»„ï¼š train_imageså’Œtrain_labels æ•°ç»„æ˜¯è®­ç»ƒé›†ã€‚ test_imageså’Œ test_labels æ•°ç»„æ˜¯æµ‹è¯•é›†ã€‚ è¿™äº›å›¾åƒæ˜¯28x28çš„Numpyæ•°ç»„ã€‚å¯ä»¥ç†è§£ä¸º28x28çš„åƒç´ ç‚¹ï¼Œè¿™äº›åƒç´ ç‚¹åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå‡ºæ¥è¡¨ç°ä¸ºå›¾åƒã€‚æ¯ä¸ªåƒç´ ç‚¹çš„å€¼åœ¨0åˆ°255ä¹‹é—´ï¼Œè¡¨ç¤ºé¢œè‰²çš„æ·±æµ…ã€‚å¦‚æœä½ äº†è§£é¢œè‰²çš„RGBå€¼ï¼Œé‚£ä½ å°±æ˜ç™½ï¼Œæ‰€æœ‰çš„é¢œè‰²éƒ½æ˜¯ç”±ä¸åŒæ·±æµ…ç¨‹åº¦çš„ä¸‰ç§åŸºæœ¬è‰²æ„æˆï¼Œæ¯”å¦‚ç™½è‰²çš„RGBä¸º(255.255.255)ã€‚æ ‡ç­¾labelsæ˜¯ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼ŒèŒƒå›´ä»0åˆ°9ã€‚è¡¨ç¤º10ä¸ªä¸åŒçš„è¡£æœç§ç±»Classã€‚ Label Class 0 T-shirt/top 1 Trouser 2 Pullover 3 Dress 4 Coat 5 Sandal 6 Shirt 7 Sneaker 8 Bag 9 Ankle boot è¿™äº›ç§ç±»ä¸åŒ…æ‹¬åœ¨æ•°æ®é›†ä¸­ï¼Œéœ€è¦å•ç‹¬å®šä¹‰ï¼š 1class_names = [&#x27;T-shirt/top&#x27;, &#x27;Trouser&#x27;, &#x27;Pullover&#x27;, &#x27;Dress&#x27;, &#x27;Coat&#x27;, &#x27;Sandal&#x27;, &#x27;Shirt&#x27;, &#x27;Sneaker&#x27;, &#x27;Bag&#x27;, &#x27;Ankle boot&#x27;] ç ”ç©¶æ•°æ® åœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰ï¼Œå…ˆç ”ç©¶è¿™äº›æ•°æ®æ ¼å¼ã€‚æ¯”å¦‚åœ¨è®­ç»ƒé›†ä¸­çš„å…­ä¸‡å¼ å›¾ç‰‡ï¼Œæ¯å¼ å›¾ç‰‡ç”±28x28çš„åƒç´ ç‚¹è¡¨ç¤ºã€‚ 1train_images.shape (60000, 28, 28) åŒæ—¶è¿˜æœ‰å…­ä¸‡ä¸ªä¸ä¹‹å¯¹åº”çš„æ ‡ç­¾ï¼š 1len(train_labels) 60000 æ¯ä¸ªæ ‡ç­¾éƒ½æ˜¯ä¸€ä¸ª0åˆ°9ä¹‹é—´çš„æ•´æ•°ï¼š 1train_labels array([9, 0, 0, â€¦, 3, 0, 5], dtype=uint8) è¿˜æœ‰ä¸€ä¸‡å¼ ç”¨äºæµ‹è¯•çš„å›¾ç‰‡ï¼š 1test_images.shape (10000, 28, 28) ä¸€ä¸‡å¼ è®­ç»ƒé›†çš„æ ‡ç­¾ï¼š 1len(test_labels) 10000 æ•°æ®é¢„å¤„ç† åœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰ï¼Œå¿…é¡»å…ˆå¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚è§‚å¯Ÿç¬¬ä¸€å¼ å›¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å›¾ç‰‡çš„åƒç´ å€¼åœ¨0åˆ°255ä¹‹é—´ã€‚ 12345plt.figure()plt.imshow(train_images[0])plt.colorbar()plt.grid(False)plt.show() å°†åƒç´ å€¼èŒƒå›´ç¼©å°ä¸º0åˆ°1ï¼Œæ‰€ä»¥å°†åƒç´ å€¼éƒ½é™¤ä»¥255ï¼š 12train_images = train_images / 255.0test_images = test_images / 255.0 ä¸ºäº†ç¡®ä¿æ•°æ®çš„æ­£ç¡®æ€§ï¼Œå…ˆå°†è®­ç»ƒé›†çš„å‰25ä¸ªå›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”åœ¨å›¾ç‰‡ä¸‹é¢å±•ç¤ºåˆ†ç±»åã€‚ 123456789plt.figure(figsize=(10,10))for i in range(25): plt.subplot(5,5,i+1) plt.xticks([]) plt.yticks([]) plt.grid(False) plt.imshow(train_images[i], cmap=plt.cm.binary) plt.xlabel(class_names[train_labels[i]])plt.show() å»ºç«‹æ¨¡å‹ å»ºç«‹ç¥ç»ç½‘ç»œéœ€è¦é…ç½®æ¨¡å‹å±‚ï¼Œç„¶åç¼–è¯‘æ¨¡å‹ã€‚ è®¾ç½®å±‚ åŸºæœ¬çš„ç¥ç»ç½‘ç»œæ¨¡å—æ˜¯å±‚ã€‚å±‚ä¼šä»å®ƒä»¬è·å–çš„æ•°æ®é‡Œæå–å›¾åƒã€‚å®ƒä»¬å¸Œæœ›ä»è¿™äº›å›¾åƒé‡Œè·å–æœ‰ç”¨çš„ä¿¡æ¯ã€‚ å¤§å¤šæ•°æ·±åº¦å­¦ä¹ éƒ½æ˜¯ç®€å•å±‚ç»„åˆåœ¨ä¸€èµ·ã€‚å¤§å¤šæ•°å±‚æ¯”å¦‚tf.keras.layers.Denseï¼Œæ‹¥æœ‰åœ¨è®­ç»ƒæ—¶å­¦ä¹ åˆ°çš„å‚æ•°ã€‚ 1model = keras.Sequential([ keras.layers.Flatten(input_shape=(28, 28)), keras.layers.Dense(128, activation=&#x27;relu&#x27;), keras.layers.Dense(10)]) è¿™ä¸ªç½‘ç»œçš„ç¬¬ä¸€å±‚ï¼Œtf.keras.layers.Flattenï¼Œå°†å›¾åƒçš„æ ¼å¼ä»äºŒç»´æ•°ç»„(28 * 28åƒç´ )è½¬æ¢ä¸ºä¸€ç»´æ•°ç»„(28 * 28 = 784åƒç´ )ã€‚å¯ä»¥å°†è¿™ä¸€å±‚çœ‹ä½œæ˜¯å°†å›¾åƒä¸­çš„åƒç´ è¡Œå±•å¼€å¹¶æ’åˆ—èµ·æ¥ã€‚è¿™ä¸€å±‚æ²¡æœ‰å‚æ•°éœ€è¦å­¦ä¹ ;å®ƒåªæ˜¯é‡æ–°æ ¼å¼åŒ–æ•°æ®ã€‚ åƒç´ è¢«æ‰å¹³åŒ–åï¼Œç½‘ç»œç”±ä¸¤ä¸ªtf.keras.å±‚ç»„æˆã€‚å®ƒä»¬æ˜¯ç´§å¯†ç›¸è¿æˆ–å®Œå…¨ç›¸è¿çš„ç¥ç»å±‚ã€‚ç¬¬ä¸€è‡´å¯†å±‚æœ‰128ä¸ªèŠ‚ç‚¹(æˆ–ç¥ç»å…ƒ)ã€‚ç¬¬äºŒä¸ª(ä¹Ÿæ˜¯æœ€åä¸€ä¸ª)å±‚è¿”å›é•¿åº¦ä¸º10çš„logitsæ•°ç»„ã€‚æ¯ä¸ªèŠ‚ç‚¹éƒ½åŒ…å«ä¸€ä¸ªè¯„ä»·å€¼ï¼Œè¡¨ç¤ºå½“å‰å›¾åƒå±äºè¿™10ä¸ªç±»ä¸­çš„ä¸€ä¸ªã€‚ ç¼–è¯‘æ¨¡å‹ åœ¨å‡†å¤‡è®­ç»ƒæ¨¡å‹ä¹‹å‰ï¼Œéœ€è¦è¿›è¡Œä¸€äº›å…¶ä»–è®¾ç½®ã€‚ è¿™äº›æ˜¯åœ¨æ¨¡å‹çš„ç¼–è¯‘æ­¥éª¤ä¸­æ·»åŠ çš„ï¼š Loss functionâ€”â€”è¿™å¯ä»¥è¡¡é‡æ¨¡å‹åœ¨åŸ¹è®­æœŸé—´çš„å‡†ç¡®æ€§ã€‚æ‚¨å¸Œæœ›æœ€å°åŒ–è¿™ä¸ªå‡½æ•°ï¼Œä»¥ä¾¿å°†æ¨¡å‹â€œå¼•å¯¼â€åˆ°æ­£ç¡®çš„æ–¹å‘ã€‚ Optimizerâ€”â€”è¿™å°±æ˜¯æ¨¡å‹å¦‚ä½•æ ¹æ®å®ƒçœ‹åˆ°çš„æ•°æ®å’Œå®ƒçš„æŸå¤±å‡½æ•°è¿›è¡Œæ›´æ–°ã€‚ Metricsâ€”â€”ç”¨äºç›‘æ§åŸ¹è®­å’Œæµ‹è¯•æ­¥éª¤ã€‚ä¸‹é¢çš„ä¾‹å­ä½¿ç”¨äº†å‡†ç¡®ç‡ï¼Œå³æ­£ç¡®åˆ†ç±»çš„å›¾åƒçš„æ¯”ä¾‹ã€‚ 1model.compile(optimizer=&#x27;adam&#x27;, loss=tf.keras.losses.SparseCategoricalCrossentropy(from_logits=True), metrics=[&#x27;accuracy&#x27;]) è®­ç»ƒæ¨¡å‹ è®­ç»ƒç¥ç»ç½‘ç»œæ¨¡å‹éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š è¾“å…¥è®­ç»ƒæ•°æ®åˆ°æ¨¡å‹ä¸­ã€‚ æ¨¡å‹å­¦ä¹ å…³è”å›¾åƒå’Œåˆ†ç±»æ ‡ç­¾ã€‚ è®©æ¨¡å‹é¢„æµ‹æµ‹è¯•é›†ã€‚ éªŒè¯é¢„æµ‹ç»“æœæ˜¯å¦å’Œæ ‡ç­¾åŒ¹é…ã€‚ è¾“å…¥æ•°æ®åˆ°æ¨¡å‹ä¸­ åˆ©ç”¨model.fitæ–¹æ³•ã€‚ä»–èƒ½å°†æ¨¡å‹ç”¨äºæ‹Ÿåˆè®­ç»ƒæ•°æ®ã€‚ 1model.fit(train_images, train_labels, epochs=10) Epoch 1/101875/1875 [==============================] - 3s 2ms/step - loss: 0.4978 - accuracy: 0.8248Epoch 2/101875/1875 [==============================] - 3s 2ms/step - loss: 0.3767 - accuracy: 0.8637Epoch 3/101875/1875 [==============================] - 3s 2ms/step - loss: 0.3397 - accuracy: 0.8759Epoch 4/101875/1875 [==============================] - 3s 2ms/step - loss: 0.3138 - accuracy: 0.8854Epoch 5/101875/1875 [==============================] - 3s 2ms/step - loss: 0.2948 - accuracy: 0.8914Epoch 6/101875/1875 [==============================] - 3s 2ms/step - loss: 0.2803 - accuracy: 0.8958Epoch 7/101875/1875 [==============================] - 3s 2ms/step - loss: 0.2678 - accuracy: 0.9006Epoch 8/101875/1875 [==============================] - 3s 2ms/step - loss: 0.2590 - accuracy: 0.9043Epoch 9/101875/1875 [==============================] - 3s 2ms/step - loss: 0.2464 - accuracy: 0.9078Epoch 10/101875/1875 [==============================] - 3s 2ms/step - loss: 0.2402 - accuracy: 0.9099 &lt;tensorflow.python.keras.callbacks.History at 0x7fe472eff4a8&gt; è¯„ä¼°å‡†ç¡®ç‡ æ¯”è¾ƒæ¨¡å‹åœ¨æµ‹è¯•æ•°æ®é›†ä¸Šçš„è¡¨ç°ï¼š 12test_loss, test_acc = model.evaluate(test_images, test_labels, verbose=2)print(&#x27;\\nTest accuracy:&#x27;, test_acc) 313/313 - 1s - loss: 0.3382 - accuracy: 0.8840 Test accuracy: 0.8840000033378601 ç»“æœæ˜¯æµ‹è¯•æ•°æ®é›†ä¸Šçš„å‡†ç¡®æ€§æ¯”è®­ç»ƒæ•°æ®é›†ä¸Šçš„å‡†ç¡®æ€§ç¨ä½ã€‚è®­ç»ƒå‡†ç¡®åº¦å’Œæµ‹è¯•å‡†ç¡®åº¦ä¹‹é—´çš„å·®è·ä»£è¡¨è¿‡æ‹Ÿåˆã€‚å½“æœºå™¨å­¦ä¹ æ¨¡å‹åœ¨æ–°çš„ã€ä»¥å‰æ²¡æœ‰çœ‹åˆ°çš„è¾“å…¥ä¸Šçš„è¡¨ç°ä¸å¦‚åœ¨è®­ç»ƒæ•°æ®ä¸Šçš„è¡¨ç°æ—¶ï¼Œå°±ä¼šå‘ç”Ÿè¿‡æ‹Ÿåˆã€‚è¿‡åº¦æ‹Ÿåˆçš„æ¨¡å‹â€œè®°å¿†â€äº†è®­ç»ƒæ•°æ®é›†ä¸­çš„å™ªéŸ³å’Œç»†èŠ‚ï¼Œä»è€Œå¯¹æ¨¡å‹åœ¨æ–°æ•°æ®ä¸Šçš„æ€§èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ä»¥ä¸‹å†…å®¹ è¯æ˜è¿‡åº¦æ‹Ÿåˆ é˜²æ­¢è¿‡åº¦æ‹Ÿåˆç­–ç•¥ é¢„æµ‹ç»“æœ é€šè¿‡è®­ç»ƒæ¨¡å‹ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥é¢„æµ‹æŸäº›å›¾åƒã€‚ æ¨¡å‹çš„çº¿æ€§è¾“å‡ºï¼Œlogitsã€‚ é™„åŠ ä¸€ä¸ªsoftmaxå±‚ä»¥å°†logitè½¬æ¢ä¸ºæ›´å®¹æ˜“è§£é‡Šçš„æ¦‚ç‡ã€‚ 1probability_model = tf.keras.Sequential([model, tf.keras.layers.Softmax()]) 1predictions = probability_model.predict(test_images) åœ¨è¿™é‡Œï¼Œæ¨¡å‹å·²ç»é¢„æµ‹äº†æµ‹è¯•é›†ä¸­æ¯ä¸ªå›¾åƒçš„æ ‡ç­¾ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç¬¬ä¸€ä¸ªé¢„æµ‹ï¼š 1predictions[0] array([1.2275562e-07, 8.9534730e-08, 7.6224147e-09, 1.9726743e-08, 6.1515345e-07, 4.6329503e-03, 4.1164008e-06, 1.5043605e-02, 2.8817641e-07, 9.8031825e-01], dtype=float32) é¢„æµ‹æ˜¯ä¸€ä¸ªåŒ…å«10ä¸ªæ•°å­—çš„æ•°ç»„ã€‚å®ƒä»¬ä»£è¡¨äº†æ¨¡å‹çš„â€œè‡ªä¿¡â€ï¼Œå³å›¾åƒå¯¹åº”ç€10ç§ä¸åŒçš„æœè£…ã€‚ä½ å¯ä»¥çœ‹åˆ°å“ªä¸ªæ ‡ç­¾çš„è‡ªä¿¡åº¦æœ€é«˜ï¼š 1np.argmax(predictions[0]) 9 å› æ­¤ï¼Œæ¨¡å‹æœ€è‡ªä¿¡çš„è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªè¸é´ï¼Œæˆ–class_names[9]ã€‚æ£€æŸ¥æµ‹è¯•æ ‡ç­¾è¡¨æ˜è¿™ä¸ªåˆ†ç±»æ˜¯æ­£ç¡®çš„ï¼š 1test_labels[0] 9 ç»˜åˆ¶å›¾è¡¨ï¼Œçœ‹çœ‹10ä¸ªç±»é¢„æµ‹çš„å…¨éƒ¨é›†åˆã€‚ 123456789101112131415161718192021222324252627282930def plot_image(i, predictions_array, true_label, img): predictions_array, true_label, img = predictions_array, true_label[i], img[i] plt.grid(False) plt.xticks([]) plt.yticks([]) plt.imshow(img, cmap=plt.cm.binary) predicted_label = np.argmax(predictions_array) if predicted_label == true_label: color = &#x27;blue&#x27; else: color = &#x27;red&#x27; plt.xlabel(&quot;&#123;&#125; &#123;:2.0f&#125;% (&#123;&#125;)&quot;.format(class_names[predicted_label], 100*np.max(predictions_array), class_names[true_label]), color=color)def plot_value_array(i, predictions_array, true_label): predictions_array, true_label = predictions_array, true_label[i] plt.grid(False) plt.xticks(range(10)) plt.yticks([]) thisplot = plt.bar(range(10), predictions_array, color=&quot;#777777&quot;) plt.ylim([0, 1]) predicted_label = np.argmax(predictions_array) thisplot[predicted_label].set_color(&#x27;red&#x27;) thisplot[true_label].set_color(&#x27;blue&#x27;) éªŒè¯é¢„æµ‹ é€šè¿‡è®­ç»ƒæ¨¡å‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥é¢„æµ‹æŸäº›å›¾åƒã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ç¬¬0å¼ å›¾ç‰‡ï¼Œé¢„æµ‹å’Œé¢„æµ‹æ•°ç»„ã€‚ æ­£ç¡®çš„é¢„æµ‹æ ‡ç­¾ä¸ºè“è‰²ï¼Œé”™è¯¯çš„é¢„æµ‹æ ‡ç­¾ä¸ºçº¢è‰²ã€‚ è¯¥æ•°å­—ç»™å‡ºäº†é¢„æµ‹æ ‡ç­¾çš„ç™¾åˆ†æ¯”ï¼ˆæ»¡åˆ†ä¸º100ï¼‰ã€‚ 1234567i = 0plt.figure(figsize=(6,3))plt.subplot(1,2,1)plot_image(i, predictions[i], test_labels, test_images)plt.subplot(1,2,2)plot_value_array(i, predictions[i], test_labels)plt.show() 1234567i = 12plt.figure(figsize=(6,3))plt.subplot(1,2,1)plot_image(i, predictions[i], test_labels, test_images)plt.subplot(1,2,2)plot_value_array(i, predictions[i], test_labels)plt.show() è®©æˆ‘ä»¬ç»˜åˆ¶ä¸€äº›å¸¦æœ‰é¢„æµ‹çš„å›¾åƒã€‚ è¯·æ³¨æ„ï¼Œå³ä½¿éå¸¸è‡ªä¿¡ï¼Œè¯¥æ¨¡å‹ä¹Ÿå¯èƒ½æ˜¯é”™è¯¯çš„ã€‚ 12345678910111213# Plot the first X test images, their predicted labels, and the true labels.# Color correct predictions in blue and incorrect predictions in red.num_rows = 5num_cols = 3num_images = num_rows*num_colsplt.figure(figsize=(2*2*num_cols, 2*num_rows))for i in range(num_images): plt.subplot(num_rows, 2*num_cols, 2*i+1) plot_image(i, predictions[i], test_labels, test_images) plt.subplot(num_rows, 2*num_cols, 2*i+2) plot_value_array(i, predictions[i], test_labels)plt.tight_layout()plt.show() ä½¿ç”¨è®­ç»ƒçš„æ¨¡å‹ æœ€åï¼Œåˆ©ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹å¯¹å•å¹…å›¾åƒè¿›è¡Œé¢„æµ‹ã€‚ 123# Grab an image from the test dataset.img = test_images[1]print(img.shape) (28, 28) tf.kerasæ¨¡å‹ç»è¿‡ä¼˜åŒ–ï¼Œå¯ä»¥ç«‹å³å¯¹ä¸€æ‰¹æˆ–ä¸€ç»„ç¤ºä¾‹è¿›è¡Œé¢„æµ‹ã€‚å› æ­¤ï¼Œå³ä½¿ä½¿ç”¨çš„æ˜¯å•ä¸ªå›¾åƒï¼Œä¹Ÿéœ€è¦å°†å…¶æ·»åŠ åˆ°åˆ—è¡¨ä¸­ 123# Add the image to a batch where it&#x27;s the only member.img = (np.expand_dims(img,0))print(img.shape) (1, 28, 28) ç°åœ¨ä¸ºè¿™ä¸ªå›¾åƒé¢„æµ‹æ­£ç¡®çš„æ ‡ç­¾ 123predictions_single = probability_model.predict(img)print(predictions_single) [[2.3256284e-06 5.5768194e-13 9.9955302e-01 3.3701731e-13 4.3444714e-04 3.7890427e-17 1.0105057e-05 4.5671220e-20 8.4883814e-14 9.5599025e-18]] 1plot_value_array(1, predictions_single[0], test_labels)_ = plt.xticks(range(10), class_names, rotation=45) keras.Model.predictè¿”å›åˆ—è¡¨çš„åˆ—è¡¨-æ•°æ®æ‰¹æ¬¡ä¸­æ¯ä¸ªå›¾åƒçš„åˆ—è¡¨ã€‚ æ‰¹é‡è·å–æˆ‘ä»¬ï¼ˆå”¯ä¸€ï¼‰å›¾åƒçš„é¢„æµ‹ï¼š 1np.argmax(predictions_single[0]) 2 è¿™ä¸ªæ¨¡å‹é¢„æµ‹äº†ä¸€ä¸ªæ ‡ç­¾ã€‚ æœ¬æŒ‡å—ä½¿ç”¨Fashion MNISTæ•°æ®é›†ï¼Œè¯¥æ•°æ®é›†åŒ…å«10ä¸ªç±»åˆ«ä¸­çš„70,000å¼ ç°åº¦å›¾åƒã€‚è¿™äº›å›¾åƒä»¥ä½åˆ†è¾¨ç‡(28Ã—28åƒç´ )æ˜¾ç¤ºäº†è¡£æœçš„å•ä¸ªç‰©å“ï¼Œå¦‚å›¾æ‰€ç¤º Fashion MNISTæ—¨åœ¨æ›¿ä»£ç»å…¸MNISTæ•°æ®é›†ï¼Œé€šå¸¸è¢«ç”¨ä½œè®¡ç®—æœºè§†è§‰æœºå™¨å­¦ä¹ ç¨‹åºçš„â€œ Helloï¼ŒWorldâ€ã€‚ MNISTæ•°æ®é›†åŒ…å«æ‰‹å†™æ•°å­—ï¼ˆ0ã€1ã€2ç­‰ï¼‰çš„å›¾åƒï¼Œæ ¼å¼ä¸æ‚¨å°†åœ¨æ­¤å¤„ä½¿ç”¨çš„è¡£æœçš„æ ¼å¼ç›¸åŒã€‚ æœ¬æŒ‡å—å°†Fashion MNISTç”¨äºå¤šç§ç”¨é€”ï¼Œå¹¶ä¸”å› ä¸ºå®ƒæ¯”å¸¸è§„MNISTæ›´å…·æŒ‘æˆ˜æ€§ã€‚ ä¸¤ä¸ªæ•°æ®é›†éƒ½ç›¸å¯¹è¾ƒå°ï¼Œç”¨äºéªŒè¯ç®—æ³•æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚ å®ƒä»¬æ˜¯æµ‹è¯•å’Œè°ƒè¯•ä»£ç çš„è‰¯å¥½èµ·ç‚¹ã€‚ åœ¨è¿™é‡Œï¼Œä½¿ç”¨60,000å¼ å›¾åƒæ¥è®­ç»ƒç½‘ç»œï¼Œä½¿ç”¨10,000å¼ å›¾åƒæ¥è¯„ä¼°ç½‘ç»œå­¦ä¹ å¯¹å›¾åƒè¿›è¡Œåˆ†ç±»çš„å‡†ç¡®ç¨‹åº¦ã€‚ æ‚¨å¯ä»¥ç›´æ¥ä»TensorFlowè®¿é—®Fashion MNISTã€‚ ç›´æ¥ä»TensorFlowå¯¼å…¥å’ŒåŠ è½½Fashion MNISTæ•°æ®ï¼š","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"TensorFlow","slug":"TensorFlow","permalink":"https://sci.ci/tags/TensorFlow/"}]},{"title":"PyTorchå­¦ä¹ ç¬”è®°","slug":"PyTorchå­¦ä¹ ç¬”è®°","date":"2020-06-16T08:14:08.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/16/PyTorchå­¦ä¹ ç¬”è®°/","link":"","permalink":"https://sci.ci/2020/06/16/PyTorch%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"PyTorchçš„ç”¨å¤„ï¼šGPUåŠ é€Ÿã€æ±‚å¯¼ã€å¸¸ç”¨API P1ï¼šå¼€å‘ç¯å¢ƒ Python 3.7+Anaconda 5.3.1 CUDA 10.0 Pycharm Community ä¸‹è½½å®‰è£…Anacondaï¼Œå‹¾é€‰â€œæ·»åŠ anaåˆ°è·¯å¾„ç¯å¢ƒâ€ cmdè¾“å…¥ï¼ŒæŸ¥çœ‹anaå®‰è£…çš„åŒ…ã€‚ 1conda list å®‰è£…nvidia CUDA ç¡®ä¿æœ‰nvidiaçš„GPU é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œç¡®ä¿CUDAçš„binç›®å½•åœ¨PATHè¡Œé‡Œï¼Œåœ¨cmdé‡Œ 1nvcc -v pytorch.orgé‡Œä¸‹è½½pytorch ä¸‹è½½pycharmï¼Œè¿™æ˜¯ä¸€ä¸ªpythonçš„IDE é…ç½®ç¼–è¯‘å™¨ä¸ºPython P2ï¼šæ¢¯åº¦ä¸‹é™ç®—æ³• æ±‚è§£çº¿æ€§æ–¹ç¨‹ï¼Œå¦‚æœå­˜åœ¨å™ªå£°ï¼Ÿ æ±‚å–è¿‘ä¼¼å€¼w,bã€‚ å‡è®¾é‡‡æ ·æ•°æ®è¾“å…¥xå’Œç†è®ºçœŸå®è¾“å‡ºyæ»¡è¶³ y=wx+bçš„çº¿æ€§å›å½’å‡½æ•°ã€‚Linear Regression é‚£ä¹ˆ$$loss\\ function=\\sum(wx+b-y)^2$$ æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼šæœ‰è‹¥å¹²ä¸ªwbä¸åŒçš„å‡½æ•°y=wx+bï¼Œè¿™äº›å‡½æ•°èƒ½å¤Ÿå°†é‡‡æ ·è¾“å…¥xå¾—å‡ºä¸€ä¸ªè‹¥å¹²ä¸ªè¾“å‡ºå€¼w1x+b1ã€w2x+b2ç­‰ç­‰ï¼Œè¿™ä¸ªè¾“å‡ºå€¼wx+bä¸ç†è®ºè¾“å‡ºå€¼yå­˜åœ¨è¯¯å·®ï¼Œäºæ˜¯æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªloss functionæ¥è¡¨ç¤ºwå’Œbä¸åŒæ—¶ï¼Œwx+bä¸çœŸå®å€¼yä¹‹é—´çš„è¯¯å·®ã€‚é€šè¿‡å¯¹loss functionåšè¿ç®—èƒ½æ‰¾åˆ°ä¸€ç»„wå’Œbï¼Œè¿™ç»„wå’Œbå¯ä»¥ä½¿wx+bæœ€æ¥è¿‘yã€‚ å¯¹loss functionçš„è¿ç®—æ–¹å¼å«æ¢¯åº¦ä¸‹é™ç®—æ³•ï¼Œå°†è‹¥å¹²ä¸ªé‡‡æ ·è¾“å…¥å’Œç†è®ºè¾“å‡ºå¸¦å…¥loss functionï¼Œå½¢æˆä¸€ä¸ªè¯¸å¦‚L(w,b)çš„æ–¹ç¨‹ã€‚è¦æ‰¾ä½¿å¾—L(w,b)æœ€å°çš„wå’Œbã€‚ P3ï¼šæ¢¯åº¦â…¡å¯¹çº¿æ€§å›å½’y=wx+b è®¡ç®—loss functionï¼š 1234567def compute_error_for_line_given_points(b,w,points)ï¼š totalError=0 for i in range(0,len(points)): x = points[i,0] y = points[i,1] totalError += (y-(w*x+b))**2 return totalError / float(len(points)) è¾“å…¥ä¸Šä¸€ä¸ªwå’Œbå€¼ï¼Œè®¡ç®—æ¢¯åº¦ï¼Œè¿”å›ä¸‹ä¸€ä¸ªwå’Œbï¼š 123456789101112def step_gradient(b_current,w_current,points,learningRate): b_gradient = 0 w_gradient = 0 N = float(len(points)) for i in range(0,len(points)): x = points[i,0] y = points[i,1] b_gradient += -(2/N) * (y - ((w_current*x) + b_current)) w_gradient += -(2/N) * x * (y-((w_current*x)+b_current)) new_b = b_current - (learningRate * b_gradient) new_w = w_current - (learningRate * w_gradient) return [new_b,new_w] è®¡ç®—æœ€ä¼˜è§£ï¼š 123456def gradient_descent_runner(points,starting_b,starting_w,learning_rate,num_iterations): b = starting_b w = starting_w for i in range(num_iterations): b,w = step_gradient(b,w,np.array(points),learning_rate) return [b,w] P4ï¼šæ‰‹å†™æ•°å­—é—®é¢˜æ‰‹å†™0~9ï¼Œè¾“å‡ºæ‰‹å†™æ•°å­— P5ï¼šPytorchåŸºæœ¬æ•°æ®ç±»å‹Int: IntTensor of size() float: FloatTensor of size() Int array: IntTensor of size [d1,d2â€¦â€¦] æ²¡æœ‰Stringç±»å‹ï¼Œåªèƒ½ç”¨å‘é‡æ¥è¡¨ç¤º[0,0,1,0â€¦â€¦] P6ï¼šå¼ é‡ TensorTensoræˆ–è€…Numpyçš„ndarrays 12from __future__ import print_functionimport torch æ„é€ ç©ºçŸ©é˜µ,äº”è¡Œä¸‰åˆ— 12x = torch.empty(5,3)print(x) tensor(1.00000e-04 * [[-0.0000, 0.0000, 1.5135], [ 0.0000, 0.0000, 0.0000], [ 0.0000, 0.0000, 0.0000], [ 0.0000, 0.0000, 0.0000], [ 0.0000, 0.0000, 0.0000]]) æ„é€ ä¸€ä¸ªéšæœºæ•°çŸ©é˜µï¼Œéšæœºæ•°éƒ½åœ¨0åˆ°1ä¹‹é—´ 12x = torch.rand(5, 3) print(x) tensor([[ 0.6291, 0.2581, 0.6414], [ 0.9739, 0.8243, 0.2276], [ 0.4184, 0.1815, 0.5131], [ 0.5533, 0.5440, 0.0718], [ 0.2908, 0.1850, 0.5297]]) æ„é€ ä¸€ä¸ªå…¨0çŸ©é˜µï¼Œå­—ç¬¦ç±»å‹ä¸ºlongã€‚ 12x = torch.zeros(5, 3, dtype=torch.long)print(x) tensor([[ 0, 0, 0], [ 0, 0, 0], [ 0, 0, 0], [ 0, 0, 0], [ 0, 0, 0]]) ç›´æ¥è¾“å…¥æ•°æ®åˆ›å»ºä¸€ä¸ªå¼ é‡ã€‚ 12x = torch.tensor([5.5, 3])print(x) tensor([ 5.5000, 3.0000]) åˆ›å»ºä¸€ä¸ªå¼ é‡ï¼ŒåŸºäºå·²å­˜åœ¨çš„å¼ é‡ 1234567891011x = x.new_ones(5, 3, dtype=torch.double) # new_* methods take in sizesprint(x)x = torch.randn_like(x, dtype=torch.float) # override dtype!print(x) # result has the same size tensor([[ 1., 1., 1.], [ 1., 1., 1.], [ 1., 1., 1.], [ 1., 1., 1.], [ 1., 1., 1.]], dtype=torch.float64)tensor([[-0.2183, 0.4477, -0.4053], [ 1.7353, -0.0048, 1.2177], [-1.1111, 1.0878, 0.9722], [-0.7771, -0.2174, 0.0412], [-2.1750, 1.3609, -0.3322]]) è·å–ç»´åº¦ 1print(x.size()) torch.Size([5, 3])","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"https://sci.ci/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"PyTorch","slug":"PyTorch","permalink":"https://sci.ci/tags/PyTorch/"}]},{"title":"SSRè´Ÿè½½å‡è¡¡å®ç°è‡ªåŠ¨åˆ‡æ¢ç«¯å£","slug":"SSRè´Ÿè½½å‡è¡¡å®ç°è‡ªåŠ¨åˆ‡æ¢ç«¯å£","date":"2020-06-15T17:09:41.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/16/SSRè´Ÿè½½å‡è¡¡å®ç°è‡ªåŠ¨åˆ‡æ¢ç«¯å£/","link":"","permalink":"https://sci.ci/2020/06/16/SSR%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%88%87%E6%8D%A2%E7%AB%AF%E5%8F%A3/","excerpt":"","text":"1ï¼šå‡†å¤‡å·¥ä½œ ä¸€å°å›½å†…æœåŠ¡å™¨ã€‚ å›½å†…æœåŠ¡å™¨å¯ä»¥ç›‘æ§åˆ°å›½å¤–çš„æœåŠ¡å™¨ipæˆ–è€…ç«¯å£æ˜¯å¦è¢«å°é”ã€‚å¦‚æœä½ ç”¨å›½å¤–çš„æœåŠ¡å™¨ï¼Œä¹Ÿèƒ½åšåˆ°è´Ÿè½½å‡è¡¡ï¼Œä½†æ˜¯å¦‚æœè¿™å°æœåŠ¡å™¨è¢«å°é”ï¼Œé‚£SSRè¿˜æ˜¯ä¼šæ–­å¼€è¿æ¥ã€‚å›½å†…æœåŠ¡å™¨ä¸ä¼šè¢«å°é”ã€‚ SSRæ·»åŠ å¤šä¸ªç«¯å£æˆ–è€…å¤šå°SSRæœåŠ¡å™¨ ä¿®æ”¹SSRé…ç½®æ–‡ä»¶ï¼Œç›‘å¬å¤šä¸ªç«¯å£ã€ŠSSRæ·»åŠ å¤šç”¨æˆ·å¤šç«¯å£æ•™ç¨‹ã€‹ï¼Œæˆ‘ç›‘å¬çš„æ˜¯34567ã€34568ã€34569ã€‚ æ³¨æ„ï¼šä¸åŒç«¯å£æˆ–è€…IPçš„å¯†ç å’Œåè®®ç­‰ç­‰éƒ½å¿…é¡»ç›¸åŒã€‚ 2ï¼šhaproxyä¸‹è½½å’Œé…ç½®åœ¨Ubuntuä¸Šä¸‹è½½ï¼š 1apt-get -y install haproxy åœ¨centosä¸Šï¼š 1yum -y install haproxy å®‰è£…å®Œæ¯•åï¼Œæ‰“å¼€haproxyé…ç½®æ–‡ä»¶/etc/haproxy/haproxy.cfgï¼Œä¿®æ”¹é…ç½®ä¸ºï¼š 12345678910111213141516171819202122232425262728293031323334353637383940global log &#x2F;dev&#x2F;log local0 log &#x2F;dev&#x2F;log local1 notice user root group root daemondefaults log global mode tcp timeout connect 5s timeout client 5s timeout server 5s option dontlognull option redispatch retries 3listen status bind *:1111 mode http stats refresh 30s stats uri &#x2F;status stats realm Haproxy stats auth admin:admin stats hide-version stats admin if TRUEfrontend shadowsocks-in mode tcp bind *:8388 default_backend shadowsocks-outbackend shadowsocks-out mode tcp option tcp-check balance roundrobin server servername1 xxxxx1.com:8088 check server servername2 xxxxx2.net:8080 check server servername3 12.34.56.78:9999 check server servername4 123.234.234.123:443 check é…ç½®åˆ†ä¸ºäº”å¤§éƒ¨åˆ†ï¼š globalï¼šå…¨å±€é…ç½®ï¼Œè¿™é‡Œä¸»è¦æ˜¯é…ç½®äº†æ—¥å¿— é»˜è®¤å€¼ï¼šé»˜è®¤é…ç½®ï¼Œä¹Ÿæ˜¯ä¸€äº›åˆ†å¸ƒå¼é…ç½® å¬ï¼šç›‘å¬é…ç½®ï¼Œæˆ‘åœ¨1111ç«¯å£é…ç½®äº†httpç›‘æ§é¡µé¢ï¼Œè®¿é—®ip:1111/statusï¼Œè®¤è¯ç”¨æˆ·åå’Œå¯†ç éƒ½æ˜¯adminï¼Œå…·ä½“å«ä¹‰å‚è€ƒåšå®¢â€œ haproxyç›‘æ§é¡µé¢å’Œé¡µé¢è¯¦ç»†å‚æ•°â€ frontendï¼šå‰ç«¯é…ç½®ï¼ŒShadowsocksæ•°æ®æµä»è¿™é‡Œè¿›å…¥ï¼Œæµå‘æŒ‡å®šæ ‡é¢˜ï¼Œæ³¨æ„è¿™é‡Œçš„ç«¯å£å·ï¼Œå³ä¸ºsså®¢æˆ·ç«¯çš„è¾“å…¥ç«¯å£ backendï¼šè°ƒæ•´é…ç½®ï¼ŒbalanceæŒ‡å®šè´Ÿè½½å¹³è¡¡æ–¹å¼ï¼Œæ¯ä¸ªæœåŠ¡å™¨å†™ä¸€ä¸ªæœåŠ¡å™¨è¡Œï¼ŒæœåŠ¡å™¨æ”¯æŒåŸŸåæˆ–IPã€‚å¦‚æœä½¿ç”¨åŸŸåï¼Œé‡å¯æœåŠ¡å‡ºç°é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒåšå®¢â€œè§£å†³Haproxyç”¨Systemdå¯åŠ¨å¤±è´¥çš„é—®é¢˜â€ã€‚ 3ï¼šå…¶ä»–è´Ÿè½½å‡è¡¡æ–¹å¼ã€Šshadowsockså€ŸåŠ©nginxå®ç°è´Ÿè½½å‡è¡¡ï¼Œè‡ªåŠ¨åˆ‡æ¢â€œé›¶â€å®•æœºã€‹ä»‹ç»äº†ä½¿ç”¨nginxçš„æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥å°è¯•ã€‚ æˆ‘ä¹‹å‰ä½¿ç”¨è¿‡apacheæ¥åšè´Ÿè½½å‡è¡¡ï¼Œä½†æ˜¯æ— æ³•è¿æ¥ï¼ŒæŸ¥çœ‹apacheæ—¥å¿—åæç¤ºå¦‚ä¸‹ï¼š 1[Tue Jun 16 00:07:30.557609 2020] [core:debug] [pid 25543:tid 140127116449536] protocol.c(1335): [client 127.0.0.1:57310] AH00566: request failed: malformed request line æ„æ€æ˜¯è¯·æ±‚è¡Œæ ¼å¼é”™è¯¯ã€‚åˆšå¼€å§‹ä»¥ä¸ºé…ç½®é”™äº†ã€‚é˜…è¯»apacheçš„ç›¸å…³èµ„æ–™åæ‰çŸ¥é“ã€‚ apacheåœ¨åšè´Ÿè½½å‡è¡¡æ—¶ï¼Œåªæ˜¯å¯¹å­ç›®å½•è¿›è¡Œäº†æ›¿æ¢ï¼Œæ¯”å¦‚è¯´ï¼Œä½ ç›‘å¬1234ç«¯å£ï¼Œå°†å‘é€ç»™ä¸»æœº1234ç«¯å£çš„æ•°æ®å‡è¡¡å‘é€ç»™192.1.1.1:5678ã€192.1.1.2:6789ã€‚é‚£ä¹ˆä½ åœ¨è®¿é—®baidu.com/test æ—¶ï¼Œå°†ä½ çš„è¯·æ±‚å‘é€ç»™1234ç«¯å£ï¼Œè€Œapacheåšçš„ä»…ä»…åªæ˜¯å°†è¯·æ±‚HOSTæ›¿æ¢æ‰ã€‚çœŸå®è¯·æ±‚åœ°å€æ˜¯192.1.1.1:5678/test æˆ–è€…192.1.1.2:6789/test ã€‚ã€‚è€ŒssråŠ å¯†åçš„æ•°æ®ï¼Œæ˜¯æ²¡æœ‰httpè¯·æ±‚å¤´çš„ï¼Œè¿™ä¾¿å¯¼è‡´äº†ï¼Œæ—¥å¿—æ‰€æ˜¾ç¤ºçš„è¯·æ±‚è¡Œæ ¼å¼é”™è¯¯ã€‚æ‰€ä»¥apacheå¹¶ä¸é€‚åˆåšå•çº¯çš„æ•°æ®è½¬å‘ã€‚ 4ï¼šå‚è€ƒæ–‡çŒ®ã€Šç”¨Haproxyå®ç°å¤šVPSçº¿è·¯è´Ÿè½½å‡è¡¡ã€‹ ã€Šshadowsockså€ŸåŠ©nginxå®ç°è´Ÿè½½å‡è¡¡ï¼Œè‡ªåŠ¨åˆ‡æ¢â€œé›¶â€å®•æœºã€‹ ã€ŠHaproxyï¼ˆäºŒï¼‰ä¹‹è´Ÿè½½å‡è¡¡é…ç½®è¯¦è§£ã€‹ ã€ŠApache æ­£å‘ä»£ç†ä¸åå‘ä»£ç†é…ç½®ã€‹","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"SSR","slug":"SSR","permalink":"https://sci.ci/tags/SSR/"},{"name":"haproxy","slug":"haproxy","permalink":"https://sci.ci/tags/haproxy/"},{"name":"è´Ÿè½½å‡è¡¡","slug":"è´Ÿè½½å‡è¡¡","permalink":"https://sci.ci/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"}]},{"title":"ç§»åŠ¨è¿è¥å•†è¿‡æ»¤å¤–ç½‘æµé‡å’Œè§£å†³åŠæ³•","slug":"ç§»åŠ¨è¿è¥å•†è¿‡æ»¤å¤–ç½‘æµé‡é—®é¢˜","date":"2020-06-14T06:22:09.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/06/14/ç§»åŠ¨è¿è¥å•†è¿‡æ»¤å¤–ç½‘æµé‡é—®é¢˜/","link":"","permalink":"https://sci.ci/2020/06/14/%E7%A7%BB%E5%8A%A8%E8%BF%90%E8%90%A5%E5%95%86%E8%BF%87%E6%BB%A4%E5%A4%96%E7%BD%91%E6%B5%81%E9%87%8F%E9%97%AE%E9%A2%98/","excerpt":"","text":"ç§»åŠ¨åœ¨å“ªäº›æ–¹é¢å¯¹ç”¨æˆ·è®¿é—®å¤–ç½‘è¿›è¡Œäº†é™åˆ¶ï¼Ÿ å›½å†…è¿‡æ»¤æ‰æµ·å¤–ç«™ç‚¹çš„httpè¯·æ±‚ã€‚ æˆ‘ä»¬æœ€å¸¸ä½¿ç”¨çš„httpsåè®®æ˜¯ç”±httpå’Œtlsåè®®æ„æˆã€‚é€šå¸¸è®¿é—®ä¸€ä¸ªhttpsç½‘ç«™ï¼Œç¬¬ä¸€æ­¥æ˜¯ï¼Œå‘ç›®æ ‡ç½‘ç«™æ¯”å¦‚youtube.comå‘èµ·ä¸€ä¸ªhttpæ˜æ–‡è¯·æ±‚ï¼Œè¦æ±‚å»ºç«‹è¿æ¥ï¼Œä¹‹åä¼ é€’æ•°æ®æ‰ç”±tlsåè®®è¿›è¡ŒåŠ å¯†ã€‚ã€‚å¦‚æœåªæ˜¯å•çº¯çš„ä½¿ç”¨æµè§ˆå™¨ä»£ç†ï¼Œå‘é€åˆ°youtubeçš„httpè¯·æ±‚å°†è¢«ç§»åŠ¨ç½‘ç»œè¿‡æ»¤æ‰ï¼Œä»è€Œæ— æ³•å»ºç«‹è¿æ¥ã€‚ ä¸è¿‡ï¼Œssrã€v2rayåœ¨ä½¿ç”¨æ—¶ï¼Œå·²ç»å°†httpè¯·æ±‚è¿›è¡Œäº†åŠ å¯†è½¬å‘åˆ°ssrã€v2rayæœåŠ¡ç«¯ã€‚å› æ­¤httpè¯·æ±‚æ˜¯ç”±ssræœåŠ¡ç«¯åœ¨å¤–ç½‘å‘èµ·çš„ï¼Œä¸ç”¨æ‹…å¿ƒç§»åŠ¨è¿‡æ»¤httpè¯·æ±‚ã€‚ å›½å†…å¤–ç½‘ç»œè¾¹ç•Œä¸Šå¯¹æ— ç‰¹å¾çš„tcpæµé‡é™æµé™é€Ÿ ssrå’Œv2rayä½¿ç”¨äº†åŠ å¯†å’Œæ··æ·†åè®®ï¼Œè¿™äº›åè®®ä¿è¯äº†å®ƒä»¬æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼ é€’çš„æ•°æ®æ— æ³•è¢«è§£å¯†ã€‚ç§»åŠ¨åœ¨è¿™æ–¹é¢ï¼Œç›´æ¥å¯¹è¿™ç±»æ²¡æœ‰ç‰¹å¾çš„tcpæµé‡è¿›è¡Œä¸¢åŒ…ï¼Œä¹Ÿå°±å¯¼è‡´äº†ï¼Œç§»åŠ¨ç”¨æˆ·è®¿é—®å¤–ç½‘é€Ÿåº¦ææ…¢ã€‚ å›½å†…å¤–ç½‘ç»œè¾¹ç•Œä¸Šå¯¹tlsåè®®çš„tcpæµé‡æŒ‰ä¼˜å…ˆçº§æ”¾è¡Œ tlsåè®®æµé‡åœ¨å‡ºå›½æµé‡ä¸­æ˜¯æµ·é‡çš„ï¼Œæˆ‘ä»¬è®¿é—®æ™®é€šæµ·å¤–ç½‘ç«™çš„æ—¶ï¼Œä¹ŸåŒ…å«äº†å¤§é‡çš„tlsæµé‡ã€‚å› æ­¤ï¼Œç§»åŠ¨ä¸èƒ½å¯¹è¿™ç±»æµé‡è¿›è¡Œé™æµé™é€Ÿï¼Œè€Œæ˜¯å¯¹é‚£äº›ä¼˜å…ˆçº§æ¯”è¾ƒä½çš„ç”¨æˆ·è®¿é—®å¤–ç½‘è¿›è¡Œé™åˆ¶ï¼Œåœ¨é«˜å³°æ—¶æ®µï¼Œå¯èƒ½è®¿é—®å¤–ç½‘é€Ÿåº¦å¥‡æ…¢ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥ç›´æ¥èŠ±é’±è§£å†³ã€‚ å¦‚ä½•è§£å†³ç§»åŠ¨ç½‘ç»œè®¿é—®å¤–ç½‘é™åˆ¶ï¼Ÿ æ›´æ¢ç”µä¿¡æˆ–è”é€šç½‘ç»œã€‚ å¹¿ç”µä¹Ÿå¾ˆå‘ï¼Œè·Ÿç§»åŠ¨å·®ä¸å¤š ä½¿ç”¨v2ray+ws+tlsæ–¹æ¡ˆï¼Œå³å°†ç¿»å¢™æµé‡ä¼ªè£…ä¸ºæ™®é€šçš„httpsæµé‡ã€‚å¦‚æœä½ çš„ç§»åŠ¨ç½‘ç»œå‡ºå›½ä¼˜å…ˆçº§æ¯”è¾ƒä½ï¼Œé«˜å³°æ—¶æ®µä¹Ÿä¼šå¾ˆæ‹¥æŒ¤ã€‚è¿™æ—¶å€™ï¼Œå°±å–å†³äºä½ çš„å¤–ç½‘æœåŠ¡å™¨äº†ã€‚å¤–ç½‘æœåŠ¡å™¨ä½¿ç”¨cn2giaè‡ªç„¶å°±ä¸ä¼šæ‹¥æŒ¤äº†ã€‚ å¦‚æœä½ ä¹°ä¸èµ·ä¸€ä¸ªcn2giaçº¿è·¯ï¼Œè¯•è¯•åœ¨å›½å†…éƒ¨ç½²ä¸€ä¸ªä¸­è½¬æœåŠ¡å™¨ï¼Œé˜¿é‡Œäº‘å¤´å¹´90å—ï¼ˆå­¦ç”Ÿä»·ä¹Ÿæœ‰ä¼˜æƒ ï¼‰ã€‚åœ¨è¿™ä¸ªè·¯ç”±å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªstunnelï¼ŒæŠŠssrã€v2rayçš„ä»£ç†è¯·æ±‚è½¬å‘åˆ°å›½å†…æœåŠ¡å™¨ï¼Œç„¶åå›½å†…æœåŠ¡å™¨å‘é€è‡³å›½å¤–æœåŠ¡å™¨ã€‚ è¿™ä¸ªæ–¹æ¡ˆï¼Œå¯ä»¥è§£å†³ssrä¸å¸¦tlsåè®®çš„ç¼ºç‚¹ï¼ŒåŒæ—¶ï¼Œå³ä¾¿å¤–ç½‘æœåŠ¡å™¨ä¸æ˜¯cn2giaï¼Œä½ ç”¨çš„ä¹Ÿä¸æ˜¯ç”µä¿¡è”é€šï¼Œéƒ½æ²¡å…³ç³»ã€‚é˜¿é‡Œäº‘æœåŠ¡å™¨å‡ºå›½ä¼šèµ°ç”µä¿¡ï¼Œè€Œä¸”ä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥å³ä¾¿æ˜¯é«˜å³°æ—¶æœŸï¼Œç½‘é€Ÿä¹Ÿä¸ä¼šæœ‰å½±å“ã€‚ ç„¶è€Œï¼Œå—åˆ°å›½å†…å¸¦å®½ä»·æ ¼å½±å“ã€‚é˜¿é‡Œäº‘90ä¸€å¹´çš„æœåŠ¡å™¨ï¼Œå¸¦å®½ä»…ä¸º5Mpbsï¼Œæ‰€ä»¥ä¸‹è½½é€Ÿåº¦ä¹Ÿå°±åœ¨900kB/så·¦å³ã€‚ä¸è¿‡çœ‹1080Pçš„youtubeæ²¡æœ‰é—®é¢˜ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://sci.ci/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"ç§»åŠ¨ç½‘ç»œ","slug":"ç§»åŠ¨ç½‘ç»œ","permalink":"https://sci.ci/tags/%E7%A7%BB%E5%8A%A8%E7%BD%91%E7%BB%9C/"}]},{"title":"BLOGåŒçº¿éƒ¨ç½²+https","slug":"BLOGåŒçº¿éƒ¨ç½²-https","date":"2020-06-14T05:53:54.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/14/BLOGåŒçº¿éƒ¨ç½²-https/","link":"","permalink":"https://sci.ci/2020/06/14/BLOG%E5%8F%8C%E7%BA%BF%E9%83%A8%E7%BD%B2-https/","excerpt":"","text":"dns.laæ”¯æŒå¤šçº¿è§£æï¼Œè€Œä¸”å…è´¹ï¼Œéå¸¸å¥½ç”¨ã€‚æ¨èï¼ å…³äºè¯ä¹¦ç”³è¯·çš„æ–¹å¼ï¼Œå°±ä¸å¤šè¯´äº†ã€‚ä¹‹å‰åœ¨codingç”³è¯·è¯ä¹¦å¤±è´¥ï¼Œæ˜¯å› ä¸ºåŸŸåcnameè§£ææ²¡æœ‰é…ç½®æ­£ç¡®ã€‚å°†åŸŸåæœåŠ¡å•†ä¿®æ”¹ä¸º https://dns.la åï¼Œéœ€è¦å…ˆå°†åŸŸåæµ·å¤–çº¿è·¯è§£æåˆ°codingã€‚ å°†æµ·å¤–çº¿è·¯è§£æåˆ°codingæ˜¯ï¼Œcodingè¯ä¹¦èƒ½å¤Ÿç”³è¯·æˆåŠŸçš„å…³é”®ï¼åœ¨githubç”³è¯·è¯ä¹¦æ—¶ï¼Œä¹Ÿéœ€è¦å°†æµ·å¤–çº¿è·¯è§£æåˆ°githubã€‚ è¯ä¹¦ç”³è¯·å®Œæ¯•åï¼Œå¯ä»¥åœ¨dns.laä¸Šä¿®æ”¹dnsçº¿è·¯ï¼Œå›½å†…è§£æåˆ°codingï¼Œæµ·å¤–è§£æåˆ°githubã€‚","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"ç½‘ç«™ä¼˜åŒ–","slug":"ç½‘ç«™ä¼˜åŒ–","permalink":"https://sci.ci/tags/%E7%BD%91%E7%AB%99%E4%BC%98%E5%8C%96/"}]},{"title":"SSRåŠ é€Ÿå’Œé™ä½æœåŠ¡å™¨ç«¯å£è¢«å°é£é™©","slug":"SSRåŠ é€Ÿå’Œé™ä½æœåŠ¡å™¨ç«¯å£è¢«å°é£é™©","date":"2020-06-08T07:22:38.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/08/SSRåŠ é€Ÿå’Œé™ä½æœåŠ¡å™¨ç«¯å£è¢«å°é£é™©/","link":"","permalink":"https://sci.ci/2020/06/08/SSR%E5%8A%A0%E9%80%9F%E5%92%8C%E9%99%8D%E4%BD%8E%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E5%8F%A3%E8%A2%AB%E5%B0%81%E9%A3%8E%E9%99%A9/","excerpt":"","text":"å¦å¤–éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè´­ä¹°çš„å›½å†…æœåŠ¡å™¨ï¼Œä¸éœ€è¦è¿›è¡Œå¤‡æ¡ˆï¼Œä½ å¯ä»¥å¸®å®šä¸€ä¸ªåŸŸååˆ°æ­¤æœåŠ¡å™¨ä¸Šï¼Œå¡«å†™ssrå®¢æˆ·ç«¯ä¹Ÿåªéœ€è¦ä½¿ç”¨è¿™ä¸ªåŸŸåï¼Œssrä¼šè‡ªåŠ¨å¸®ä½ æŸ¥è¯¢dnsï¼Œæ­¤åå³ä¾¿å›½å¤–ssrå‡ºç°ç«¯å£æˆ–ipè¢«å°ï¼Œä¹Ÿä¸éœ€è¦æ›´æ”¹ssrå®¢æˆ·ç«¯çš„é…ç½®ä¿¡æ¯ã€‚è€Œåªéœ€è¦å¦èµ·ä¸€å°å›½å¤–æœåŠ¡å™¨ï¼Œä¿®æ”¹å›½å†…ä¸­è½¬æœåŠ¡å™¨çš„é…ç½®ä¿¡æ¯ã€‚ å¦‚æœä½ æ‡‚å¾—æ›´å¤šç¼–ç¨‹çŸ¥è¯†ï¼Œä½ å¯ä»¥åœ¨å›½å†…å›½å¤–çš„ä¸¤å°æœåŠ¡å™¨ä¸Šè¿›è¡Œç¼–ç¨‹ï¼Œå®ç°ï¼Œå½“å›½å¤–æœåŠ¡å™¨ç«¯å£è¢«å°ï¼Œå›½å†…å’Œå›½å¤–æœåŠ¡å™¨è‡ªåŠ¨æ£€æµ‹ï¼Œè‹¥æ£€æµ‹åˆ°ç«¯å£è¢«å°ï¼Œåˆ™å›½å¤–æœåŠ¡å™¨ä¿®æ”¹ssré…ç½®ç«¯å£ï¼Œè€Œå›½å†…æœåŠ¡å™¨ä¿®æ”¹stunnelé…ç½®ä¿¡æ¯ã€‚è¿™æ ·ï¼Œæ— éœ€äººä¸ºå¹²é¢„ï¼Œä¹Ÿèƒ½å®ç°é•¿ä¹…è€Œç¨³å®šçš„è¿æ¥ã€‚å¦‚æœæœ‰ç©ºçš„è¯ï¼Œæˆ‘ä¼šå»æ¢ç´¢è¿™ä¸ªæ–¹æ¡ˆã€‚ 1ï¼šåŸç†è¯´æ˜ç®€å•äº†è§£ï¼Œå¯ä»¥æé«˜ä½ å¯¹ç½‘ç»œçš„è®¤è¯†ã€‚ 1.1 ssrç½‘ç»œåŠ é€ŸåŸç†ç”±äºä¸­å›½ç§»åŠ¨å¯¹æ™®é€šç”¨æˆ·çš„æµ·å¤–æµé‡éšæœºé«˜æ¦‚ç‡ä¸¢åŒ…ï¼Œå¯¼è‡´å›½å¤–æµé‡è¿›å…¥å›½å†…æ—¶ï¼Œèµ°ç§»åŠ¨çº¿è·¯ï¼Œå°±ä¼šæœ‰å¾ˆé«˜çš„ä¸¢åŒ…ç‡ã€‚æ‰€ä»¥æˆ‘ä»¬å¸Œæœ›å€ŸåŠ©ä¸€å°ï¼Œå±äºç§»åŠ¨vipçº§åˆ«çš„å›½å†…æœåŠ¡å™¨ï¼ˆè¿™æ ·ç§»åŠ¨å‡ºæµ·çº¿è·¯ä¼˜å…ˆçº§é«˜ï¼Œä¸å®¹æ˜“ä¸¢åŒ…ï¼‰ï¼Œæˆ–è€…å‡ºå…¥æµ·èµ°è”é€šç”µä¿¡çº¿è·¯çš„æœåŠ¡å™¨ã€‚é€šå¸¸ï¼Œé˜¿é‡Œäº‘ã€è…¾è®¯äº‘æœåŠ¡å™¨éƒ½èƒ½æ»¡è¶³è¦æ±‚ã€‚ å›½å†…æœåŠ¡å™¨ä¸Šå®‰è£…stunnelï¼Œå¹¶é…ç½®ä¸ºå®¢æˆ·ç«¯ã€‚å›½å¤–æœåŠ¡å™¨å®‰è£…stunnelæœåŠ¡ç«¯å’ŒssræœåŠ¡ç«¯ã€‚ 1.2 é™ä½ç«¯å£è¢«å°çš„é£é™©åŸç†stunnelæ˜¯ä¸€ä¸ªå°†æµé‡åˆ©ç”¨sslè¯ä¹¦åŠ å¯†çš„è½¯ä»¶ï¼ŒåŠ å¯†åçš„æµé‡ï¼Œå‡ºå›½æ—¶å°†ä¼šè¢«è¯†åˆ«ä¸ºtlsåè®®ï¼Œå› æ­¤ä¸å†å…·æœ‰ssræµé‡ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¸¸ä½¿ç”¨çš„httpsè¯·æ±‚ä¾¿åŸºäºsslè¯ä¹¦ï¼Œæ­¤æ—¶å›½å¤–æœåŠ¡å™¨ç«¯å£è¢«å°é”çš„å‡ ç‡å°†å¤§å¤§å‡å°ã€‚å‡ºå›½åï¼Œstunnelå°†æµé‡è§£å¯†ï¼Œå†ä¼ é€’ç»™ssræœåŠ¡ç«¯ã€‚ é€šè¿‡æŠ“å–ssræµé‡ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œssræµé‡åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œç”±äºåè®®åŠ å¯†ï¼Œå®ƒä¸å…·å¤‡ä»»ä½•å¸¸è§çš„ç½‘ç»œè¯·æ±‚ç‰¹å¾ï¼Œè€Œä½ åœ¨ä½¿ç”¨ssrä¸æµ·å¤–æœåŠ¡å™¨è¿›è¡Œæ•°æ®å¾€æ¥æ—¶ï¼Œé•¿æ—¶é—´çš„ä½¿ç”¨ä¸å…·æœ‰ç½‘ç»œè¯·æ±‚ç‰¹å¾çš„æµé‡è¿›è¡Œè¿æ¥ï¼Œå¾ˆå®¹æ˜“è¢«é˜²ç«å¢™è¯†åˆ«ä¸ºç¿»å¢™è½¯ä»¶ã€‚å› æ­¤è¢«å°ã€‚ä½¿ç”¨tlsåè®®ï¼Œå°±èƒ½å¤Ÿä¼ªè£…ä¸ºhttpsè¯·æ±‚ï¼Œhttps(httpåè®®+tlsåè®®)ã€‚å½“ç„¶ä¸ºäº†æ›´æœ‰è¿·æƒ‘æ€§ï¼Œåœ¨ssræœåŠ¡å™¨ç«¯å£åŠ ä¸€ä¸ªèƒ½è¢«è®¿é—®çš„ç½‘ç«™æ˜¯æœ€å¥½çš„ã€‚å› ä¸ºè™½ç„¶tlsåè®®ä½œä¸ºhttpsçš„ä¸€éƒ¨åˆ†ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œç”±äºæ²¡æœ‰httpåè®®çš„æµé‡ï¼Œé‚£ä¹ˆæ˜¯èƒ½è¢«æ¨æ–­å‡ºä½¿ç”¨stunnelè¿™ç±»åŠ å¯†éš§é“çš„ã€‚å¦‚æœé•¿æ—¶é—´å¤§æµé‡è®¿é—®ï¼Œä¹Ÿæœ‰è¢«å°é”çš„é£é™©ã€‚ è€Œä½¿ç”¨ä¸­è½¬æœåŠ¡å™¨ï¼Œæ‰€ä»˜å‡ºçš„ä»£ä»·ï¼Œä»…ä»…æ˜¯å›½å†…æœˆç§Ÿå‡ å—é’±çš„æœåŠ¡å™¨(é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰æœ‰å­¦ç”ŸæœåŠ¡å™¨ï¼Œä¸€å¹´ä¸€ç™¾å—å·¦å³)ï¼Œå’Œç›¸å½“ä½çš„stunnelåŠ è§£å¯†è¿‡ç¨‹æ‰€å¯¼è‡´çš„å»¶è¿Ÿï¼Œæ­¤å»¶è¿Ÿå‡ ä¹ä¸å¯è§ã€‚ 2ï¼šstunnelå’Œssrå®‰è£…2.1 stunnelå®‰è£…å’Œé…ç½®stunnelå®‰è£…ï¼Œè¯·å‚è§æˆ‘ä¹‹é—´çš„æ–‡ç« ã€Šåˆ©ç”¨Stunnel+squidä»£ç†å®ç°å›½å†…æ— å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘ã€‹ã€‚ 3.2èŠ‚æ˜¯åœ¨å›½å¤–æœåŠ¡å™¨ä¸Šå®‰è£…stunnelæœåŠ¡ç«¯ã€‚ç¬¬å››ç« ï¼Œåœ¨å›½å†…æœåŠ¡å™¨ä¸Šå®‰è£…stunnelå®¢æˆ·ç«¯ã€‚ å°†ssrçš„æµé‡é€šè¿‡stunnelåŠ å¯†ï¼Œä½ éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚åœ¨ã€Šåˆ©ç”¨Stunnel+squidä»£ç†å®ç°å›½å†…æ— å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘ã€‹å®‰è£…åçš„stunnelåŸºç¡€ä¸Šä¿®æ”¹ã€‚ ä¿®æ”¹å›½å¤–æœåŠ¡å™¨ä¸Šçš„stunnelæœåŠ¡ç«¯é…ç½®æ–‡ä»¶ï¼Œåœ¨/etc/stunnel/stunnel.confæ–‡ä»¶é‡Œï¼Œ åˆ é™¤ 12345[squid-proxy]; æœåŠ¡ç›‘å¬çš„ç«¯å£ï¼Œclientè¦è¿æ¥è¿™ä¸ªç«¯å£ä¸serveré€šä¿¡accept &#x3D; 3129; æœåŠ¡è¦è¿æ¥çš„ç«¯å£ï¼Œè¿æ¥åˆ°squidçš„3128ç«¯å£ï¼Œå°†æ•°æ®å‘ç»™squidconnect &#x3D; localhost:3128 æ·»åŠ  12345[tls2socks];æœåŠ¡ç«¯ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œè¿™ä¸ªç«¯å£ç”¨äºæ¥æ”¶stunnelå®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œå»ºè®®è®¾ç½®åœ¨10000~60000ä¹‹é—´ï¼ŒåŠ¡å¿…åœ¨linuxé˜²ç«å¢™å’Œé˜¿é‡Œäº‘è¿™ç±»çš„æœåŠ¡å•†å®‰å…¨ç»„å¼€æ”¾ï¼Œä¾‹å¦‚è®¾ç½®ä¸ºï¼šaccept = 12345accpet = your accept port 1;è¿æ¥åˆ°ï¼Œssrçš„æœåŠ¡å™¨ç«¯å£ä¸Šï¼Œä¸ssræœåŠ¡ç«¯é…ç½®çš„ç«¯å£ä¿æŒä¸€è‡´connect = localhost:your ssr server port ä¿®æ”¹å›½å†…ä¸­è½¬æœåŠ¡å™¨ä¸Šçš„stunnelå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼Œåœ¨/etc/stunnel/stunnel.confæ–‡ä»¶é‡Œï¼Œ åˆ é™¤ 12345[squid-proxy]; ç›‘å¬3128ç«¯å£ï¼Œé‚£ä¹ˆç”¨æˆ·æµè§ˆå™¨çš„ä»£ç†è®¾ç½®å°±æ˜¯ stunnel-client-ip:3128accept = 3128; è¦è¿æ¥åˆ°çš„stunnel serverçš„ipä¸ç«¯å£ï¼Œä¿®æ”¹xx.xx.xx.xxä¸ºå›½å¤–çš„æœåŠ¡å™¨connect = xx.xx.xx.xx:3129 æ·»åŠ  12345[socks2tls];æœåŠ¡ç«¯ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œè¿™ä¸ªç«¯å£ç”¨äºæ¥æ”¶ssrå®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œå»ºè®®è®¾ç½®åœ¨10000~60000ä¹‹é—´ï¼ŒåŠ¡å¿…åœ¨linuxé˜²ç«å¢™å’Œé˜¿é‡Œäº‘è¿™ç±»çš„æœåŠ¡å•†å®‰å…¨ç»„å¼€æ”¾ã€‚ä¾‹å¦‚ accept = 34567accpet = your accept port 2;è¿æ¥åˆ°ï¼ŒstunnelæœåŠ¡ç«¯æ¥æ”¶ç«¯å£ä¸Šã€‚æŒ‰ç…§è¯¥æœåŠ¡ç«¯çš„ä¾‹å¦‚é…ç½®ï¼Œè¿™é‡Œåº”è¯¥ä¸ºï¼šconnect = xx.xx.xx.xx:12345ã€‚xxè¡¨ç¤ºå›½å¤–æœåŠ¡å™¨ipåœ°å€ã€‚connect = stunnel server ip:your accept port 1 2.2 ssrå®‰è£…å’Œé…ç½®ssrå®‰è£…ï¼Œå¯ä»¥å‚è€ƒã€ŠSSR ä¸€é”®å®‰è£…è„šæœ¬ã€‹ï¼Œåœ¨å›½å¤–çš„æœåŠ¡å™¨ä¸Šå®‰è£…ã€‚ ssræœåŠ¡ç«¯ç«¯å£éœ€è¦å’ŒstunnelæœåŠ¡ç«¯çš„connectç«¯å£ä¿æŒä¸€è‡´ã€‚ ssrå®¢æˆ·ç«¯é…ç½®ï¼Œå®¢æˆ·ç«¯åœ°å€ï¼Œåº”è¯¥å¡«å†™ä¸ºå›½å†…æœåŠ¡å™¨ipï¼ŒæœåŠ¡ç«¯å£ï¼Œåº”å¡«å†™ä¸ºstunnelå®¢æˆ·ç«¯çš„acceptç«¯å£(å›½å†…æœåŠ¡å™¨ä¸Šé…ç½®çš„accept = your accept port 2)ï¼Œä¾‹å­ä¸­ç»™çš„34567ç«¯å£ã€‚ é…ç½®å®Œæˆåï¼Œå°±å¯ä»¥è¿æ¥ä¸Šç½‘äº†ã€‚ å³ä¾¿ä½¿ç”¨ç§»åŠ¨ç½‘ç»œï¼Œä¹Ÿèƒ½äº§ç”Ÿéå¸¸å¥½çš„è¿æ¥æ•ˆæœï¼Œè€Œä¸”åº”è¯¥åœ¨éå¸¸ä¹…å¾—æ—¶é—´é‡Œï¼Œç«¯å£éƒ½ä¸ä¼šè¢«å°ã€‚ 3ï¼šå¯èƒ½å‡ºç°çš„é—®é¢˜å¦‚æœé…ç½®åæ— æ³•ä¸Šç½‘ï¼Œè¯·æ£€æŸ¥ä½ è®¾ç½®å¾—ç«¯å£ï¼Œé€šè¿‡ https://port.ping.pe ç½‘å€æ£€æµ‹ä½ çš„ç«¯å£æ˜¯å¦å¼€å¯ï¼Œå¦‚æœæµ‹è¯•æœªå¼€å¯ï¼Œè¯·ä¿®æ”¹é˜²ç«å¢™é…ç½®ï¼Œåœ¨ã€Šåˆ©ç”¨Stunnel+squidä»£ç†å®ç°å›½å†…æ— å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘ã€‹ä¸­ç¬¬4ç« æœ‰ä»‹ç»ã€‚è‹¥ä»»ç„¶æ²¡æœ‰å¯¼é€šï¼Œè¯·æ£€æŸ¥äº‘æœåŠ¡å•†çš„å®‰å…¨ç»„æ˜¯å¦å¼€å¯äº†ç«¯å£ã€‚ å¦‚æœç«¯å£å¼€æ”¾ï¼Œè€Œæ— æ³•è¿æ¥ï¼Œè¯·å°è¯•ï¼Œç»ˆæ­¢stunnelè¿›ç¨‹å¹¶é‡æ–°å¯ç”¨ã€‚ æ–¹æ³•1ï¼š 1servicer stunnel restart æ–¹æ³•2: æ£€æŸ¥stunnelçš„è¿›ç¨‹ 1ps aux | grep -i stunnel æ‰¾åˆ°è¿›ç¨‹å·pidï¼Œåœ¨ç¬¬äºŒåˆ— æ€æ‰è¿›ç¨‹ 1kill -9 æ›¿æ¢ä¸ºpid ç„¶åé‡æ–°å¯ç”¨stunnel 1stunnel å¦‚æœæ²¡æœ‰ä»»ä½•æ˜¾ç¤ºï¼Œåˆ™stunnelé‡å¯æˆåŠŸï¼Œä¸”é…ç½®æ–‡ä»¶æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚å¦åˆ™å°†æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"SSR","slug":"SSR","permalink":"https://sci.ci/tags/SSR/"},{"name":"Stunnel","slug":"Stunnel","permalink":"https://sci.ci/tags/Stunnel/"}]},{"title":"Squid+MySQLå‚¨å­˜ç”¨æˆ·éªŒè¯é€šè¿‡çš„IP","slug":"Squid-MySQLå‚¨å­˜ç”¨æˆ·éªŒè¯é€šè¿‡çš„IP","date":"2020-06-02T04:02:54.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/06/02/Squid-MySQLå‚¨å­˜ç”¨æˆ·éªŒè¯é€šè¿‡çš„IP/","link":"","permalink":"https://sci.ci/2020/06/02/Squid-MySQL%E5%82%A8%E5%AD%98%E7%94%A8%E6%88%B7%E9%AA%8C%E8%AF%81%E9%80%9A%E8%BF%87%E7%9A%84IP/","excerpt":"","text":"0ï¼šå‰æ–‡åœ¨æ–‡ç« ã€Šåˆ©ç”¨Stunnel+squidä»£ç†å®ç°å›½å†…æ— å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘ã€‹ä¸­ï¼Œæåˆ°äº†ï¼Œå½“ä½¿ç”¨ä»£ç†éªŒè¯å®ç°ä»£ç†è®¿é—®æ—¶ï¼Œæ‰‹æœºçš„è½¯ä»¶æ— æ³•è¿æ¥ç½‘ç»œï¼Œè€Œä¸”åˆ‡æ¢æµè§ˆå™¨éœ€è¦é‡æ–°éªŒè¯ç”¨æˆ·åå’Œå¯†ç ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æå‡ºäº†å››ç§æ–¹æ¡ˆã€‚å‰ä¸¤ç§æ¼æ´å¤ªå¤§ï¼Œç¬¬ä¸‰ç§ï¼Œå¼€å‘æ¯”è¾ƒéº»çƒ¦ã€‚äºæ˜¯ï¼Œæˆ‘é‡‡ç”¨äº†ç¬¬å››ç§æ–¹æ³•ã€‚ä¸‹é¢å°†å¯¹ä»£ç å’Œå…·ä½“ç»†èŠ‚è¿›è¡Œè¯´æ˜ã€‚ é˜…è¯»æœ¬æ–‡ï¼Œè¯·ç¡®ä¿ä½ å·²ç»å®‰è£…äº†squid 3.5ä»¥ä¸Šç‰ˆæœ¬ã€‚squid -vå¯ä»¥æŸ¥çœ‹ä½ çš„å®‰è£…ç‰ˆæœ¬ã€‚ 1ï¼šé…ç½®åŸºæœ¬ç¯å¢ƒMySQLå’ŒPython1.1 æ•°æ®åº“Mysqlè¢«å¹¿æ³›ç”¨äºç½‘ç«™æ•°æ®åº“ï¼Œç½‘ä¸Šçš„æ”¯æŒæ–‡æ¡£å¾ˆå¤šï¼Œé‡è¦çš„æ˜¯ï¼ŒMySQLåœ¨pythonç¼–ç¨‹ä¸Šå…·æœ‰éå¸¸å¥½çš„æ”¯æŒã€‚ä¹Ÿå°±æ˜¯mysqldbåº“ã€‚ ä½¿ç”¨æ•°æ®åº“ï¼Œä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾é€šè¿‡éªŒè¯å™¨éªŒè¯çš„å®¢æˆ·ç«¯ipï¼ŒACLè¾…åŠ©å™¨å¯ä»¥é€šè¿‡è¯»å–è¿™ä¸ªipï¼Œä»è€Œaclè¾…åŠ©å™¨é€šè¿‡çš„ipä¸å†éœ€è¦éªŒè¯å™¨éªŒè¯å¯†ç ã€‚æ‰€ä»¥ï¼Œä½ ä½¿ç”¨ä»»ä½•å…¶ä»–æ•°æ®åº“éƒ½æ˜¯å¯ä»¥çš„ã€‚å»ºè®®ä½ é€‰ç”¨ä½ è‡ªå·±ç†Ÿæ‚‰çš„æ•°æ®åº“ã€‚å› ä¸ºæœ¬æ–‡å¯¹äºå¦‚ä½•åœ¨mysqlä¸‹ï¼Œåˆ›å»ºæ•°æ®è¡¨ï¼Œåªåšå¤§æ¦‚è¯´æ˜ã€‚ æˆ‘å»ºè®®ä½¿ç”¨å®å¡”é¢æ¿bt.cnå®‰è£…mysqlã€‚è¿™æ ·å¯ä»¥å¯è§†åŒ–çš„å®‰è£…mysqlå’Œåˆ›å»ºæ•°æ®åº“å’Œæ•°æ®è¡¨ã€‚ä¹Ÿå¯ä»¥è§„é¿è®¸å¤šç”±äºæ•°æ®åº“æƒé™é—®é¢˜å¯¼è‡´çš„ä¸å¯æ§å› ç´ ã€‚å®å¡”é¢æ¿å®‰è£…å’Œåœ¨å®å¡”é¢æ¿ä¸­å®‰è£…mysqlæ•°æ®åº“ï¼Œå¯ä»¥è‡ªè¡Œç™¾åº¦ã€‚éå¸¸ç®€å•ã€‚ åœ¨å®Œæˆæ•°æ®åº“å®‰è£…åï¼Œè¯·ä½ åœ¨mysqlé‡Œæ·»åŠ ä¸€ä¸ªï¼Œåº“åä¸ºï¼šsquidã€‚ç”¨æˆ·åä¸ºï¼šsquidã€‚çš„æ•°æ®åº“ã€‚ç”¨äºå­˜æ”¾squidæ•°æ®ã€‚ æ•°æ®åº“æ–°å»ºæˆåŠŸåï¼Œç‚¹å‡»å³è¾¹çš„ç®¡ç†ã€‚è¿›å…¥phpmyadminï¼Œæ–°å»ºä¸€ä¸ªæ•°æ®è¡¨ã€‚è¡¨åä¸ºï¼šsq_client_ipã€‚ è¡¨çš„ç»“æ„ï¼š æ³¨æ„ï¼Œidé¡¹ï¼Œæ–°å»ºè¡¨æ—¶ï¼Œå‹¾é€‰AIï¼ŒAIè¡¨ç¤ºè®¾ç½®idä¸ºè‡ªå¢ä¸»é”®ã€‚è¿™æ ·æ¯æ·»åŠ ä¸€ä¸ªæ•°æ®è¿›å»ï¼Œidéƒ½ä¼šè‡ªè¡Œå¢åŠ ã€‚ 1.2 Pythonå®‰è£…Pythonï¼Œç®€å•çš„å®‰è£…pythonï¼Œä½ åªéœ€è¦è¾“å…¥ä¸‹é¢æŒ‡ä»¤ centos: 1yum -y install python Ubuntu: 1apt-get -y install python å®‰è£…å®Œpythonï¼Œéœ€è¦å®‰è£…pythonçš„mysqldbåº“ã€‚ 1pip install mysqldb 2ï¼šè‡ªå®šä¹‰åŸºæœ¬éªŒè¯å™¨æ–°å»ºä¸€ä¸ªpythonæ–‡ä»¶AuthPro.pyã€‚åœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253#!/usr/bin/python# coding=UTF-8import sysimport MySQLdb&quot;&quot;&quot;&quot;&quot;&quot;def matchpasswd(login,passwd): #ç”¨æˆ·åå’Œå¯†ç ï¼Œç”¨äºéªŒè¯è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ #ä½ å¯ä»¥è‡ªå®šä¹‰éªŒè¯é€šè¿‡çš„è¦æ±‚ï¼ŒéªŒè¯é€šè¿‡ï¼Œè¿”å›Trueï¼ŒéªŒè¯ä¸é€šè¿‡è¿”å›False if (login == &#x27;ä¿®æ”¹ä¸ºä½ çš„ç”¨æˆ·å&#x27; and passwd == &#x27;ä¿®æ”¹ä¸ºä½ çš„éªŒè¯å¯†ç &#x27;): return True else: return Falsedef write_client_ip_to_db(username,client_ip): #æ•°æ®åº“åœ°å€ï¼Œæ•°æ®åº“åï¼Œæ•°æ®åº“å¯†ç ï¼Œæ•°æ®åº“ç”¨æˆ·åï¼Œæ•°æ®åº“ç¼–ç æ ¼å¼ db=MySQLdb.connect(&quot;localhost&quot;,&quot;squid&quot;,&quot;ä¿®æ”¹ä¸ºä½ çš„å¯†ç &quot;,&quot;squid&quot;,charset=&#x27;utf8&#x27;) # ä½¿ç”¨cursor()æ–¹æ³•è·å–æ“ä½œæ¸¸æ ‡ cursor = db.cursor() # å‘sq_client_ipè¡¨ä¸­æ’å…¥ç”¨æˆ·åå’Œç”¨æˆ·ip sql = &quot;INSERT INTO sq_client_ip(username, client_ip) VALUES (&#x27;%s&#x27;, &#x27;%s&#x27;)&quot; % (username,client_ip) try: # æ‰§è¡Œsqlè¯­å¥ cursor.execute(sql) #Ok åé¢çš„printè¯­å¥å¯ä»¥å‘cacheæ—¥å¿—ä¸­è¾“å‡ºæç¤ºã€‚/var/log/squid/cache.logæŸ¥çœ‹ print(&quot;æ‰§è¡Œsqlè¯­å¥&quot;) # æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œ db.commit() except: #æ‰“å°é”™è¯¯å†…å®¹ info = sys.exc_info() print( info[0], &quot;:&quot;, info[1]) #å‘ç”Ÿé”™è¯¯æ—¶å›æ»š db.rollback() # å…³é—­æ•°æ®åº“è¿æ¥ db.close() returnwhile True: # read a line from stdin line = sys.stdin.readline() line = line.strip() #æå–è¾“å…¥å‚æ•°ã€‚ username,password,client_ip = line.split() #åˆ¤æ–­å¯†ç æ˜¯å¦åŒ¹é… if matchpasswd(username, password): #è¾“å‡ºokè¡¨ç¤ºéªŒè¯é€šè¿‡ sys.stdout.write(&#x27;OK\\n å¯†ç éªŒè¯é€šè¿‡&#x27;) #å°†å®¢æˆ·ç«¯ipæ·»åŠ è‡³æ•°æ®åº“ipç™½åå• write_client_ip_to_db(username,client_ip) else: sys.stdout.write(&#x27;ERR\\n å¯†ç éªŒè¯å¤±è´¥&#x27;) # Flush the output to stdout. sys.stdout.flush() å°†AuthPro.pyæ–‡ä»¶æ‹·è´åˆ°squidçš„é…ç½®æ–‡ä»¶å¤¹/etc/squidé‡Œ 3ï¼šå¤–éƒ¨ACLè¾…åŠ©å™¨æ–°å»ºä¸€ä¸ªpythonæ–‡ä»¶AclHelper.pyã€‚åœ¨é‡Œé¢æ·»åŠ å¦‚ä¸‹å†…å®¹: 123456789101112131415161718192021222324252627282930313233343536373839404142434445#!/usr/bin/python# coding=UTF-8import sysimport MySQLdb&quot;&quot;&quot;å½“ç”¨æˆ·è¿æ¥squidï¼Œä¼ é€’ç”¨æˆ·å®¢æˆ·ç«¯ipåœ°å€åˆ°å¤–éƒ¨è¾…åŠ©å™¨ï¼Œè¾…åŠ©å™¨é€šè¿‡æ ‡å‡†è¾“å…¥è¯»å–ã€‚è¾…åŠ©å™¨æŸ¥è¯¢æ•°æ®åº“ç¬¦åˆå®¢æˆ·ç«¯ipçš„æ‰€æœ‰é¡¹ï¼Œå¦‚æœæŸ¥è¯¢ç»“æœï¼Œæ˜¾ç¤ºå®¢æˆ·ipåœ¨æ•°æ®åº“ä¸­ï¼Œåˆ™è¾“å‡ºokï¼Œå¦åˆ™è¾“å‡ºERR&quot;&quot;&quot;def matchclientip(client_ip): #æ•°æ®åº“åœ°å€ï¼Œæ•°æ®åº“åï¼Œæ•°æ®åº“å¯†ç ï¼Œæ•°æ®åº“ç”¨æˆ·åï¼Œæ•°æ®åº“ç¼–ç æ ¼å¼ db=MySQLdb.connect(&quot;localhost&quot;,&quot;squid&quot;,&quot;ä½ çš„æ•°æ®åº“å¯†ç &quot;,&quot;squid&quot;,charset=&#x27;utf8&#x27;) # ä½¿ç”¨cursor()æ–¹æ³•è·å–æ“ä½œæ¸¸æ ‡ cursor = db.cursor() # SQL æ’å…¥è¯­å¥ sql = &quot;SELECT * FROM sq_client_ip WHERE client_ip = &#x27;%s&#x27;&quot; % (client_ip) try: # æ‰§è¡Œsqlè¯­å¥ cursor.execute(sql) result = cursor.fetchone() if result: exist_ip = True else: exist_ip = False except: # å‘ç”Ÿé”™è¯¯æ—¶å›æ»š db.rollback() exist_ip = False # å…³é—­æ•°æ®åº“è¿æ¥ db.close() return exist_ipwhile True: # ä»æ ‡å‡†è¾“å…¥è¯»å–ä¸€è¡Œï¼Œâ€œclient_ipâ€ line = sys.stdin.readline() #æå–è¾“å…¥å‚æ•°ã€‚squidï¼Œè¾“å…¥ç»™è¾…åŠ©å™¨çš„å­—ç¬¦ä¸²æ˜¯&quot;0 xx.xx.xx.xx&quot;æ ¼å¼ #åˆ©ç”¨splitåˆ†å‰²å­—ç¬¦ä¸²ï¼Œå¾—åˆ°0å’Œclient_ipçš„list client_ip = line.strip().split()[1] #åˆ¤æ–­å¯†ç æ˜¯å¦åŒ¹é… if matchclientip(client_ip): #è¾“å‡ºokè¡¨ç¤ºéªŒè¯é€šè¿‡ sys.stdout.write(&#x27;OK\\n&#x27;) #printä¼šå°†ä¿¡æ¯è¾“å‡ºåˆ°/var/log/squid/cache.logä¸­ã€‚ print(&quot;Aclè¾…åŠ©å™¨éªŒè¯æˆåŠŸ&quot;) else: sys.stdout.write(&#x27;ERR\\n&#x27;) print(&quot;ACLè¾…åŠ©å™¨éªŒè¯å¤±è´¥&quot;) # Flush the output to stdout. sys.stdout.flush() å°†AclHelper.pyæ–‡ä»¶æ‹·è´åˆ°squidçš„é…ç½®æ–‡ä»¶å¤¹/etc/squidé‡Œ 4ï¼šä¿®æ”¹squidé…ç½®æ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566# http_port è®¾ç½®ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ä¸º3128http_port 6666#çˆ¶squidé…ç½®ï¼Œé…åˆå›½å¤–æœåŠ¡å™¨server2ä½¿ç”¨nonhierarchical_direct off#è½¬å‘è¯·æ±‚é€šè¿‡stunnelè‡³çˆ¶squidcache_peer localhost parent 3128 0 defaultnever_direct allow all# access_log è®¾ç½®accessæ—¥å¿—ï¼Œdaemonè¡¨ç¤ºåœ¨åå°å°†æ—¥å¿—å†™å…¥/var/log/squid/access.logæ–‡ä»¶, # combinedæ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„logformatï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„logformataccess_log daemon:/var/log/squid/access.log combined # ACLs all, manager, localhost, and to_localhost are predefined.acl SSL_ports port 443acl Safe_ports port 80 # httpacl Safe_ports port 21 # ftpacl Safe_ports port 443 # httpsacl Safe_ports port 70 # gopheracl Safe_ports port 210 # waisacl Safe_ports port 1025-65535 # unregistered portsacl Safe_ports port 280 # http-mgmtacl Safe_ports port 488 # gss-httpacl Safe_ports port 591 # filemakeracl Safe_ports port 777 # multiling httpacl CONNECT method CONNECT # æ‹’ç»æ‰€æœ‰éSafe_portsçš„è¯·æ±‚http_access deny !Safe_ports# æ‹’ç»æ‰€æœ‰éSSL_protsçš„CONNECTè¯·æ±‚http_access deny CONNECT !SSL_ports# Only allow cachemgr access from localhosthttp_access allow localhost manager#http_access deny manager# å…è®¸æ¥è‡ªæœ¬åœ°çš„è¯·æ±‚http_access allow localhost#######################################å®šä¹‰ä¸€ä¸ªå¤–éƒ¨ACLè¾…åŠ©å™¨#ä½¿ç”¨pythonè§£é‡Šå™¨ï¼Œnegativettlè¡¨ç¤ºéªŒè¯é”™è¯¯æ—¶çš„ç¼“å­˜æ—¶é—´å•ä½ç§’ï¼Œconcurrencyè¡¨ç¤ºæœ€å¤šæ¥æ”¶çš„è®¤è¯é€šè¿‡ç”¨æˆ·ï¼Œipv4å¿…é¡»ï¼Œå¦‚æœæ²¡æœ‰ipv4ä¼šæŠ¥é”™ã€‚external_acl_type MyAclHelper negative_ttl=1 concurrency=30 ipv4 %SRC /usr/bin/python /etc/squid/AclHelper.pyacl MyAcl external MyAclHelperhttp_access allow MyAcl#å®šä¹‰ä¸€ä¸ªéªŒè¯å™¨#æŒ‡å®špythonè¿è¡Œç›®å½•ï¼Œå’Œpythonç¨‹åºçš„ç›®å½•auth_param basic program /usr/bin/python /etc/squid/AuthPro.py#å‘pythonç¨‹åºä¸­è¾“å…¥key_extraså˜é‡å®¢æˆ·ç«¯ip&quot;%&gt;a&quot;auth_param basic key_extras &quot;%&gt;a&quot;#å…è®¸å¤šå°‘ä¸ªå­ç¨‹åºauth_param basic children 30#è¾“å…¥æ¡†æç¤ºä¿¡æ¯auth_param basic realm è¾“å…¥ç”¨æˆ·åå’Œå¯†ç #éªŒè¯ä¿¡æ¯çš„ç¼“å­˜æ—¶é•¿auth_param basic credentialsttl 1 second#ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦åŒºåˆ†å¤§å°å†™auth_param basic casesensitive on#å¼ºåˆ¶ç”¨æˆ·éªŒè¯acl authenticated proxy_auth REQUIREDhttp_access allow authenticated################################################# æ‹’ç»æ‰€æœ‰è¯·æ±‚ï¼Œæœ€åå…œåº•çš„è§„åˆ™http_access deny all ç‰¹åˆ«éœ€è¦æ³¨æ„çš„æ˜¯ï¼š å¿…é¡»è¾…åŠ©å™¨é…ç½®åœ¨å‰ï¼Œè€ŒéªŒè¯å™¨é…ç½®åœ¨åã€‚ç”±äºsquidç‰¹æ®Šçš„å¤„ç†æœºåˆ¶ï¼Œå½“squidä»é…ç½®æ–‡ä»¶æŒ‡å®šçš„http_accessä¸­æ‰¾åˆ°äº†ç¬¦åˆçš„æ¡ä»¶çš„allowæˆ–denyä¿¡æ¯ï¼Œåˆ™åç»­çš„åˆ¤æ–­å°†ä¸ä¼šå†ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰åœ¨ç”¨æˆ·æ— æ³•é€šè¿‡è¾…åŠ©å™¨éªŒè¯æ—¶ï¼Œæ‰ä¼šè¿›è¡ŒéªŒè¯å™¨éªŒè¯ã€‚ è¾…åŠ©å™¨å¿…é¡»è®¾ç½®negative_ttlé¡¹ï¼Œè€Œä¸”è®¾ç½®çš„ä¸é€šè¿‡éªŒè¯æ—¶é—´ä¸æ˜“è¿‡é•¿ï¼Œæœ€å¥½åœ¨å‡ ç§’å†…ã€‚åŸå› æ˜¯ï¼Œå½“ç”¨æˆ·è¿æ¥squidåï¼Œé¦–å…ˆé€šè¿‡è¾…åŠ©å™¨æŸ¥æ‰¾æ•°æ®åº“æ˜¯å¦æœ‰æ­¤ipï¼Œå¦‚æœæ²¡æœ‰è¾…åŠ©å™¨ä¼šç¼“å­˜æ­¤ipä¿¡æ¯ï¼Œå¹¶å°†å…¶æ ‡è®°ä¸ºæœªé€šè¿‡éªŒè¯ï¼Œå†è¿›å…¥éªŒè¯å™¨ã€‚è€Œé€šå¸¸ï¼Œæˆ‘ä»¬é¦–å…ˆäºsquidè¿æ¥ä¸Šç½‘çš„å¹¶ä¸æ˜¯æµè§ˆå™¨ï¼Œå¯èƒ½æ”¶å¾®åšè½¯ä»¶ç­‰ï¼Œè¿™äº›è½¯ä»¶ç”±äºæ— æ³•å¼¹å‡ºéªŒè¯çª—å£ï¼Œè€Œå¯¼è‡´éªŒè¯å™¨éªŒè¯å¤±è´¥ã€‚æ­¤åå³ä¾¿ä½ æ‰“å¼€æµè§ˆå™¨ï¼Œè€Œç”±äºä¸Šä¸€æ¬¡çš„éªŒè¯å¤±è´¥è€Œç¼“å­˜äº†å¤±è´¥ä¿¡æ¯ï¼Œè‡´ä½¿ï¼Œsquidä¸ä¼šå†è¿›è¡Œè¾…åŠ©å™¨å’ŒéªŒè¯å™¨éªŒè¯ï¼Œè€Œç›´æ¥æ‹’ç»è®¿é—®ã€‚å› æ­¤è®¾ç½®éªŒè¯å¤±è´¥ç¼“å­˜æ—¶é—´çŸ­ç‚¹ï¼Œå¯ä»¥ä¿è¯æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨æ—¶ï¼Œè¿˜èƒ½è¿›å…¥è¾…åŠ©å™¨éªŒè¯å’ŒéªŒè¯å™¨éªŒè¯ã€‚ éªŒè¯å™¨å¿…é¡»è®¾ç½®credentialsttlé¡¹ï¼Œä¸”è®¾ç½®æ—¶é—´ä¸æ˜“è¿‡é•¿ï¼Œæœ€å¥½åœ¨å‡ ç§’å†…ã€‚ä¹‹æ‰€ä»¥éªŒè¯å™¨éªŒè¯æˆåŠŸçš„ç¼“å­˜ä¸èƒ½å¤ªé•¿ï¼Œæ˜¯å› ä¸ºå½“æˆ‘ä»¬é¦–æ¬¡é€šè¿‡éªŒè¯å™¨éªŒè¯åï¼Œsquidç¼“å­˜æˆåŠŸéªŒè¯çš„ç”¨æˆ·ä¿¡æ¯ï¼Œä¸‹æ¬¡ç”¨æˆ·åˆ™æ— éœ€å†æ¬¡ç»è¿‡éªŒè¯å™¨å¯†ç éªŒè¯ï¼Œç›´æ¥è¯»å–ç”¨æˆ·åå’Œipã€‚ä½†æ˜¯ç”±äºsquidç¼“å­˜çš„æ˜¯ç”¨æˆ·çš„ipå’Œç”¨æˆ·åï¼Œå¦‚æœä½ ä½¿ç”¨äº†å¾®åšç­‰æ²¡æœ‰éªŒè¯æ¡†çš„è½¯ä»¶ï¼Œç”±äºæ²¡æœ‰å‘squidå‘é€ç”¨æˆ·åï¼Œä¼šå¯¼è‡´æ— æ³•è”ç½‘ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬åˆ©ç”¨éªŒè¯å™¨ï¼Œåªæ˜¯ä¸ºäº†ä¿å­˜æˆåŠŸéªŒè¯çš„ç”¨æˆ·ipï¼Œç„¶åé€šè¿‡è¾…åŠ©å™¨æ¥éªŒè¯ç”¨æˆ·ã€‚æ‰€ä»¥ï¼Œé€šè¿‡ååˆ™æ¸…é™¤éªŒè¯å™¨çš„ç¼“å­˜ã€‚ ç”¨æˆ·å†æ¬¡ä¸Šç½‘ï¼Œä¾¿ä¼šé¦–å…ˆç»è¿‡è¾…åŠ©å™¨ï¼Œæ­¤æ—¶è¾…åŠ©å™¨å·²ç»èƒ½ä»æ•°æ®åº“è¯»å–åˆ°åˆšæ‰éªŒè¯å™¨ä¿å­˜çš„å®¢æˆ·ipã€‚è¾…åŠ©å™¨ï¼Œå¯ä»¥è®¾ç½®æ¯”è¾ƒä¹…çš„æˆåŠŸttlæ—¶é•¿ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªå°æ—¶ã€‚ 5ï¼šå‚è€ƒèµ„æ–™ã€Šsquidä¸­æ–‡æƒå¨æŒ‡å—ã€‹ ã€Šç”¨Pythonè„šæœ¬æ‰“é€ Squidæƒé™è®¤è¯åç«¯ç¨‹åºä»¥åŠSquid3.5 auth_param key_extrasæ–°ç‰¹æ€§ä»‹ç»ã€‹ ã€Šä½¿ç”¨squidæ­å»ºä»£ç†æœåŠ¡å™¨ã€‹ ã€ŠFeature: Add-On Helpers for Request Manipulationã€‹ ã€Šstackoverflowä¸Šå…³äºè‡ªå®šä¹‰éªŒè¯å™¨è¾“å…¥å®¢æˆ·ç«¯IPçš„å›ç­”ã€‹ æœ€åï¼Œæ„Ÿè°¢https://www.hawu.me ç«™é•¿ï¼Œæä¾›çš„ä¸€äº›å¸®åŠ©ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://sci.ci/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"Squid","slug":"Squid","permalink":"https://sci.ci/tags/Squid/"},{"name":"Mysql","slug":"Mysql","permalink":"https://sci.ci/tags/Mysql/"}]},{"title":"åˆ©ç”¨Stunnel+Squidä»£ç†å®ç°å›½å†…æ— å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘","slug":"åˆ©ç”¨Stunnel+squidä»£ç†å®ç°å›½å†…æ— å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘","date":"2020-05-28T15:26:23.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/05/28/åˆ©ç”¨Stunnel+squidä»£ç†å®ç°å›½å†…æ— å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘/","link":"","permalink":"https://sci.ci/2020/05/28/%E5%88%A9%E7%94%A8Stunnel+squid%E4%BB%A3%E7%90%86%E5%AE%9E%E7%8E%B0%E5%9B%BD%E5%86%85%E6%97%A0%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91/","excerpt":"","text":"1ï¼šåŠ é€ŸåŸç†1.1 squidä»‹ç»squidæ˜¯ä¸€ä¸ªç”¨äºä»£ç†çš„å¼€æºè½¯ä»¶ï¼Œç”¨æˆ·ä¸»æœºå°†httpè¯·æ±‚å‘é€åˆ°éƒ¨ç½²äº†squidçš„æœåŠ¡å™¨ï¼Œsquidå¯ä»¥å¸®åŠ©ç”¨æˆ·è½¬å‘httpè¯·æ±‚ã€‚åˆ©ç”¨squidï¼Œæˆ‘ä»¬å¯ä»¥è®©æœåŠ¡å™¨æ›¿æˆ‘ä»¬è¯·æ±‚æ•°æ®ï¼Œå†ç”±æœåŠ¡å™¨è½¬å‘ç»™æˆ‘ä»¬ã€‚ æŒ‰æ‰¾squidåŸç†ï¼Œæˆ‘ä»¬å°±å·²ç»å¯ä»¥è¿›è¡Œç¿»å¢™äº†ï¼Œåœ¨å›½å†…èƒ½å¤Ÿè®¿é—®çš„å›½å¤–æœåŠ¡å™¨ä¸Šéƒ¨ç½²squidï¼Œå°†è®¿é—®è°·æ­Œçš„è¯·æ±‚å‘é€ç»™squidï¼Œsquidæ›¿æˆ‘ä»¬è¯·æ±‚è°·æ­Œæ•°æ®ï¼Œå†å°†è°·æ­Œæ•°æ®è½¬å‘ç»™æˆ‘ä»¬ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œè¿‡ç¨‹ã€‚ ä½†æ˜¯ç”±äºsquidè¯·æ±‚æŠ¥å¤´æœªåŠ å¯†ï¼Œåœ¨squidæœåŠ¡å™¨å‘æµè§ˆå™¨è¿”å›æ•°æ®æ—¶ï¼Œèƒ½å¤Ÿè¢«GFWæ£€æµ‹åˆ°è®¿é—®æ•°æ®æ¥è‡ªäºè°·æ­Œã€‚ä»è€Œå°†è¿”å›æ•°æ®è¿‡æ»¤æ‰ã€‚ä¹‹åé€šè¿‡squidè¿”å›çš„æ•°æ®ï¼Œéƒ½ä¼šè¢«GFWè¿‡æ»¤æ‰ï¼Œå³ä½¿æˆ‘ä»¬è®¿é—®çš„æ˜¯ç™¾åº¦ï¼Œä¹Ÿä¼šæ— æ³•æ”¶åˆ°è¿”å›æ•°æ®ã€‚ 1.2 Httpsä»‹ç»è¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº†åŠ å¯†çš„åŸç†ï¼šhttps://blog.csdn.net/clh604/article/details/22179907 1.3 stunnelä»‹ç»stunnelæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼Œä½¿ç”¨stunnelå¯ä»¥ä¸ºæˆ‘ä»¬ä½¿ç”¨tcpåè®®ä¼ è¾“çš„æ•°æ®ä½¿ç”¨SSLåè®®åŠ å¯†ï¼Œè¿™æ ·æˆ‘ä»¬çš„è¯·æ±‚ï¼Œé™¤äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œå…¶ä»–äººå°†æ— æ³•ä»æ•°æ®ä¸­æå–åˆ°æœ‰ç”¨ä¿¡æ¯ã€‚ ä¸ºäº†è®©GFWæ— æ³•è¯†åˆ«å‡ºä¸»æœºè®¿é—®è°·æ­Œå’Œè¿”å›çš„æ•°æ®æ¥è‡ªè°·æ­Œã€‚è¿™é‡Œä½¿ç”¨stunnelå°†ä¸»æœºå’Œsquidä¹‹é—´çš„é€šä¿¡æ•°æ®åŠ å¯†ï¼Œå°†httpè¯·æ±‚çš„æŠ¥å¤´ä¹ŸåŠ å¯†ã€‚ 1.4 ä»£ç†è¿‡ç¨‹åœ¨windowsä¸»æœºä¸Šè®¾ç½®å…¨å±€ä»£ç†ï¼Œå°†windowsçš„tcpè¯·æ±‚ï¼Œè½¬å‘åˆ°å›½å†…æœåŠ¡å™¨server 1ä¸Šï¼Œå›½å†…æœåŠ¡å™¨server 1ä¸å›½å¤–æœåŠ¡å™¨server 2æ­å»ºstunnelåŠ å¯†éš§é“è¿æ¥ï¼Œå›½å¤–æœåŠ¡å™¨server 2åˆ©ç”¨squidï¼Œå‘é€ä¸»æœºçš„è®¿é—®è¯·æ±‚ï¼Œå¹¶å°†è®¿é—®ç»“æœè¿”å›ç»™server 1ï¼Œserver 1åœ¨å‘é€ç»™ä¸»æœºæµè§ˆå™¨ã€‚åŠ é€ŸåŸç†å¦‚ä¸‹å›¾ã€‚ é€šå¸¸å¯ä»¥åªåˆ©ç”¨ä¸€ä¸ªå›½å¤–æœåŠ¡å™¨ï¼Œåœ¨å›½å¤–æœåŠ¡å™¨ä¸Šéƒ¨ç½²stunnelå’Œsquidï¼Œåœ¨æœ¬åœ°ä¸»æœºä¸Šæ­å»ºstunnelå®¢æˆ·ç«¯å°±å¯ä»¥äº†ã€‚å¦‚ä¸‹å›¾ ä½†æ˜¯ï¼Œä¸ºäº†è®¿é—®æ–¹ä¾¿ï¼Œå³ä»»ä½•ç”¨æˆ·åªéœ€è¦è®¾ç½®windowsä¸Šç°æœ‰çš„ä»£ç†æœåŠ¡å™¨å°±èƒ½è®¿é—®å¤–ç½‘ï¼Œè€Œä¸éœ€è¦ä¸‹è½½stunnelå®¢æˆ·ç«¯å’Œé…ç½®å®¢æˆ·ç«¯å‚æ•°ã€‚ ç›¸æ¯”äºä¸»æœºä½¿ç”¨Stunnelå®¢æˆ·ç«¯ï¼Œå°†stunnelå®¢æˆ·ç«¯éƒ¨ç½²åˆ°å›½å†…æœåŠ¡å™¨çš„ç¼ºç‚¹æ˜¯ï¼šè¿™éœ€è¦å›½å†…å¤–å‡æœ‰æœåŠ¡å™¨ã€‚æˆæœ¬ä¼šæ›´é«˜ã€‚ æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸å›½å†…æœåŠ¡å™¨ä¹‹é—´çš„ä¿¡æ¯è¢«æŠ“å–åï¼Œèƒ½å¤Ÿè·å–åˆ°æˆ‘ä»¬è®¿é—®çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¯è°·æ­Œã€ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬ç­‰ï¼Œä½†æ˜¯æ— æ³•çŸ¥é“å…·ä½“è®¿é—®å†…å®¹ã€‚ç”±äºæ˜¯ä¸å›½å†…æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œå› æ­¤è¢«æ¢æµ‹çš„å‡ ç‡å¾ˆå°ã€‚ 2ï¼šä¸»æœºè®¾ç½®ä»£ç†è®¿é—®ä¸ºäº†è®©é˜…è¯»æœ¬æ–‡çš„è¯»è€…ï¼Œæå‰çš„çœ‹åˆ°æˆæœï¼Œå°†server1å’Œserver2éƒ½é…ç½®å¥½åï¼Œå…ˆä»‹ç»å¦‚ä½•åˆ©ç”¨ä½ æ­å»ºå¥½çš„æœåŠ¡å™¨è®¿é—®å¤–ç½‘ã€‚ æ‰“å¼€ä»£ç†æœåŠ¡å™¨è‰²è®¾ç½® åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šè¾“å…¥å›½å†…æœåŠ¡å™¨server1çš„IPå’Œstunnelå®¢æˆ·ç«¯ç›‘å¬çš„ç«¯å£å·ã€‚ ä½¿ç”¨æµè§ˆå™¨ç™»é™†google å®é™…ä¸Šä½¿ç”¨å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚å½“ç„¶ä¸ºäº†ä½ æ­å»ºçš„éš§é“ä¸ä¼šè¢«å…¶ä»–äººä½¿ç”¨ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹èƒ½å¤Ÿè®¿é—®è¿™æ¡éš§é“çš„IPè¿›è¡Œé™åˆ¶ï¼Œæˆ–è€…è®¾ç½®ä¸€ä¸ªå¯†ç ã€‚ä¼šåœ¨åç»­ä¸­ä»‹ç»åˆ°ã€‚ 3ï¼šå›½å¤–æœåŠ¡å™¨é…ç½®ç¡®ä¿åœ¨æœåŠ¡å•†å®‰å…¨ç»„é‡Œå¼€æ”¾äº†3128å’Œ3129ç«¯å£ï¼Œè¿™ä¸¤ä¸ªç«¯å£ï¼Œå°†ç”¨äºæ¥æ”¶å’Œè½¬å‘æ•°æ®ã€‚ 3.1 å®‰è£…é…ç½®Squid å®‰è£…squid ubuntuä½¿ç”¨ï¼š 1apt-get install squid centosä½¿ç”¨ï¼š 1yum install squid ä½¿ç”¨squid -væ£€æŸ¥squidæ˜¯å¦å®‰è£…å¥½ã€‚ é…ç½®squid æ‰“å¼€squidé…ç½®æ–‡ä»¶/etc/squid/squid.confã€‚æ²¡æœ‰å°±æ–°å»ºæ­¤æ–‡ä»¶ å°†æ–‡ä»¶å†…å®¹ä¿®æ”¹ä¸ºï¼š 1234567891011121314151617181920212223242526272829303132333435363738# http_port è®¾ç½®ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ä¸º3128http_port 3128# access_log è®¾ç½®accessæ—¥å¿—ï¼Œdaemonè¡¨ç¤ºåœ¨åå°å°†æ—¥å¿—å†™å…¥/var/log/squid/access.logæ–‡ä»¶, # combinedæ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„logformatï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„logformataccess_log daemon:/var/log/squid/access.log combined# visible_hotname è®¾ç½®ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºå# é»˜è®¤å–æœ¬æœºçš„hostnamevisible_hostname funway.aliyun.proxy# ACLs all, manager, localhost, and to_localhost are predefined.acl SSL_ports port 443acl Safe_ports port 80 # httpacl Safe_ports port 21 # ftpacl Safe_ports port 443 # httpsacl Safe_ports port 70 # gopheracl Safe_ports port 210 # waisacl Safe_ports port 1025-65535 # unregistered portsacl Safe_ports port 280 # http-mgmtacl Safe_ports port 488 # gss-httpacl Safe_ports port 591 # filemakeracl Safe_ports port 777 # multiling httpacl CONNECT method CONNECT# æ‹’ç»æ‰€æœ‰éSafe_portsçš„è¯·æ±‚http_access deny !Safe_ports# æ‹’ç»æ‰€æœ‰éSSL_protsçš„CONNECTè¯·æ±‚http_access deny CONNECT !SSL_ports# Only allow cachemgr access from localhosthttp_access allow localhost managerhttp_access deny manager# å…è®¸æ¥è‡ªæœ¬åœ°çš„è¯·æ±‚http_access allow localhost# æ‹’ç»æ‰€æœ‰è¯·æ±‚ï¼Œæœ€åå…œåº•çš„è§„åˆ™http_access deny all æ›´å¤šè¯¦ç»†çš„é…ç½®å‚æ•°è§£é‡Šï¼Œè¯·å‚è€ƒåšæ–‡ã€Šä½¿ç”¨squidæ­å»ºä»£ç†æœåŠ¡å™¨ã€‹ é…ç½®squidåªèƒ½æœ¬åœ°åœ°å€è®¿é—®ã€‚ è¿è¡Œsquid 12service squid start //è¿è¡Œservice squid status //æŸ¥çœ‹squidè¿è¡ŒçŠ¶æ€ 3.2 å®‰è£…é…ç½®stunnelæœåŠ¡ç«¯ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼Œå¦‚æœæ²¡æœ‰openssléœ€è¦å…ˆå®‰è£…ã€‚ 1openssl req -new -x509 -days 3650 -nodes -out stunnel.pem -keyout stunnel.pem å°†ç”Ÿæˆçš„è¯ä¹¦ï¼Œå¤åˆ¶åˆ°/etc/stunnelæ–‡ä»¶å¤¹ä¸‹ 1cp stunnel.pem /etc/stunnel è¿™ä¸ªè¯ä¹¦è¿˜éœ€è¦ä¸‹è½½åˆ°ä¸»æœºï¼Œä¹‹åä¸Šä¼ åˆ°å›½å†…æœåŠ¡å™¨ï¼Œç”¨äºä¸ºstunnleå®¢æˆ·ç«¯è®¾ç½®çš„å…¬é’¥ã€‚ ä¸‹è½½å®‰è£…stunnel 1apt-get install stunnel è®¾ç½®stunnelé…ç½®æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849; è®¾ç½®å·¥ä½œç›®å½•ï¼Œæ²¡æœ‰ç›®å½•éœ€è¦å…ˆåˆ›å»ºchroot = /var/run/stunnel/; è®¾ç½®stunnelçš„pidæ–‡ä»¶è·¯å¾„ï¼ˆåœ¨chrootä¸‹ï¼‰pid = /stunnel.pid; è®¾ç½®stunnelå·¥ä½œçš„ç”¨æˆ·ï¼ˆç»„ï¼‰setuid = rootsetgid = root; å¼€å¯æ—¥å¿—ç­‰çº§ï¼šemerg (0), alert (1), crit (2), err (3), warning (4), notice (5), info (6), or debug (7); é»˜è®¤ä¸º5debug = 7; æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆæˆ‘çš„serverçš„ç‰ˆæœ¬æœ‰ä¸ªbugï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿè¢«æ”¾åœ¨chrootè·¯å¾„ä¸‹äº†ï¼Œclientçš„ç‰ˆæœ¬åˆ™æ˜¯ç‹¬ç«‹çš„=ã€‚=#ï¼‰output = /stunnel.log; è¯ä¹¦æ–‡ä»¶ï¼Œå°±æ˜¯åœ¨æœ¬æ–‡2.2ä¸­ç”¨opensslç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦ï¼ˆserverç«¯å¿…é¡»è®¾ç½®è¿™ä¸¤é¡¹ï¼‰cert = /etc/stunnel/stunnel.pem; ç§é’¥æ–‡ä»¶key = /etc/stunnel/stunnel.pem; è®¾ç½®stunnelæœåŠ¡ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªæœåŠ¡ï¼Œç›‘å¬åŒçš„ç«¯å£ï¼Œå¹¶å‘ç»™ä¸åŒçš„serverã€‚; è‡ªå®šä¹‰æœåŠ¡åsquid-proxy[squid-proxy]; æœåŠ¡ç›‘å¬çš„ç«¯å£ï¼Œclientè¦è¿æ¥è¿™ä¸ªç«¯å£ä¸serveré€šä¿¡accept = 3129; æœåŠ¡è¦è¿æ¥çš„ç«¯å£ï¼Œè¿æ¥åˆ°squidçš„3128ç«¯å£ï¼Œå°†æ•°æ®å‘ç»™squidconnect = localhost:3128; **************************************************************************; * ä¸‹é¢è¿™äº›é…ç½®æˆ‘éƒ½æ³¨é‡Šæ‰äº†ï¼Œä½†ä¹Ÿéœ€è¦äº†è§£ä¸‹ *; **************************************************************************; è®¾ç½®æ˜¯å¦å¯¹ä¼ è¾“æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œé»˜è®¤ä¸å¼€å¯ã€‚; è¿™æ˜¯è·Ÿopensslç›¸å…³çš„ï¼Œå¦‚æœä½ çš„opensslæ²¡æœ‰zlibï¼Œå¼€å¯è¿™ä¸ªè®¾ç½®ä¼šå¯¼è‡´å¯åŠ¨å¤±è´¥ï¼ˆfailed to initialize compression methodï¼‰;compression = zlib; è®¾ç½®sslç‰ˆæœ¬,è¿™ä¸ªä¹Ÿæ˜¯è·Ÿå®‰è£…çš„opensslæœ‰å…³çš„;sslVersion = TLSv1; Authentication stuff needs to be configured to prevent MITM attacks; It is important to understand that this option was solely designed for access control and not for authorization; It is not enabled by default!; ä¸‹é¢è¿™äº›é…ç½®ç”¨æ¥å®šä¹‰æ˜¯å¦ä¿¡ä»»å¯¹æ–¹å‘è¿‡æ¥çš„è¯ä¹¦ã€‚å°±å¥½æ¯”æµè§ˆå™¨è®¿é—®httpsçš„æ—¶å€™ï¼Œæµè§ˆå™¨é»˜è®¤ä¼šä¿¡ä»»é‚£äº›ç”±æƒå¨CAæœºæ„ç­¾å‘çš„è¯ä¹¦ï¼Œ; å¯¹äºé‚£äº›è‡ªç­¾åè¯ä¹¦ï¼Œæµè§ˆå™¨å°±ä¼šå¼¹å‡ºå¯¹è¯æ¡†æé†’ç”¨æˆ·è¿™ä¸ªè¯ä¹¦å¯èƒ½ä¸å®‰å…¨ï¼Œæ˜¯å¦è¦ä¿¡ä»»è¯¥è¯ä¹¦ã€‚; è¿™æ˜¯æœ‰æ•ˆé˜²æ­¢ä¸­é—´äººæ”»å‡»çš„æ‰‹æ®µ; verify ç­‰çº§2è¡¨ç¤ºéœ€è¦éªŒè¯å¯¹æ–¹å‘è¿‡æ¥çš„è¯ä¹¦ï¼ˆé»˜è®¤0ï¼Œä¸éœ€è¦éªŒè¯ï¼Œéƒ½ä¿¡ä»»ï¼‰; å› ä¸ºè¿™ä¸ªé…ç½®æ˜¯serverç«¯çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç†ä¼šclientçš„è¯ä¹¦ï¼ˆclientä¹Ÿä¸ä¼šæ²¡äº‹å‘è¯ä¹¦è¿‡æ¥å•¦ï¼‰;verify = 2; CAfile è¡¨ç¤ºå—ä¿¡çš„è¯ä¹¦æ–‡ä»¶ï¼Œå³å¦‚æœå¯¹æ–¹å‘è¿‡æ¥çš„è¯ä¹¦åœ¨è¿™ä¸ªCAfileé‡Œï¼Œé‚£ä¹ˆå°±æ˜¯å—ä¿¡ä»»çš„è¯ä¹¦ï¼›å¦åˆ™ä¸ä¿¡ä»»è¯¥è¯ä¹¦ï¼Œæ–­å¼€è¿æ¥ã€‚;CAfile = /etc/stunnel/stunnel-client.pem å¯åŠ¨åœæ­¢stunnel 1234service stunnel start //å¼€å¯stunnelservice stunnel restart //é‡å¯service stunnel stop //åœæ­¢service stunnel status //æŸ¥çœ‹çŠ¶æ€ 4ï¼šå›½å†…æœåŠ¡å™¨é…ç½®Stunnelå®¢æˆ·ç«¯å›½å†…æœåŠ¡å™¨ï¼Œå°±æ˜¯åœ¨æµè§ˆå™¨ä»£ç†è®¾ç½®ä¸­ï¼Œå¡«å…¥çš„æœåŠ¡å™¨IPï¼Œè€Œç«¯å£ï¼Œåˆ™æ˜¯stunnelæ¥æ”¶ä»£ç†æ•°æ®çš„ç«¯å£ã€‚ åœ¨æœåŠ¡å™¨æä¾›å•†ç½‘é¡µä¸­çš„å®‰å…¨ç»„è®¾ç½®é‡Œå¼€å¯stunnelæ¥æ”¶æ•°æ®çš„ç«¯å£ã€‚ æœ¬äººä½¿ç”¨çš„é˜¿é‡Œäº‘è½»é‡çº§åº”ç”¨æœåŠ¡å™¨ï¼Œè¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å°ç›¸åº”é¡µé¢åï¼Œæ‰¾åˆ°å®‰å…¨ç»„-&gt;é˜²ç«å¢™-&gt;æ·»åŠ æ–°è§„åˆ™ã€‚åœ¨æ–°è§„åˆ™é‡Œï¼Œå¼€æ”¾ï¼ŒTCPåè®®çš„3128æ¥å£ã€‚ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–æ¥å£ã€‚ é…ç½®å¥½å®‰å…¨ç»„åï¼Œé˜¿é‡Œäº‘æœåŠ¡å™¨æœ¬èº«è¿˜æœ‰ä¸€ä¸ªé˜²ç«å¢™ï¼Œè¿˜éœ€è¦åœ¨æœåŠ¡å™¨é‡Œå¼€æ”¾3128ç«¯å£ã€‚ æŸ¥çœ‹å¼€æ”¾ç«¯å£ï¼Œå¦‚æœæ²¡æœ‰firewallï¼Œè¯·å…ˆå®‰è£… 1firewall-cmd --list-all è®¾ç½®éœ€è¦å¼€æ”¾çš„ç«¯å£ 12firewall-cmd --zone=public --add-port=3128/tcp --permanent//è®¾ç½®firewall-cmd --reload//ç”Ÿæ•ˆ æ­¤æ—¶å†æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£ï¼Œå°±èƒ½çœ‹åˆ°3128ç«¯å£å·²å¼€æ”¾ã€‚ å®‰è£…stunnelå®¢æˆ·ç«¯ã€‚ ubuntuä½¿ç”¨: 1apt-get install stunnel centosä½¿ç”¨ï¼š 1yum install stunnel è®¾ç½®stunnelå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ 1234567891011121314151617181920212223242526; stunnelå·¥ä½œç›®å½•,å¦‚æœæ²¡æœ‰/var/run/stunnelæ–‡ä»¶å¤¹ï¼Œéœ€å…ˆåˆ›å»ºchroot = /var/run/stunnel/; stunnelå·¥ä½œçš„ç”¨æˆ·ç»„setuid = rootsetgid = root; stunnelå·¥ä½œæ—¶å€™çš„pidpid = /stunnel.pid; æ—¥å¿—ç­‰çº§debug = 7; æ—¥å¿—æ–‡ä»¶output = /var/log/stunnel/stunnel.log; è¡¨ç¤ºä»¥clientæ¨¡å¼å¯åŠ¨stunnelï¼Œé»˜è®¤client = noï¼Œå³serveræ¨¡å¼client = yes; å®šä¹‰ä¸€ä¸ªæœåŠ¡[squid-proxy]; ç›‘å¬3128ç«¯å£ï¼Œé‚£ä¹ˆç”¨æˆ·æµè§ˆå™¨çš„ä»£ç†è®¾ç½®å°±æ˜¯ stunnel-client-ip:3128accept = 3128; è¦è¿æ¥åˆ°çš„stunnel serverçš„ipä¸ç«¯å£ï¼Œä¿®æ”¹xx.xx.xx.xxä¸ºå›½å¤–çš„æœåŠ¡å™¨connect = xx.xx.xx.xx:3129; éœ€è¦éªŒè¯å¯¹æ–¹å‘è¿‡æ¥çš„è¯ä¹¦verify = 2; ç”¨æ¥è¿›è¡Œè¯ä¹¦éªŒè¯çš„æ–‡ä»¶ï¼ˆé‡Œé¢æœ‰stunnel serverçš„è¯ä¹¦ï¼‰CAfile = /etc/stunnel/stunnel-server.pem; å®¢æˆ·ç«¯ä¸éœ€è¦ä¼ é€’è‡ªå·±çš„è¯ä¹¦ï¼Œæ‰€ä»¥æ³¨é‡Šæ‰;cert = /etc/stunnel/stunnel.pem;key = /etc/stunnel/stunnel.key å°†stunnleå…¬é’¥è¯ä¹¦æ‹·è´ä¸€ä»½åˆ°stunnelå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶çš„æŒ‡å®šåœ°å€ä¸Šã€‚ é…ç½®æ–‡ä»¶é‡ŒCAfile = /etc/stunnel/stunnel-server.pemå†™æ˜äº†æˆ‘ä»¬éœ€è¦å°†å…¬é’¥ä¿å­˜çš„ä½ç½®å’Œå…¬é’¥çš„æ–‡ä»¶åã€‚ æˆ‘ä»¬åªéœ€è¦å°†ï¼Œ3.2èŠ‚ç”Ÿæˆçš„è¯ä¹¦æ‰“å¼€ï¼Œå¤åˆ¶å·²BEGIN CERTIFICATIONå¼€å¤´åˆ°END CERTIFICATIONç»“æŸçš„å…¬é’¥ã€‚ç„¶åï¼Œæ–°å»º/etc/stunnel/stunnel-server.pemæ–‡ä»¶ï¼Œå°†å…¬é’¥ç²˜è´´è¿›å»ã€‚ è¿™æ ·stunnelå®¢æˆ·ç«¯å°±èƒ½å°†æ•°æ®åŠ å¯†åå‘é€ç»™stunnelæœåŠ¡å™¨äº†ã€‚ å¯åŠ¨å’Œåœæ­¢stunnel 1234service stunnel start &#x2F;&#x2F;å¼€å¯stunnelservice stunnel restart &#x2F;&#x2F;é‡å¯service stunnel stop &#x2F;&#x2F;åœæ­¢service stunnel status &#x2F;&#x2F;æŸ¥çœ‹çŠ¶æ€ 5ï¼šä¸è¶³å’Œä¼˜åŒ–5.1 ä»£ç†æ–¹æ³•çš„ä¸è¶³ ç”±äºå®¢æˆ·ç«¯çš„stunnelç›´æ¥ç›‘å¬3128ç«¯å£ï¼Œè€Œæ²¡æœ‰ä»»ä½•çš„éªŒè¯å’Œè®¿é—®é™åˆ¶ï¼Œå› æ­¤ï¼Œä»»ä½•çŸ¥é“ipå’Œç«¯å£çš„äººéƒ½èƒ½é€šè¿‡è®¾ç½®ä»£ç†ï¼Œä½¿ç”¨ä½ çš„ä»£ç†æ¥å£ã€‚ stunnelæœåŠ¡ç«¯æ²¡æœ‰è®¾ç½®å¯¹å®¢æˆ·ç«¯çš„è¯ä¹¦éªŒè¯ï¼Œä»»ä½•é€šè¿‡è‡ªå»ºstunnelå®¢æˆ·ç«¯çš„äººï¼Œéƒ½æœ‰å¯èƒ½ä½¿ç”¨ä½ çš„stunnelæœåŠ¡ï¼Œè¿›è¡Œé€šä¿¡ã€‚ 5.2 ä¼˜åŒ– é…ç½®squidç”¨æˆ·æˆæƒï¼Œå³åœ¨ç”¨æˆ·ä½¿ç”¨ä»£ç†ä¸Šç½‘æ—¶ï¼Œå¼¹å‡ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè¾“å…¥æ­£ç¡®ï¼Œæ‰èƒ½ä½¿ç”¨squid ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/squid/squid.confï¼Œåœ¨http_access deny allä¹‹å‰è¿½åŠ ä»¥ä¸‹å†…å®¹ï¼Œå¹¶æ³¨é‡Šæ‰http_access allow localhost 1234567891011121314151617181920# auth_param è®¾ç½®ä»£ç†çš„è®¤è¯æ–¹å¼# ç”¨æ³•ï¼šauth_param scheme parameter [setting]# schemeè¡¨ç¤ºè®¤è¯æœºåˆ¶ï¼Œsquidæ”¯æŒBasicï¼ŒDigestï¼ŒNTLMï¼ŒNegotiateå››ç§è®¤è¯æœºåˆ¶# program è®¾ç½®è®¤è¯ç¨‹åºä¸ºncsa_authï¼ˆsquidè‡ªå¸¦ä¸å°‘è®¤è¯ç¨‹åºä»¥åŠå…¶ä»–æ‹“å±•ç¨‹åºï¼‰ï¼Œç¨‹åºæ‰€éœ€å¯†ç æ–‡ä»¶passwdã€‚ã€‚å¦‚æœlinuxæ˜¯32ä½ç³»ç»Ÿï¼Œè®¤è¯ç¨‹åº/usr/lib/squid/ç›®å½•ä¸‹ã€‚è®¤è¯ç¨‹åºåç§°æœ‰å¯èƒ½æ˜¯basic_ncsa_authã€‚éœ€è¦å…·ä½“æ‰“å¼€æ–‡ä»¶å¤¹åæŸ¥çœ‹ã€‚auth_param basic program /usr/lib64/squid/ncsa_auth /etc/squid/passwd# children è®¾ç½®åå°å¯åŠ¨å‡ ä¸ªè®¤è¯ç¨‹åºè¿›ç¨‹auth_param basic children 3# credentialsttl è®¾ç½®è®¤è¯å¤±æ•ˆæ—¶é—´ï¼Œè¿‡æœŸåéœ€é‡æ–°è®¤è¯auth_param basic credentialsttl 10 hours# realm è®¾ç½®è®¤è¯æ—¶è¿”å›å¤´é‡Œå¤¹å¸¦çš„ä¿¡æ¯â€œwlecome to using my proxyâ€auth_param basic realm welecome to using my proxy# ï¼ï¼ï¼ä¸Šé¢åªæ˜¯è®¾ç½®äº†éœ€è¦è®¤è¯ï¼Œå¹¶æœªå°†è®¤è¯ç”Ÿæ•ˆï¼Œè¿˜éœ€è®¾ç½®aclä¸http_access# æ·»åŠ åä¸ºAuthUsersè®¿é—®åˆ—è¡¨ï¼Œè¡¨ç¤ºé€šè¿‡è®¤è¯çš„ç”¨æˆ·acl AuthUsers proxy_auth REQUIRED# å…è®¸AuthUsersçš„ä»£ç†è¯·æ±‚http_access allow AuthUsers æ–°å»ºå¯†ç æ–‡ä»¶ 1htpasswd -c /etc/squid/passwd qifei å¦‚æœæ²¡æœ‰htpasswdï¼Œåˆ™æŒ‰æç¤ºå®‰è£…ã€‚è¾“å…¥å¯†ç å³å¯ã€‚ é‡å¯squid 1service squid restart æ·»åŠ stunnelå¯¹å®¢æˆ·ç«¯çš„è¯ä¹¦éªŒè¯ï¼Œéœ€è¦å†æ–°å»ºä¸€ä¸ªè¯ä¹¦æ–‡ä»¶ï¼ŒåŒæ—¶ä¿®æ”¹æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ã€‚ 6ï¼šé—®é¢˜å’Œè°ƒè¯•6.1 å›½å†…squidèƒ½æ¥é€šï¼Œä½†æ— æ³•è®¿é—®ç½‘ç»œè¿™å¯èƒ½æ˜¯æœåŠ¡å™¨ç«¯å£æ²¡å¼€ 1http:&#x2F;&#x2F;port.ping.pe&#x2F;xx.xx.xx.xx:port å°†ä¸Šè¿°ç½‘å€ï¼Œä¿®æ”¹ipåœ°å€å’Œç«¯å£åï¼Œé€šè¿‡æµè§ˆå™¨æ‰“å¼€ï¼Œçœ‹çœ‹æœåŠ¡å™¨ç«¯å£æ˜¯å¦èƒ½å¤Ÿæ¥é€šï¼Œå¦‚æœæ˜¾ç¤ºfailedï¼Œé‚£ä¹ˆå‚ç…§ç¬¬å››ç« å†…å®¹ï¼Œå®‰è£…firewaldï¼Œå¹¶æ‰“å¼€å¯¹åº”ç«¯å£ã€‚ 6.2 ä¸­å›½ç§»åŠ¨åªèƒ½è®¿é—®è°·æ­Œè€Œæ— æ³•è®¿é—®YouTube5.30æ—¥æ›´æ–°ï¼šåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„ä½¿ç”¨åï¼Œä¸Šç§æ–¹æ³•å­˜åœ¨ä¸€äº›å¼Šç«¯ã€‚ åœ¨å¼€å¯ä»£ç†åï¼Œå¯ä»¥è®¿é—®è°·æ­Œï¼Œå’Œä¸€äº›å…¶ä»–å¤–ç½‘ç½‘ç«™ã€‚ä½†æ˜¯ï¼Œæ— æ³•è®¿é—®youtubeã€facebookç­‰ç½‘ç«™ã€‚åå¤åˆ·æ–°ï¼Œè¿˜æ˜¯å¯ä»¥è®¿é—®åˆ°youtubeã€‚æ‰‹æœºä¸Šçš„è®¸å¤šä¾èµ–å¤–ç½‘çš„è½¯ä»¶æ¯”å¦‚è°·æ­Œå•†åº—ï¼Œæ— æ³•ä½¿ç”¨ã€‚ åˆ©ç”¨wiresharkå¯¹æ— çº¿ç½‘å¡è¿›è¡ŒæŠ“åŒ…ã€‚å‘ç°ï¼Œåœ¨æµè§ˆå™¨è®¿é—®youtubeæ—¶ï¼Œæµè§ˆå™¨å‘å›½å†…çš„ä¸­è½¬ä»£ç†æœåŠ¡å™¨ï¼Œå‘é€äº†httpåè®®æ•°æ®ã€‚æ­¤æ•°æ®å¸¦æœ‰æ˜æ˜¾çš„è¯·æ±‚å¤´urlyoutube.comã€‚çŒœæµ‹å¯èƒ½æ˜¯å›½å†…è·¯ç”±ï¼Œå°†å«youtubeç­‰urlçš„è¯·æ±‚å¤´è¿‡æ»¤æ‰äº†ã€‚è¿™æ ·ï¼Œè¯·æ±‚youtubeçš„æ•°æ®æ ¹æœ¬æ— æ³•åˆ°è¾¾ä¸­è½¬æœåŠ¡å™¨ã€‚ è€Œå¤šæ¬¡åˆ·æ–°youtubeç½‘ç«™ï¼Œè¿˜æ˜¯èƒ½å¤Ÿè¿åŒï¼Œè¯´æ˜å›½å†…è·¯ç”±å¹¶æ²¡æœ‰å®Œå…¨ä¸¢å¼ƒyoutubeè¯·æ±‚ï¼Œè€Œæ˜¯éƒ¨åˆ†ä¸¢å¼ƒäº†æˆ‘ä»¬çš„è¯·æ±‚ã€‚ ä¹‹æ‰€ä»¥è°·æ­Œèƒ½å®Œå…¨æ— é˜»åœ°æ¥é€šï¼Œæˆ‘çŒœæµ‹ï¼Œæ˜¯å› ä¸ºå›½å†…è®¸å¤šç½‘ç«™ï¼Œæœ‰ä¾èµ–è°·æ­Œçš„å„ç§apiï¼Œå› æ­¤å±è”½çš„æŸå¤±è¿œå¤§äºå°é”çš„æŸå¤±ã€‚å› æ­¤åªåœ¨å›½é™…å‡ºå£ä¸Šï¼Œå¯¹è°·æ­Œè¿›è¡Œäº†å°é”ï¼Œè€Œå›½å†…æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ²¡æœ‰é—®é¢˜ã€‚ æŸ¥é˜…httpsåè®®çš„å·¥ä½œåŸç†ä¸éš¾çŸ¥é“ã€‚æµè§ˆå™¨éœ€è¦é¦–å…ˆä½¿ç”¨httpåè®®ï¼Œå‘youtubeæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒyoutubeæœåŠ¡å™¨è¿”å›ç»™æµè§ˆå™¨SSLè¯ä¹¦å…¬é’¥ï¼Œä¹‹åæµè§ˆå™¨å’ŒyoutubeæœåŠ¡å™¨æ‰ä¼šä½¿ç”¨SSLåŠ å¯†åçš„æ•°æ®è¿›è¡Œé€šè®¯ã€‚ åœ¨youtubeæœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´æ·»åŠ ä»£ç†ï¼Œä¹Ÿåªæ˜¯è½¬å‘æ•°æ®ï¼Œå¹¶æ²¡æœ‰æ”¹å˜æµè§ˆå™¨è®¿é—®youtubeæœåŠ¡å™¨æ—¶ï¼Œå‘é€åŒ…å«åŒ…å¤´çš„httpæ•°æ®çš„äº‹å®ã€‚ å› æ­¤ï¼Œå³ä¾¿æˆ‘ä»¬åœ¨å›½å†…stunnelå®¢æˆ·ç«¯å’Œå›½å¤–çš„stunnelå®¢æˆ·ç«¯ä¹‹é—´çš„æ•°æ®è¿›è¡Œäº†åŠ å¯†ï¼Œä¹Ÿæ— æ³•è§„é¿æ‰æµè§ˆå™¨åˆ°å›½å†…stunnelæœåŠ¡å™¨ä¹‹é—´æœ‰httpè¯·æ±‚ï¼Œé€ æˆè¯·æ±‚è¢«ä¸¢å¼ƒçš„é—®é¢˜ã€‚ æœ€å¥½çš„åŠæ³•è¿˜æ˜¯ï¼Œåœ¨æµè§ˆå™¨æ‰€åœ¨ä¸»æœºæŒ‰è½¬stunnelå®¢æˆ·ç«¯ã€‚ç›´æ¥ä½¿ç”¨stunnelå®¢æˆ·ç«¯å‘å›½å¤–stunnelæœåŠ¡å™¨å‘é€æ•°æ®ï¼Œå°†æµè§ˆå™¨çš„æ‰€æœ‰å‡ºå£æµé‡åŠ å¯†ï¼Œç›´åˆ°å‘é€åˆ°å›½å¤–å†è§£å¯†ï¼Œå¹¶è½¬å‘ã€‚ è¿™æ ·åšï¼Œå…¶å®å’Œä½¿ç”¨ssæˆ–è€…ssråŸç†ç›¸åŒã€‚ä½†æ˜¯ï¼Œç¼ºå°‘ä¸€äº›ä¼ªè£…ã€‚ 5.31æ—¥æ›´æ–°ï¼šæˆ‘ä½¿ç”¨ping.peç½‘ç«™æä¾›çš„ç«¯å£æµ‹è¯•ï¼Œå‘ç°ï¼Œå½“æˆ‘è®¿é—®å›½å†…æœåŠ¡å™¨3128ç«¯å£æ—¶ï¼Œé™¤äº†ä¸­å›½ç§»åŠ¨çš„ç½‘ç»œï¼Œå…¶ä»–åŒ…æ‹¬ä¸­å›½ç”µä¿¡å’Œè”é€šï¼Œå¤–ç½‘åœ¨å†…çš„æ‰€æœ‰è¿è¥å•†å‡èƒ½pingåŒ3128ç«¯å£ã€‚ æˆ‘çŒœæµ‹å¯èƒ½ä¸­å›½ç§»åŠ¨ä¼šå¯¹3128ç«¯å£è¿›è¡Œéšæœºä¸¢åŒ…ã€‚æ¥é˜»æ­¢squidä»£ç†çš„ä½¿ç”¨ã€‚ æˆ‘ä¿®æ”¹äº†æ¥æ”¶ä»£ç†çš„ç«¯å£å·ã€‚å†æ¬¡åœ¨Ping.peä¸Šæµ‹è¯•ï¼Œç§»åŠ¨å·²ç»èƒ½å¤Ÿpingé€šç«¯å£ã€‚ç„¶è€Œï¼Œä»ç„¶å­˜åœ¨è°·æ­Œèƒ½å¤Ÿè®¿é—®ï¼Œè€Œyoutubeå’Œfbä¸èƒ½è®¿é—®çš„é—®é¢˜ã€‚ çŒœæµ‹ï¼Œå¯èƒ½ä¸­å›½ç§»åŠ¨ä¼šéšæœºä¸¢å¼ƒè¯·æ±‚åœ°å€æ˜¯youtubeçš„httpè¯·æ±‚æ•°æ®ã€‚äºæ˜¯æˆ‘æ›´æ¢äº†æˆ‘çš„è”é€šæ‰‹æœºå¡ï¼Œæ¥ä»£ç†ä¸Šç½‘ã€‚å‘ç°è°·æ­Œã€youtubeå’Œå…¶ä»–å¤–ç½‘ç½‘ç«™ï¼Œå‡èƒ½å¾ˆå¥½çš„è®¿é—®ã€‚æˆ‘åˆæµ‹è¯•äº†ç”µä¿¡ç½‘ç»œï¼Œå‘ç°ç»“æœä¹Ÿæ˜¯å¥½çš„ã€‚ ç»“è®ºï¼Œä¸­å›½ç§»åŠ¨ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨ä»£ç†ä¸Šç½‘æ—¶ï¼Œä¼šå¯¹è¯·æ±‚urlä¸ºyoutube.comä¹‹ç±»çš„httpè¯·æ±‚è¿›è¡Œäººä¸ºéšæœºä¸¢åŒ…ï¼Œè€Œä¸”ä¸¢åŒ…ç‡æé«˜ã€‚é¢„æµ‹è¶…è¿‡ç™¾åˆ†ä¹‹å…«åã€‚ã€‚äº†è§£ç§»åŠ¨å›½é™…å¸¦å®½ä¿æœ‰ç‡ï¼Œä¸éš¾å‘ç°ï¼Œç§»åŠ¨çš„å›½é™…å¸¦å®½å æœ‰ç‡æ˜¯ä¸‰å¤§è¿è¥å•†é‡Œæœ€ä½çš„ï¼Œå´æœ‰ç¬¬äºŒçš„å›½é™…ç”¨æˆ·ã€‚å¯è§ä¸ºäº†è§£å†³å¸¦å®½ä¸è¶³é—®é¢˜ï¼Œä»–åœ¨å›½å†…ä¾¿å¯¹youtubeæµé‡è¿›è¡Œäº†ä¸¢å¼ƒï¼Œè€Œä¸æ˜¯åˆ°å›½é™…å‡ºå£å†ä¸¢å¼ƒã€‚ã€‚ è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ï¼Œå‡å°‘äº†youtubeè¿™ç±»åœ¨å›½é™…å‡ºå£ä¼šè¢«æ‹¦æˆªçš„æµé‡å ç”¨ä¼ é€’æ—¶çš„å¸¦å®½ï¼Œé™ä½å›½é™…å‡ºå£è¿‡æ»¤è®¾å¤‡çš„æŠ•å…¥ã€‚ç¼ºç‚¹æ˜¯ï¼Œä¼šåŠ å¤§åœ¨å›½å†…è·¯ç”±è¿‡æ»¤è®¾å¤‡çš„æŠ•å…¥ã€‚ é€šè¿‡å¯¹httpsåŸç†å’Œç§»åŠ¨è¿‡æ»¤youtubeæµé‡çš„åˆ†æï¼Œæˆ‘ä»¬åº”è¯¥çŸ¥é“ï¼Œåœ¨ä½¿ç”¨å›½å†…ä¸­è½¬æ–¹å¼è¿›è¡Œå¤–ç½‘è®¿é—®æ—¶ï¼Œè¿è¥å•†èƒ½å¤ŸçŸ¥é“ä½ æ­£åœ¨è®¿é—®å¤–ç½‘ã€‚è™½ç„¶æµé‡æµå‘äº†å›½å†…æœåŠ¡å™¨ï¼Œå¦‚æœç½‘è­¦å¯¹æ‹¦æˆªçš„æµé‡è¿›è¡Œåˆ†æï¼Œæ˜¯èƒ½å¤ŸçŸ¥é“ä½ è®¿é—®äº†å“ªäº›å¤–å›½ç½‘ç«™çš„ã€‚ã€‚åå‘æº¯æºï¼Œå¦‚æœä½ ä½¿ç”¨äº†æ‰‹æœº4Gç½‘ç»œè®¿é—®ï¼Œé‚£ä¹ˆï¼Œè¥è¿å•†é…åˆï¼Œèƒ½å¤Ÿå®šä½åˆ°ä½ æœ¬äººã€‚å¦‚æœä½¿ç”¨wifiè®¿é—®ï¼Œèƒ½å¤Ÿå®šä½åˆ°ä½ çš„å®¶åº­ã€‚å¦‚æœç½‘è­¦æŸ¥çœ‹è·¯ç”±å™¨æ—¥å¿—ï¼Œä¸éš¾æ‰¾åˆ°ï¼Œæ˜¯å“ªä¸ªæ‰‹æœºè®¿é—®äº†è¿™äº›å¤–ç½‘ã€‚ è€Œhttpè¯·æ±‚å¤´ä¸­åŒ…å«çš„è®¾å¤‡ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¯ä»€ä¹ˆç”µè„‘ï¼Œæµè§ˆå™¨å“ç‰Œå’Œç‰ˆæœ¬ç­‰ï¼Œæ— ç–‘é™ä½äº†æ‰¾åˆ°ä½ çš„éš¾åº¦ã€‚ æ€»çš„æ¥è¯´ï¼Œä¸ºäº†ç½‘ç»œå®‰å…¨ï¼Œé™ä½è¢«å®¡æŸ¥çš„é£é™©ã€‚åœ¨æœ¬åœ°ä¸»æœºéƒ¨ç½²stunnelå®¢æˆ·ç«¯ï¼Œæ¯”åœ¨å›½å†…æœåŠ¡å™¨ä¸­è½¬æ›´åŠ å®‰å…¨ã€‚ä½†æ˜¯é•¿æ—¶é—´çš„åŠ å¯†è¿æ¥å›½å¤–æœåŠ¡å™¨ï¼Œä¸éš¾è®©äººçŒœå‡ºï¼Œä½ æ­£åœ¨ä½¿ç”¨vpnä¹‹ç±»çš„è½¯ä»¶è®¿é—®å¤–ç½‘ã€‚ä½¿ç”¨wifiçš„ä»£ç†æ¯”ä½¿ç”¨æ‰‹æœºç½‘ç»œçš„ä»£ç†æ›´åŠ å®‰å…¨ã€‚ 6.3 ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç æ‰‹æœºè½¯ä»¶ä¸èƒ½å¼¹å‡ºç™»é™†æ¡†åœ¨å®é™…ä»£ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä½¿ç”¨wifiæˆ–æ‰‹æœºç½‘ç»œçš„è½¯ä»¶ï¼Œæ— æ³•å¼¹å‡ºsquidçš„ä»£ç†è®¤è¯æ¡†ï¼Œä»è€Œæ— æ³•è¾“å…¥è´¦å·å’Œå¯†ç ã€‚å› æ­¤ï¼Œè½¯ä»¶ä¼šæ²¡åŠæ³•è®¿é—®å¤–ç½‘ï¼Œåªæœ‰æµè§ˆå™¨å¯ä»¥è®¿é—®ã€‚ æ–¹æ³•1ï¼šå®Œå…¨å¼€æ”¾ä»£ç†ä¿®æ”¹squid.confå…³é—­ç”¨æˆ·åå’Œå¯†ç éªŒè¯ã€‚å…è®¸æœ¬åœ°ipç™»é™†ã€‚æ­¤æ—¶æ‰€æœ‰çŸ¥é“IPå’Œç«¯å£çš„ç”¨æˆ·éƒ½èƒ½ä½¿ç”¨ä»£ç†è®¿é—®ã€‚ã€‚è¿™ç§æ–¹æ³•æ˜¯æä¸å®‰å…¨çš„ï¼Œå› ä¸ºï¼Œæœ‰è®¸å¤šçˆ¬è™«è½¯ä»¶ï¼Œèƒ½å¤Ÿé€šè¿‡æ‰«æipå’Œç«¯å£ï¼Œæ”¶é›†èƒ½å¤Ÿä½¿ç”¨ä»£ç†çš„ipå’Œå¯¹åº”ç«¯å£ã€‚çŸ­æ—¶é—´çš„ä½¿ç”¨æ–¹æ³•ä¸€æ˜¯å¯ä»¥çš„ï¼Œä½†é•¿æœŸä¸‹æ¥ï¼Œå®¹æ˜“è¢«æ”»ç ´ã€‚ æ–¹æ³•2ï¼šIPé™åˆ¶åœ¨å›½å†…ä¸­è½¬æœåŠ¡å™¨ä¸Šä¹Ÿå®‰è£…squidã€‚ç”¨æˆ·è¿æ¥squidç«¯å£ï¼Œsquidå°†å†…å®¹å‘é€åˆ°ä¸­è½¬æœåŠ¡å™¨çš„stunnelæ¥å£ï¼ŒstunnelåŠ å¯†ä¼ è¾“åˆ°å›½å¤–ï¼Œå›½å¤–æœåŠ¡å™¨ï¼Œstunnelè§£å¯†å†åˆ†å‘è¯·æ±‚ã€‚ å®Œæ•´æ‹“æ‰‘ç»“æ„ï¼šç”¨æˆ·ä¸»æœº-&gt;squidï¼ˆå›½å†…ï¼‰-&gt;stunnelï¼ˆå›½å†…ï¼‰-&gt;stunnelï¼ˆå›½å¤–ï¼‰-&gt;squidï¼ˆå›½å¤–ï¼‰-&gt;ç½‘ç«™æœåŠ¡å™¨ æ·»åŠ squidçš„ç›®çš„æ˜¯ï¼Œsquidå¯ä»¥éªŒè¯ç”¨æˆ·ä¸»æœºipã€‚é€šè¿‡squidè®¾ç½®èƒ½å¤Ÿè¿æ¥squidçš„ipæ± ã€‚stunnelæ˜¯æ— æ³•éªŒè¯çš„ã€‚æˆ‘ä»¬ä¹‹å‰çš„ç”¨æˆ·åå’Œå¯†ç éªŒè¯ï¼Œæ˜¯é€šè¿‡å›½å¤–squidéªŒè¯çš„ï¼Œå›½å¤–squidæ— æ³•éªŒè¯ipï¼Œæ˜¯å› ä¸ºï¼Œå›½å¤–squidæ¥æ”¶çš„ä¿¡æ¯ï¼Œå…¨éƒ¨æ¥è‡ªlocalhostçš„ç«¯å£ã€‚ä¹Ÿå°±æ˜¯å›½å¤–stunnelå‘å‡ºçš„ã€‚ æ–¹æ³•3ï¼šç½‘é¡µéªŒè¯åŠ è‡ªå®šä¹‰ACLè¾…åŠ©å™¨éªŒè¯ç¬¬ä¸€æ¬¡ç™»é™†è·³è½¬ç½‘é¡µéªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼Œä¹‹åæ°¸ä¹…æˆ–ç¼“å­˜ä¿å­˜ipï¼Œå…äºæ­¤ipéªŒè¯ã€‚ è®¾è®¡æ€è·¯ ç”¨æˆ·è®¾ç½®ipå’Œç«¯å£ï¼Œæ— å¯†ç è¿æ¥ä»£ç†æœåŠ¡å™¨ã€‚ ç”¨æˆ·æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ä»»æ„ç½‘é¡µ åˆ©ç”¨squidSGuardé‡å®šå‘æ— è®¿é—®æƒé™ipçš„è®¿é—®urlï¼Œè½¬åˆ°è®¤è¯ç½‘é¡µã€‚è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚ ç½‘é¡µåå°éªŒè¯ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç ã€‚å¹¶ä¿å­˜ç”¨æˆ·ipã€‚ ç¼–å†™squid ACLè¾…åŠ©å™¨ï¼Œè¯»å–å¹¶éªŒè¯æŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªipã€‚å­˜åœ¨åˆ™é€šè¿‡ï¼Œä¸å­˜åœ¨ï¼Œåˆ™è¿›è¡Œé‡å®šå‘åˆ°éªŒè¯é¡µé¢ã€‚ æ–¹æ³•4ï¼šè‡ªå®šä¹‰éªŒè¯å™¨åŠ ACLè¾…åŠ©å™¨éªŒè¯ç¬¬ä¸€æ¬¡ç™»é™†ï¼Œå¼¹å‡ºä»£ç†ç™»é™†æ¡†ï¼Œé€šè¿‡åä¿å­˜ip ç”¨æˆ·è®¾ç½®ipå’Œç«¯å£ï¼Œè¿æ¥ä»£ç†æœåŠ¡å™¨ã€‚ ä»£ç†æœåŠ¡å™¨é€šè¿‡ACLè¾…åŠ©å™¨éªŒè¯æ­¤IPæ˜¯å¦åœ¨ç™½åå•ä¸­ã€‚ ä¸åœ¨ç™½åå•åˆ™ï¼Œè¿›å…¥è‡ªå®šä¹‰éªŒè¯å™¨ï¼Œåœ¨ï¼Œåˆ™é€šè¿‡ä»£ç†ã€‚ è¿›å…¥éªŒè¯å™¨ï¼ŒéªŒè¯å™¨éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœé€šè¿‡ï¼Œåˆ™ä¿å­˜IPåˆ°ç™½åå•ï¼Œå¦åˆ™ä¸é€šè¿‡ã€‚ æˆ‘é‡‡ç”¨æ–¹æ³•å››è¿›è¡Œç”¨æˆ·éªŒè¯ï¼Œå…¶ä¸­è›®å¤šç»†èŠ‚ï¼Œäºæ˜¯å¦èµ·ä¸€æ–‡è®²è§£ã€‚","categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"}],"tags":[{"name":"Stunnel","slug":"Stunnel","permalink":"https://sci.ci/tags/Stunnel/"},{"name":"Squid","slug":"Squid","permalink":"https://sci.ci/tags/Squid/"}]},{"title":"åˆ©ç”¨Stunnel+squidä»£ç†å®ç°å›½å†…æ— å®¢æˆ·ç«¯è®¿é—®å¤–ç½‘","slug":"Stunnel-squidä»£ç†åŠ é€Ÿäºšç›æ•™å­¦è§†é¢‘åŠ é€Ÿ","date":"2020-05-28T15:26:23.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/05/28/Stunnel-squidä»£ç†åŠ é€Ÿäºšç›æ•™å­¦è§†é¢‘åŠ é€Ÿ/","link":"","permalink":"https://sci.ci/2020/05/28/Stunnel-squid%E4%BB%A3%E7%90%86%E5%8A%A0%E9%80%9F%E4%BA%9A%E7%90%9B%E6%95%99%E5%AD%A6%E8%A7%86%E9%A2%91%E5%8A%A0%E9%80%9F/","excerpt":"","text":"1ï¼šåŠ é€ŸåŸç†1.1 squidä»‹ç»squidæ˜¯ä¸€ä¸ªç”¨äºä»£ç†çš„å¼€æºè½¯ä»¶ï¼Œç”¨æˆ·ä¸»æœºå°†httpè¯·æ±‚å‘é€åˆ°éƒ¨ç½²äº†squidçš„æœåŠ¡å™¨ï¼Œsquidå¯ä»¥å¸®åŠ©ç”¨æˆ·è½¬å‘httpè¯·æ±‚ã€‚åˆ©ç”¨squidï¼Œæˆ‘ä»¬å¯ä»¥è®©æœåŠ¡å™¨æ›¿æˆ‘ä»¬è¯·æ±‚æ•°æ®ï¼Œå†ç”±æœåŠ¡å™¨è½¬å‘ç»™æˆ‘ä»¬ã€‚ æŒ‰æ‰¾squidåŸç†ï¼Œæˆ‘ä»¬å°±å·²ç»å¯ä»¥è¿›è¡Œç¿»å¢™äº†ï¼Œåœ¨å›½å†…èƒ½å¤Ÿè®¿é—®çš„å›½å¤–æœåŠ¡å™¨ä¸Šéƒ¨ç½²squidï¼Œå°†è®¿é—®è°·æ­Œçš„è¯·æ±‚å‘é€ç»™squidï¼Œsquidæ›¿æˆ‘ä»¬è¯·æ±‚è°·æ­Œæ•°æ®ï¼Œå†å°†è°·æ­Œæ•°æ®è½¬å‘ç»™æˆ‘ä»¬ã€‚è¿™å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„å·¥ä½œè¿‡ç¨‹ã€‚ ä½†æ˜¯ç”±äºsquidè¯·æ±‚æŠ¥å¤´æœªåŠ å¯†ï¼Œåœ¨squidæœåŠ¡å™¨å‘æµè§ˆå™¨è¿”å›æ•°æ®æ—¶ï¼Œèƒ½å¤Ÿè¢«GFWæ£€æµ‹åˆ°è®¿é—®æ•°æ®æ¥è‡ªäºè°·æ­Œã€‚ä»è€Œå°†è¿”å›æ•°æ®è¿‡æ»¤æ‰ã€‚ä¹‹åé€šè¿‡squidè¿”å›çš„æ•°æ®ï¼Œéƒ½ä¼šè¢«GFWè¿‡æ»¤æ‰ï¼Œå³ä½¿æˆ‘ä»¬è®¿é—®çš„æ˜¯ç™¾åº¦ï¼Œä¹Ÿä¼šæ— æ³•æ”¶åˆ°è¿”å›æ•°æ®ã€‚ 1.2 Httpsä»‹ç»è¿™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç»äº†åŠ å¯†çš„åŸç†ï¼šhttps://blog.csdn.net/clh604/article/details/22179907 1.3 stunnelä»‹ç»stunnelæ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼Œä½¿ç”¨stunnelå¯ä»¥ä¸ºæˆ‘ä»¬ä½¿ç”¨tcpåè®®ä¼ è¾“çš„æ•°æ®ä½¿ç”¨SSLåè®®åŠ å¯†ï¼Œè¿™æ ·æˆ‘ä»¬çš„è¯·æ±‚ï¼Œé™¤äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œå…¶ä»–äººå°†æ— æ³•ä»æ•°æ®ä¸­æå–åˆ°æœ‰ç”¨ä¿¡æ¯ã€‚ ä¸ºäº†è®©GFWæ— æ³•è¯†åˆ«å‡ºä¸»æœºè®¿é—®è°·æ­Œå’Œè¿”å›çš„æ•°æ®æ¥è‡ªè°·æ­Œã€‚è¿™é‡Œä½¿ç”¨stunnelå°†ä¸»æœºå’Œsquidä¹‹é—´çš„é€šä¿¡æ•°æ®åŠ å¯†ï¼Œå°†httpè¯·æ±‚çš„æŠ¥å¤´ä¹ŸåŠ å¯†ã€‚ 1.4 ä»£ç†è¿‡ç¨‹åœ¨windowsä¸»æœºä¸Šè®¾ç½®å…¨å±€ä»£ç†ï¼Œå°†windowsçš„tcpè¯·æ±‚ï¼Œè½¬å‘åˆ°å›½å†…æœåŠ¡å™¨server 1ä¸Šï¼Œå›½å†…æœåŠ¡å™¨server 1ä¸å›½å¤–æœåŠ¡å™¨server 2æ­å»ºstunnelåŠ å¯†éš§é“è¿æ¥ï¼Œå›½å¤–æœåŠ¡å™¨server 2åˆ©ç”¨squidï¼Œå‘é€ä¸»æœºçš„è®¿é—®è¯·æ±‚ï¼Œå¹¶å°†è®¿é—®ç»“æœè¿”å›ç»™server 1ï¼Œserver 1åœ¨å‘é€ç»™ä¸»æœºæµè§ˆå™¨ã€‚åŠ é€ŸåŸç†å¦‚ä¸‹å›¾ã€‚ é€šå¸¸å¯ä»¥åªåˆ©ç”¨ä¸€ä¸ªå›½å¤–æœåŠ¡å™¨ï¼Œåœ¨å›½å¤–æœåŠ¡å™¨ä¸Šéƒ¨ç½²stunnelå’Œsquidï¼Œåœ¨æœ¬åœ°ä¸»æœºä¸Šæ­å»ºstunnelå®¢æˆ·ç«¯å°±å¯ä»¥äº†ã€‚å¦‚ä¸‹å›¾ ä½†æ˜¯ï¼Œä¸ºäº†è®¿é—®æ–¹ä¾¿ï¼Œå³ä»»ä½•ç”¨æˆ·åªéœ€è¦è®¾ç½®windowsä¸Šç°æœ‰çš„ä»£ç†æœåŠ¡å™¨å°±èƒ½è®¿é—®å¤–ç½‘ï¼Œè€Œä¸éœ€è¦ä¸‹è½½stunnelå®¢æˆ·ç«¯å’Œé…ç½®å®¢æˆ·ç«¯å‚æ•°ã€‚ ç›¸æ¯”äºä¸»æœºä½¿ç”¨Stunnelå®¢æˆ·ç«¯ï¼Œå°†stunnelå®¢æˆ·ç«¯éƒ¨ç½²åˆ°å›½å†…æœåŠ¡å™¨çš„ç¼ºç‚¹æ˜¯ï¼šè¿™éœ€è¦å›½å†…å¤–å‡æœ‰æœåŠ¡å™¨ã€‚æˆæœ¬ä¼šæ›´é«˜ã€‚ æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸å›½å†…æœåŠ¡å™¨ä¹‹é—´çš„ä¿¡æ¯è¢«æŠ“å–åï¼Œèƒ½å¤Ÿè·å–åˆ°æˆ‘ä»¬è®¿é—®çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¯è°·æ­Œã€ä½¿ç”¨çš„æµè§ˆå™¨ç‰ˆæœ¬ç­‰ï¼Œä½†æ˜¯æ— æ³•çŸ¥é“å…·ä½“è®¿é—®å†…å®¹ã€‚ç”±äºæ˜¯ä¸å›½å†…æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œå› æ­¤è¢«æ¢æµ‹çš„å‡ ç‡å¾ˆå°ã€‚ 2ï¼šä¸»æœºè®¾ç½®ä»£ç†è®¿é—®ä¸ºäº†è®©é˜…è¯»æœ¬æ–‡çš„è¯»è€…ï¼Œæå‰çš„çœ‹åˆ°æˆæœï¼Œå°†server1å’Œserver2éƒ½é…ç½®å¥½åï¼Œå…ˆä»‹ç»å¦‚ä½•åˆ©ç”¨ä½ æ­å»ºå¥½çš„æœåŠ¡å™¨è®¿é—®å¤–ç½‘ã€‚ æ‰“å¼€ä»£ç†æœåŠ¡å™¨è‰²è®¾ç½® åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šè¾“å…¥å›½å†…æœåŠ¡å™¨server1çš„IPå’Œstunnelå®¢æˆ·ç«¯ç›‘å¬çš„ç«¯å£å·ã€‚ ä½¿ç”¨æµè§ˆå™¨ç™»é™†google å®é™…ä¸Šä½¿ç”¨å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚å½“ç„¶ä¸ºäº†ä½ æ­å»ºçš„éš§é“ä¸ä¼šè¢«å…¶ä»–äººä½¿ç”¨ï¼Œä½ ä¹Ÿå¯ä»¥å¯¹èƒ½å¤Ÿè®¿é—®è¿™æ¡éš§é“çš„IPè¿›è¡Œé™åˆ¶ï¼Œæˆ–è€…è®¾ç½®ä¸€ä¸ªå¯†ç ã€‚ä¼šåœ¨åç»­ä¸­ä»‹ç»åˆ°ã€‚ 3ï¼šå›½å¤–æœåŠ¡å™¨é…ç½®ç¡®ä¿åœ¨æœåŠ¡å•†å®‰å…¨ç»„é‡Œå¼€æ”¾äº†3128å’Œ3129ç«¯å£ï¼Œè¿™ä¸¤ä¸ªç«¯å£ï¼Œå°†ç”¨äºæ¥æ”¶å’Œè½¬å‘æ•°æ®ã€‚ 3.1 å®‰è£…é…ç½®Squid å®‰è£…squid ubuntuä½¿ç”¨ï¼š 1apt-get install squid centosä½¿ç”¨ï¼š 1yum install squid ä½¿ç”¨squid -væ£€æŸ¥squidæ˜¯å¦å®‰è£…å¥½ã€‚ é…ç½®squid æ‰“å¼€squidé…ç½®æ–‡ä»¶/etc/squid/squid.confã€‚æ²¡æœ‰å°±æ–°å»ºæ­¤æ–‡ä»¶ å°†æ–‡ä»¶å†…å®¹ä¿®æ”¹ä¸ºï¼š 1234567891011121314151617181920212223242526272829303132333435363738# http_port è®¾ç½®ç›‘å¬ç«¯å£ï¼Œé»˜è®¤ä¸º3128http_port 3128# access_log è®¾ç½®accessæ—¥å¿—ï¼Œdaemonè¡¨ç¤ºåœ¨åå°å°†æ—¥å¿—å†™å…¥/var/log/squid/access.logæ–‡ä»¶, # combinedæ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„logformatï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„logformataccess_log daemon:/var/log/squid/access.log combined# visible_hotname è®¾ç½®ä»£ç†æœåŠ¡å™¨çš„ä¸»æœºå# é»˜è®¤å–æœ¬æœºçš„hostnamevisible_hostname funway.aliyun.proxy# ACLs all, manager, localhost, and to_localhost are predefined.acl SSL_ports port 443acl Safe_ports port 80 # httpacl Safe_ports port 21 # ftpacl Safe_ports port 443 # httpsacl Safe_ports port 70 # gopheracl Safe_ports port 210 # waisacl Safe_ports port 1025-65535 # unregistered portsacl Safe_ports port 280 # http-mgmtacl Safe_ports port 488 # gss-httpacl Safe_ports port 591 # filemakeracl Safe_ports port 777 # multiling httpacl CONNECT method CONNECT# æ‹’ç»æ‰€æœ‰éSafe_portsçš„è¯·æ±‚http_access deny !Safe_ports# æ‹’ç»æ‰€æœ‰éSSL_protsçš„CONNECTè¯·æ±‚http_access deny CONNECT !SSL_ports# Only allow cachemgr access from localhosthttp_access allow localhost managerhttp_access deny manager# å…è®¸æ¥è‡ªæœ¬åœ°çš„è¯·æ±‚http_access allow localhost# æ‹’ç»æ‰€æœ‰è¯·æ±‚ï¼Œæœ€åå…œåº•çš„è§„åˆ™http_access deny all æ›´å¤šè¯¦ç»†çš„é…ç½®å‚æ•°è§£é‡Šï¼Œè¯·å‚è€ƒåšæ–‡ã€Šä½¿ç”¨squidæ­å»ºä»£ç†æœåŠ¡å™¨ã€‹ é…ç½®squidåªèƒ½æœ¬åœ°åœ°å€è®¿é—®ã€‚ è¿è¡Œsquid 12service squid start //è¿è¡Œservice squid status //æŸ¥çœ‹squidè¿è¡ŒçŠ¶æ€ 3.2 å®‰è£…é…ç½®stunnelæœåŠ¡ç«¯ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼Œå¦‚æœæ²¡æœ‰openssléœ€è¦å…ˆå®‰è£…ã€‚ 1openssl req -new -x509 -days 3650 -nodes -out stunnel.pem -keyout stunnel.pem å°†ç”Ÿæˆçš„è¯ä¹¦ï¼Œå¤åˆ¶åˆ°/etc/stunnelæ–‡ä»¶å¤¹ä¸‹ 1cp stunnel.pem /etc/stunnel è¿™ä¸ªè¯ä¹¦è¿˜éœ€è¦ä¸‹è½½åˆ°ä¸»æœºï¼Œä¹‹åä¸Šä¼ åˆ°å›½å†…æœåŠ¡å™¨ï¼Œç”¨äºä¸ºstunnleå®¢æˆ·ç«¯è®¾ç½®çš„å…¬é’¥ã€‚ ä¸‹è½½å®‰è£…stunnel 1apt-get install stunnel è®¾ç½®stunnelé…ç½®æ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849; è®¾ç½®å·¥ä½œç›®å½•ï¼Œæ²¡æœ‰ç›®å½•éœ€è¦å…ˆåˆ›å»ºchroot = /var/run/stunnel/; è®¾ç½®stunnelçš„pidæ–‡ä»¶è·¯å¾„ï¼ˆåœ¨chrootä¸‹ï¼‰pid = /stunnel.pid; è®¾ç½®stunnelå·¥ä½œçš„ç”¨æˆ·ï¼ˆç»„ï¼‰setuid = rootsetgid = root; å¼€å¯æ—¥å¿—ç­‰çº§ï¼šemerg (0), alert (1), crit (2), err (3), warning (4), notice (5), info (6), or debug (7); é»˜è®¤ä¸º5debug = 7; æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆæˆ‘çš„serverçš„ç‰ˆæœ¬æœ‰ä¸ªbugï¼Œè¿™ä¸ªæ–‡ä»¶ä¹Ÿè¢«æ”¾åœ¨chrootè·¯å¾„ä¸‹äº†ï¼Œclientçš„ç‰ˆæœ¬åˆ™æ˜¯ç‹¬ç«‹çš„=ã€‚=#ï¼‰output = /stunnel.log; è¯ä¹¦æ–‡ä»¶ï¼Œå°±æ˜¯åœ¨æœ¬æ–‡2.2ä¸­ç”¨opensslç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦ï¼ˆserverç«¯å¿…é¡»è®¾ç½®è¿™ä¸¤é¡¹ï¼‰cert = /etc/stunnel/stunnel.pem; ç§é’¥æ–‡ä»¶key = /etc/stunnel/stunnel.pem; è®¾ç½®stunnelæœåŠ¡ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªæœåŠ¡ï¼Œç›‘å¬åŒçš„ç«¯å£ï¼Œå¹¶å‘ç»™ä¸åŒçš„serverã€‚; è‡ªå®šä¹‰æœåŠ¡åsquid-proxy[squid-proxy]; æœåŠ¡ç›‘å¬çš„ç«¯å£ï¼Œclientè¦è¿æ¥è¿™ä¸ªç«¯å£ä¸serveré€šä¿¡accept = 3129; æœåŠ¡è¦è¿æ¥çš„ç«¯å£ï¼Œè¿æ¥åˆ°squidçš„3128ç«¯å£ï¼Œå°†æ•°æ®å‘ç»™squidconnect = localhost:3128; **************************************************************************; * ä¸‹é¢è¿™äº›é…ç½®æˆ‘éƒ½æ³¨é‡Šæ‰äº†ï¼Œä½†ä¹Ÿéœ€è¦äº†è§£ä¸‹ *; **************************************************************************; è®¾ç½®æ˜¯å¦å¯¹ä¼ è¾“æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œé»˜è®¤ä¸å¼€å¯ã€‚; è¿™æ˜¯è·Ÿopensslç›¸å…³çš„ï¼Œå¦‚æœä½ çš„opensslæ²¡æœ‰zlibï¼Œå¼€å¯è¿™ä¸ªè®¾ç½®ä¼šå¯¼è‡´å¯åŠ¨å¤±è´¥ï¼ˆfailed to initialize compression methodï¼‰;compression = zlib; è®¾ç½®sslç‰ˆæœ¬,è¿™ä¸ªä¹Ÿæ˜¯è·Ÿå®‰è£…çš„opensslæœ‰å…³çš„;sslVersion = TLSv1; Authentication stuff needs to be configured to prevent MITM attacks; It is important to understand that this option was solely designed for access control and not for authorization; It is not enabled by default!; ä¸‹é¢è¿™äº›é…ç½®ç”¨æ¥å®šä¹‰æ˜¯å¦ä¿¡ä»»å¯¹æ–¹å‘è¿‡æ¥çš„è¯ä¹¦ã€‚å°±å¥½æ¯”æµè§ˆå™¨è®¿é—®httpsçš„æ—¶å€™ï¼Œæµè§ˆå™¨é»˜è®¤ä¼šä¿¡ä»»é‚£äº›ç”±æƒå¨CAæœºæ„ç­¾å‘çš„è¯ä¹¦ï¼Œ; å¯¹äºé‚£äº›è‡ªç­¾åè¯ä¹¦ï¼Œæµè§ˆå™¨å°±ä¼šå¼¹å‡ºå¯¹è¯æ¡†æé†’ç”¨æˆ·è¿™ä¸ªè¯ä¹¦å¯èƒ½ä¸å®‰å…¨ï¼Œæ˜¯å¦è¦ä¿¡ä»»è¯¥è¯ä¹¦ã€‚; è¿™æ˜¯æœ‰æ•ˆé˜²æ­¢ä¸­é—´äººæ”»å‡»çš„æ‰‹æ®µ; verify ç­‰çº§2è¡¨ç¤ºéœ€è¦éªŒè¯å¯¹æ–¹å‘è¿‡æ¥çš„è¯ä¹¦ï¼ˆé»˜è®¤0ï¼Œä¸éœ€è¦éªŒè¯ï¼Œéƒ½ä¿¡ä»»ï¼‰; å› ä¸ºè¿™ä¸ªé…ç½®æ˜¯serverç«¯çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç†ä¼šclientçš„è¯ä¹¦ï¼ˆclientä¹Ÿä¸ä¼šæ²¡äº‹å‘è¯ä¹¦è¿‡æ¥å•¦ï¼‰;verify = 2; CAfile è¡¨ç¤ºå—ä¿¡çš„è¯ä¹¦æ–‡ä»¶ï¼Œå³å¦‚æœå¯¹æ–¹å‘è¿‡æ¥çš„è¯ä¹¦åœ¨è¿™ä¸ªCAfileé‡Œï¼Œé‚£ä¹ˆå°±æ˜¯å—ä¿¡ä»»çš„è¯ä¹¦ï¼›å¦åˆ™ä¸ä¿¡ä»»è¯¥è¯ä¹¦ï¼Œæ–­å¼€è¿æ¥ã€‚;CAfile = /etc/stunnel/stunnel-client.pem å¯åŠ¨åœæ­¢stunnel 1234service stunnel start //å¼€å¯stunnelservice stunnel restart //é‡å¯service stunnel stop //åœæ­¢service stunnel status //æŸ¥çœ‹çŠ¶æ€ 4ï¼šå›½å†…æœåŠ¡å™¨é…ç½®Stunnelå®¢æˆ·ç«¯å›½å†…æœåŠ¡å™¨ï¼Œå°±æ˜¯åœ¨æµè§ˆå™¨ä»£ç†è®¾ç½®ä¸­ï¼Œå¡«å…¥çš„æœåŠ¡å™¨IPï¼Œè€Œç«¯å£ï¼Œåˆ™æ˜¯stunnelæ¥æ”¶ä»£ç†æ•°æ®çš„ç«¯å£ã€‚ åœ¨æœåŠ¡å™¨æä¾›å•†ç½‘é¡µä¸­çš„å®‰å…¨ç»„è®¾ç½®é‡Œå¼€å¯stunnelæ¥æ”¶æ•°æ®çš„ç«¯å£ã€‚ æœ¬äººä½¿ç”¨çš„é˜¿é‡Œäº‘è½»é‡çº§åº”ç”¨æœåŠ¡å™¨ï¼Œè¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å°ç›¸åº”é¡µé¢åï¼Œæ‰¾åˆ°å®‰å…¨ç»„-&gt;é˜²ç«å¢™-&gt;æ·»åŠ æ–°è§„åˆ™ã€‚åœ¨æ–°è§„åˆ™é‡Œï¼Œå¼€æ”¾ï¼ŒTCPåè®®çš„3128æ¥å£ã€‚ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–æ¥å£ã€‚ é…ç½®å¥½å®‰å…¨ç»„åï¼Œé˜¿é‡Œäº‘æœåŠ¡å™¨æœ¬èº«è¿˜æœ‰ä¸€ä¸ªé˜²ç«å¢™ï¼Œè¿˜éœ€è¦åœ¨æœåŠ¡å™¨é‡Œå¼€æ”¾3128ç«¯å£ã€‚ æŸ¥çœ‹å¼€æ”¾ç«¯å£ï¼Œå¦‚æœæ²¡æœ‰firewallï¼Œè¯·å…ˆå®‰è£… 1firewall-cmd --list-all è®¾ç½®éœ€è¦å¼€æ”¾çš„ç«¯å£ 12firewall-cmd --zone=public --add-port=3128/tcp --permanent//è®¾ç½®firewall-cmd --reload//ç”Ÿæ•ˆ æ­¤æ—¶å†æŸ¥çœ‹å¼€æ”¾çš„ç«¯å£ï¼Œå°±èƒ½çœ‹åˆ°3128ç«¯å£å·²å¼€æ”¾ã€‚ å®‰è£…stunnelå®¢æˆ·ç«¯ã€‚ ubuntuä½¿ç”¨: 1apt-get install stunnel centosä½¿ç”¨ï¼š 1yum install stunnel è®¾ç½®stunnelå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ 1234567891011121314151617181920212223242526; stunnelå·¥ä½œç›®å½•,å¦‚æœæ²¡æœ‰/var/run/stunnelæ–‡ä»¶å¤¹ï¼Œéœ€å…ˆåˆ›å»ºchroot = /var/run/stunnel/; stunnelå·¥ä½œçš„ç”¨æˆ·ç»„setuid = rootsetgid = root; stunnelå·¥ä½œæ—¶å€™çš„pidpid = /stunnel.pid; æ—¥å¿—ç­‰çº§debug = 7; æ—¥å¿—æ–‡ä»¶output = /var/log/stunnel/stunnel.log; è¡¨ç¤ºä»¥clientæ¨¡å¼å¯åŠ¨stunnelï¼Œé»˜è®¤client = noï¼Œå³serveræ¨¡å¼client = yes; å®šä¹‰ä¸€ä¸ªæœåŠ¡[squid-proxy]; ç›‘å¬3128ç«¯å£ï¼Œé‚£ä¹ˆç”¨æˆ·æµè§ˆå™¨çš„ä»£ç†è®¾ç½®å°±æ˜¯ stunnel-client-ip:3128accept = 3128; è¦è¿æ¥åˆ°çš„stunnel serverçš„ipä¸ç«¯å£ï¼Œä¿®æ”¹xx.xx.xx.xxä¸ºå›½å¤–çš„æœåŠ¡å™¨connect = xx.xx.xx.xx:3129; éœ€è¦éªŒè¯å¯¹æ–¹å‘è¿‡æ¥çš„è¯ä¹¦verify = 2; ç”¨æ¥è¿›è¡Œè¯ä¹¦éªŒè¯çš„æ–‡ä»¶ï¼ˆé‡Œé¢æœ‰stunnel serverçš„è¯ä¹¦ï¼‰CAfile = /etc/stunnel/stunnel-server.pem; å®¢æˆ·ç«¯ä¸éœ€è¦ä¼ é€’è‡ªå·±çš„è¯ä¹¦ï¼Œæ‰€ä»¥æ³¨é‡Šæ‰;cert = /etc/stunnel/stunnel.pem;key = /etc/stunnel/stunnel.key å°†stunnleå…¬é’¥è¯ä¹¦æ‹·è´ä¸€ä»½åˆ°stunnelå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶çš„æŒ‡å®šåœ°å€ä¸Šã€‚ é…ç½®æ–‡ä»¶é‡ŒCAfile = /etc/stunnel/stunnel-server.pemå†™æ˜äº†æˆ‘ä»¬éœ€è¦å°†å…¬é’¥ä¿å­˜çš„ä½ç½®å’Œå…¬é’¥çš„æ–‡ä»¶åã€‚ æˆ‘ä»¬åªéœ€è¦å°†ï¼Œ3.2èŠ‚ç”Ÿæˆçš„è¯ä¹¦æ‰“å¼€ï¼Œå¤åˆ¶å·²BEGIN CERTIFICATIONå¼€å¤´åˆ°END CERTIFICATIONç»“æŸçš„å…¬é’¥ã€‚ç„¶åï¼Œæ–°å»º/etc/stunnel/stunnel-server.pemæ–‡ä»¶ï¼Œå°†å…¬é’¥ç²˜è´´è¿›å»ã€‚ è¿™æ ·stunnelå®¢æˆ·ç«¯å°±èƒ½å°†æ•°æ®åŠ å¯†åå‘é€ç»™stunnelæœåŠ¡å™¨äº†ã€‚ å¯åŠ¨å’Œåœæ­¢stunnel 1234service stunnel start &#x2F;&#x2F;å¼€å¯stunnelservice stunnel restart &#x2F;&#x2F;é‡å¯service stunnel stop &#x2F;&#x2F;åœæ­¢service stunnel status &#x2F;&#x2F;æŸ¥çœ‹çŠ¶æ€ 5ï¼šä¸è¶³å’Œä¼˜åŒ–5.1 ä»£ç†æ–¹æ³•çš„ä¸è¶³ ç”±äºå®¢æˆ·ç«¯çš„stunnelç›´æ¥ç›‘å¬3128ç«¯å£ï¼Œè€Œæ²¡æœ‰ä»»ä½•çš„éªŒè¯å’Œè®¿é—®é™åˆ¶ï¼Œå› æ­¤ï¼Œä»»ä½•çŸ¥é“ipå’Œç«¯å£çš„äººéƒ½èƒ½é€šè¿‡è®¾ç½®ä»£ç†ï¼Œä½¿ç”¨ä½ çš„ä»£ç†æ¥å£ã€‚ stunnelæœåŠ¡ç«¯æ²¡æœ‰è®¾ç½®å¯¹å®¢æˆ·ç«¯çš„è¯ä¹¦éªŒè¯ï¼Œä»»ä½•é€šè¿‡è‡ªå»ºstunnelå®¢æˆ·ç«¯çš„äººï¼Œéƒ½æœ‰å¯èƒ½ä½¿ç”¨ä½ çš„stunnelæœåŠ¡ï¼Œè¿›è¡Œé€šä¿¡ã€‚ 5.2 ä¼˜åŒ– é…ç½®squidç”¨æˆ·æˆæƒï¼Œå³åœ¨ç”¨æˆ·ä½¿ç”¨ä»£ç†ä¸Šç½‘æ—¶ï¼Œå¼¹å‡ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œè¾“å…¥æ­£ç¡®ï¼Œæ‰èƒ½ä½¿ç”¨squid ä¿®æ”¹é…ç½®æ–‡ä»¶/etc/squid/squid.confï¼Œåœ¨http_access deny allä¹‹å‰è¿½åŠ ä»¥ä¸‹å†…å®¹ï¼Œå¹¶æ³¨é‡Šæ‰http_access allow localhost 1234567891011121314151617181920# auth_param è®¾ç½®ä»£ç†çš„è®¤è¯æ–¹å¼# ç”¨æ³•ï¼šauth_param scheme parameter [setting]# schemeè¡¨ç¤ºè®¤è¯æœºåˆ¶ï¼Œsquidæ”¯æŒBasicï¼ŒDigestï¼ŒNTLMï¼ŒNegotiateå››ç§è®¤è¯æœºåˆ¶# program è®¾ç½®è®¤è¯ç¨‹åºä¸ºncsa_authï¼ˆsquidè‡ªå¸¦ä¸å°‘è®¤è¯ç¨‹åºä»¥åŠå…¶ä»–æ‹“å±•ç¨‹åºï¼‰ï¼Œç¨‹åºæ‰€éœ€å¯†ç æ–‡ä»¶passwdã€‚ã€‚å¦‚æœlinuxæ˜¯32ä½ç³»ç»Ÿï¼Œè®¤è¯ç¨‹åº/usr/lib/squid/ç›®å½•ä¸‹ã€‚è®¤è¯ç¨‹åºåç§°æœ‰å¯èƒ½æ˜¯basic_ncsa_authã€‚éœ€è¦å…·ä½“æ‰“å¼€æ–‡ä»¶å¤¹åæŸ¥çœ‹ã€‚auth_param basic program /usr/lib64/squid/ncsa_auth /etc/squid/passwd# children è®¾ç½®åå°å¯åŠ¨å‡ ä¸ªè®¤è¯ç¨‹åºè¿›ç¨‹auth_param basic children 3# credentialsttl è®¾ç½®è®¤è¯å¤±æ•ˆæ—¶é—´ï¼Œè¿‡æœŸåéœ€é‡æ–°è®¤è¯auth_param basic credentialsttl 10 hours# realm è®¾ç½®è®¤è¯æ—¶è¿”å›å¤´é‡Œå¤¹å¸¦çš„ä¿¡æ¯â€œwlecome to using my proxyâ€auth_param basic realm welecome to using my proxy# ï¼ï¼ï¼ä¸Šé¢åªæ˜¯è®¾ç½®äº†éœ€è¦è®¤è¯ï¼Œå¹¶æœªå°†è®¤è¯ç”Ÿæ•ˆï¼Œè¿˜éœ€è®¾ç½®aclä¸http_access# æ·»åŠ åä¸ºAuthUsersè®¿é—®åˆ—è¡¨ï¼Œè¡¨ç¤ºé€šè¿‡è®¤è¯çš„ç”¨æˆ·acl AuthUsers proxy_auth REQUIRED# å…è®¸AuthUsersçš„ä»£ç†è¯·æ±‚http_access allow AuthUsers æ–°å»ºå¯†ç æ–‡ä»¶ 1htpasswd -c /etc/squid/passwd qifei å¦‚æœæ²¡æœ‰htpasswdï¼Œåˆ™æŒ‰æç¤ºå®‰è£…ã€‚è¾“å…¥å¯†ç å³å¯ã€‚ é‡å¯squid 1service squid restart æ·»åŠ stunnelå¯¹å®¢æˆ·ç«¯çš„è¯ä¹¦éªŒè¯ï¼Œéœ€è¦å†æ–°å»ºä¸€ä¸ªè¯ä¹¦æ–‡ä»¶ï¼ŒåŒæ—¶ä¿®æ”¹æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ã€‚ 6ï¼šè¡¥å……6.1 åªèƒ½è®¿é—®è°·æ­Œè€Œæ— æ³•è®¿é—®YouTube5.30æ—¥æ›´æ–°ï¼šåœ¨ç»è¿‡ä¸€æ®µæ—¶é—´çš„ä½¿ç”¨åï¼Œä¸Šç§æ–¹æ³•å­˜åœ¨ä¸€äº›å¼Šç«¯ã€‚ åœ¨å¼€å¯ä»£ç†åï¼Œå¯ä»¥è®¿é—®è°·æ­Œï¼Œå’Œä¸€äº›å…¶ä»–å¤–ç½‘ç½‘ç«™ã€‚ä½†æ˜¯ï¼Œæ— æ³•è®¿é—®youtubeã€facebookç­‰ç½‘ç«™ã€‚åå¤åˆ·æ–°ï¼Œè¿˜æ˜¯å¯ä»¥è®¿é—®åˆ°youtubeã€‚æ‰‹æœºä¸Šçš„è®¸å¤šä¾èµ–å¤–ç½‘çš„è½¯ä»¶æ¯”å¦‚è°·æ­Œå•†åº—ï¼Œæ— æ³•ä½¿ç”¨ã€‚ åˆ©ç”¨wiresharkå¯¹æ— çº¿ç½‘å¡è¿›è¡ŒæŠ“åŒ…ã€‚å‘ç°ï¼Œåœ¨æµè§ˆå™¨è®¿é—®youtubeæ—¶ï¼Œæµè§ˆå™¨å‘å›½å†…çš„ä¸­è½¬ä»£ç†æœåŠ¡å™¨ï¼Œå‘é€äº†httpåè®®æ•°æ®ã€‚æ­¤æ•°æ®å¸¦æœ‰æ˜æ˜¾çš„è¯·æ±‚å¤´urlyoutube.comã€‚çŒœæµ‹å¯èƒ½æ˜¯å›½å†…è·¯ç”±ï¼Œå°†å«youtubeç­‰urlçš„è¯·æ±‚å¤´è¿‡æ»¤æ‰äº†ã€‚è¿™æ ·ï¼Œè¯·æ±‚youtubeçš„æ•°æ®æ ¹æœ¬æ— æ³•åˆ°è¾¾ä¸­è½¬æœåŠ¡å™¨ã€‚ è€Œå¤šæ¬¡åˆ·æ–°youtubeç½‘ç«™ï¼Œè¿˜æ˜¯èƒ½å¤Ÿè¿åŒï¼Œè¯´æ˜å›½å†…è·¯ç”±å¹¶æ²¡æœ‰å®Œå…¨ä¸¢å¼ƒyoutubeè¯·æ±‚ï¼Œè€Œæ˜¯éƒ¨åˆ†ä¸¢å¼ƒäº†æˆ‘ä»¬çš„è¯·æ±‚ã€‚ ä¹‹æ‰€ä»¥è°·æ­Œèƒ½å®Œå…¨æ— é˜»åœ°æ¥é€šï¼Œæˆ‘çŒœæµ‹ï¼Œæ˜¯å› ä¸ºå›½å†…è®¸å¤šç½‘ç«™ï¼Œæœ‰ä¾èµ–è°·æ­Œçš„å„ç§apiï¼Œå› æ­¤å±è”½çš„æŸå¤±è¿œå¤§äºå°é”çš„æŸå¤±ã€‚å› æ­¤åªåœ¨å›½é™…å‡ºå£ä¸Šï¼Œå¯¹è°·æ­Œè¿›è¡Œäº†å°é”ï¼Œè€Œå›½å†…æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ²¡æœ‰é—®é¢˜ã€‚ æŸ¥é˜…httpsåè®®çš„å·¥ä½œåŸç†ä¸éš¾çŸ¥é“ã€‚æµè§ˆå™¨éœ€è¦é¦–å…ˆä½¿ç”¨httpåè®®ï¼Œå‘youtubeæœåŠ¡å™¨å‘é€è¯·æ±‚ï¼ŒyoutubeæœåŠ¡å™¨è¿”å›ç»™æµè§ˆå™¨SSLè¯ä¹¦å…¬é’¥ï¼Œä¹‹åæµè§ˆå™¨å’ŒyoutubeæœåŠ¡å™¨æ‰ä¼šä½¿ç”¨SSLåŠ å¯†åçš„æ•°æ®è¿›è¡Œé€šè®¯ã€‚ åœ¨youtubeæœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´æ·»åŠ ä»£ç†ï¼Œä¹Ÿåªæ˜¯è½¬å‘æ•°æ®ï¼Œå¹¶æ²¡æœ‰æ”¹å˜æµè§ˆå™¨è®¿é—®youtubeæœåŠ¡å™¨æ—¶ï¼Œå‘é€åŒ…å«åŒ…å¤´çš„httpæ•°æ®çš„äº‹å®ã€‚ å› æ­¤ï¼Œå³ä¾¿æˆ‘ä»¬åœ¨å›½å†…stunnelå®¢æˆ·ç«¯å’Œå›½å¤–çš„stunnelå®¢æˆ·ç«¯ä¹‹é—´çš„æ•°æ®è¿›è¡Œäº†åŠ å¯†ï¼Œä¹Ÿæ— æ³•è§„é¿æ‰æµè§ˆå™¨åˆ°å›½å†…stunnelæœåŠ¡å™¨ä¹‹é—´æœ‰httpè¯·æ±‚ï¼Œé€ æˆè¯·æ±‚è¢«ä¸¢å¼ƒçš„é—®é¢˜ã€‚ æœ€å¥½çš„åŠæ³•è¿˜æ˜¯ï¼Œåœ¨æµè§ˆå™¨æ‰€åœ¨ä¸»æœºæŒ‰è½¬stunnelå®¢æˆ·ç«¯ã€‚ç›´æ¥ä½¿ç”¨stunnelå®¢æˆ·ç«¯å‘å›½å¤–stunnelæœåŠ¡å™¨å‘é€æ•°æ®ï¼Œå°†æµè§ˆå™¨çš„æ‰€æœ‰å‡ºå£æµé‡åŠ å¯†ï¼Œç›´åˆ°å‘é€åˆ°å›½å¤–å†è§£å¯†ï¼Œå¹¶è½¬å‘ã€‚ è¿™æ ·åšï¼Œå…¶å®å’Œä½¿ç”¨ssæˆ–è€…ssråŸç†ç›¸åŒã€‚ä½†æ˜¯ï¼Œç¼ºå°‘ä¸€äº›ä¼ªè£…ã€‚ 5.31æ—¥æ›´æ–°ï¼šæˆ‘ä½¿ç”¨ping.peç½‘ç«™æä¾›çš„ç«¯å£æµ‹è¯•ï¼Œå‘ç°ï¼Œå½“æˆ‘è®¿é—®å›½å†…æœåŠ¡å™¨3128ç«¯å£æ—¶ï¼Œé™¤äº†ä¸­å›½ç§»åŠ¨çš„ç½‘ç»œï¼Œå…¶ä»–åŒ…æ‹¬ä¸­å›½ç”µä¿¡å’Œè”é€šï¼Œå¤–ç½‘åœ¨å†…çš„æ‰€æœ‰è¿è¥å•†å‡èƒ½pingåŒ3128ç«¯å£ã€‚ æˆ‘çŒœæµ‹å¯èƒ½ä¸­å›½ç§»åŠ¨ä¼šå¯¹3128ç«¯å£è¿›è¡Œéšæœºä¸¢åŒ…ã€‚æ¥é˜»æ­¢squidä»£ç†çš„ä½¿ç”¨ã€‚ æˆ‘ä¿®æ”¹äº†æ¥æ”¶ä»£ç†çš„ç«¯å£å·ã€‚å†æ¬¡åœ¨Ping.peä¸Šæµ‹è¯•ï¼Œç§»åŠ¨å·²ç»èƒ½å¤Ÿpingé€šç«¯å£ã€‚ç„¶è€Œï¼Œä»ç„¶å­˜åœ¨è°·æ­Œèƒ½å¤Ÿè®¿é—®ï¼Œè€Œyoutubeå’Œfbä¸èƒ½è®¿é—®çš„é—®é¢˜ã€‚ çŒœæµ‹ï¼Œå¯èƒ½ä¸­å›½ç§»åŠ¨ä¼šéšæœºä¸¢å¼ƒè¯·æ±‚åœ°å€æ˜¯youtubeçš„httpè¯·æ±‚æ•°æ®ã€‚äºæ˜¯æˆ‘æ›´æ¢äº†æˆ‘çš„è”é€šæ‰‹æœºå¡ï¼Œæ¥ä»£ç†ä¸Šç½‘ã€‚å‘ç°è°·æ­Œã€youtubeå’Œå…¶ä»–å¤–ç½‘ç½‘ç«™ï¼Œå‡èƒ½å¾ˆå¥½çš„è®¿é—®ã€‚æˆ‘åˆæµ‹è¯•äº†ç”µä¿¡ç½‘ç»œï¼Œå‘ç°ç»“æœä¹Ÿæ˜¯å¥½çš„ã€‚ ç»“è®ºï¼Œä¸­å›½ç§»åŠ¨ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨ä»£ç†ä¸Šç½‘æ—¶ï¼Œä¼šå¯¹è¯·æ±‚urlä¸ºyoutube.comä¹‹ç±»çš„httpè¯·æ±‚è¿›è¡Œäººä¸ºéšæœºä¸¢åŒ…ï¼Œè€Œä¸”ä¸¢åŒ…ç‡æé«˜ã€‚é¢„æµ‹è¶…è¿‡ç™¾åˆ†ä¹‹å…«åã€‚ã€‚äº†è§£ç§»åŠ¨å›½é™…å¸¦å®½ä¿æœ‰ç‡ï¼Œä¸éš¾å‘ç°ï¼Œç§»åŠ¨çš„å›½é™…å¸¦å®½å æœ‰ç‡æ˜¯ä¸‰å¤§è¿è¥å•†é‡Œæœ€ä½çš„ï¼Œå´æœ‰ç¬¬äºŒçš„å›½é™…ç”¨æˆ·ã€‚å¯è§ä¸ºäº†è§£å†³å¸¦å®½ä¸è¶³é—®é¢˜ï¼Œä»–åœ¨å›½å†…ä¾¿å¯¹youtubeæµé‡è¿›è¡Œäº†ä¸¢å¼ƒï¼Œè€Œä¸æ˜¯åˆ°å›½é™…å‡ºå£å†ä¸¢å¼ƒã€‚ã€‚ è¿™ä¹ˆåšçš„å¥½å¤„æ˜¯ï¼Œå‡å°‘äº†youtubeè¿™ç±»åœ¨å›½é™…å‡ºå£ä¼šè¢«æ‹¦æˆªçš„æµé‡å ç”¨ä¼ é€’æ—¶çš„å¸¦å®½ï¼Œé™ä½å›½é™…å‡ºå£è¿‡æ»¤è®¾å¤‡çš„æŠ•å…¥ã€‚ç¼ºç‚¹æ˜¯ï¼Œä¼šåŠ å¤§åœ¨å›½å†…è·¯ç”±è¿‡æ»¤è®¾å¤‡çš„æŠ•å…¥ã€‚ é€šè¿‡å¯¹httpsåŸç†å’Œç§»åŠ¨è¿‡æ»¤youtubeæµé‡çš„åˆ†æï¼Œæˆ‘ä»¬åº”è¯¥çŸ¥é“ï¼Œåœ¨ä½¿ç”¨å›½å†…ä¸­è½¬æ–¹å¼è¿›è¡Œå¤–ç½‘è®¿é—®æ—¶ï¼Œè¿è¥å•†èƒ½å¤ŸçŸ¥é“ä½ æ­£åœ¨è®¿é—®å¤–ç½‘ã€‚è™½ç„¶æµé‡æµå‘äº†å›½å†…æœåŠ¡å™¨ï¼Œå¦‚æœç½‘è­¦å¯¹æ‹¦æˆªçš„æµé‡è¿›è¡Œåˆ†æï¼Œæ˜¯èƒ½å¤ŸçŸ¥é“ä½ è®¿é—®äº†å“ªäº›å¤–å›½ç½‘ç«™çš„ã€‚ã€‚åå‘æº¯æºï¼Œå¦‚æœä½ ä½¿ç”¨äº†æ‰‹æœº4Gç½‘ç»œè®¿é—®ï¼Œé‚£ä¹ˆï¼Œè¥è¿å•†é…åˆï¼Œèƒ½å¤Ÿå®šä½åˆ°ä½ æœ¬äººã€‚å¦‚æœä½¿ç”¨wifiè®¿é—®ï¼Œèƒ½å¤Ÿå®šä½åˆ°ä½ çš„å®¶åº­ã€‚å¦‚æœç½‘è­¦æŸ¥çœ‹è·¯ç”±å™¨æ—¥å¿—ï¼Œä¸éš¾æ‰¾åˆ°ï¼Œæ˜¯å“ªä¸ªæ‰‹æœºè®¿é—®äº†è¿™äº›å¤–ç½‘ã€‚ è€Œhttpè¯·æ±‚å¤´ä¸­åŒ…å«çš„è®¾å¤‡ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜¯ä»€ä¹ˆç”µè„‘ï¼Œæµè§ˆå™¨å“ç‰Œå’Œç‰ˆæœ¬ç­‰ï¼Œæ— ç–‘é™ä½äº†æ‰¾åˆ°ä½ çš„éš¾åº¦ã€‚ æ€»çš„æ¥è¯´ï¼Œä¸ºäº†ç½‘ç»œå®‰å…¨ï¼Œé™ä½è¢«å®¡æŸ¥çš„é£é™©ã€‚åœ¨æœ¬åœ°ä¸»æœºéƒ¨ç½²stunnelå®¢æˆ·ç«¯ï¼Œæ¯”åœ¨å›½å†…æœåŠ¡å™¨ä¸­è½¬æ›´åŠ å®‰å…¨ã€‚ä½†æ˜¯é•¿æ—¶é—´çš„åŠ å¯†è¿æ¥å›½å¤–æœåŠ¡å™¨ï¼Œä¸éš¾è®©äººçŒœå‡ºï¼Œä½ æ­£åœ¨ä½¿ç”¨vpnä¹‹ç±»çš„è½¯ä»¶è®¿é—®å¤–ç½‘ã€‚ä½¿ç”¨wifiçš„ä»£ç†æ¯”ä½¿ç”¨æ‰‹æœºç½‘ç»œçš„ä»£ç†æ›´åŠ å®‰å…¨ã€‚ 6.2 ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç æ‰‹æœºè½¯ä»¶ä¸èƒ½å¼¹å‡ºç™»é™†æ¡†åœ¨å®é™…ä»£ç†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä½¿ç”¨wifiæˆ–æ‰‹æœºç½‘ç»œçš„è½¯ä»¶ï¼Œæ— æ³•å¼¹å‡ºsquidçš„ä»£ç†è®¤è¯æ¡†ï¼Œä»è€Œæ— æ³•è¾“å…¥è´¦å·å’Œå¯†ç ã€‚å› æ­¤ï¼Œè½¯ä»¶ä¼šæ²¡åŠæ³•è®¿é—®å¤–ç½‘ï¼Œåªæœ‰æµè§ˆå™¨å¯ä»¥è®¿é—®ã€‚ æ–¹æ³•1ï¼šå®Œå…¨å¼€æ”¾ä»£ç†ä¿®æ”¹squid.confå…³é—­ç”¨æˆ·åå’Œå¯†ç éªŒè¯ã€‚å…è®¸æœ¬åœ°ipç™»é™†ã€‚æ­¤æ—¶æ‰€æœ‰çŸ¥é“IPå’Œç«¯å£çš„ç”¨æˆ·éƒ½èƒ½ä½¿ç”¨ä»£ç†è®¿é—®ã€‚ã€‚è¿™ç§æ–¹æ³•æ˜¯æä¸å®‰å…¨çš„ï¼Œå› ä¸ºï¼Œæœ‰è®¸å¤šçˆ¬è™«è½¯ä»¶ï¼Œèƒ½å¤Ÿé€šè¿‡æ‰«æipå’Œç«¯å£ï¼Œæ”¶é›†èƒ½å¤Ÿä½¿ç”¨ä»£ç†çš„ipå’Œå¯¹åº”ç«¯å£ã€‚çŸ­æ—¶é—´çš„ä½¿ç”¨æ–¹æ³•ä¸€æ˜¯å¯ä»¥çš„ï¼Œä½†é•¿æœŸä¸‹æ¥ï¼Œå®¹æ˜“è¢«æ”»ç ´ã€‚ æ–¹æ³•2ï¼šIPé™åˆ¶åœ¨å›½å†…ä¸­è½¬æœåŠ¡å™¨ä¸Šä¹Ÿå®‰è£…squidã€‚ç”¨æˆ·è¿æ¥squidç«¯å£ï¼Œsquidå°†å†…å®¹å‘é€åˆ°ä¸­è½¬æœåŠ¡å™¨çš„stunnelæ¥å£ï¼ŒstunnelåŠ å¯†ä¼ è¾“åˆ°å›½å¤–ï¼Œå›½å¤–æœåŠ¡å™¨ï¼Œstunnelè§£å¯†å†åˆ†å‘è¯·æ±‚ã€‚ å®Œæ•´æ‹“æ‰‘ç»“æ„ï¼šç”¨æˆ·ä¸»æœº-&gt;squidï¼ˆå›½å†…ï¼‰-&gt;stunnelï¼ˆå›½å†…ï¼‰-&gt;stunnelï¼ˆå›½å¤–ï¼‰-&gt;squidï¼ˆå›½å¤–ï¼‰-&gt;ç½‘ç«™æœåŠ¡å™¨ æ·»åŠ squidçš„ç›®çš„æ˜¯ï¼Œsquidå¯ä»¥éªŒè¯ç”¨æˆ·ä¸»æœºipã€‚é€šè¿‡squidè®¾ç½®èƒ½å¤Ÿè¿æ¥squidçš„ipæ± ã€‚stunnelæ˜¯æ— æ³•éªŒè¯çš„ã€‚æˆ‘ä»¬ä¹‹å‰çš„ç”¨æˆ·åå’Œå¯†ç éªŒè¯ï¼Œæ˜¯é€šè¿‡å›½å¤–squidéªŒè¯çš„ï¼Œå›½å¤–squidæ— æ³•éªŒè¯ipï¼Œæ˜¯å› ä¸ºï¼Œå›½å¤–squidæ¥æ”¶çš„ä¿¡æ¯ï¼Œå…¨éƒ¨æ¥è‡ªlocalhostçš„ç«¯å£ã€‚ä¹Ÿå°±æ˜¯å›½å¤–stunnelå‘å‡ºçš„ã€‚ æ–¹æ³•3ï¼šç½‘é¡µéªŒè¯åŠ è‡ªå®šä¹‰ACLè¾…åŠ©å™¨éªŒè¯ç¬¬ä¸€æ¬¡ç™»é™†è·³è½¬ç½‘é¡µéªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼Œä¹‹åæ°¸ä¹…æˆ–ç¼“å­˜ä¿å­˜ipï¼Œå…äºæ­¤ipéªŒè¯ã€‚ è®¾è®¡æ€è·¯ ç”¨æˆ·è®¾ç½®ipå’Œç«¯å£ï¼Œæ— å¯†ç è¿æ¥ä»£ç†æœåŠ¡å™¨ã€‚ ç”¨æˆ·æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®ä»»æ„ç½‘é¡µ åˆ©ç”¨squidSGuardé‡å®šå‘æ— è®¿é—®æƒé™ipçš„è®¿é—®urlï¼Œè½¬åˆ°è®¤è¯ç½‘é¡µã€‚è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ã€‚ ç½‘é¡µåå°éªŒè¯ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç ã€‚å¹¶ä¿å­˜ç”¨æˆ·ipã€‚ ç¼–å†™squid ACLè¾…åŠ©å™¨ï¼Œè¯»å–å¹¶éªŒè¯æŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªipã€‚å­˜åœ¨åˆ™é€šè¿‡ï¼Œä¸å­˜åœ¨ï¼Œåˆ™è¿›è¡Œé‡å®šå‘åˆ°éªŒè¯é¡µé¢ã€‚ æ–¹æ³•4ï¼šè‡ªå®šä¹‰éªŒè¯å™¨åŠ ACLè¾…åŠ©å™¨éªŒè¯ç¬¬ä¸€æ¬¡ç™»é™†ï¼Œå¼¹å‡ºä»£ç†ç™»é™†æ¡†ï¼Œé€šè¿‡åä¿å­˜ip ç”¨æˆ·è®¾ç½®ipå’Œç«¯å£ï¼Œè¿æ¥ä»£ç†æœåŠ¡å™¨ã€‚ ä»£ç†æœåŠ¡å™¨é€šè¿‡ACLè¾…åŠ©å™¨éªŒè¯æ­¤IPæ˜¯å¦åœ¨ç™½åå•ä¸­ã€‚ ä¸åœ¨ç™½åå•åˆ™ï¼Œè¿›å…¥è‡ªå®šä¹‰éªŒè¯å™¨ï¼Œåœ¨ï¼Œåˆ™é€šè¿‡ä»£ç†ã€‚ è¿›å…¥éªŒè¯å™¨ï¼ŒéªŒè¯å™¨éªŒè¯ç”¨æˆ·åå’Œå¯†ç ï¼Œå¦‚æœé€šè¿‡ï¼Œåˆ™ä¿å­˜IPåˆ°ç™½åå•ï¼Œå¦åˆ™ä¸é€šè¿‡ã€‚ æˆ‘é‡‡ç”¨æ–¹æ³•å››è¿›è¡Œç”¨æˆ·éªŒè¯ï¼Œå…¶ä¸­è›®å¤šç»†èŠ‚ï¼Œäºæ˜¯å¦èµ·ä¸€æ–‡è®²è§£ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://sci.ci/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"Stunnelä»£ç†","slug":"Stunnelä»£ç†","permalink":"https://sci.ci/tags/Stunnel%E4%BB%A3%E7%90%86/"}]},{"title":"äºšç›å·¥å¤§æ•™å­¦è§†é¢‘æ·»åŠ ä¸­å¾·å­—å¹•","slug":"äºšç›å·¥å¤§æ•™å­¦è§†é¢‘æ·»åŠ ä¸­å¾·å­—å¹•","date":"2020-05-27T14:02:51.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/05/27/äºšç›å·¥å¤§æ•™å­¦è§†é¢‘æ·»åŠ ä¸­å¾·å­—å¹•/","link":"","permalink":"https://sci.ci/2020/05/27/%E4%BA%9A%E7%90%9B%E5%B7%A5%E5%A4%A7%E6%95%99%E5%AD%A6%E8%A7%86%E9%A2%91%E6%B7%BB%E5%8A%A0%E4%B8%AD%E5%BE%B7%E5%AD%97%E5%B9%95/","excerpt":"","text":"ç¬¬ä¸€ç«  æ’ä»¶ç”¨æˆ·æ‰‹å†Œ1.1 é€‚ç”¨åœºæ™¯å’ŒåŠŸèƒ½è¯´æ˜ æœ¬æ’ä»¶é€‚ç”¨äºåŸºäºchromiumå†…æ ¸å¼€å‘çš„æµè§ˆå™¨ï¼ŒåŒ…æ‹¬Chromeæµè§ˆå™¨ã€360å®‰å…¨æµè§ˆå™¨ã€QQæµè§ˆå™¨ç­‰ã€‚ æ’ä»¶åªåœ¨æ»¡è¶³https://*/rwth-aachen.de/*åŸŸååŒ¹é…æ—¶å·¥ä½œï¼Œä¸”é™¤äº†æ·»åŠ å­—å¹•å¤–æ— å…¶ä»–åŠŸèƒ½ã€‚ æ”¯æŒå¾·è¯­ã€ä¸­æ–‡ã€åŒè¯­å­—å¹• æ’ä»¶åªèƒ½ä¸ºæ•°æ®åº“é‡Œå­˜åœ¨çš„è§†é¢‘èµ„æºæ·»åŠ å­—å¹•ã€‚æ›´å¤šè§†é¢‘å­—å¹•ï¼Œä¼šé€æ¸ä¸Šä¼ ã€‚ 1.2 æ•ˆæœå›¾é¢„è§ˆä»¥ä¸‹ä»…å±•ç¤ºäº†åŒè¯­å­—å¹•ã€‚ 1.3 æ’ä»¶å®‰è£… ä¸‹è½½æ’ä»¶https://lanzous.com/ick15oh è§£å‹æ’ä»¶åˆ°æ¡Œé¢ã€‚è·å¾—ä»¥captions-for-moodleä¸ºåçš„æ–‡ä»¶å¤¹ã€‚ æ‰“å¼€chromeæµè§ˆå™¨ï¼Œä¾æ¬¡ç‚¹å‡»å³ä¸Šè§’çš„ä¸‰ä¸ªç‚¹å›¾æ ‡â€”&gt;æ›´å¤šå·¥å…·â€”&gt;æ‰©å±•ç¨‹åºã€‚æˆ–è€…åœ¨åœ°å€æ è¾“å…¥chrome://extensions/ä»¥æ‰“å¼€æ‰©å±•ç¨‹åºã€‚ å•å‡»æ‰“å¼€æ‰©å±•ç¨‹åºå³ä¸Šè§’çš„å¼€å‘è€…é€‰é¡¹ã€‚ ç„¶åå¼€å‘è€…æ¨¡å¼ä¸‹æ–¹å°†å‡ºç°åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºã€‚ ç‚¹å‡»åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºï¼Œåœ¨å¼¹å‡ºé¡µé¢ï¼Œé€‰æ‹©åç§°ä¸ºcaptions-for-moodleæ–‡ä»¶å¤¹ã€‚ç‚¹å‡»é€‰æ‹©æ–‡ä»¶å¤¹ã€‚æ­¤æ—¶é¡µé¢å‡ºç°Captions for Moodle RWTH 1.0æ’ä»¶ã€‚ è‡³æ­¤æ’ä»¶å®‰è£…å®Œæˆï¼Œç¡®è®¤æ’ä»¶å¡ç‰‡é‡Œçš„é€‰æ‹©æŒ‰é’®ä¸ºè“è‰²ï¼Œè¡¨ç¤ºæ’ä»¶å·²æ¿€æ´»ã€‚æ’ä»¶æ¿€æ´»åï¼Œåœ¨æµè§ˆå™¨å³ä¸Šè§’ï¼Œå°†å‡ºç°RWTHçš„å›¾æ ‡ã€‚ ä¸”å½“ä½ æ‰“å¼€ï¼Œmoodle.rwth-aachen.deæ—¶ï¼Œé¡µé¢å‡ºç°ç»¿è‰²æµ®åŠ¨æŒ‰é’®ã€‚ 1.4 æ’ä»¶ä½¿ç”¨ æ‰“å¼€moodleè¯¾ç¨‹è§†é¢‘é¡µé¢ï¼Œé¡µé¢å‡ºç°ç»¿è‰²æ‚¬æµ®æŒ‰é’®ã€‚ ç‚¹å‡»æ’­æ”¾è§†é¢‘ï¼Œç›´åˆ°è§†é¢‘åŠ è½½æˆåŠŸä¸”å¼€å§‹æ’­æ”¾ï¼Œå•å‡»ç»¿è‰²æ‚¬æµ®æŒ‰é’®ï¼Œï¼é‡è¦ï¼Œç­‰å¾…å‡ ç§’é’Ÿã€‚å¾…å­—å¹•ä¸‹è½½å®Œæ¯•ï¼Œä¼šè‡ªåŠ¨åŠ è½½åˆ°è§†é¢‘ä¸Šã€‚ ä¸‹è½½å®Œæ¯•çš„å­—å¹•ï¼Œé»˜è®¤ä¸ºå¾·è¯­å­—å¹•ï¼Œå†æ¬¡å•å‡»ç»¿è‰²æŒ‰é’®ï¼Œåˆ‡æ¢ä¸­æ–‡å­—å¹•ï¼›å†æ¬¡å•å‡»ï¼Œåˆ‡æ¢åŒè¯­å­—å¹•ï¼›å†æ¬¡å•å‡»æ¸…é™¤å­—å¹•ã€‚ä¾æ¬¡å¾ªç¯ã€‚ è‹¥å½“å‰è§†é¢‘è¿˜æ²¡æœ‰ä¸Šä¼ å­—å¹•ï¼Œè§†é¢‘å­—å¹•ä¼šæ˜¾ç¤º åœ¨å‡ºç°æ­¤å­—å¹•æ—¶ï¼Œå•å‡»ä¸‰æ¬¡æŒ‰é’®ï¼Œå³æ­¤æ¸…é™¤å­—å¹•æˆ–å½“è§†é¢‘æ’­æ”¾åˆ°ä¸¤åˆ†é’Ÿæ—¶è‡ªåŠ¨æ¸…é™¤ã€‚ ä¸‹è½½å­—å¹•åˆ°æœ¬åœ° å¦‚æœå½“å‰è§†é¢‘å­˜åœ¨å­—å¹•ï¼Œå¾…é¡µé¢åŠ è½½å®Œæ¯•åï¼Œç‚¹å‡»æµè§ˆå™¨å³ä¸Šè§’æ’ä»¶å›¾æ ‡ï¼Œå³å¯çœ‹åˆ°å­—å¹•ä¸‹è½½é“¾æ¥å’Œè§†é¢‘ä¸‹è½½é“¾æ¥ã€‚ 1.5 å…¶ä»–è¯´æ˜ç›®å‰å·²æ”¯æŒçš„è¯¾ç¨‹æœ‰ Bioenergie Grundoperationen der Energietechnik (VO) Petrochemie und Raffinerietechnik (VU) å¾…æ·»åŠ  ç¬¬äºŒç«  æ•™å­¦è§†é¢‘ä¸‹è½½å’Œå­—å¹•è½¬æ¢2.1 ç³»ç»Ÿè¦æ±‚å’Œç½‘ç»œè¦æ±‚æ’ä»¶ç”¨æˆ·å®‰è£…æˆ‘æä¾›çš„è§†é¢‘ä¸‹è½½å’Œå­—å¹•è½¬æ¢å·¥å…·ã€‚æ’ä»¶æ²¡æä¾›çš„å­—å¹•ï¼Œç”¨æˆ·å¯è‡ªè¡Œæœ¬åœ°è½¬æ¢ï¼Œå­—å¹•è½¬æ¢æˆåŠŸåï¼Œå¯é€šè¿‡ä¸Šä¼ æ¥å£ï¼Œå°†è½¬æ¢çš„å­—å¹•å…±äº«ç»™æ¯ä¸€ä½ä½¿ç”¨æ’ä»¶çš„ç”¨æˆ·ã€‚ ç³»ç»Ÿè¦æ±‚ æ­¤æ•™ç¨‹ä»…é€‚ç”¨äºwindowsç³»ç»Ÿï¼Œè‹¥æœ‰éœ€æ±‚ï¼Œåç»­å¯å‡ºUbuntuç³»ç»Ÿæ•™ç¨‹ã€‚Macç³»ç»Ÿæš‚ä¸æ”¯æŒã€‚ ç½‘ç»œè¦æ±‚â­ è½¯ä»¶çš„å®‰è£…éœ€è¦è¿æ¥å¤–ç½‘ï¼ è§†é¢‘ä¸‹è½½ä¸éœ€è¦è¿æ¥å¤–ç½‘ï¼ ç”Ÿæˆå­—å¹•éœ€è¿æ¥å¤–ç½‘ï¼å­—å¹•è½¬æ¢å°†è¯·æ±‚è°·æ­Œçš„æ–‡å­—ç¿»è¯‘APIæ¥å£ã€‚è¯·ç¡®ä¿ä½ åœ¨è¿›è¡Œæœ¬ç« ç¬¬5èŠ‚å†…å®¹ï¼Œå³è·å–å­—å¹•æ—¶ï¼Œæ»¡è¶³ä»¥ä¸‹ä¸¤ç§æ¡ä»¶ï¼š ç”¨æˆ·ç”µè„‘ç½‘ç»œå¤„äºé™¤ä¸­å›½å¤§é™†ä»¥å¤–çš„åœ°åŒºã€‚ ç”¨æˆ·è¿æ¥ç½‘é€Ÿè¾ƒå¥½çš„VPNç½‘ç»œã€‚æ³¨æ„ï¼šVPNç½‘ç»œä¸ä½³ï¼Œå°†ä½¿å­—å¹•è½¬æ¢å‡ºç°ä¸­æ–­ã€‚ 2.2 è½¯ä»¶ç¯å¢ƒæ­å»º æ‰“å¼€å‘½ä»¤ç®¡ç†å™¨ã€‚ æ‰“å¼€windowsæ¡Œé¢å³ä¸Šè§’æœç´¢åŠŸèƒ½ åœ¨æœç´¢æ¡†è¾“å…¥cmdï¼Œå¹¶ç‚¹å‡»â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€ã€‚ æ‰“å¼€åå¦‚å›¾ã€‚æ³¨æ„ï¼šå‘½ä»¤è¡Œå¼€å¤´æ˜¯ï¼šC:\\WINDOWS\\system32 å®‰è£…åŒ…ç®¡ç†å™¨chocolatey å¤åˆ¶ä»¥ä¸‹æŒ‡ä»¤ 1@&quot;%SystemRoot%\\System32\\WindowsPowerShell\\v1.0\\powershell.exe&quot; -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command &quot;iex ((New-Object System.Net.WebClient).DownloadString(&#39;https:&#x2F;&#x2F;chocolatey.org&#x2F;install.ps1&#39;))&quot; &amp;&amp; SET &quot;PATH&#x3D;%PATH%;%ALLUSERSPROFILE%\\chocolatey\\bin&quot; â­â­â­æ¸©é¦¨æç¤ºï¼šå‘½ä»¤æç¤ºç¬¦é‡Œï¼Œä½¿ç”¨å³é”®å•å‡»å³å¯å¤åˆ¶å’Œç²˜è´´ï¼ åœ¨å‘½ä»¤æ¡†é‡Œï¼Œå³é”®å•å‡»ã€‚å¦‚å›¾ï¼Œç„¶åå›è½¦è¿è¡Œã€‚ç­‰å¾…å®‰è£…å®Œæˆã€‚ é€šå¸¸ï¼Œæœªå‡ºç°çº¢è‰²æç¤ºï¼Œåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ å½“ç„¶ä¸ºäº†ç¡®ä¿æˆåŠŸå®‰è£…ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨å‘½ä»¤æç¤ºç¬¦é‡Œè¾“å…¥æŒ‡ä»¤ï¼Œæ³¨æ„Væ˜¯å¤§å†™ 1choco -V è¾“å‡ºç»¿è‰²ç‰ˆæœ¬å·ã€‚åˆ™å®‰è£…æˆåŠŸï¼Œä¾‹å¦‚:0.10.15ã€‚ å®‰è£… git python curl ffmpegã€‚ 1choco install git python curl ffmpeg -y æ­¤å®‰è£…è¿‡ç¨‹è¾ƒé•¿ï¼Œä¸”å–å†³äºä½ å½“å‰æ‰€å¤„ç½‘ç»œç¯å¢ƒã€‚è¯·è€å¿ƒç­‰å¾…ï¼Œä¿æŒç”µè„‘æ¿€æ´»çŠ¶æ€ã€‚ å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæœªæç¤ºçº¢è‰²å­—ä½“ï¼Œåˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ â­â­å®‰è£…å®Œæˆåï¼Œé€€å‡ºcmdï¼Œé‡æ–°ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ï¼Œä»¥åˆ·æ–°gitã€pythonç­‰çš„ç¯å¢ƒå˜é‡ã€‚ å¯é€‰ï¼šä½ å¯é€šè¿‡åˆ†åˆ«è¾“å…¥git --versionï¼Œpython -V,curl -Vï¼Œffmpeg -Vã€‚ä¾æ¬¡æŸ¥çœ‹è¿™å‡ ä¸ªè½¯ä»¶æ˜¯å¦å®‰è£…æˆåŠŸï¼Œè‹¥å‡ºç°ç‰ˆæœ¬å·åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ å¦‚æœæŸä¸ªç¨‹åºæ²¡æœ‰å®‰è£…ä¸Šï¼Œæ¯”å¦‚pythonï¼Œä½ å¯å•ç‹¬ä½¿ç”¨æŒ‡ä»¤ choco install python -yæ¥å®‰è£…ã€‚å®‰è£…å®Œæˆåéœ€é‡å¯cmdï¼Œæ‰èƒ½ä½¿ç”¨python -VæŒ‡ä»¤æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ã€‚ ä¸‹è½½pythonç¨‹åºå¹¶å®‰è£…ï¼Œâ­æ­¤æ­¥éª¤éœ€è¦è¿æ¥å¤–ç½‘ï¼Œå¦åˆ™ä¼šæŠ¥é”™ 12python get-pip.pypip install git+https:&#x2F;&#x2F;github.com&#x2F;BingLingGroup&#x2F;autosub.git@alpha ffmpeg-normalize langcodes å®‰è£…æˆåŠŸã€‚è¾“å…¥æŒ‡ä»¤ 1autosub -V æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œåˆ™å®‰è£…æˆåŠŸã€‚ è‹¥å‡ºç°é”™è¯¯æç¤ºå¦‚ä¸‹å›¾ å¯èƒ½æ˜¯ä½ ç³»ç»Ÿçš„æœªå®‰è£…Microsoft Visual C++ 14.0ã€‚ æ‰“å¼€è¿æ¥ https://964279924.ctfile.com/fs/1445568-239446865 ä¸‹è½½å®‰è£…VC++**ã€‚å®‰è£…åï¼Œé‡å¤ç¬¬4æ­¥**ã€‚ 2.3 è·å¾—è§†é¢‘åœ°å€è§†é¢‘ä¸‹è½½åœ°å€ï¼Œå°†åœ¨ç¬¬ä¸€ç« ï¼Œ1.4èŠ‚æ’ä»¶ä½¿ç”¨ä¸­æœ‰è¯¦ç»†ä»‹ç»ã€‚ åœ¨æ‰“å¼€è§†é¢‘åœ°å€åï¼Œç‚¹å‡»å³ä¸Šè§’æ’ä»¶å›¾æ ‡ï¼Œå³å¯çœ‹åˆ°è§†é¢‘ä¸‹è½½åœ°å€çš„urlã€‚ 2.4 ä¸‹è½½è§†é¢‘å¦‚æœä½ éœ€è¦è½¬æ¢å­—å¹•ï¼Œè¯·è·³è¿‡æ­¤èŠ‚ï¼Œä¸‹èŠ‚å†…å®¹ï¼Œå°†åŒ…æ‹¬è§†é¢‘çš„ä¸‹è½½å’Œå­—å¹•è½¬æ¢ã€‚ å¦‚æœä½ åªæƒ³ä¸‹è½½è§†é¢‘ï¼Œè€Œä¸éœ€è¦è½¬æ¢å­—å¹•ï¼Œè¯·çœ‹æ­¤ç« ã€‚ ä½ å·²ç»å®‰è£…äº†ç¬¬äºŒèŠ‚æä¾›çš„è½¯ä»¶ï¼Œå¹¶åœ¨ç¬¬ä¸‰èŠ‚è·å–åˆ°äº†è§†é¢‘çš„ä¸‹è½½åœ°å€ï¼Œé‚£ä¹ˆåœ¨è¿™èŠ‚ï¼Œä½ å°†çŸ¥é“ï¼Œå¦‚ä½•åˆ©ç”¨ffmpegå·¥å…·ï¼Œå°†m3u8æ–‡ä»¶è½¬ä¸ºmp4æ ¼å¼è§†é¢‘ã€‚å…³äºm3u8æ–‡ä»¶ï¼Œå¯çœ‹æœ¬èŠ‚è¡¥å……è¯´æ˜ã€‚ æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œæ— éœ€ç”¨ç®¡ç†å‘˜æƒé™æ‰“å¼€ï¼åœ¨æœç´¢æ è¾“å…¥cmdã€‚åŒå‡»æ‰“å¼€ã€‚ å¤åˆ¶ä»¥ä¸‹ä»£ç ï¼Œåœ¨cmdçª—å£å³é”®å•å‡»ï¼Œç„¶åå›è½¦è¿è¡Œã€‚ 1cd %USERPROFILE%\\Desktop &amp;&amp; curl -O https:&#x2F;&#x2F;gitee.com&#x2F;xieqifei&#x2F;captions_for_moodle&#x2F;raw&#x2F;master&#x2F;getcaptions.bat &amp;&amp; call getcaptions.bat åœ¨é€‰æ‹©æ“ä½œæ—¶ï¼Œè¾“å…¥2ï¼šç½‘ç»œä¸‹è½½è§†é¢‘ï¼Œä½†ä¸ç”Ÿæˆå­—å¹•ï¼Œ åœ¨è¾“å…¥è§†é¢‘çš„ç½‘ç»œåœ°å€é‡Œï¼Œè¾“å…¥2.3èŠ‚è·å–çš„ï¼Œä»¥.m3u8ç»“å°¾çš„é“¾æ¥ã€‚ç„¶åå›è½¦ è¾“å…¥ä¿å­˜è§†é¢‘å’Œå­—å¹•çš„åœ°å€ï¼Œè¿™é‡Œç›´æ¥å›è½¦ï¼Œå°†å­—å¹•ä¿å­˜åˆ°æ¡Œé¢ã€‚æ­¤æ—¶ï¼Œè½¯ä»¶å¼€å§‹å·¥ä½œã€‚ è¡¥å……è¯´æ˜ï¼šm3u8æ˜¯ä¸€ä¸ªè§†é¢‘ç‰‡æ®µçš„åœ°å€åˆ—è¡¨ï¼Œåˆ©ç”¨è§†é¢‘å¤„ç†å·¥å…·ï¼Œè¯»å–è¿™ä¸ªåœ°å€è¡¨ï¼Œå°†åˆ‡å‰²æˆç‰‡æ®µçš„tsæ ¼å¼è§†é¢‘æ‹¼æ¥æˆä¸€ä¸ªtsæ ¼å¼è§†é¢‘ï¼Œåœ¨å°†tsæ ¼å¼è§†é¢‘è½¬åŒ–ä¸ºmp4æ ¼å¼ã€‚ 2.5 è½¬æ¢å­—å¹•å’Œä¸Šä¼ å­—å¹•â­è¯·æ³¨æ„ï¼Œæ‰§è¡Œæœ¬èŠ‚å†…å®¹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼Œä½ çš„ç½‘ç»œå·²è¿æ¥å¤–ç½‘ï¼Œå¹¶ä¸”èƒ½æ‰“å¼€https://www.google.comï¼Œå¦åˆ™å°†æ— æ³•è¿›è¡Œå­—å¹•è½¬æ¢æ“ä½œã€‚ å­—å¹•ä¸Šä¼ åŠŸèƒ½ï¼Œä»…åœ¨ä½ ä½¿ç”¨æ­¤è„šæœ¬çš„é€‰é¡¹â€œç½‘ç»œä¸‹è½½è§†é¢‘ï¼Œå¹¶ç”Ÿæˆä¸­å¾·å­—å¹•â€æ—¶å¯ç”¨ã€‚ æœç´¢å¹¶æ‰“å¼€cmdå‘½ä»¤æç¤ºç¬¦ è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œä¸‹è½½å¹¶æ‰§è¡Œæ‰¹å¤„ç†è„šæœ¬ 1cd %USERPROFILE%\\Desktop &amp;&amp; curl -O https://gitee.com/xieqifei/captions_for_moodle/raw/master/getcaptions.bat &amp;&amp; call getcaptions.bat æŒ‰ç…§æç¤ºå¼€å§‹é€‰æ‹©æŒ‡ä»¤ã€‚ç›´æ¥å›è½¦ã€‚é€‰æ‹©1ï¼šç½‘ç»œä¸‹è½½è§†é¢‘ï¼Œå¹¶ç”Ÿæˆä¸­å¾·å­—å¹•ã€‚ å¡«å†™è§†é¢‘çš„ä¸‹è½½é“¾æ¥ï¼Œå‚ç…§ç¬¬ä¸‰èŠ‚å†…å®¹ï¼Œå¤åˆ¶ç¬¬ä¸‰èŠ‚è·å–åˆ°çš„è§†é¢‘é“¾æ¥ã€‚ç›´æ¥åœ¨cmdçª—å£ä¸Šå³é”®å•å‡»ï¼Œå³å¯ç²˜è´´ã€‚ é“¾æ¥ä¾‹å­ï¼šhttps://streaming.rwth-aachen.de/rwth/smil:engage-player_0fe26b35-3e44-47f0-acf6-a9c4fd05b0bc_presentation.smil/playlist.m3u8 å¡«å†™è§†é¢‘å’Œå­—å¹•çš„ä¿å­˜åœ°å€ã€‚ç›´æ¥å›è½¦ï¼Œé»˜è®¤ä¿å­˜åˆ°æ¡Œé¢ã€‚ ç¨‹åºå°†è‡ªåŠ¨å¼€å§‹è¿è¡Œï¼Œç°åœ¨ï¼Œä½ å¯ä»¥å»æ³¡æ¯èŒ¶ï¼Œç­‰å¾…è§†é¢‘å’Œå­—å¹•è½¬æ¢å®Œæˆã€‚ å­—å¹•è½¬æ¢å®Œæˆï¼Œæ£€æŸ¥å­—å¹•æ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯ï¼Œç„¶åç»§ç»­å›è½¦ä¸Šä¼ å­—å¹•ã€‚ å‡ºç°å­—å¹•ä¸Šä¼ æˆåŠŸå­—æ ·ï¼Œåˆ™å­—å¹•å·²æ›´æ–°è‡³æœåŠ¡å™¨ï¼Œå¯é€šè¿‡æ’ä»¶åœ¨çº¿ç»™è§†é¢‘æ·»åŠ å­—å¹•ï¼Œå…¶ä»–ç”¨æˆ·ä¹Ÿå¯ä»¥ç‚¹å‡»å³ä¸Šè§’æ’ä»¶æŒ‰é’®ä¸‹è½½å­—å¹•ã€‚ ä¸‹æ¬¡è¿è¡Œè„šæœ¬ï¼Œå¯ä»¥ç›´æ¥åœ¨æ¡Œé¢åŒå‡»æ‰“å¼€getcaptions.batæ–‡ä»¶,è€Œæ— éœ€å†æ¬¡ä¸‹è½½æ­¤è„šæœ¬ã€‚è‹¥è„šæœ¬æœ‰æ›´æ–°ï¼Œå¯æ‰§è¡Œæ­¥éª¤2çš„ä»£ç ã€‚","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://sci.ci/categories/%E5%85%B6%E4%BB%96/"}],"tags":[{"name":"æµè§ˆå™¨æ’ä»¶","slug":"æµè§ˆå™¨æ’ä»¶","permalink":"https://sci.ci/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/"}]},{"title":"ShopXOå•†åŸä¼˜åŒ–-å•†åŸåå°ã€å°ç¨‹åºã€é£é¹…è®¢å•æ‰“å°ã€å…¬ä¼—å·æ–°è®¢å•æ¨é€","slug":"ShopXOå•†åŸä¼˜åŒ–å•†å“ä»·æ ¼ä¿®æ”¹","date":"2020-05-26T03:40:33.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/05/26/ShopXOå•†åŸä¼˜åŒ–å•†å“ä»·æ ¼ä¿®æ”¹/","link":"","permalink":"https://sci.ci/2020/05/26/ShopXO%E5%95%86%E5%9F%8E%E4%BC%98%E5%8C%96%E5%95%86%E5%93%81%E4%BB%B7%E6%A0%BC%E4%BF%AE%E6%94%B9/","excerpt":"","text":"1ï¼šå†…å®¹æ¢—æ¦‚ShopXOæ˜¯æ¬¾éå¸¸ä¼˜ç§€çš„å¼€æºå•†åŸè½¯ä»¶ã€‚ä¸ºäº†è®©å•†åŸæ›´åŠ é€‚åˆæ²¡æœ‰ç½‘ç«™ç®¡ç†ç»éªŒçš„äººä½¿ç”¨ï¼Œæˆ‘ä¼˜åŒ–äº†æ‰‹æœºå’Œç”µè„‘ç«¯çš„å•†åŸåå°ã€‚ä¿®å¤äº†å°ç¨‹åºçš„ä¸€äº›BUGï¼Œå¹¶åšäº†ä¸€äº›å…¶ä»–ä¼˜åŒ–ã€‚ä½¿ç”¨é£é¹…æ‰“å°æœºï¼Œæ¥æ”¶æ–°è®¢å•æ¨é€é€šçŸ¥å’Œè®¢å•æ‰“å°ã€‚åˆ©ç”¨å¾®ä¿¡è®¤è¯çš„å…¬ä¼—å·ï¼Œåœ¨æœ‰æ–°è®¢å•æ—¶ï¼Œé€šè¿‡å…¬ä¼—å·ç»™å¾®ä¿¡æ¨é€æ–°è®¢å•æ¶ˆæ¯ã€‚ ç‰¹åˆ«è¯´æ˜ï¼šæ­¤ç¯‡æ–‡ç« å»ºè®®æœ‰ä¸€å®šå‰åç«¯åŸºç¡€çš„æœ‹å‹é˜…è¯»ï¼Œå¦åˆ™ï¼Œä½ åœ¨æŒ‰ç…§æœ¬æ–‡ä¿®æ”¹ä½ çš„ç½‘ç«™æ—¶ï¼Œå¯èƒ½ç”±äºæˆ‘åœ¨å†™ä½œæ—¶ï¼Œå°†æŸä¸ªç¯èŠ‚é—æ¼ï¼Œè€Œå¯¼è‡´ä½ çš„ç½‘ç«™æ— æ³•åšåˆ°åƒæˆ‘ä¿®æ”¹åä¸€æ ·çš„ç»“æœã€‚æ­¤æ—¶ï¼Œä¼šå¾—ä¸å¿å¤±ã€‚åŒæ—¶ï¼Œè‹¥ä½ å¯¹æœ¬æ–‡å†…å®¹æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿ä½ é€šè¿‡é‚®ç®±ä¸æˆ‘è”ç³»ã€‚é‚®ç®±å‡ ä¹æ¯å¤©ä¸€çœ‹ã€‚ åœ¨è¿›è¡Œä¸‹é¢ä¿®æ”¹æ—¶ï¼Œå»ºè®®ä½ å…ˆå°†ä½ çš„ç½‘ç«™å‹ç¼©æ‰“åŒ…ï¼Œä¿å­˜ä¸€ä¸‹ã€‚é¿å…æ“ä½œå¤±è¯¯æ— æ³•ä¿®å¤ã€‚å¦‚æœä½ çš„ä¿®æ”¹åœ¨è¾¾åˆ°ç†æƒ³æ•ˆæœåï¼Œå»ºè®®ä½ éƒ½è¿›è¡Œä¸€ä¸‹ä¿å­˜æ“ä½œ 2ï¼šå•†åŸåå°ä¼˜åŒ–2.1 ä¼˜åŒ–è¯´æ˜ ä¼˜åŒ–è¯´æ˜ï¼š æ‰‹æœºç«¯æ˜¾ç¤ºå•†å“ç¼©ç‡å›¾ ç›´æ¥ç‚¹å‡»ä»·æ ¼ï¼Œå¼¹å‡ºä»·æ ¼ä¿®æ”¹æ¡†ï¼Œå¿«é€Ÿæ”¹ä»·ã€‚ éšè—â€œæŸ¥çœ‹æ›´å¤šâ€æŒ‰é’®ã€‚ï¼ˆç»™ç¼©ç•¥å›¾è®©ç©ºé—´ï¼‰ å¯¹æ¯”ï¼š ä¼˜åŒ–åç‚¹å‡»å•†å“ä»·æ ¼æ”¹ä»·ï¼š 2.2 ä¼˜åŒ–å·¥ä½œ é¦–å…ˆåœ¨æ‰‹æœºç«¯æ˜¾ç¤ºç¼©ç‡å›¾å’Œä»·æ ¼ã€‚éšè—æŸ¥çœ‹æ›´å¤šã€‚ æ ¸å¿ƒä»£ç ï¼šæ›¿æ¢åŸæœ‰çš„ä»·æ ¼æ˜¾ç¤ºæ ·å¼ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªjsæ§åˆ¶çš„å¼¹çª—ã€‚ 1234567891011121314151617181920&lt;td &gt; &lt;button class&#x3D;&quot;am-btn am-btn-success price-changed am-btn-xs am-radius&quot; data-id&#x3D;&quot;&#123;&#123;$v.id&#125;&#125;&quot; data-url&#x3D;&quot;&#123;&#123;:MyUrl(&#39;admin&#x2F;goods&#x2F;pricechanged&#39;)&#125;&#125;&quot; id&#x3D;&quot;doc-prompt-toggle&#123;&#123;$v.id&#125;&#125;&quot; &gt;&#123;&#123;$v.price&#125;&#125;&lt;&#x2F;button&gt; &lt;div class&#x3D;&quot;am-modal am-modal-prompt&quot; tabindex&#x3D;&quot;-1&quot; id&#x3D;&quot;my-prompt&#123;&#123;$v.id&#125;&#125;&quot;&gt; &lt;div class&#x3D;&quot;am-modal-dialog&quot;&gt; &lt;div class&#x3D;&quot;am-modal-hd&quot;&gt;&#123;&#123;$v.title&#125;&#125;&lt;&#x2F;div&gt; &lt;div class&#x3D;&quot;am-modal-bd&quot;&gt; &lt;img src&#x3D;&quot;&#123;&#123;$v[&#39;images&#39;]&#125;&#125;&quot; class&#x3D;&quot;am-radius&quot; style&#x3D;&quot;width:100%&quot;&#x2F;&gt; &lt;input type&#x3D;&quot;number&quot; class&#x3D;&quot;am-modal-prompt-input&quot; pattern&#x3D;&quot;^([0-9]&#123;1&#125;\\d&#123;0,6&#125;)(\\.\\d&#123;1,2&#125;)?$&quot; data-validation-message&#x3D;&quot;è¯·å¡«å†™æœ‰æ•ˆçš„é”€å”®é‡‘é¢&quot; placeholder&#x3D;&quot;&#123;&#123;$v.price&#125;&#125;&quot;&gt;å…ƒ &lt;&#x2F;div&gt; &lt;div class&#x3D;&quot;am-modal-footer&quot;&gt; &lt;span class&#x3D;&quot;am-modal-btn&quot; data-am-modal-cancel&gt;å–æ¶ˆ&lt;&#x2F;span&gt; &lt;span class&#x3D;&quot;am-modal-btn&quot; data-am-modal-confirm&gt;æäº¤&lt;&#x2F;span&gt; &lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &lt;&#x2F;div&gt; &#123;&#123;if !empty($v[&#39;original_price&#39;]) and $v[&#39;original_price&#39;] gt 0&#125;&#125; &lt;br &#x2F;&gt;&lt;span class&#x3D;&quot;am-badge am-radius&quot;&gt;åŸä»· &#123;&#123;$v.original_price&#125;&#125;&lt;&#x2F;span&gt; &#123;&#123;&#x2F;if&#125;&#125;&lt;&#x2F;td&gt; å®Œæ•´index.htmlä»£ç é“¾æ¥ï¼šhttps://github.com/xieqifei/shopxo/blob/master/application/admin/view/default/goods/index.html å°†æ­¤é“¾æ¥ä¸­çš„ä»£ç ä¸‹è½½ä¸‹æ¥ï¼Œæ›¿æ¢åŸåå°å•†å“ç®¡ç†çš„htmlä»£ç ã€‚æ›¿æ¢ä½ çš„ç½‘ç«™æ ¹ç›®å½•/application/admin/view/default/goods/index.htmlã€‚ ä¿®æ”¹jsæ–‡ä»¶ï¼Œå®ç°ç‚¹å‡»ä»·æ ¼ï¼Œå¼¹å‡ºå¯¹è¯æ¡†ï¼Œæäº¤å‘é€postè¯·æ±‚ä¿®æ”¹æ•°æ®åº“ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/** * [doc-prompt-toggle ä»·æ ¼ä¿®æ”¹å¼¹çª—] * @author Qifei * @blog https://sci.ci/ * @version 0.0.1 * @datetime 2020-05-25T14:22:39+0800 * @param &#123;[int] [data-id] [æ•°æ®id]&#125; * @param &#123;[int] [data-field][æ•°æ®åº“å†…å®¹]&#125; * @param &#123;[string] [data-url] [è¯·æ±‚åœ°å€]&#125; */ $(document).on(&#x27;click&#x27;,&#x27;.price-changed&#x27;, function() &#123; var tag = $(this); var id = tag.attr(&#x27;data-id&#x27;); var $my_prompt=&#x27;#my-prompt&#x27;+id; var url = tag.attr(&#x27;data-url&#x27;); var field = tag.attr(&#x27;data-field&#x27;) || &#x27;&#x27;; $($my_prompt).modal(&#123; relatedElement: this, onConfirm: function(data) &#123; //è·å–inputæ ‡ç­¾ä¸­çš„valueå€¼ price=data[&#x27;data&#x27;]; if(id == undefined || url == undefined) &#123; Prompt(&#x27;å‚æ•°é…ç½®æœ‰è¯¯&#x27;); return false; &#125; // è¯·æ±‚æ›´æ–°æ•°æ® $.ajax(&#123; url:url, type:&#x27;POST&#x27;, dataType:&quot;json&quot;, timeout:tag.attr(&#x27;data-timeout&#x27;) || 30000, data:&#123;&quot;id&quot;:id, &quot;price&quot;:price, &quot;field&quot;:field&#125;, success:function(result) &#123; if(result.code == 0) &#123; Prompt(result.msg, &#x27;success&#x27;); // æˆåŠŸåˆ™æ›´æ–°ä»·æ ¼ tag.html(price); &#125; else &#123; Prompt(result.msg); &#125; &#125;, error:function(xhr, type) &#123; Prompt(&#x27;ç½‘ç»œå¼‚å¸¸å‡ºé”™&#x27;); &#125; &#125;); &#125;, onCancel: function() &#123; &#125; &#125;); &#125;); ä»¥ä¸Šä»£ç åŠ å…¥åˆ°common.jsæ–‡ä»¶ä¸­ï¼Œæˆ–è€…ä¸‹è½½æˆ‘çš„commonjså®Œå…¨æ›¿æ¢è¿™ä¸ªæ–‡ä»¶ æ›¿æ¢ä½ çš„ç½‘ç«™/public/static/common/js/common.js å®Œæ•´ä»£ç ï¼šhttps://github.com/xieqifei/shopxo/blob/master/public/static/common/js/common.js åœ¨Goodsæ§åˆ¶å™¨é‡Œæ–°å»ºä¸€ä¸ªæ§åˆ¶å™¨å‡½æ•°PriceChanged()ã€‚å®ç°æ¥æ”¶POSTæ•°æ®ã€‚ åœ¨application/admin/controller/Goods.phpé‡Œæ·»åŠ ä¸‹é¢çš„ä»£ç ã€‚æˆ–è€…å®Œå…¨æ›¿æ¢ä¸ºæˆ‘çš„Goods.phpã€‚ 12345678910111213141516171819202122232425/** * [PriceChanged ä¿®æ”¹å•†å“ä»·æ ¼] * @author Qifei * @blog https://sci.ci/ * @version 0.0.1 * @datetime 2020-05-25T22:23:06+0800 */ public function PriceChanged()&#123; // æ˜¯å¦ajax if(!IS_AJAX) &#123; return $this-&gt;error(&#x27;éæ³•è®¿é—®&#x27;); &#125; $filename=&quot;a.txt&quot;; $handle=fopen($filename,&quot;a+&quot;); $str=fwrite($handle,&quot;test\\n&quot;); fclose($handle); // å¼€å§‹æ“ä½œ $params = input(&#x27;post.&#x27;); $params[&#x27;admin&#x27;] = $this-&gt;admin; $params[&#x27;field&#x27;] = &#x27;price&#x27;; //è°ƒç”¨å•†å“ç®¡ç†æœåŠ¡ï¼Œæ›´æ–°æ•°æ®åº“ã€‚ return GoodsService::GoodsPriceUpdate($params);&#125; æ›¿æ¢ä½ çš„ç½‘ç«™/application/admin/controller/Goods.php å®Œæ•´çš„Goods.phpä»£ç ï¼šhttps://github.com/xieqifei/shopxo/blob/master/application/admin/controller/Goods.php åœ¨å•†å“åå°æœåŠ¡ä¸­æ·»åŠ æ›´æ–°ä»·æ ¼çš„æœåŠ¡å‡½æ•° å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ä½ çš„ç½‘ç«™/application/service/GoodsService.php,æˆ–è€…ä¸‹è½½æˆ‘çš„GoodsService.phpæ–‡ä»¶ï¼Œå®Œå…¨æ›¿æ¢å®ƒã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * ä¿®æ”¹å•†å“ä»·æ ¼ * @author Qifei * @blog https://sci.ci/ * @version 1.0.0 * @date 2020-05-25 * @desc description * @param [int] $goods_id [å•†å“id] */ public static function GoodsPriceUpdate($params = []) &#123; // è¯·æ±‚å‚æ•° $p = [ [ &#x27;checked_type&#x27; =&gt; &#x27;empty&#x27;, &#x27;key_name&#x27; =&gt; &#x27;id&#x27;, &#x27;error_msg&#x27; =&gt; &#x27;æ“ä½œidæœ‰è¯¯&#x27;, ], [ &#x27;checked_type&#x27; =&gt; &#x27;empty&#x27;, &#x27;key_name&#x27; =&gt; &#x27;field&#x27;, &#x27;error_msg&#x27; =&gt; &#x27;æœªæŒ‡å®šæ“ä½œå­—æ®µ&#x27;, ], [//ä»·æ ¼åœ¨0åˆ°5000è¿™ä¸ªåŒºé—´ &#x27;checked_type&#x27; =&gt; &#x27;between&#x27;, &#x27;key_name&#x27; =&gt; &#x27;price&#x27;, &#x27;checked_data&#x27; =&gt; [0,5000], &#x27;error_msg&#x27; =&gt; &#x27;ä»·æ ¼ä¸èƒ½å°äº0ï¼Œå¤§äº5000&#x27;, ], ]; $ret = ParamsChecked($params, $p); if($ret !== true) &#123; return DataReturn($ret, -1); &#125; // æ•°æ®æ›´æ–° if(Db::name(&#x27;Goods&#x27;)-&gt;where([&#x27;id&#x27;=&gt;intval($params[&#x27;id&#x27;])])-&gt;update([$params[&#x27;field&#x27;]=&gt;number_format($params[&#x27;price&#x27;],2),&#x27;min_price&#x27;=&gt;number_format($params[&#x27;price&#x27;],2),&#x27;max_price&#x27;=&gt;number_format($params[&#x27;price&#x27;],2), &#x27;upd_time&#x27;=&gt;time()])&amp;&amp;Db::name(&#x27;GoodsSpecBase&#x27;)-&gt;where([&#x27;goods_id&#x27;=&gt;intval($params[&#x27;id&#x27;])])-&gt;update([$params[&#x27;field&#x27;]=&gt;number_format($params[&#x27;price&#x27;],2)])) &#123; return DataReturn(&#x27;æ“ä½œæˆåŠŸ&#x27;); &#125; return DataReturn(&#x27;æ“ä½œå¤±è´¥&#x27;, -100); &#125; å®Œæ•´GoodsService.phpåœ°å€ï¼šhttps://github.com/xieqifei/shopxo/blob/master/application/service/GoodsService.php æ›¿æ¢ä½ çš„ç½‘ç«™/application/service/GoodsService.php æœ€åï¼Œä½ éœ€è¦ç»™æ–°çš„æ§åˆ¶å™¨æ–¹æ³•æ·»åŠ è®¿é—®æ•°æ®åº“æƒé™ã€‚ æ‰“å¼€ShopXOç½‘ç«™åå°ä½ çš„ç½‘ç«™ç½‘å€/admin.php æ·»åŠ æƒé™ï¼š ç‚¹å‡»ä¿å­˜ã€‚è‡³æ­¤å•†å“åå°ä¼˜åŒ–å·²ç»å®Œæˆã€‚ 3ï¼šWXå°ç¨‹åºä¼˜åŒ–3.1 ä¼˜åŒ–è¯´æ˜ ä¼˜åŒ–å†…å®¹ï¼š ä¿®æ”¹é¦–é¡µå¯¼èˆªæ ä¸Šä¼ å›¾ç‰‡ï¼Œæ˜¾ç¤ºå¤ªå° ä¿®æ”¹åˆ†ç±»æ— æ³•æŸ¥çœ‹ä¸€çº§åˆ†ç±»ã€‚ ä¿®æ”¹å‰åå¯¹æ¯” 3.2 ä¼˜åŒ–å·¥ä½œ å¯¼èˆªæ ä¿®æ”¹ æ‰“å¼€å°ç¨‹åºæºä»£ç ï¼Œæ‰¾åˆ°components-&gt;icon-nav æ›¿æ¢icon-nav.wxmlå†…å®¹ä¸ºï¼š 12345678910111213&lt;view wx:if=&quot;&#123;&#123;propData.length &gt; 0&#125;&#125;&quot;&gt; &lt;view class=&quot;data-list&quot;&gt; &lt;view class=&quot;items&quot; wx:for=&quot;&#123;&#123;propData&#125;&#125;&quot; wx:key=&quot;key&quot;&gt; &lt;view wx:if=&quot;&#123;&#123;item.bg_color===&#x27;#FFFFFF&#x27;&#125;&#125;&quot; class=&quot;items-content&quot; data-value=&quot;&#123;&#123;item.event_value&#125;&#125;&quot; data-type=&quot;&#123;&#123;item.event_type&#125;&#125;&quot; bindtap=&quot;navigation_event&quot; style=&quot;background-color:#fff;padding:0;height:110rpx;width:110rpx;border-radius:0%&quot;&gt; &lt;image src=&quot;&#123;&#123;item.images_url&#125;&#125;&quot; mode=&quot;aspectFit&quot; style=&quot;width:110rpx;height:110rpx&quot;/&gt; &lt;/view&gt; &lt;view wx:else class=&quot;items-content&quot; data-value=&quot;&#123;&#123;item.event_value&#125;&#125;&quot; data-type=&quot;&#123;&#123;item.event_type&#125;&#125;&quot; bindtap=&quot;navigation_event&quot; style=&quot;background-color:&#123;&#123;item.bg_color&#125;&#125;;&quot;&gt; &lt;image src=&quot;&#123;&#123;item.images_url&#125;&#125;&quot; mode=&quot;aspectFit&quot; style=&quot;&quot;/&gt; &lt;/view&gt; &lt;view class=&quot;title&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/view&gt; &lt;/view&gt; &lt;/view&gt;&lt;/view&gt; ä»£ç é€»è¾‘ï¼šå½“æ£€æµ‹åˆ°å¯¼èˆªæ èƒŒæ™¯é¢œè‰²ä¸ºç™½è‰²æ—¶ï¼Œè®¾ç½®å›¾ç‰‡ä¸Šä¸€å±‚Viewæ ‡ç­¾çš„å†…è¾¹è·padding ä¸º0ï¼ˆåŸä¸º20rpxï¼‰é«˜å®½è®¾ç½®ä¸º110rpxã€‚å¹¶ä¸”å°†å›¾ç‰‡é«˜å®½å‡å¢åŠ 40rpxï¼ˆåŸä¸º70rpxï¼‰ï¼Œå¼¥è¡¥å†…è¾¹è·ã€‚ ä¿®æ”¹icon-nav.wxssæ–‡ä»¶ 12345.data-list .items image &#123; width: 60rpx ; height: 60rpx ; margin-top: 5rpx;&#125; å°†åŸæ¥çš„é«˜å®½åé¢çš„!importantå»æ‰ï¼Œä¸ºäº†ä½¿æ­¥éª¤1ä¸­å†…è”çš„é«˜å®½æ ·å¼ç”Ÿæ•ˆã€‚ æœ€åï¼Œç‰¹åˆ«æ³¨æ„ï¼šä½ åœ¨ç½‘ç«™åå°ä¿®æ”¹å¯¼èˆªæ å›¾ç‰‡æ—¶ï¼Œå¿…é¡»è®¾ç½®å¯¼èˆªæ èƒŒæ™¯è‰²ä¸ºç™½è‰²ã€‚ä¸è®¾ç½®æˆ–è€…è®¾ç½®ä¸ºå…¶ä»–é¢œè‰²ï¼Œåˆ™é‡‡ç”¨é»˜è®¤çš„æ ·å¼ã€‚æ­¤æ—¶å›¾ç‰‡ä¼šæ¯”è¾ƒå°ã€‚ ä¿®æ”¹å¯¼èˆªæ ï¼šä½ çš„ç½‘ç«™/admin.php-&gt;æ‰‹æœºç«¯ç®¡ç†-&gt;é¦–é¡µå¯¼èˆª,ä¿®æ”¹å¯¼èˆªæ  ç¡®ä¿é¢œè‰²ä»£ç ä¸º#FFFFFF æ·»åŠ åˆ†ç±»å…¨éƒ¨é€‰é¡¹ å®Œå…¨æ›¿æ¢å°ç¨‹åºæºä»£ç ä¸­pages-&gt;goods-category-&gt;goods-category.wxmlæ–‡ä»¶ 1234567891011121314151617181920212223242526&lt;view class&#x3D;&#39;left-nav&#39;&gt; &lt;block wx:for&#x3D;&quot;&#123;&#123;data_list&#125;&#125;&quot; wx:key&#x3D;&quot;key&quot;&gt; &lt;view class&#x3D;&#39;items &#123;&#123;item.active || &quot;&quot;&#125;&#125;&#39; data-index&#x3D;&quot;&#123;&#123;index&#125;&#125;&quot; bindtap&#x3D;&#39;nav_event&#39;&gt; &lt;text&gt;&#123;&#123;item.name&#125;&#125;&lt;&#x2F;text&gt; &lt;&#x2F;view&gt; &lt;&#x2F;block&gt;&lt;&#x2F;view&gt;&lt;view class&#x3D;&#39;right-content bg-white&#39;&gt; &lt;view class&#x3D;&quot;content-items&quot; data-value&#x3D;&quot;&#123;&#123;data_first_class[&#39;id&#39;]&#125;&#125;&quot; bindtap&#x3D;&quot;category_event&quot;&gt; &lt;view class&#x3D;&quot;text single-text&quot;&gt;å…¨éƒ¨&lt;&#x2F;view&gt; &lt;&#x2F;view&gt; &lt;block wx:if&#x3D;&quot;&#123;&#123;data_content.length &gt; 0&#125;&#125;&quot;&gt; &lt;block wx:for&#x3D;&quot;&#123;&#123;data_content&#125;&#125;&quot; wx:key&#x3D;&quot;keys&quot; wx:for-item&#x3D;&quot;v&quot;&gt; &lt;view class&#x3D;&quot;content-items&quot; data-value&#x3D;&quot;&#123;&#123;v.id&#125;&#125;&quot; bindtap&#x3D;&quot;category_event&quot;&gt; &lt;image wx:if&#x3D;&quot;&#123;&#123;(v.icon || null) !&#x3D; null&#125;&#125;&quot; src&#x3D;&quot;&#123;&#123;v.icon&#125;&#125;&quot; mode&#x3D;&quot;aspectFit&quot; class&#x3D;&quot;icon&quot; &#x2F;&gt; &lt;view class&#x3D;&quot;text single-text&quot;&gt;&#123;&#123;v.name&#125;&#125;&lt;&#x2F;view&gt; &lt;&#x2F;view&gt; &lt;&#x2F;block&gt; &lt;&#x2F;block&gt;&lt;&#x2F;view&gt;&lt;view wx:if&#x3D;&quot;&#123;&#123;data_list.length &#x3D;&#x3D; 0 &amp;&amp; data_list_loding_status !&#x3D; 0&#125;&#125;&quot;&gt; &lt;import src&#x3D;&quot;&#x2F;pages&#x2F;common&#x2F;nodata.wxml&quot; &#x2F;&gt; &lt;template is&#x3D;&quot;nodata&quot; data&#x3D;&quot;&#123;&#123;status: data_list_loding_status&#125;&#125;&quot;&gt; &lt;&#x2F;template&gt;&lt;&#x2F;view&gt; ä¿®æ”¹pages-&gt;goods-category-&gt;goods-category.jsä¸­éƒ¨åˆ†ä»£ç  1234567891011121314// å¯¼èˆªäº‹ä»¶ nav_event(e) &#123; var index = e.currentTarget.dataset.index; var temp_data = this.data.data_list; for(var i in temp_data) &#123; temp_data[i][&#x27;active&#x27;] = (index == i) ? &#x27;nav-active&#x27; : &#x27;&#x27;; &#125; this.setData(&#123; data_list: temp_data, data_first_class: temp_data[index], data_content: temp_data[index][&#x27;items&#x27;], &#125;); &#125;, ç¼–è¯‘è¿è¡Œï¼Œå³ä¿®æ”¹å®Œæ¯•ã€‚ æœ‰ä¸ªå°bugï¼Œæ‰“å¼€åˆ†ç±»é¡µé¢ï¼Œç¬¬ä¸€ä¸ªä¸€çº§åˆ†ç±»çš„â€œå…¨éƒ¨â€ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ‰“å¼€æ—¶ï¼Œä¼šæŒ‡å‘å…¨éƒ¨å•†å“ï¼Œè€Œä¸æ˜¯ä¸€çº§åˆ†ç±»çš„å•†å“ã€‚åˆ‡æ¢åˆ°ç¬¬äºŒä¸ªä¸€çº§åˆ†ç±»ï¼Œå†å›æ¥ï¼Œæ­¤æ—¶ç‚¹å‡»â€œå…¨éƒ¨â€ï¼Œå°±å˜æ­£å¸¸äº†ã€‚ã€‚åç»­å†ä¿®å¤å§ã€‚ 4ï¼šæ–°è®¢å•é€šçŸ¥æ¨é€æ–°è®¢å•æ¨é€ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿å•†å®¶ï¼Œæ¥æ”¶å„ä¸ªç«¯ä¸‹å•æ¶ˆæ¯ã€‚é€šå¸¸ï¼Œé€šå¸¸éƒ½æ˜¯ä½¿ç”¨çŸ­ä¿¡å’Œé‚®ç®±æ–¹å¼æ¥æ¥æ”¶æ¶ˆæ¯ï¼Œä½†æ˜¯é‚®ç®±æ¥æ”¶æ•ˆç‡å¤ªä½ã€‚çŸ­ä¿¡åˆéœ€è¦æ”¶è´¹ã€‚ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ç§åŠæ—¶çš„æ¨é€æ–¹å¼ï¼Œç¬¬ä¸€ç§ï¼Œé£é¹…æ‰“å°æœºã€‚å…¥ä½ç¾å›¢ã€é¥¿äº†ä¹ˆçš„å•†å®¶ï¼Œé€šå¸¸éƒ½ä¼šè´­ä¹°è¿™ä¸ªæ‰“å°æœºï¼Œå› ä¸ºä»–æ˜¯å…¨å¹³å°çš„ï¼Œè€Œä¸”å¯ä»¥è°ƒç”¨å®ƒçš„APIæ¥å£ï¼Œè‡ªå®šä¹‰æ‰“å°å†…å®¹ã€‚ ç¬¬äºŒç§ï¼Œå¾®ä¿¡å…¬ä¼—å·æ¨é€ã€‚å½“ç½‘ç«™åå°æ¥æ”¶åˆ°æ–°è®¢å•ï¼Œå³é€šè¿‡å¾®ä¿¡å…¬ä¼—å·çš„æ¨¡æ¿æ¶ˆæ¯åŠŸèƒ½ï¼Œå‘æŒ‡å®šå¾®ä¿¡æ¨é€æ–°è®¢å•æ¶ˆæ¯ã€‚ å½“ç„¶å¦‚æœä½ å…·å¤‡ä¸€äº›ç¼–ç¨‹çŸ¥è¯†ï¼Œè¿˜å¯ä»¥è‡ªå·±å†™ä¸ªç¨‹åºï¼Œå‘ä¸‹å•çš„ç”¨æˆ·æ¨é€è®¢å•çš„è¿›å±•ã€‚ï¼ˆå¼€å‘ä¸€ä¸ªæ’ä»¶ï¼Œè°ƒç”¨è®¢å•çš„ç›¸å…³é’©å­ã€‚ï¼‰ ä¸ºäº†å‡å°‘å·¥ä½œé‡ï¼Œæ¶ˆæ¯é€šçŸ¥ï¼Œæ˜¯åœ¨åŸæœ‰æ’ä»¶æ–°è®¢å•æé†’åŸºç¡€ä¸Šè¿›è¡Œçš„ä¿®æ”¹ã€‚æ–°çš„æ’ä»¶å…·æœ‰äº†é™¤é‚®ç®±å’ŒçŸ­ä¿¡ä»¥å¤–çš„å…¬ä¼—å·å’Œé£é¹…æ‰“å°åŠŸèƒ½ã€‚","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"ShopXO","slug":"ShopXO","permalink":"https://sci.ci/tags/ShopXO/"}]},{"title":"æœºå™¨å­¦ä¹ æ·±åº¦å­¦ä¹ æå®æ¯…ç‰ˆ-å­¦ä¹ ç¬”è®°","slug":"æœºå™¨å­¦ä¹ æ·±åº¦å­¦ä¹ -å­¦ä¹ ç¬”è®°","date":"2020-05-21T09:02:29.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/05/21/æœºå™¨å­¦ä¹ æ·±åº¦å­¦ä¹ -å­¦ä¹ ç¬”è®°/","link":"","permalink":"https://sci.ci/2020/05/21/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"ç¬¬ä¸€ç«  Regression å›å½’$$f(input)=output$$ è¾“å…¥ä¸€ä¸ªå¯¹è±¡åï¼Œæœ‰æŒ‡å®šçš„è¾“å‡ºç»“æœã€‚ ç¤ºä¾‹åº”ç”¨ï¼šæ•°ç å®è´åŸå§‹cpå€¼ï¼Œæ±‚è¿›åŒ–ä¸€æ¬¡åçš„cpå€¼ Step 1: Model å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼šç¡®å®šè¾“å…¥åŸå§‹cpå€¼å’Œè¾“å‡ºè¿›åŒ–åçš„cpå€¼ã€‚$$y=b+w*x_{cp}$$ w and b are parameters Step 2: Goodness of Functionæ–¹ç¨‹å¥½å å¯¹è±¡1ï¼šfunction input: cp612-&gt;x1 function output:cp979-&gt;y1$$(x^1,y^1)$$ $$(x^2,y^2)$$ $$â€¦â€¦$$ $$(x^{10},y^{10})$$ å®šä¹‰å¦ä¸€ä¸ªå‡½æ•°ï¼šç¡®å®šç¬¬ä¸€ä¸ªå‡½æ•°æ•ˆæœå¦‚ä½•ã€‚è¾“å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å‡ºå‡½æ•°å¥½åç¨‹åº¦ã€‚ Loss Function$$\\begin{split}L(f) &amp;= L(w,b)\\ &amp;=\\sum_{n=1}^{10}\\left(y^n-\\left(b+w*x^n_{cp}\\right)\\right)^2\\end{split}$$Step 3: Best Functionæœ€å¥½çš„å‡½æ•° Gradient Descent$$w^*=arg\\ min\\ L(w)$$æšä¸¾wå€¼ï¼Œæ‰¾åˆ°Loss Functionæœ€å°çš„wå€¼ã€‚ éšæœºé€‰æ‹©ä¸€ä¸ªåˆå§‹w0, $$\\frac{dL}{dw}|w=w^0$$ åœ¨w0ä½ç½®ï¼Œå¦‚æœæ–œç‡ä¸ºæ­£ï¼Œåˆ™wå‘å°çš„ä½ç½®ç§»åŠ¨ï¼Œåä¹‹å‘wå¢å¤§çš„ä½ç½®ç§»åŠ¨ï¼Œç›®çš„æ˜¯æ‰¾åˆ°L(w)æ›´å°çš„ä½ç½®ã€‚ä¸‹ä¸€ä¸ªä½ç½®w1ã€‚$$w^1=w^0-\\eta\\frac{\\partial L}{\\partial w}|w=w^0,b=b^0\\b^1=b^0-\\eta\\frac{\\partial L}{\\partial b}|w=w^0,b=b^0\\\\etaè¡¨ç¤ºå­¦ä¹ ç‡ã€‚$$æœ€ç»ˆæ‰¾åˆ°ä¸€ä¸ªæœ€ä½³çš„wå’Œbï¼Œç¡®å®šä¸€ä¸ªL(f)æœ€å°ã€‚ ç„¶è€Œï¼Œç”±äºæ•°ç å®è´çš„ç‰©ç§ä¸åŒï¼Œbå’Œwçš„å–å€¼å°†ä¸åŒã€‚ ä¿®æ”¹æ¨¡å‹ Step 1:é€‰æ‹©æ¨¡å‹$$y=b_1\\delta(x^s=å®è´1)+w_1\\delta(x_s=å®è´1)x_{cp}+b_2\\delta(x^s=å®è´2)+w_2*\\delta(x_s=å®è´2)*x_{cp}+â€¦â€¦$$ $$\\delta(x_s=å®è´1)\\begin{cases}=1\\ if,x_s=å®è´1 \\\\=0\\ else\\end{cases}$$ æ­¤æ—¶å·²ç»å¾ˆç²¾å‡†äº†ï¼Œä½†æ˜¯å¯èƒ½è¿˜å­˜åœ¨å…¶ä»–é™¤äº†ç§ç±»ä»¥å¤–çš„å½±å“å› ç´ ï¼Œæ¯”å¦‚èº«é«˜ï¼Œä½“é‡ï¼Œhpã€‚ å›åˆ°Step 2:Regularization$$y=b+\\sum w_ix_i\\L=\\sum_n(y^n-(b+\\sum w_ix_i))^2+\\lambda\\sum (w_i)^2$$ä¸ºäº†è·å–ä¸€ä¸ªæ›´å…‰æ»‘çš„æ›²çº¿ï¼Œæ¥å‡å°‘å™ªéŸ³å¯¹è¾“å‡ºç»“æœçš„å½±å“ã€‚ é‡‡ç”¨è¾ƒå°çš„æ‹Ÿåˆæ¬¡æ•°ç®€å•çš„modelï¼Œé€šå¸¸å…·æœ‰æ›´å°çš„æ–¹å·®ï¼Œä½†åå·®æ›´å¤§ï¼Œå³ç»“æœé›†ä¸­ä½†é›†ä¸­ä½ç½®åç¦»çœŸå®å€¼ï¼›è¾ƒå¤§çš„æ‹Ÿåˆæ¬¡æ•°å¤æ‚çš„modelï¼Œæ–¹å·®æ¯”è¾ƒå¤§ï¼Œä½†åå·®æ›´å°ã€‚ åå·®å¤§ï¼š æ›´å¤šè®­ç»ƒæ•°æ® æ›´å¤æ‚çš„æ¨¡å‹ æ–¹å·®å¤§ï¼š æ›´å¤šè®­ç»ƒæ•°æ® è·å–æ¨¡å‹ï¼šValidation è®­ç»ƒæ•°æ®-&gt;åˆ†ä¸‰ä»½ï¼Œä¸¤ä»½è·å–æ¨¡å‹ï¼Œä¸€ä»½éªŒè¯æ¨¡å‹ã€‚ ç¬¬äºŒç«  Gradient Descentæ¢¯åº¦ä¸‹é™æ³•åœ¨ç¬¬ä¸€ç« Step 3ä¸­ï¼Œæˆ‘ä»¬è¦æ‰¾åˆ°ä¸€ä¸ªæœ€ä½çš„loss function$$\\theta^*=arg\\ max\\ L(\\theta) \\ \\ \\ \\ L:loss\\ function\\ \\ \\theta:parameters$$å‡è®¾$\\theta$æœ‰ä¸¤ä¸ªå‚æ•°${\\theta_1,\\theta_2}$ éšæœºè®¾ç½®ä¸€ä¸ª$\\theta^0=\\begin{bmatrix}\\theta_1^0\\\\theta_2^0\\end{bmatrix}$$$\\begin{bmatrix}\\theta_1^1\\\\theta_2^1\\end{bmatrix}=\\begin{bmatrix}\\theta_1^0\\\\theta^0_2\\end{bmatrix}-\\eta\\begin{bmatrix}\\frac{\\partial(\\theta_1^0)}{\\partial\\theta_1}\\\\frac{\\partial(\\theta_2^0)}{\\partial\\theta_2}\\end{bmatrix}$$ $$\\begin{bmatrix}\\theta_1^2\\\\theta_2^2\\end{bmatrix}=\\begin{bmatrix}\\theta_1^1\\\\theta^1_2\\end{bmatrix}-\\eta\\begin{bmatrix}\\frac{\\partial(\\theta_1^1)}{\\partial\\theta_1}\\\\frac{\\partial(\\theta_2^1)}{\\partial\\theta_2}\\end{bmatrix}$$ ç®€åŒ–å…¬å¼ï¼š$$\\bigtriangledown L(\\theta)=\\begin{bmatrix}\\frac{\\partial L(\\theta_1)}{\\partial\\theta_1}\\\\frac{\\partial L(\\theta_2)}{\\partial\\theta_2}\\end{bmatrix}\\\\theta^1=\\theta^0-\\eta\\bigtriangledown L(\\theta^0)$$éœ€è¦è°ƒèŠ‚å­¦ä¹ ç‡ï¼ˆæ­¥é•¿ï¼‰$\\eta$åˆ°åˆé€‚çš„å€¼ã€‚ ä¸åŒçš„$\\theta$ç»™ä¸åŒçš„$\\eta$ã€‚ Adagrad:éšç€å‚æ•°å¢åŠ ï¼Œæ­¥é•¿é€æ¸å‡å°ã€‚$$w^1\\gets w^1-\\frac{\\eta^0}{\\sigma^0}g^0 \\ \\ \\ \\sigma^0=\\sqrt{(g^0)^2}\\\\vdots\\\\vdots\\w^{t+1}\\gets w^t-\\frac{\\eta^t}{\\sigma^t}g^t\\ \\ \\ \\sigma^t=\\sqrt{\\frac{1}{t+1}\\sum^t_{i=0}(g^i)^2}$$ $$\\eta^t=\\frac{\\eta}{\\sqrt{t+1}}$$ Feature Scaling: å°†å¤šä¸ªxè¾“å…¥çš„èŒƒå›´ç»Ÿä¸€åˆ°ä¸€ä¸ªèŒƒå›´ï¼Œä»¥ä¿è¯åœ¨è®¡ç®—L(f)æ—¶ï¼Œæ¯ä¸ªwå¯¹L(f)çš„å½±å“ç›¸åŒã€‚ Gradient Descentä¼šå¡åœ¨å±€éƒ¨æœ€å°å€¼çš„ä½ç½® ç¬¬ä¸‰ç«  New Optimizers for Deep Learning ä¼˜åŒ–ä¸€äº›è®°å·ï¼š $\\theta_t$:æ¨¡å‹å‚æ•° $m_{t+1}$:ä»step 0åˆ°step t çš„åŠ¨é‡ã€‚ SGDï¼š SGDMã€Learning rate schedulingã€NAG èµ°åˆ°æœ€ä½ç‚¹æ—¶ï¼Œè¿˜ä¸ä¼šåœä¸‹æ¥ï¼Œç”±äºä¹‹å‰çš„åŠ¨é‡å½±å“ï¼Œå­˜åœ¨ä¸€ä¸ªç±»ä¼¼çš„æƒ¯æ€§ä½œç”¨ï¼Œä¼šç»§ç»­å‘ä¸Šçˆ¬å¡ã€‚ Adamï¼š Adagradã€RMSPropã€AMSGradã€AdaBoundã€RAdamã€Nadamã€AdamW SGD+Adam-&gt;SWATS Lookahead ç¬¬å››ç«  Classification åˆ†ç±»ä¾‹ï¼šæŠ•ç®€å† è¾“å…¥ï¼šæ”¶å…¥ã€å­˜æ¬¾ã€ä¸“ä¸šã€å¹´çºª è¾“å‡ºï¼šå½•å–æˆ–æ‹’ç» æ¨¡å‹ï¼š$$x\\rightarrow f(x)\\begin{cases}g(x)&gt;0\\ &amp;Output=class1\\else \\ \\ &amp;Output=class2\\end{cases}$$Loss functionï¼š$$L(f)=\\sum_n\\delta(f(x^n)\\ne y^n)$$79ä¸ªæ°´ç³»ï¼ˆC1ï¼‰å®å¯æ¢¦ï¼Œ61åªæ™®é€šç³»ï¼ˆC2ï¼‰çš„å®å¯æ¢¦ $P(x|C_1)$çš„å¯èƒ½æ€§ã€‚ $P(x|C_1)$æ»¡è¶³é«˜æ–¯åˆ†å¸ƒï¼ˆæ­£æ€åˆ†å¸ƒï¼‰ï¼Œæ‰¾åˆ°æœ€åˆé€‚çš„é«˜é€Ÿåˆ†å¸ƒç³»æ•°$\\mu$å’Œ$E$ ä½¿ç”¨è´å¶æ–¯å…¬å¼ï¼Œæ±‚æµ‹è¯•æ•°æ®$P(C_1|x)$çš„æ¦‚ç‡ã€‚ æ‰€ä»¥ï¼š æ¨¡å‹$$x\\rightarrow P(C_1|x)=\\frac{P(x|C_1)P(C_1)}{P(x|C_1)P(C_1)+P(x|C_2)P(C_2)}$$å‡½æ•°çš„å¥½åï¼š å¹³å‡å€¼$\\mu$å’Œ$E$ã€‚ ä¸€å †æ•°å­¦è¿ç®—â€¦â€¦ æ¨¡å‹ï¼š$$P_{w,b}(C_2|x)=\\sigma(z)\\\\sigma(z)=\\frac{1}{1+exp(-z)}\\z=w*x+b$$ ç¬¬äº”ç«  Logistic Regression$$f_{w,b}(x)=\\sigma(\\sum w_ix+b)$$$x_1$å±äº$C_1$,$x_2$å±äº$C_1$,$x_3$å±äº$C_2$â€¦â€¦$$L(w,b)=f_{w,b}(x^1)f_{w,b}(x^2)(1-f_{w,b}(x^3))â€¦$$æ‰¾åˆ°ä¸€ä¸ª$w^*,b^*$æ»¡è¶³$arg\\ max,L(w,b)$æœ€å¤§ã€‚ ç¬¬å…­ç«  Deep learningå†å²ï¼š 1958: Perceptron(linear model) 1980: Multi-layer perceptron 1986: Backpropagation 1989: 1 hidden layer is â€œgood enoughâ€ 2006: RBM initialization 2009: GPU 2011: Speech recognizition æ­¥éª¤ï¼š æ‰¾åˆ°ä¸€ä¸ªå‡½æ•°-&gt;Neural Network Deep = Many hidden layers ç¬¬ä¸ƒç«  Backpropagation åå‘ä¼ æ’­è®©è®¡ç®—æ¢¯åº¦ä¸‹é™æ³•çš„å‚æ•°æ›´æœ‰æ•ˆã€‚ Chain Rule é“¾å¼æ³•åˆ™ï¼š Case1ï¼š$$y=g(x) \\ \\ \\ \\ z=h(y)\\\\triangle x \\rightarrow \\triangle y\\rightarrow \\triangle z\\ \\frac{dz}{dx}=\\frac{dz}{dy}\\frac{dy}{dx}$$Case2:$$x=g(s) \\ \\ y=h(s) \\ \\ z=k(x,y)\\ \\frac{dz}{ds}=\\frac{\\partial z}{\\partial x}\\frac{dx}{ds}+\\frac{\\partial z}{\\partial y}\\frac{dy}{ds}$$ Loss functionæ˜¯æ‰€æœ‰è¾“å…¥ç»ç¥ç»ç½‘ç»œå¤„ç†åçš„è¾“å‡ºï¼Œä¸ç†æƒ³è¾“å‡ºè¯¯å·®ä¹‹å’Œã€‚$$L(\\theta)=\\sum_nC(\\theta)$$å¯¹Loss functionæ±‚å¯¼ï¼š$$\\frac{\\partial L}{\\partial w}=\\sum_n\\frac{\\partial C}{\\partial w}$$åªè®¨è®ºç¥ç»ç½‘ç»œçš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚ $$\\frac{\\partial C}{\\partial w}=\\frac{\\part C}{\\part z}\\frac{\\part z}{\\part w}$$æ±‚zå¯¹wæ±‚å¯¼ï¼Œå¾ˆç®€å•ï¼Œå¯¹w1æ±‚å¯¼æ˜¯x1ï¼Œå¯¹w2æ±‚å¯¼æ˜¯x2ã€‚ å‡è®¾ç¬¬äºŒå±‚ç¥ç»èŠ‚ç‚¹çš„è¾“å…¥aï¼Œæ˜¯å°†zé€šè¿‡ä¸€ä¸ªä¿¡å·å‡½æ•°(signal) $\\sigma(z)$å¾—åˆ°çš„ç°åœ¨æ±‚$\\frac{\\part C}{\\part z}$$$\\frac{\\part C}{\\part z}=\\frac{\\part a}{\\part z}\\frac{\\part C}{\\part a}$$åˆ©ç”¨é“¾å¼æ³•åˆ™ï¼Œæ±‚$\\frac{\\part C}{\\part a}$ å…¬å¼è§ä¸Šå›¾ã€‚æ­¤æ—¶ï¼Œé€šè¿‡åå‘ä¼ é€’æ³•åˆ™ã€‚å‡è®¾çº¢è‰²çš„ä¿¡å·èŠ‚ç‚¹å°±æ˜¯ç¥ç»ç½‘ç»œçš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¯¹åº”è¾“å‡ºå°±æ˜¯ç¥ç»ç½‘ç»œè¾“å‡ºã€‚é‚£ä¹ˆå¯ä»¥å€’æ¨å›å»ã€‚$\\frac{\\part C}{\\part z^,}$å°±ç­‰äºæœ€åçš„signå‡½æ•°å¯¼æ•°ã€‚å› æ­¤èƒ½æ±‚å¾—$\\frac{\\part C}{\\part a}$ï¼Œè¿™æ ·ä¾æ¬¡åæ¨å›å»ã€‚æœ€ç»ˆæ±‚å¾—æ¯ä¸ªèŠ‚ç‚¹çš„$\\frac{\\part C}{\\part z}$ã€‚ä»è€Œæ±‚å¾—Loss functionçš„å¯¼æ•°ã€‚ ç¬¬å…«ç«  Tips for Deep Learning å®šä¹‰ä¸€ä¸ªæ–¹ç¨‹ æ–¹ç¨‹å¥½å é€‰æ‹©æœ€å¥½çš„æ–¹ç¨‹ è·å¾—ä¸€ä¸ªNeural Network æ˜¯å¦è·å¾—ä¸€ä¸ªå¥½çš„ç»“æœåœ¨Training Dataï¼Œå¦‚æœä¸å¥½é‡æ–°é€‰æ‹©æœ€å¥½çš„æ–¹ç¨‹ åœ¨Testing Dataè·å¾—ä¸å¥½çš„ç»“æœï¼Œoverfittingï¼Œåˆ™é‡æ–°å®šä¹‰ä¸€ä¸ªæ–¹ç¨‹ã€‚ ReLU Rectified Linear Unit.çŸ«æ­£çº¿æ€§å•å…ƒ å¦‚æœæŸä¸ªèŠ‚ç‚¹ï¼Œè¾“å‡ºæ˜¯é›¶ï¼Œé‚£ä¹ˆä»–å¯¹æœ€åçš„ç»“æœæ²¡æœ‰ä»»ä½•å½±å“ã€‚æ‰€ä»¥ï¼Œè¾“å‡ºä¸ºé›¶å…³è”çš„ä¹‹åèŠ‚ç‚¹éƒ½å¯ä»¥è¢«æ‹¿æ‰ã€‚ ReLU -variant å½“zå°äº0æ—¶ï¼Œa=mzã€‚ Leaky ReLU ï¼šm=0.01 Parametric: må¯å˜ Maxout æœ€å¤§è¾“å‡ºï¼Œå°†ä¸åŒè¾“å…¥çš„è¾“å‡ºzåˆ†ç»„ï¼Œç»„å†…é€‰å‡ºæœ€å¤§çš„å€¼ï¼Œä½œä¸ºä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¾“å…¥ã€‚ RMSProp$$w^1 \\leftarrow w^0-\\frac{\\eta}{\\sigma^0}g^0 \\ \\ \\ \\ \\ \\sigma^0=g^0\\w^2 \\leftarrow w^1-\\frac{\\eta}{\\sigma^1}g^1 \\ \\ \\ \\ \\ \\sigma^1=\\sqrt{\\alpha (\\sigma^0)^2+(1-\\alpha)(g^1)^2}\\â€¦â€¦$$$\\alpha$å¯ä»¥è®¾ç½®ã€‚ Momentum åœ¨åˆå§‹ç‚¹$\\theta^0$å¤„ï¼ŒåŠ é€Ÿåº¦æ–¹å‘ä¸ºgradientæ–¹å‘ã€‚ åˆå§‹ç§»åŠ¨è·ç¦»:$v_0=0$ åŠ é€Ÿåº¦(ç¬¬ä¸€ç‚¹å¤„çš„gradient):$\\triangledown L(\\theta^0)$ ç§»åŠ¨è·ç¦»:$v^1=\\lambda v^0-\\eta \\triangledown L(\\theta^0)$ ç§»åˆ°ç¬¬äºŒç‚¹:$\\theta^1=\\theta^0+v^1$ è®¡ç®—ç¬¬äºŒç‚¹çš„åŠ é€Ÿåº¦:$\\triangledown L(\\theta^1)$ ä¸‹ä¸€æ¬¡ç§»åŠ¨è·ç¦»:$v^2=\\lambda v^1-\\eta \\triangledown L(\\theta^1)$ ç§»åŠ¨åˆ°ç¬¬ä¸‰ç‚¹:$\\theta^2=\\theta^1+v^2$ Adam:RMSProp+Momentum è¿‡æ‹Ÿåˆé—®é¢˜ early stop é€šè¿‡æƒ…å†µå¯èƒ½å‡ºå¸­ï¼Œå½“è®­ç»ƒé›†å¢åŠ æ—¶ï¼Œæµ‹è¯•é›†çš„æ­£ç¡®ç‡åè€Œä¸‹é™ï¼Œå› æ­¤é€šè¿‡å‡å°‘è®­ç»ƒé›†çš„æ•°æ®æ¥è¾¾åˆ°é˜²æ­¢è¿‡æ‹Ÿåˆã€‚ Regularization $$L^,(\\theta)=L(\\theta)+\\lambda \\frac{1}{2}||\\theta||_2$$ $$||\\theta||_2=(w_1)^2+(w_2)^2+â€¦â€¦$$ $||\\theta||_2$ä¸è€ƒè™‘biasesï¼Œå› ä¸ºæ­£åˆ™åŒ–æ˜¯ä¸ºäº†è®©loss functionæ›´åŠ å¹³æ»‘ï¼Œbiaseså¹¶ä¸ä¼šèµ·åˆ°ä½œç”¨ã€‚ Loss functionæ±‚å¯¼:$$\\frac{\\partial L^,}{\\partial w}=\\frac{\\partial L}{\\part w}+\\lambda w$$åœ¨æ‰¾ä¸‹ä¸€ä¸ª$$w^{t+1}\\rightarrow w^t-\\eta\\frac{\\part L^,}{\\part w} =w^t-\\eta(\\frac{\\part L}{\\part w}+\\lambda w^t)=(1-\\eta\\lambda)w^t-\\eta\\frac{\\part L}{\\part w}$$ Dropout åœ¨æ›´æ–°å‚æ•°ä¹‹å‰ï¼š æ¯ä¸ªèŠ‚ç‚¹æœ‰p%å‡ ç‡è¢«ä¸¢æ‰ ä½¿ç”¨æ–°çš„ç½‘ç»œå»è®­ç»ƒ æµ‹è¯•æ—¶ï¼š æ²¡æœ‰ä¸¢å¼ƒèŠ‚ç‚¹ å¦‚æœä¸¢å¼ƒç‡ä¸ºp%ï¼Œæ‰€æœ‰çš„weights times(1-p)% å¯ä»¥ç†è§£ä¸ºï¼Œåœ¨è®­ç»ƒæ—¶ï¼Œè…¿ä¸Šç»‘é‡ç‰©ï¼Œæµ‹è¯•æ—¶æŠŠé‡ç‰©æ‹¿æ‰ã€‚ ä¸ºä»€ä¹ˆè¦ä¹˜(1-p)% å‡è®¾ä¸¢å¼ƒç‡ä¸º50%,åœ¨è®­ç»ƒæ—¶ä¸€åŠèŠ‚ç‚¹è¢«æ‹¿æ‰ï¼Œè€Œæµ‹è¯•æ—¶ä½¿ç”¨äº†æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¯¼è‡´èŠ‚ç‚¹zç›¸å·®ä¸¤å€ï¼Œåœ¨æµ‹è¯•æ—¶å°†æ‰€æœ‰weightä¹˜50%ï¼Œä¿è¯æµ‹è¯•æ—¶çš„$zâ€™\\approx z$ ç¬¬å…«ç«  Why deepçŸ®èƒ–ï¼Ÿé«˜ç˜¦ï¼Ÿ å®éªŒæ•°æ®è¡¨æ˜ï¼Œç›¸åŒå‚æ•°æƒ…å†µä¸‹ï¼Œdeepçš„é”™è¯¯ç‡æ›´å°ã€‚ Modularization Deep-&gt;Modularization æ¯”å¦‚è¾¨åˆ«ç”·ç”Ÿé•¿å‘ã€ç”·ç”ŸçŸ­å‘ã€å¥³ç”Ÿé•¿å‘ã€å¥³ç”Ÿé•¿å‘ã€‚ ç”·ç”Ÿé•¿å‘çš„è®­ç»ƒé›†æ˜¯å¾ˆå°‘çš„ã€‚ ä½¿ç”¨æ¨¡ç»„åŒ–ï¼Œå¯ä»¥å…ˆè¾¨åˆ«æ€§åˆ«ï¼Œåœ¨è¾¨åˆ«å¤´å‘é•¿çŸ­ã€‚è¿™æ ·æ€§åˆ«å’Œé•¿çŸ­å‘çš„è®­ç»ƒé›†éƒ½æ˜¯å·®ä¸å¤šçš„ã€‚è¿™æ ·ç”·ç”Ÿé•¿å‘ä¹Ÿæœ‰å¥½çš„æ­£ç¡®ç‡ã€‚ Deep-&gt;Modularization-&gt;Less training data Modularization-Speech äººç±»è¯­è¨€çš„æ¶æ„ Phoneme:äººç±»å‘éŸ³çš„éŸ³èŠ‚ï¼Œ Tri-phone:ä¸åŒçš„ç»„åˆ State: ä¸åŒçš„èŠ‚ è¯­éŸ³è¯†åˆ«ï¼š åˆ†ç±»ï¼šinput-&gt;acoustic feature,output-&gt;state deepçš„å¥½å¤„æ˜¯ï¼Œå¯ä»¥æŠŠå¤æ‚çš„é—®é¢˜ï¼Œä½¿ç”¨å¾ˆå¤šä¸ªç®€å•çš„functionè¿æ¥åœ¨ä¸€èµ·ã€‚ ç¬¬ä¹ç«  PytorchæŒ‡å®šè®¾å¤‡ï¼Œè¿ç§»åˆ°æŸä¸ªè®¾å¤‡ 12345cpu = torch.device(&quot;cpu&quot;)gpu=torch.device(&quot;gpu&quot;)x= torch.rand(10)print(x)x=x.to(gpu)","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"https://sci.ci/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"}]},{"title":"è®¡ç®—æœºç½‘ç»œæŠ€æœ¯å­¦ä¹ ç¬”è®°","slug":"è®¡ç®—æœºç½‘ç»œæŠ€æœ¯å­¦ä¹ ç¬”è®°","date":"2020-04-26T05:05:49.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/04/26/è®¡ç®—æœºç½‘ç»œæŠ€æœ¯å­¦ä¹ ç¬”è®°/","link":"","permalink":"https://sci.ci/2020/04/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"1ï¼šåŸºç¡€æ¦‚å¿µ å±€åŸŸç½‘ã€åŸåŸŸç½‘ã€å¹¿åŸŸç½‘çš„åŒºåˆ« å®è®­ä»»åŠ¡ï¼šå®½å¸¦åŸåŸŸç½‘çš„é€»è¾‘ç»“æ„ï¼Œâ€œä¸‰ä¸ªå¹³å°ä¸€ä¸ªå‡ºå£â€ ç®¡ç†å¹³å°ã€ä¸šåŠ¡å¹³å°ã€ç½‘ç»œå¹³å°ï¼ˆæ ¸å¿ƒå±‚ã€æ±‡èšå±‚ã€æ¥å…¥å±‚ï¼‰ã€åŸå¸‚å®½å¸¦å‡ºå£- æ ¸å¿ƒå±‚ï¼š ä¸ºæ±‡èšå±‚çš„ç½‘ç»œæä¾›é«˜é€Ÿåˆ†ç»„è½¬å‘ï¼Œä¸ºåŸå¸‚æä¾›ä¸€ä¸ªé«˜é€Ÿå®‰å…¨ä¸å…·æœ‰QoSä¿éšœèƒ½åŠ›çš„æ•°æ®ä¼ è¾“ç¯å¢ƒ æä¾›åŸå¸‚çš„å®½å¸¦IPå‡ºå£ ç”¨æˆ·è®¿é—®Internetæ‰€éœ€çš„è·¯ç”±è®¿é—® æ±‡èšå±‚ï¼š æ±‡èšæ¥å…¥å±‚çš„ç”¨æˆ·æµé‡ è¿›è¡Œæœ¬åœ°è·¯ç”±ï¼ŒQoSä¼˜å…ˆçº§çš„ç®¡ç†ç­‰ ç”¨æˆ·æµé‡è½¬å‘åˆ°æ ¸å¿ƒå±‚ æ¥å…¥å±‚ï¼š è¿æ¥æœ€ç»ˆç”¨æˆ· ä¸‰å±‚ç»“æ„æ€æƒ³ï¼šä¸Šå±‚è´Ÿè´£ä¸‹å±‚çš„æ•°æ®æ±‡èšï¼Œæ ¸å¿ƒæä¾›å‡ºå£å’ŒQoSã€æ±‡èšæœ¬åœ°è·¯ç”±ã€æ¥å…¥æœåŠ¡ç”¨æˆ·ã€‚ QoSæœåŠ¡è´¨é‡çš„ä¿è¯ï¼š èµ„æºé¢„ç•™ã€åŒºåˆ†æœåŠ¡ã€å¤šåè®®æ ‡è®°äº¤æ¢ RPRï¼šå¼¹æ€§åˆ†ç»„ç¯ï¼Œå·¥ä½œæŠ€æœ¯ï¼ŒåŠ¨æ€åˆ†ç»„ä¼ è¾“ï¼ˆDPTï¼‰ï¼Œåœ¨å…‰ä»¥å¤ªç½‘ä¸Šé«˜æ•ˆä¼ è¾“IPåˆ†ç»„çš„ä¼ è¾“æŠ€æœ¯ã€‚é¡ºæ—¶é’ˆä¼ è¾“çš„å…‰çº¤å«åšå¤–ç¯ï¼Œå†…å¤–ç¯éƒ½å¯ä»¥ä¼ è¾“æ•°æ®åˆ†ç»„å’Œæ§åˆ¶åˆ†ç»„ 2ï¼šä¸­å°å‹ç½‘æ ¼ç³»ç»Ÿæ€»ä½“è§„åˆ’è€ƒç‚¹ï¼šè·¯ç”±å™¨æŠ€æœ¯æŒ‡æ ‡ã€ç½‘æ ¼ç³»ç»Ÿåˆ†å±‚è®¾è®¡ã€äº¤æ¢æœºæŠ€æœ¯æŒ‡æ ‡ã€ç½‘ç»œæœåŠ¡å™¨æ€§èƒ½ 2.1 åŸºç¡€çŸ¥è¯†2.1.1 åŸºäºç½‘ç»œçš„ä¿¡æ¯ç³»ç»ŸåŸºæœ¬ç»“æ„ ç½‘ç»œè¿è¡Œç¯å¢ƒï¼šæœºæˆ¿å’Œç”µæº ç½‘ç»œç³»ç»Ÿ ç½‘ç»œæ“ä½œç³»ç»Ÿ ç½‘ç»œåº”ç”¨è½¯ä»¶å¼€å‘å’Œè¿è¡Œç¯å¢ƒ 2.1.2 ç½‘ç»œéœ€æ±‚è°ƒç ”ä¸ç³»ç»Ÿè®¾è®¡çš„åŸºæœ¬åŸåˆ™2.2 å®è®­ä»»åŠ¡2.2.1 ç½‘ç»œç”¨æˆ·è°ƒæŸ¥ä¸ç½‘ç»œå·¥ç¨‹éœ€æ±‚åˆ†æç½‘ç»œéœ€æ±‚åˆ†æåŒ…æ‹¬ï¼šç½‘ç»œæ€»ä½“éœ€æ±‚åˆ†æã€ç»¼åˆå¸ƒçº¿éœ€æ±‚åˆ†æã€ç½‘ç»œå¯ç”¨æ€§ä¸å¯é æ€§åˆ†æã€ç½‘ç»œå®‰å…¨æ€§åˆ†æ 2.2.2 è·¯ç”±å™¨é€‰å‹çš„ä¾æ® è·¯ç”±å™¨çš„åˆ†ç±»â€”â€”æ ¹æ®è·¯ç”±å™¨èƒŒæ¿äº¤æ¢èƒ½åŠ›åˆ’åˆ† äº¤æ¢èƒ½åŠ›å¤§äº40Gbpsçš„ä¸ºé«˜ç«¯è·¯ç”±å™¨ è·¯ç”±å™¨çš„æŠ€æœ¯æŒ‡æ ‡ ååé‡ï¼šåŒ…è½¬å‘èƒ½åŠ›ã€‚èƒ½åŠ›ä¸ç«¯å£æ•°é‡ã€ç«¯å£æ•ˆç‡ã€åŒ…é•¿ã€åŒ…ç±»å‹æœ‰å…³ èƒŒæ¿èƒ½åŠ›ï¼šè·¯ç”±å™¨çš„è¾“å…¥ç«¯ä¸è¾“å‡ºç«¯ä¹‹é—´çš„ç‰©ç†é€šé“ã€‚ä¼ ç»Ÿï¼Œå…±äº«èƒŒæ¿ï¼Œé«˜æ€§èƒ½ï¼Œäº¤æ¢å¼ç»“æ„ã€‚èƒŒæ¿èƒ½åŠ›å†³å®šäº†ååé‡ ä¸¢åŒ…ç‡ï¼šæŒç»­è´Ÿè·ä¸‹ï¼ŒåŒ…ä¸¢å¤±çš„æ¦‚ç‡ã€‚è¡¡é‡è·¯ç”±å™¨è¶…è´Ÿè·å·¥ä½œæ—¶çš„æŒ‡æ ‡ å»¶æ—¶ä¸å»¶æ—¶æŠ–åŠ¨ï¼šç¬¬ä¸€ä¸ªæ¯”ç‰¹è¿›å…¥è·¯ç”±å™¨ï¼Œåˆ°è¯¥å¸§çš„æœ€åä¸€ä¸ªæ¯”ç‰¹ç¦»å¼€è·¯ç”±å™¨æ‰€ç»å†çš„æ—¶é—´ã€‚é«˜é€Ÿè·¯ç”±å™¨ï¼Œ1518Bçš„IPåŒ…ï¼Œå»¶æ—¶è¦æ±‚å°äº1msã€‚å»¶æ—¶æŠ–åŠ¨æŒ‡å»¶æ—¶çš„å˜åŒ–é‡ï¼Œè¯­éŸ³ã€è§†é¢‘å¯¹å»¶æ—¶æŠ–åŠ¨è¦æ±‚è¾ƒé«˜ã€‚ çªå‘å¤„ç†èƒ½åŠ›ï¼šæœ€å°å¸§é—´éš”å‘é€æ•°æ®åŒ…è€Œä¸å¼•èµ·ä¸¢å¤±çš„æœ€å¤§å‘é€é€Ÿç‡ è·¯ç”±è¡¨å®¹é‡ æœåŠ¡è´¨é‡ï¼šä¸»è¦è¡¨ç°åœ¨é˜Ÿåˆ—ç®¡ç†æœºåˆ¶ã€ç«¯å£ç¡¬ä»¶é˜Ÿåˆ—ç®¡ç†å’ŒQoSåè®®ä¸Š ç½‘ç®¡èƒ½åŠ› å¯é æ€§å’Œå¯ç”¨æ€§ï¼šè®¾å¤‡çš„å†—ä½™ã€çƒ­æ’æ‹”ã€æ— æ•…éšœå·¥ä½œæ—¶é—´ã€å†…éƒ¨é’Ÿè¡¨ç²¾åº¦ 2.2.3 äº¤æ¢æœºåˆ†ç±»ä¸ä¸»è¦æŠ€æœ¯æŒ‡æ ‡ äº¤æ¢æœºçš„åˆ†ç±» äº¤æ¢æœºçš„æ€§èƒ½æŒ‡æ ‡ èƒŒæ¿å¸¦å®½ å…¨åŒå·¥ç«¯å£å¸¦å®½ï¼šç«¯å£æ•°xç«¯å£é€Ÿç‡x2 2.2.4 ç½‘ç»œæœåŠ¡å™¨é€‰å‹ åˆ†ç±» æ–‡ä»¶æœåŠ¡å™¨ã€æ•°æ®åº“æœåŠ¡å™¨ã€Interneté€šç”¨æœåŠ¡å™¨ã€åº”ç”¨æœåŠ¡å™¨ åº”ç”¨æœåŠ¡å™¨çš„ä¸»è¦æŠ€æœ¯ç‰¹ç‚¹ï¼šé‡‡ç”¨æµè§ˆå™¨/æœåŠ¡å™¨ï¼ˆB/Sï¼‰æ¨¡å¼ã€‚ä¼ ç»Ÿçš„ï¼ˆC/Sï¼‰å®¢æˆ·/æœåŠ¡å™¨ åŠŸèƒ½ çƒ­æ’æ‹” RAIDç£ç›˜å†—ä½™é˜µåˆ— CISCå¤„ç†å™¨ç»“æ„ ç½‘ç»œæœåŠ¡å™¨æ€§èƒ½ è¿ç®—å¤„ç†èƒ½åŠ› ç£ç›˜å­˜å‚¨èƒ½åŠ› ç³»ç»Ÿçš„é«˜å¯é æ€§=MTBF/ï¼ˆMTBF+MRBRï¼‰ï¼ŒMTBFï¼Œå¹³å‡æ— æ•…éšœæ—¶é—´ï¼ŒMRBRï¼Œå¹³å‡ä¿®å¤æ—¶é—´ 3ï¼šIPåœ°å€è§„åˆ’è®¾è®¡3.1 åŸºç¡€çŸ¥è¯†3.1.1 IPåœ°å€çš„æ¦‚å¿µå’Œåˆ’åˆ†åœ°å€æ–°æŠ€æœ¯çš„ç ”ç©¶æ ‡å‡†åˆ†ç±»ï¼šAç±»ã€Bç±»ã€Cç±»IPåœ°å€é‡‡ç”¨åŒ…æ‹¬ç½‘ç»œå·-ä¸»æœºå· åˆ’åˆ†å­ç½‘çš„ä¸‰çº§ç»“æ„ï¼šç½‘ç»œå·-å­ç½‘å·-ä¸»æœºå· æ— ç±»åŸŸé—´è·¯ç”±ï¼ˆCIDRï¼‰ï¼šä¹Ÿç§°è¶…ç½‘ï¼Œå°†è¿ç»­å°çš„ç½‘ç»œç»„æˆä¸€ä¸ªå¤§çš„ç½‘ç»œ ç½‘ç»œåœ°å€è½¬æ¢ï¼ˆNATï¼‰ï¼šå…¬å¸å†…éƒ¨æ¯ä¸€å°ä¸»æœºåˆ†é…ä¸èƒ½å†Internetä¸Šä½¿ç”¨çš„ä¸“ç”¨IPåœ°å€ï¼Œè®¿é—®å¤–ç½‘æ—¶ï¼Œä¸“ç”¨IPåœ°å€è½¬æ¢æˆå…¨å±€IPåœ°å€ã€‚ 3.1.2 æ ‡å‡†åˆ†ç±»IPåœ°å€Aç±»ï¼š0+7ä½ç½‘ç»œå·+24ä½ä¸»æœºå·ï¼š1.0.0.0~127.255.255.255 Bç±»ï¼š10+14ä½ç½‘ç»œå·+16ä½ä¸»æœºå·ï¼š128.0.0.0~191.255.255.255 Cç±»ï¼š110+21ä½ç½‘ç»œå·+8ä½ä¸»æœºå·ï¼š192.0.0.0~223.255.255.255 Dç±»ï¼š1110+21ä½ç»„æ’­åœ°å€ï¼š224.0.0.0~ Eç±»ï¼š11110+ä¿ç•™å· Aç±»åœ°å€ï¼Œä¸€å…±127å—ï¼Œç¬¬ä¸€å—å’Œæœ€åä¸€å—ä¿ç•™ç”¨ä½œç‰¹æ®Šç”¨é€”ï¼Œå¦å¤–ï¼Œç½‘ç»œå·=10çš„ï¼Œç”¨äºä¸“ç”¨åœ°å€ï¼Œå…¶ä½™125å—å¯æŒ‡æ´¾ç»™ä¸€äº›æœºæ„ï¼Œå¯ç”¨çš„ä¸»æœºå·ä¸º2^24-2. Bç±»åœ°å€ï¼Œç½‘ç»œå·é•¿åº¦ä¸º14ä½ï¼Œç½‘ç»œå·æ€»æ•°ä¸º16384ï¼Œå› æ­¤æ¯ä¸ªBç±»ç½‘ç»œå¯ä»¥æœ‰2^16=65536ä¸ªä¸»æœºå·ã€‚å…¨0å’Œå…¨1ä¿ç•™ç”¨äºç‰¹æ®Šç›®çš„ï¼Œå› æ­¤å…è®¸åˆ†é…çš„ä¸»æœºå·ä½65534ä¸ªã€‚ Cç±»åœ°å€ï¼Œç½‘ç»œå·é•¿åº¦21ä½ï¼Œä¸»æœºå·é•¿åº¦ä¸º8ä½ï¼Œå…è®¸æœ‰2097152ä¸ªç½‘ç»œä½ï¼Œå…è®¸åˆ†é…çš„ä¸»æœºå·ä¸º254ä¸ªã€‚ ç‰¹æ®Šåœ°å€å½¢å¼ï¼š ç›´æ¥å¹¿æ’­åœ°å€ï¼šåœ¨Aç±»Bç±»Cç±»IPåœ°å€ä¸­ï¼Œä¸»æœºå·æ˜¯å…¨1ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸»æœºå·ä¸ºç›´æ¥å¹¿æ’­åœ°å€ å—é™å¹¿æ’­åœ°å€ï¼š32ä½å…¨ä¸º1çš„å¹¿æ’­åœ°å€ï¼ˆ255.255.255.255ï¼‰ä¸ºå—é™å¹¿æ’­åœ°å€ï¼Œç”¨æ¥å°†ä¸€ä¸ªåˆ†ç»„ä»¥å¹¿æ’­æ–¹å¼å‘é€ç»™æœ¬ç½‘ç»œçš„æ‰€æœ‰ä¸»æœºã€‚ è¿™ä¸ªç½‘ç»œä¸Šçš„ç‰¹å®šä¸»æœºåœ°å€ï¼šç½‘ç»œå·å…¨é›¶ï¼Œä¸»æœºå·ä¸å˜ å›é€åœ°å€ï¼šAç±»åœ°å€ä¸­çš„127.0.0.0æ˜¯å›é€åœ°å€ï¼Œä»–æ˜¯ä¸€ä¸ªä¿ç•™åœ°å€ï¼Œä¼šé€åœ°å€ç”¨äºç½‘ç»œè½¯ä»¶æµ‹è¯•å’Œæœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ 3.1.3 åˆ’åˆ†å­ç½‘çš„ä¸‰çº§ç½‘ç»œç»“æ„ å­ç½‘çš„åŸºæœ¬æ¦‚å¿µ ä¸‰çº§å±‚æ¬¡æ˜¯IPåœ°å€ï¼šnetIDâ€”â€”subnetIDâ€”â€”hostID å­ç½‘æ©ç çš„æ¦‚å¿µï¼šå¦‚ä½•ä»ä¸€ä¸ªIPåœ°å€ä¸­æå–å‡ºå­ç½‘å·ã€‚ Aç±»åœ°å€ï¼š8ä½ç½‘ç»œå·ï¼šå…¨1ï¼Œ24ä½ä¸»æœºå·å…¨0-ã€‚255.0.0.0 Bç±»ï¼š255.255.0.0 Cç±»ï¼š255.255.255.0 è®¡ç®—ï¼š Bç±»åœ°å€ï¼Œè¦åˆ†å‡º64ä¸ªå­ç½‘ï¼Œä»ä¸»æœºä½å€Ÿ6ä½ï¼Œç°åœ¨ç½‘ç»œå·22ä½ï¼Œä¸»æœºä½10ä½ï¼Œå­ç½‘æ©ç æ˜¯ï¼Œç½‘ç»œå·å…¨1ï¼Œä¸»æœºå·å…¨0ï¼Œæ‰€ä»¥å­ç½‘æ©ç ä¸ºï¼Œ255.255.252.0æˆ–è€…â€œç½‘ç»œå·/22â€. åˆ†128ä¸ªå­ç½‘ï¼Œåˆ™ç½‘ç»œå·23ä½ï¼Œä¸»æœºå·9ä½ï¼Œå­ç½‘æ©ç ï¼š255.255.254.0 3.2 å®è®­ä»»åŠ¡ç½‘ç»œåœ°å€è½¬æ¢NATå·¥ä½œåŸç† é™æ€NATï¼ˆä¸€å¯¹ä¸€ï¼‰ åŠ¨æ€åœ°å€NATï¼ˆä¸€å¯¹å¤šï¼‰ ç½‘ç»œåœ°å€ç«¯å£è£…æ¬¢NAPTï¼ˆç«¯å£åŒºåˆ†ï¼‰ IPv6åœ°å€çš„ä¸»è¦ç‰¹å¾ æ–°çš„åè®®æ ¼å¼ï¼Œå·¨å¤§çš„åœ°å€ç©ºé—´ï¼Œæœ‰æ•ˆçš„åˆ†æœºå¯»å€å’Œè·¯ç”±ç»“æ„ï¼Œåœ°å€è‡ªåŠ¨é…ç½®ï¼Œæ”¯æŒQoSæœåŠ¡ IP v6åœ°å€é•¿åº¦è§„å®šä¸º128ä½ï¼Œç”¨16ä½è¾¹ç•Œåˆ’åˆ†ï¼Œæ¯ä¸ª16ä½æ®µè½¬æ¢æ›´4ä½åå…­è¿›åˆ¶æ•°å­—ï¼Œç”¨å†’å·åˆ†éš” å‹ç¼©é›¶ï¼Œæœ‰ä¸€æ®µè¿ç»­çš„åå…­è¿›åˆ¶æ®µéƒ½ä¸º0ï¼Œç”¨åŒå†’å·å‹ç¼©ï¼ŒFE8C::2AA:FF:FE9A:4CA2ã€‚æ®µå†…å‹ç¼©ï¼Œåªèƒ½å‹ç¼©å‰é¢çš„é›¶ï¼ŒåŒå†’å·åœ¨ä¸€ä¸ªåœ°å€ä¸­åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ IPv6ä¸æ”¯æŒå­ç½‘æ©ç ï¼ŒFE8C::2AA:FF:FE9A:4CA2/48ã€‚ç”¨å‰ç¼€ä½è¡¨ç¤º48ä½å‰ç¼€ã€‚ 4ï¼šè·¯ç”±è®¾è®¡æŠ€æœ¯è€ƒç‚¹ï¼šRIPè·¯ç”±åè®®ã€OSPFã€BGPã€IPè·¯ç”±é€‰æ‹©å’Œè·¯ç”±æ±‡èš å†…éƒ¨è·¯ç”±åè®®ï¼šRIPã€OSPF å¤–éƒ¨è·¯ç”±åè®®ï¼šBGP 4.1 è·¯ç”±ä¿¡æ¯åè®®ï¼ˆRIPï¼‰çš„å·¥ä½œè¿‡ç¨‹ï¼š è·¯ç”±è¡¨çš„å»ºç«‹ï¼Œåˆå§‹åŒ–çš„è·¯ç”±åªåŒ…å«æ‰€æœ‰ä¸è¯¥è·¯ç”±å™¨ç›´æ¥ç›¸è¿çš„ç½‘ç»œçš„è·¯ç”±ã€‚è·ç¦»ä¸º0. è·¯ç”±è¡¨ä¿¡æ¯çš„æ›´æ–° å¦‚æœè‡ªå·±çš„è·¯ç”±è¡¨æ²¡æœ‰è¯¥é¡¹ï¼Œå¢åŠ è¯¥é¡¹ï¼Œè·ç¦»+1 å¦‚æœè‡ªå·±çš„è·¯ç”±è¡¨å·²æœ‰è¯¥é¡¹ åŸè·ç¦»æ¯”å¯¹æ–¹çš„è·ç¦»ï¼ˆè·³æ•°ï¼‰+1è¿˜è¦å¤§ï¼Œè·ç¦»è®¾ç½®ä¸ºå¯¹æ–¹è·ç¦»+1ã€‚è·¯ç”±ä¸ºå¯¹æ–¹ åŸè·ç¦»æ¯”å¯¹æ–¹çš„è·ç¦»+1è¿˜è¦å°ï¼Œä¿æŒä¸å˜ã€‚ ç›¸åŒä¸å˜ è·¯ç”±åˆ·æ–°ä¿æ¸©ä¸»è¦å†…å®¹æ˜¯ç”±è‹¥å¹²ï¼ˆVã€Dï¼‰ç»„æˆçš„è¡¨ 4.2 æœ€çŸ­è·¯å¾„ä¼˜å…ˆåè®®ï¼ˆOSPFï¼‰4.2.1 å’ŒRIPæ¯”è¾ƒï¼Œå…¶ç‰¹ç‚¹ OSPFæ˜¯ä½¿ç”¨åˆ†å¸ƒå¼é“¾è·¯çŠ¶æ€åè®®ï¼› é“¾è·¯çŠ¶æ€åº¦é‡ä¸»è¦æ˜¯æŒ‡è´¹ç”¨ã€è·ç¦»ã€å»¶æ—¶ã€å¸¦å®½ã€‚RIPä¸»è¦çœ‹è·³æ•°ï¼› é“¾è·¯çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç”¨æ´ªæ³›æ³•å‘æ‰€æœ‰è·¯ç”±å™¨å‘é€æ­¤ä¿¡æ¯ï¼› æ‰€æœ‰çš„OSFPFè·¯ç”±å™¨äº¤æ¢é“¾è·¯çŠ¶æ€ä¿¡æ¯ï¼Œæœ€ç»ˆå»ºç«‹ä¸€ä¸ªé“¾è·¯çŠ¶æ€æ•°æ®åº“ï¼Œè¿™ä¸ªæ•°æ®åº“å®é™…ä¸Šå°±æ˜¯å…¨ç½‘çš„æ‹“æ‰‘ç»“æ„å›¾ï¼› OSPFå¯ä»¥å°†ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿå†åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ›´å°çš„èŒƒå›´ï¼Œå³åŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸæœ‰ä¸€ä¸ª32ä½çš„åŒºåŸŸæ ‡è¯†ç¬¦ï¼Œä¸€ä¸ªåŒºåŸŸè·¯ç”±å™¨ä¸è¶…è¿‡200ä¸ªã€‚ è‡ªæ²»ç³»ç»Ÿå†…éƒ¨çš„åŒºåŸŸåˆ’åˆ†ï¼Œå¥½å¤„åœ¨äºåˆ©ç”¨æ´ªæ³›æ³•å°†é“¾è·¯çŠ¶æ€ä¿¡æ¯èŒƒå›´å±€é™å†æ¯ä¸ªåŒºåŸŸè€Œä¸æ˜¯æ•´ä¸ªè‡ªæ²»ç³»ç»Ÿã€‚å±‚æ¬¡ç»“æ„åˆ’åˆ†ï¼Œå°†ä¸€ä¸ªè‡ªæ²»ç³»ç»Ÿåˆ’åˆ†æˆè‹¥å¹²åŒºåŸŸä¸ä¸€ä¸ªä¸»å¹²åŒºåŸŸã€‚ä¸»å¹²åŒºåŸŸå†…éƒ¨çš„è·¯ç”±å™¨å«ä¸»å¹²è·¯ç”±å™¨ï¼Œè¿æ¥å„ä¸ªåŒºåŸŸçš„è·¯ç”±å™¨å«åšåŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨ï¼ŒåŒºåŸŸè¾¹ç•Œè·¯ç”±å™¨æ¥æ”¶ä»å…¶ä»–åŒºåŸŸæ¥çš„ä¿¡æ¯ã€‚ 4.2.2 OSPFåè®®çš„æ‰§è¡Œè¿‡ç¨‹ åˆå§‹åŒ–è¿‡ç¨‹ï¼šOSPFè®©æ¯ä¸ªè·¯ç”±å™¨ç”¨æ•°æ®åº“æè¿°åˆ†ç»„å’Œç›¸é‚»è·¯ç”±å™¨äº¤æ¢æœ¬æ•°æ®åº“å·²æœ‰çš„é“¾è·¯çŠ¶æ€æ‘˜è¦ä¿¡æ¯ï¼Œæ‘˜è¦ä¿¡æ¯ä¸»è¦å€å‡ºå“ªäº›è·¯ç”±å™¨çš„é“¾è·¯çŠ¶æ€ä¿¡æ¯å·²ç»å†™å…¥æ•°æ®åº“ã€‚ ç½‘ç»œäº‘å¿ƒè¿‡ç¨‹ï¼šåªè¦ä¸€ä¸ªè·¯ç”±å™¨çš„é“¾è·¯å‘ç”Ÿå˜åŒ–ï¼Œè¯¥è·¯ç”±å™¨å°±è¦ä½¿ç”¨é“¾è·¯çŠ¶æ€å‘é€åˆ†ç»„ä¿¡æ¯ã€‚ 4.3 å¤–éƒ¨ç½‘å…³åè®®BGPåŸºæœ¬æ€æƒ³ï¼š å¤–éƒ¨ç½‘å…³åè®®æ˜¯ä¸åŒè‡ªæ²»ç³»ç»Ÿçš„è·¯ç”±å™¨ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯çš„åè®®ã€‚ BGP-4é‡‡ç”¨äº†è·¯ç”±å‘é‡è·¯ç”±åè®®ï¼Œæ¯ä¸ªè‡ªæ²»ç³»ç»Ÿè‡³å°‘é€‰æ‹©ä¸€ä¸ªè·¯ç”±å™¨ä½œä¸ºè‡ªæ²»ç³»ç»Ÿçš„â€œå‘è¨€äººâ€ï¼Œä¸€ä¸ªBGPå‘è¨€äººä¸å…¶ä»–è‡ªæ²»ç³»ç»Ÿçš„å‘è¨€äººäº¤æ¢è·¯ç”±ä¿¡æ¯è¦å…ˆå»ºç«‹TCPè¿æ¥ã€‚ BGPè·¯ç”±é€‰æ‹©åè®®çš„å·¥ä½œè¿‡ç¨‹ BGPåˆå§‹åŒ–è¿‡ç¨‹ï¼šBGPåˆšåˆšè¿è¡Œæ—¶ï¼Œäº¤æ¢æ•´ä¸ªè·¯ç”±è¡¨ï¼Œä»¥ååªéœ€è¦åœ¨å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°æœ‰å˜åŒ–çš„éƒ¨åˆ†ï¼› BGPåè®®çš„å››ç§åˆ†ç»„ï¼š æ‰“å¼€åˆ†ç»„ï¼šä¸å¦ä¸€ä¸ªBGPå‘è¨€äººå»ºç«‹å…³ç³»ï¼› æ›´æ–°åˆ†ç»„ï¼šå‘é€æŸä¸€è·¯ç”±ä¿¡æ¯ï¼Œä»¥åŠåˆ—å‡ºè¦æ’¤é”€çš„å¤šæ¡è·¯ç”±ï¼› ä¿æ´»åˆ†ç»„ï¼šç¡®è®¤æ‰“å¼€åˆ†ç»„ï¼Œä»¥åŠå‘¨æœŸè¯å®ç›¸é‚»è¾¹ç•Œè·¯ç”±å™¨å­˜åœ¨ï¼› é€šçŸ¥åˆ†ç»„ï¼šå‘é€æ£€æµ‹åˆ°çš„å·®é”™ã€‚ BGPå‘è¨€äººå‘¨æœŸï¼ˆ30ç§’ï¼‰äº¤æ¢â€œä¿æ´»åˆ†ç»„â€ã€‚ â€œæ›´æ–°åˆ†ç»„â€æ˜¯BGPåè®®çš„æ ¸å¿ƒã€‚ 5ï¼šå±€åŸŸç½‘æŠ€æœ¯è€ƒç‚¹ï¼šä»¥å¤ªç½‘ç»„ç½‘æ–¹æ³•ï¼ˆå¿«é€Ÿä»¥å¤ªç½‘ï¼‰ã€å±€åŸŸç½‘ç»„ç½‘è®¾å¤‡ï¼ˆé›†çº¿å™¨ã€äº¤æ¢æœºï¼‰ã€ç»¼åˆå¸ƒçº¿å­ç³»ç»Ÿè®¾è®¡ï¼ˆæ°´å¹³å­ç³»ç»Ÿã€å»ºç­‘ç¾¤å­ç³»ç»Ÿï¼‰ 5.1 åŸºç¡€çŸ¥è¯†5.1.1 å±€åŸŸç½‘ç»„ç½‘çš„åŸºç¡€çŸ¥è¯†å±€åŸŸç½‘ï¼ˆLANï¼‰æ˜¯æŒ‡åˆ†å¸ƒåœ¨ç›¸å¯¹è¾ƒå°è·ç¦»èŒƒå›´å†…çš„è®¡ç®—æœºç½‘ç»œã€‚ å±€åŸŸç½‘æ ‡å‡†ï¼šIEEE802â€”â€”&gt;æ•°æ®é“¾è·¯å±‚åˆ†ä¸ºäº†ä¸¤ä¸ªå­å±‚ï¼ŒLLCå­å±‚å’ŒMACå­å±‚ äº¤æ¢å¼å±€åŸŸç½‘çš„åŸºæœ¬æ¦‚å¿µï¼Œäº¤æ¢å±€åŸŸç½‘æ˜¯ç›¸å¯¹å…±äº«å¼å±€åŸŸç½‘è€Œè¨€ã€‚å±€åŸŸç½‘äº¤æ¢æœºå¯ä»¥åœ¨å¤šä¸ªç«¯å£ä¹‹é—´å»ºç«‹å¤šä¸ªå¹¶å‘è¿æ¥ã€‚ä¸»è¦é‡‡ç”¨å¿«æ·äº¤æ¢æ–¹å¼å’Œå­˜å‚¨è½¬å‘æ–¹å¼ è™šæ‹Ÿå±€åŸŸç½‘çš„åŸºæœ¬æ¦‚å¿µï¼ˆVLANï¼‰ï¼Œä»¥è½¯ä»¶çš„æ–¹æ³•å°†ç½‘ç»œä¸­çš„èŠ‚ç‚¹æŒ‰å·¥ä½œæ€§è´¨ä¸éœ€è¦åˆ’åˆ†æˆè‹¥å¹²â€œé€»è¾‘å±€åŸŸç½‘â€ã€‚ æ–¹æ³•é€šå¸¸å››ç§ï¼š åŸºäºç«¯å£çš„è™šæ‹Ÿå±€åŸŸç½‘ åŸºäºMACåœ°å€çš„è™šæ‹Ÿå±€åŸŸç½‘ åŸºäºç½‘ç»œå±‚åœ°å€å®šä¹‰çš„è™šæ‹Ÿå±€åŸŸç½‘ åŸºäºIPå¹¿æ’­ç»„çš„è™šæ‹Ÿå±€åŸŸç½‘ 5.1.2 ç»¼åˆå¸ƒçº¿çš„æ¦‚å¿µç»¼åˆå¸ƒçº¿æ˜¯ä¸€ç§æ¨¡å—åŒ–çš„ã€çµæ´»æ€§æé«˜çš„å»ºç­‘ç‰©å†…æˆ–å»ºç­‘ç¾¤ä¹‹é—´çš„ä¿¡æ¯ä¼ è¾“é€šé“ã€‚ç”±ä¸åŒç³»åˆ—å’Œè§„æ ¼çš„ä¸è§ç»„æˆï¼ŒåŒ…æ‹¬ï¼šä¼ è¾“ä»‹è´¨ã€ç›¸å…³è¿æ¥ç¡¬ä»¶ä»¥åŠç”µæ°”ä¿æŠ¤è®¾å¤‡ã€‚ ç‰¹ç‚¹ï¼šå…¼å®¹æ€§ã€å¼€æ”¾æ€§ç­‰ ç»„æˆï¼šå·¥ä½œåŒºã€é…çº¿ï¼ˆæ°´å¹³å­ç³»ç»Ÿï¼‰ã€å¹²çº¿ï¼ˆå‚ç›´å­ç³»ç»Ÿï¼‰ã€è®¾å¤‡é—´ã€å»ºç­‘ç¾¤ã€ç®¡ç†å…­å¤§å­ç³»ç»Ÿ 5.2 å®è®­ä»»åŠ¡ ä»¥å¤ªç½‘ç»„ç½‘çš„åŸºæœ¬æ–¹æ³• ä»¥å¤ªç½‘çš„ç‰©ç†å±‚æ ‡å‡†çš„å‘½åæ–¹æ³•ï¼š IEEE802.3x(Mb/s) |Type-y|Name(å±€åŸŸç½‘åç§°) 10BASE-5ï¼Œ10Mç½‘ï¼ŒBaseåŸºå¸¦ä¼ è¾“æ–¹å¼ï¼Œyä¸ºç½‘ç»œçš„æœ€å¤§é•¿åº¦ï¼Œå•ä½100mã€‚ 10BASE-Tæ ‡å‡†ä»¥å¤ªç½‘ç»„ç½‘çš„è®¾è®¡æ–¹æ³•ï¼Œ-Tè¡¨ç¤ºéå±è”½åŒç»çº¿å’ŒRJ-45æ¥å£ å¿«é€Ÿä»¥å¤ªç½‘ç»„ç½‘çš„åŸºæœ¬è®¾è®¡æ–¹æ³•ï¼š ç‰¹ç‚¹ï¼šIEEE802.3uã€ å¯å·¥ä½œåœ¨10Må’Œ100M å¿«é€Ÿä»¥å¤ªç½‘ä»‹è´¨ä¸“ç”¨æ¥å£MII å¿«é€Ÿä»¥å¤ªç½‘çš„ç‰©ç†æ ‡å‡†ï¼š 100BASE-TXï¼šä½¿ç”¨5ç±»éå±è”½åŒç»çº¿æˆ–å±è”½åŒç»çº¿ï¼ˆæŠ—å¹²æ‰°æ€§æ›´å¼ºï¼‰ï¼Œä¸¤é˜ŸåŒç»çº¿ï¼Œä¸€å¯¹ç”¨äºå‘é€ï¼Œä¸€å¯¹ç”¨äºæ¥æ”¶ã€‚åœ¨ä¼ è¾“ä¸­ä½¿ç”¨4B/5Bç¼–ç æ–¹å¼ã€‚æœ€å¤§ç½‘æ®µé•¿åº¦ä¸º100mã€‚æ”¯æŒå…¨åŒå·¥ 100BASE-FXï¼šä¸¤æ¡å…‰çº¤ã€‚å…¨åŒå·¥ 100BASE-T4ï¼š4å¯¹3ç±»éå±è”½åŒç»çº¿ï¼Œ3å¯¹ç”¨äºä¼ é€æ•°æ®ï¼Œ1å¯¹ç”¨äºæ£€æµ‹å†²çªä¿¡å·ã€‚ä¼ è¾“8B/6Tç¼–ç ã€‚åŠåŒå·¥ã€‚ å…¨åŒå·¥ï¼šä»»æ„æ—¶åˆ»ï¼Œä¿¡å·åŒå‘ä¼ è¾“ä¿¡å·ã€‚æ˜¯ä¸€ç§ç‚¹åˆ°ç‚¹è¿æ¥æ–¹å¼ï¼Œæ”¯æŒå…¨åŒå·¥çš„ä»¥å¤ªç½‘æ‹“æ‰‘ç»“æ„ä¸€å®šæ˜¯æ˜Ÿå½¢ã€‚ 10Mbpsä¸100Mpbsé€Ÿç‡è‡ªåŠ¨åå•†åŠŸèƒ½ï¼Œåªèƒ½ç”¨äºä½¿ç”¨åŒç»çº¿çš„ä»¥å¤ªç½‘ï¼Œéœ€è¦åœ¨500mså†…å®Œæˆã€‚ ä¸­ç»§å™¨ ä¸­ç»§å™¨æ˜¯ç½‘ç»œç‰©ç†å±‚ä¸Šé¢çš„è¿æ¥è®¾å¤‡ã€‚é€šè¿‡å¯¹æ•°æ®ä¿¡å·çš„é‡æ–°å‘é€æˆ–è½¬å‘ï¼Œæ¥æ‰©å¤§ç½‘ç»œä¼ è¾“çš„è®¾å¤‡ã€‚ 543è§„åˆ™ï¼šæ˜¯ä»¥å¤ªç½‘æ ‡å‡†ä¸­è§„å®šäº†ä»¥å¤ªç½‘åªå…è®¸å‡ºç°5ä¸ªç½‘æ®µï¼Œæœ€å¤šä½¿ç”¨4ä¸ªä¸­ç»§å™¨ï¼Œå…¶ä¸­3æ®µå¯ä»¥è¿æ¥è®¡ç®—æœº é›†çº¿å™¨ å¤šç«¯å£çš„ä¸­ç»§å™¨ï¼ŒåŒºåˆ«ä»…åœ¨äºä¸­ç»§å™¨åªæ˜¯è¿æ¥ä¸¤ä¸ªç½‘æ®µï¼Œè€Œé›†çº¿å™¨èƒ½å¤Ÿæä¾›æ›´å¤šç«¯å£æœåŠ¡ï¼Œé‡‡ç”¨CSMA/CDä»‹è´¨è®¿é—®æ§åˆ¶æ–¹æ³•ã€‚è¿æ¥ä¸€ä¸ªé›†çº¿å™¨çš„æ‰€æœ‰èŠ‚ç‚¹å…±äº«ä¸€ä¸ªå†²çªåŸŸã€‚ ä¸²è”ä¸€ä¸ªé›†çº¿å™¨å¯ä»¥ç›‘å¬è¯¥é“¾è·¯ä¸­çš„æ•°æ®åŒ…ã€‚ è¿æ¥åˆ°ä¸€ä¸ªé›†çº¿å™¨çš„èŠ‚ç‚¹ï¼Œä¸èƒ½åŒæ—¶å‘é€æ•°æ®å¸§ï¼Œä½†èƒ½åŒæ—¶æ¥æ”¶ ç½‘æ¡¥ å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚çš„è®¾å¤‡ã€‚å±€åŸŸç½‘äº’è”ï¼Œäº¤æ¢æ•°æ®å’Œå…±äº«èµ„æº ç‰¹å¾ï¼šèƒ½äº’è”ä¸¤ä¸ªé‡‡ç”¨ä¸åŒæ•°æ®é“¾è·¯å±‚åè®®ã€ä¸åŒä¼ è¾“ä»‹è´¨ã€ä¸åŒä¼ è¾“é€Ÿç‡çš„ç½‘ç»œã€‚ç½‘æ¡¥ä»¥æ¥æ”¶ã€å‚¨å­˜ã€åœ°å€è¿‡æ»¤å’Œè½¬å‘å®ç°è¿æ¥ã€‚ ç½‘æ¡¥æœ€é‡è¦çš„ç»´æŠ¤å·¥ä½œæ˜¯æ„å»ºå’Œç»´æŠ¤MACåœ°å€è¡¨ã€‚MACåœ°å€è¡¨è®°å½•äº†ä¸åŒçš„èŠ‚ç‚¹çš„ç‰©ç†åœ°å€ä¸ç½‘æ¡¥è½¬å‘ç«¯å£çš„å…³ç³»ã€‚ ä¸ºé¿å…ç½‘æ¡¥äº’è”æ—¶çš„ç¯çŠ¶ç»“æ„ï¼Œé€æ˜ç½‘æ¡¥ä½¿ç”¨ç”Ÿæˆæ ‘ç®—æ³•ã€‚ ç”Ÿæˆæ ‘åè®®ï¼šå…¶èƒ½å¤Ÿé€»è¾‘åœ°é˜»æ–­ç½‘ç»œä¸­å­˜åœ¨åœ°å†—ä½™é“¾è·¯ï¼Œä»¥æ¶ˆé™¤è·¯å¾„ä¸­åœ°ç¯è·¯ï¼Œæ´»åŠ¨é“¾è·¯å‡ºç°æ•…éšœæ—¶ï¼Œé‡æ–°æ¿€æ´»å†—ä½™é“¾è·¯æ¥æ¢å¤ç½‘ç»œçš„è¿æ¥ã€‚ äº¤æ¢æœº äº¤æ¢æœºå¯ä»¥åœ¨ä»–çš„å¤šä¸ªç«¯å£ä¹‹é—´å»ºç«‹å¹¶å‘è¿æ¥ï¼Œäº¤æ¢å¼ä»¥å¤ªç½‘æ˜¯å…¸å‹åœ°äº¤æ¢å¼å±€åŸŸç½‘ï¼Œå®ƒçš„æ ¸å¿ƒéƒ¨ä»¶æ˜¯ä»¥å¤ªç½‘äº¤æ¢æœºã€‚ äº¤æ¢æœºä¸ç½‘æ¡¥åœ°ä¸»è¦åŒºåˆ«ï¼šç½‘æ¡¥ä¸€èˆ¬åªæœ‰ä¸€ä¸ªCPUï¼Œé€šè¿‡è½¯ä»¶æ–¹æ³•å®Œæˆç½‘æ¡¥åœ°æ¥æ”¶ã€å­˜å‚¨ã€åœ°å€è¿‡æ»¤ä¸è½¬å‘ç­‰ã€‚ äº¤æ¢æœºä½¿ç”¨ä¸ºå¸§è½¬å‘è®¾è®¡åœ°ä¸“ç”¨é›†æˆç”µè·¯èŠ¯ç‰‡ASICã€‚æˆ–é‡‡å–å¤šä¸ªCPUå¹¶å‘å·¥ä½œåœ°è®¡ç®—æœºç»“æ„ ç»¼åˆå¸ƒçº¿ç³»ç»Ÿå­ç³»ç»Ÿè®¾è®¡ å·¥ä½œåŒºå­ç³»ç»Ÿè®¾è®¡ï¼šæŒ‡ä»è®¾å¤‡å‡ºçº¿åˆ°ä¿¡æ¯æ’åº§åœ°æ•´ä¸ªåŒºåŸŸ ç¡®å®šä¿¡æ¯æ’åº§åœ°æ•°é‡å’Œç±»å‹ï¼šä¿¡æ¯æ’åº§åˆ†ä¸ºï¼ŒåµŒå…¥å¼å®‰è£…æ’åº§ï¼ˆæš—ç›’ï¼‰ã€è¡¨é¢å®‰è£…æ’åº§ï¼ˆæ˜ç›’ï¼‰ã€å¤šä»‹è´¨ä¿¡æ¯æ’åº§ï¼ˆå…‰çº¤å’Œé“œç¼†ï¼‰ é€‚é…å™¨çš„é€‰ç”¨ï¼šè®¾å¤‡è¿æ¥å¤„ç”¨çš„ä¸åŒä¿¡æ¯æ’åº§ï¼Œå¯ç”¨ä¸“ç”¨ç”µç¼†å’Œé€‚é…å™¨ã€‚æŒ¡åœ¨å•ä¸€ä¿¡æ¯æ’åº§ä¸Šï¼Œè¿›è¡Œä¸¤é¡¹æœåŠ¡ï¼Œåº”ç”¨â€œYâ€å‹é€‚é…å™¨ã€‚é€‰ç”¨ç”µç¼†ç±»å‹ä¸åŒä¸è®¾å¤‡æ‰€éœ€çš„ç”µç¼†ç±»å‹æ—¶ï¼Œä»¥åŠåœ¨è¿æ¥ä½¿ç”¨ä¸åŒä¿¡å·çš„æ•°æ¨¡è½¬æ¢è´§æ•°æ®é€Ÿç‡è½¬æ¢ï¼Œåº”é‡‡ç”¨é€‚é…å™¨ã€‚ æ°´å¹³å­ç³»ç»Ÿè®¾è®¡ é‡‡ç”¨5ç±»æˆ–è¶…5ç±»4å¯¹éå±è”½åŒç»çº¿ï¼Œ90mä»¥å†… ç®¡ç†å­ç³»ç»Ÿè®¾è®¡ å¹²çº¿å­ç³»ç»Ÿè®¾è®¡ å»ºç­‘ç‰©ä¸»é¦ˆç”µç¼† å»ºç­‘ç¾¤å­ç³»ç»Ÿ ä¸¤ä¸ªæˆ–ä»¥ä¸Šå»ºç­‘ç‰©ä¹‹é—´ï¼Œç”±ç”µç¼†ã€å…‰ç¼†å’Œå…¥æ¥¼å¤„çº¿ç¼†ä¸Šè¿‡æµè¿‡å‹çš„ç”µå™¨ä¿æŠ¤è®¾å¤‡ æœ€å¥½çš„æ˜¯â€”â€”ç®¡é“å¸ƒçº¿æ³• 6ï¼š å±€åŸŸç½‘äº¤æ¢æœº6.1 åŸºç¡€çŸ¥è¯†6.1.1 å±€åŸŸç½‘äº¤æ¢æœºçš„åŸºæœ¬åŠŸèƒ½äº¤æ¢æœºçš„åŸºæœ¬æ¦‚å¿µï¼šå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚çš„ç½‘ç»œè®¾å¤‡ã€‚äº¤æ¢æœºæ ¹æ®è¿›å…¥ç«¯å£æ•°æ®å¸§ä¸­çš„MACåœ°å€ï¼Œè¿‡æ»¤ã€è½¬å‘æ•°æ®å¸§ã€‚ç‹¬å æ•°æ®é€šé“ã€ç‹¬äº«ä¿¡é“å¸¦å®½ï¼ŒåŒæ—¶å…è®¸å¤šå¯¹ç«™ç‚¹è¿›è¡Œé€šä¿¡ã€ç³»ç»Ÿå¸¦å®½ç­‰äºæ‰€æœ‰ç«¯å£å¸¦å®½ä¹‹å’Œã€‚ äº¤æ¢æœºçš„åŠŸèƒ½ï¼š å»ºç«‹å’Œç»´æŠ¤ä¸€ä¸ªè¡¨ç¤ºMACåœ°å€ä¸äº¤æ¢æœºç«¯å£å¯¹åº”å…³ç³»çš„äº¤æ¢è¡¨ã€‚ åœ¨å‘é€èŠ‚ç‚¹å’Œæ¥æ”¶èŠ‚ç‚¹ä¹‹é—´å»ºç«‹ä¸€ä¸ªè™šè¿æ¥ã€‚ å®Œæˆæ•°æ®å¸§çš„è½¬å‘å’Œè¿‡æ»¤ã€‚ äº¤æ¢æœºåˆ†ææ¯ä¸€ä¸ªè¿›æ¥çš„æ•°æ®å¸§ï¼Œæ ¹æ®å¸§ä¸­çš„ç›®çš„MACåœ°å€ï¼Œé€šè¿‡æŸ¥è¯¢äº¤æ¢è¡¨ï¼Œç¡®å®šæ˜¯ä¸¢å¼ƒè¿˜æ˜¯è½¬å‘ã€‚ 6.1.2 å±€åŸŸç½‘äº¤æ¢æœºçš„å·¥ä½œåŸç†äº¤æ¢æœºçš„å·¥ä½œåŸç†ä¸ç½‘æ¡¥ç›¸ä¼¼ï¼Œé€šè¿‡è‡ªå­¦ä¹ çš„æ–¹å¼ã€‚ 6.1.3 äº¤æ¢è¡¨å†…å®¹çš„å»ºç«‹å’Œç»´æŠ¤äº¤æ¢è¡¨çš„å†…å®¹ï¼šç›®çš„MACåœ°å€ã€è¯¥åœ°å€æ‰€å¯¹åº”çš„äº¤æ¢æœºç«¯å£å·ä»¥åŠæ‰€åœ¨çš„è™šæ‹Ÿå­ç½‘ã€‚ äº¤æ¢è¡¨çš„å»ºç«‹ï¼Œåˆå§‹æ—¶æ˜¯ç©ºçš„ï¼Œé€šè¿‡å­¦ä¹ å»ºç«‹ã€‚ äº¤æ¢è¡¨çš„ç»´æŠ¤ï¼Œä¸€å®šæ—¶é—´åï¼Œè¡¨é¡¹æœªè¢«æ›´æ–°ï¼Œåˆ™è¢«åˆ é™¤ äº¤æ¢ç»“æ„ï¼š è½¯ä»¶äº¤æ¢ç»“æ„ï¼Œä¸²/å¹¶è½¬æ¢-&gt;RAM-&gt;å¹¶/ä¸²è½¬æ¢ï¼› çŸ©é˜µäº¤æ¢ç»“æ„ï¼Œæ ¹æ®æºç«¯å£ä¸ç›®çš„ç«¯å£æ‰“å¼€äº¤æ¢çŸ©é˜µä¸­ç›¸åº”çš„å¼€å…³ï¼› æ€»çº¿äº¤æ¢ç»“æ„ï¼Œæ•°æ®å¸§éƒ½æŒ‰æ—¶éš™åœ¨æ€»çº¿ä¸Šä¼ è¾“ï¼Œ äº¤æ¢æ¨¡å¼ï¼šå¿«é€Ÿè½¬å‘ã€ç¢ç‰‡ä¸¢å¼ƒã€å­˜å‚¨è½¬å‘ å¿«é€Ÿè½¬å‘æ¨¡å¼ï¼Œä¸€æ—¦æ£€æµ‹åˆ°6ä¸ªå­—èŠ‚ï¼Œç›®çš„åœ°å€å°±ç«‹å³è¿›è¡Œè½¬å‘æ“ä½œã€‚æ— æ³•ç»è¿‡æ ¡éªŒã€çº é”™å³è¢«ç›´æ¥è½¬å‘ã€‚ å­˜å‚¨è½¬å‘æ¨¡å¼ï¼Œå…ˆå­˜å‚¨èµ·æ¥ï¼Œç„¶åè¿›è¡Œå¾ªç¯å†—ä½™ç æ ¡éªŒæ£€æŸ¥ï¼Œå†å¯¹é”™è¯¯å¸§è¿›è¡Œå¤„ç†ï¼Œæ‰å»é™¤æ•°æ®å¸§çš„ç›®çš„åœ°å€ï¼Œè¿›è¡Œè½¬å‘æ“ä½œã€‚å»¶æ—¶å¤§ï¼Œæ”¯æŒä¸åŒé€Ÿåº¦çš„ç«¯å£é—´è½¬å‘ã€‚ ç¢ç‰‡ä¸¢å¼ƒäº¤æ¢æ¨¡å¼ï¼Œæ£€æµ‹æ•°æ®å¸§æ˜¯å¦å†²çªç¢ç‰‡ï¼Œåˆ¤æ–­æ•°æ®å¸§æ˜¯å¦ä¸º64å­—èŠ‚ 6.1.3 è™šæ‹Ÿå±€åŸŸç½‘VLANæŠ€æœ¯ä»¥äº¤æ¢å¼ç½‘ç»œä¸ºåŸºç¡€ï¼ŒæŠŠç½‘ç»œä¸Šçš„ç”¨æˆ·ç»ˆç«¯è¢«åˆ’åˆ†ä¸ºå¤šä¸ªé€»è¾‘å·¥ä½œç»„ã€‚é€»è¾‘ç»„è®¾ç«‹ä¸€ä¸ªç‹¬ç«‹çš„é€»è¾‘ç½‘æ®µå’Œå¹¿æ’­åŸŸã€‚ä¸å—ç”¨æˆ·æ‰€åœ¨çš„ç‰©ç†ä½ç½®å’Œç‰©ç†ç½‘æ®µçš„é™åˆ¶ã€‚é€šè¿‡è½¯ä»¶å®Œæˆã€‚ VLANå·¥ä½œåœ¨OSiå‚è€ƒæ¨¡å‹çš„ç¬¬2å±‚ï¼Œæ•°æ®é“¾è·¯å±‚ã€‚ å…¶å¹¿æ’­çš„ä¿¡æ¯åªèƒ½å‘é€ç»™è¯¥VLANçš„èŠ‚ç‚¹ å”¯ä¸€ä¸åŒçš„å­ç½‘å·ï¼ŒVLANåªèƒ½é€šè¿‡ç¬¬ä¸‰å±‚è·¯ç”±æ‰èƒ½é€šä¿¡ VLANçš„æ ‡è¯†ï¼šVLAN IDæˆ–VLAN name VLAN IDç”±IEEE 802.1Qæ ‡å‡†è§„å®š12ä½äºŒè¿›åˆ¶ï¼Œ1~1000ç”¨äºä»¥å¤ªç½‘ã€‚ VLAN nameç”±32ä½å­—ç¬¦è¡¨ç¤ºï¼Œå¯ä»¥æ˜¯å­—æ¯æˆ–æ•°å­— VLAN Trunkï¼ˆè™šæ‹Ÿä¸­ç»§ï¼‰ï¼šä¸»å¹²çº¿è·¯ä¸Šä¼ è¾“å¤šä¸ªVLANçš„ä¿¡æ¯ï¼Œè¿æ¥ä¸»å¹²çº¿è·¯çš„ä¸¤å°äº¤æ¢æœºç«¯å£ï¼Œåº”å…·æœ‰TrunkåŠŸèƒ½ 6.1.4 ç”Ÿæˆæ ‘åè®®STPBPDUæŠ¥æ–‡ï¼Œæ¯ä¸¤ç§’æˆ–æ˜¯å†ç½‘ç»œå‘ç”Ÿæ•…éšœã€ç½‘ç»œæ‹“æ‰‘å˜åŒ–æ—¶ï¼Œå‘é€æ–°çš„BPDUã€‚ BPDUä¸¤ç§ç±»å‹ï¼Œé…ç½®BPDUï¼ˆä¸è¶…è¿‡35ä¸ªå­—èŠ‚ï¼‰ï¼Œæ‹“æ‰‘å˜åŒ–é€šçŸ¥BPDUï¼ˆä¸è¶…è¿‡4å­—èŠ‚ï¼‰ 6.2 å®è®­ä»»åŠ¡ ä½¿ç”¨consoleé…ç½®äº¤æ¢æœºï¼Œè¶…çº§ç«¯å£è®¾ç½®å‚æ•°9600bpsï¼Œ8ä½æ•°å­— telnetå‘½ä»¤é…ç½®ï¼Œå†windowsâ€œè¿è¡Œâ€è¾“å…¥æŒ‡ä»¤telnet x.x.x.x:ç«¯å£å· ä½¿ç”¨æµè§ˆå™¨é…ç½®äº¤æ¢æœºï¼Œè®¡ç®—æœºå·²å®‰è£…TCP/IPåè®®ï¼Œè®¡ç®—æœºå’Œäº¤æ¢æœºéƒ½æœ‰IPåœ°å€ï¼›è®¡ç®—æœºå®‰è£…æœ‰JAVAçš„WEBæµè§ˆå™¨ï¼›äº¤æ¢æœºæœ‰ç®¡ç†æƒé™çš„ç”¨æˆ·å¯†ç ï¼›äº¤æ¢æœºæ”¯æŒhttpæœåŠ¡ï¼Œå¹¶å¯ç”¨ã€‚ 7ï¼šè·¯ç”±å™¨åŠå…¶é…ç½®è€ƒç‚¹ï¼šè·¯ç”±å™¨åŸºç¡€ä¸åŸºæœ¬å‘½ä»¤ã€æ¥å£é…ç½®ã€Posæ¥å£é…ç½®ã€è®¿é—®æ§åˆ¶åˆ—è¡¨ã€é™æ€è·¯ç”±ã€RIPåè®®ã€OSPFåè®®é…ç½® 7.1 åŸºç¡€çŸ¥è¯†7.1.1 è·¯ç”±å™¨æ¦‚è¿°å·¥ä½œåœ¨ç½‘ç»œå±‚çš„è®¾å¤‡ï¼Œé€‰æ‹©æœ€ä½³è·¯å¾„ï¼Œå°†æ•°æ®ä»æºä¸»æœºä¼ é€åˆ°ç›®çš„ç«¯ä¸»æœºã€‚è·¯ç”±å™¨å…·æœ‰å¼‚æ„ç½‘ç»œã€å¹¿åŸŸç½‘äº’è”ã€éš”ç¦»å¹¿æ’­çš„èƒ½åŠ›ã€‚ 7.1.2 è·¯ç”±å™¨å·¥ä½œåŸç† è·¯ç”±é€‰æ‹©ï¼Œè·¯ç”±å™¨ä¾æ®ç›®çš„IPåœ°å€çš„ç½‘ç»œåœ°å€ï¼Œé€šè¿‡è·¯ç”±ç®—æ³•ï¼Œç¡®å®šä¸€æ¡æœ€ä½³è·¯å¾„ã€‚ åˆ†ç»„è½¬å‘ï¼Œæ ¹æ®æœ€ä½³è·¯å¾„ä¿¡æ¯ï¼Œå°†å…¶è½¬å‘ç»™ä¸‹ä¸€è·³è·¯ç”±å™¨ã€ç›®çš„ç«¯å£æˆ–æ˜¯ç¼ºçœè·¯ç”±å™¨ã€‚ ç¼ºçœè·¯ç”±ä¹Ÿç§°ç¼ºçœç½‘å…³ã€‚åˆ†ç»„è½¬å‘çš„æ€æƒ³ï¼Œç›®çš„IPåœ°å€ä¸å˜ï¼Œç›®çš„MACåœ°å€ï¼Œé€è·³ä¿®æ”¹ã€‚ è·¯ç”±è¡¨ï¼Œç›®çš„ç½‘ç»œåœ°å€åŠå…¶å¯¹åº”ç«¯å£ï¼Œä¸‹ä¸€è·³è·¯ç”±å™¨çš„åå­—ï¼Œç¼ºçœè·¯ç”±ä¿¡æ¯ 7.1.3 è·¯ç”±å™¨çš„ç»“æ„ ä¸­å¤®å¤„ç†å™¨ éæ˜“å¤±æ€§éšæœºå­˜å‚¨å™¨NVRAMï¼šå­˜å‚¨è·¯ç”±å™¨çš„å¯åŠ¨é…ç½®æ–‡ä»¶ é—ªå­˜FLASHï¼šä¿å­˜æ“ä½œç³»ç»Ÿçš„æ˜ åƒæ–‡ä»¶å’Œä¸€äº›å¾®ä»£ç  æ¥å£ï¼šå±€åŸŸç½‘æ¥å£ã€å¹¿åŸŸç½‘æ¥å£ é…ç½®æ¥å£ï¼šconsoleæ§åˆ¶æ¥å£å’ŒAUXè¾…åŠ©æ¥å£ã€‚AUXé€šè¿‡æ‹¨å·æ–¹å¼å®ç°è¿œç¨‹è®¿é—® è·¯ç”±å™¨æ¥å£åå­—å’Œç¼–å· f 0/5ï¼Œfï¼šFastEthernetï¼›mod/portï¼Œæ¨¡å—å·/ç«¯å£ 7.1.4 è·¯ç”±å™¨çš„å·¥ä½œæ¨¡å¼ ç”¨æˆ·æ¨¡å¼ é€šè¿‡æ§åˆ¶å°æˆ–Telnetç™»é™†è·¯ç”±å™¨åï¼Œç”¨æˆ·å¯ä»¥æµè§ˆè·¯ç”±å™¨çš„æŸäº›ä¿¡æ¯ã€‚é»˜è®¤æç¤ºç¬¦ï¼šrouter&gt; ç‰¹æƒæ¨¡å¼ ç”¨æˆ·æ¨¡å¼åè¾“å…¥enableã€‚å¯ä»¥ç®¡ç†ç³»ç»Ÿæ—¶é’Ÿã€é”™è¯¯æ£€æµ‹ã€æŸ¥çœ‹å’Œä¿å­˜é…ç½®æ–‡ä»¶ã€æ¸…é™¤å†…å­˜ã€é‡å¯ã€‚æç¤ºç¬¦ï¼šrouter# å…¨å±€é…ç½®æ¨¡å¼ åœ¨ç‰¹æƒæ¨¡å¼ä¸‹ï¼Œè¾“å…¥configure terminalã€‚é…ç½®è·¯ç”±å™¨å…¨å±€æ€§å‚æ•°ï¼ˆä¸»æœºåã€å£ä»¤ã€TFTPæœåŠ¡å™¨ã€é™æ€è·¯ç”±ï¼‰ã€‚æç¤ºç¬¦ï¼šrouterï¼ˆconfigï¼‰# å…¶ä»–é…ç½®æ¨¡å¼ åŒ…æ‹¬æ¥å£é…ç½®æ¨¡å¼ã€è™šæ‹Ÿç»ˆç«¯é…ç½®æ¨¡å¼ã€è·¯ç”±é…ç½®æ¨¡å¼ç­‰ã€‚ è®¾ç½®æ¨¡å¼ ç”¨æˆ·åˆ›å»ºç¬¬ä¸€æ¬¡çš„é…ç½®æ–‡ä»¶ RXBOOTæ¨¡å¼ è·¯ç”±å™¨çš„ç»´æŠ¤æ¨¡å¼ï¼Œæ¢å¤å¯†ç  7.2 å®è®­ä»»åŠ¡ è·¯ç”±å™¨çš„æ“ä½œ AUXé€šè¿‡è¿œç¨‹æ‹¨å·é…ç½®è·¯ç”±å™¨ è·¯ç”±å™¨çš„é…ç½® router(config)#line vty 0 15 router(config-line)#password zzz *** ä½¿ç”¨TFTPé…ç½®è·¯ç”±å™¨ å¹¿åŸŸç½‘æ¥å£é…ç½®ï¼š é…ç½®å¼‚æ­¥ä¸²è¡Œå£ï¼ˆä¸ºç”¨æˆ·æä¾›æ‹¨å·ä¸Šç½‘æœåŠ¡ï¼‰ interface a1ã€‚å°è£…æ ¼å¼åªèƒ½ä¸ºppp é…ç½®åŒæ­¥ä¸²è¡Œå£ ç”¨äºDDNä¸“çº¿ã€å¸§ä¸­ç»§ã€å«æ˜Ÿ interface s1/1ï¼›Bandwidth 2048ï¼ˆå¸¦å®½2Mï¼Œå•ä½ä¸ºkbï¼‰ï¼›å°è£…hdlcæˆ–pppåè®®ï¼Œhdlcä¸ºç¼ºçœ é…ç½®POSæ¥å£ interface POS3/0ï¼›Crc 32ï¼ˆæ ¡éªŒä½16å’Œ32ï¼‰ï¼›Posframing sdhï¼ˆå¯é€‰å¸§æ ¼å¼æ˜¯SDHå’ŒSONETï¼‰ loopbackæ¥å£é…ç½® ä¸€ä¸ªè™šæ‹Ÿæ¥å£ï¼Œæ¥å£å·æœ‰æ•ˆå€¼ä¸º0~2147483647ï¼Œä¸»è¦ç”¨ä¸ºç®¡ç†åœ°å€ï¼Œæ°¸è¿œå¤„äºæ¿€æ´»çŠ¶æ€ã€‚å­ç½‘æ©ç ä¸º255.255.255.255ã€‚int loopback 0 è·¯ç”±å™¨çš„é™æ€è·¯ç”±é…ç½®ï¼š é™æ€è·¯ç”±çš„é…ç½®æ–¹æ³•ï¼š Router(config)#p route &lt;ç›®çš„ç½‘ç»œåœ°å€&gt;&lt;å­ç½‘æ©ç &gt;&lt;ä¸‹ä¸€è·³è·¯ç”±å™¨çš„IPåœ°å€&gt; é™æ€é»˜è®¤è·¯ç”±é…ç½®æ–¹æ³• å¦‚æœè·¯ç”±è¡¨ä¸­æ— åŒ¹é…è¡¨é¡¹ï¼Œä¸”è·¯ç”±è¡¨ä¸­æœ‰é»˜è®¤è·¯ç”±ï¼Œè·¯ç”±å™¨æŒ‰é»˜è®¤è·¯ç”±çš„å“ä¸€è·³åœ°å€å¦†å‘æ•°æ® Router(config)#ip route 0.0.0.0 0.0.0.0 212.112.8.6 åŠ¨æ€è·¯ç”±åè®®çš„é…ç½® RIPåŠ¨æ€è·¯ç”±åè®®çš„é…ç½® RIPè·¯ç”±åè®®ä¾æ®è·¯ç”±å™¨çš„è·³æ•°(hopæ•°)ã€‚æœ€å¤§è·³æ•°ä¸º15ã€‚ä¸å¯å¸¦å­ç½‘æ©ç  é…ç½®è¢«åŠ¨æ¥å£ï¼Œåªæ”¶ä¸å‘ é…ç½®è·¯ç”±è¿‡æ»¤ é…ç½®ç®¡ç†è·ç¦» å®šä¹‰é‚»å±…è·¯ç”±å™¨ OSPFåŠ¨æ€è·¯ç”±åè®®çš„é…ç½® OSPFçš„åŸºæœ¬é…ç½® ä½¿ç”¨networkå®šä¹‰å‚ä¸OSPFçš„å­ç½‘åœ°å€ Router(config)# router ospf 63 Router(config-router)# network 131.107.25.1 0.0.0.0 area 0ï¼ˆ0.0.0.0ä¸ºåæ©ç æˆ–é€šé…ç¬¦ï¼‰ Router(config-router)# area 0 range 131.107.25.1 255.255.255.255 å‚æ•°é…ç½® é…ç½®è¢«åŠ¨æ¥å£ã€é…ç½®è·¯ç”±è¿‡æ»¤ã€é…ç½®ç®¡ç†åœ°å€ã€é…ç½®å¼•å…¥å¤–éƒ¨è·¯ç”±åˆ°OSPFçš„å‚æ•° è·¯ç”±å™¨çš„DHCPåŠŸèƒ½åŠå…¶é…ç½® IPåœ°å€åˆ†é…æœ‰åŠ¨æ€å’Œé™æ€ä¸¤ç§æ–¹å¼ã€‚ å·¥ä½œåŸç†ï¼šDHCPé‡‡ç”¨C/Så·¥ä½œæ¨¡å¼ï¼Œä¸€ï¼Œå»ºç«‹å’Œç®¡ç†IPåœ°å€æ± ï¼ŒäºŒï¼Œæ¥æ”¶å¹¶å¤„ç†DHCPå®¢æˆ·ç«¯æå‡ºçš„è¯·æ±‚ã€‚ DHCPæœåŠ¡å™¨é…ç½® é…ç½®IPåœ°å€æ± çš„åç§°ï¼Œå¹¶è¿›å…¥DHCP Poolé…ç½®æ¨¡å¼ Router(config)# ip dhcp pool ttt é…ç½®IPåœ°å€æ±  é…ç½®ä¸ç”¨äºåŠ¨æ€åˆ†é…çš„IPåœ°å€ é…ç½®IPåœ°å€æ± çš„ç¼ºçœç½‘å…³ é…ç½®IPåœ°å€æ± çš„åŸŸåç³»ç»Ÿ é…ç½®IPåœ°å€æ± çš„åœ°å€ç§Ÿçº¦æ—¶é—´ å–æ¶ˆåœ°å€å†²çªè®°å½•æ—¥å¿— è·¯ç”±å™¨IPè®¿é—®æ§åˆ¶åˆ—è¡¨çš„åŠŸèƒ½ ä¸»è¦åŠŸèƒ½ï¼šACLå¯ä»¥å½“ä½œä¸€ç§ç½‘ç»œæ§åˆ¶å·¥å…·ï¼Œç”¨æ¥è¿‡æ»¤æµå…¥å’Œæµå‡ºæ¥å£çš„æ•°æ®åŒ…","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"https://sci.ci/tags/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/"}]},{"title":"å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°","slug":"å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°","date":"2020-04-07T13:48:51.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/04/07/å¾®ä¿¡å°ç¨‹åºå­¦ä¹ ç¬”è®°/","link":"","permalink":"https://sci.ci/2020/04/07/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"1ï¼šç®€ä»‹ ç”¨æˆ·æ‰«ä¸€æ‰«æˆ–æœç´¢ä¸€ä¸‹å³å¯æ‰“å¼€åº”ç”¨ã€‚ å¾®ä¿¡æœ‰æµ·é‡ç”¨æˆ·ï¼Œç²˜æ€§é«˜ å¼€å‘é€‚é…æˆæœ¬ä½ 2ï¼šç›®å½•ç»“æ„å°ç¨‹åºç»“æ„ç›®å½• pages index logs utils app.js app.json project.config.json sitemap.json //æŸäº›é¡µé¢æ˜¯å¦èƒ½è¢«å¾®ä¿¡æ£€ç´¢ å¼€å‘è€…æ–‡æ¡£ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/framework/structure.html å…¨å±€é…ç½®app.json 12345678910111213141516171819202122&#123; &quot;pages&quot;: [ &quot;pages/index/index&quot;,//ç¬¬ä¸€ä¸ªé¡µé¢ &quot;pages/logs/logs&quot; ], &quot;window&quot;: &#123; &quot;backgroundTextStyle&quot;: &quot;light&quot;,//ä¸‹æ‹‰åˆ·æ–°æ–‡å­—ï¼Œéœ€å¼€é€šä¸‹æ‹‰åˆ·æ–° &quot;navigationBarBackgroundColor&quot;: &quot;#fff&quot;, &quot;navigationBarTitleText&quot;: &quot;WeChat&quot;, &quot;navigationBarTextStyle&quot;: &quot;black&quot; &#125;, &quot;tabBar&quot;: &#123; //é¡µé¢ä¸‹é¢çš„èœå• &quot;list&quot;: [&#123; //listè‡³å°‘éœ€è¦ä¸¤é¡¹ &quot;pagePath&quot;: &quot;pagePath&quot;, &quot;text&quot;: &quot;text&quot;, &quot;iconPath&quot;: &quot;iconPath&quot;, &quot;selectedIconPath&quot;: &quot;selectedIconPath&quot; &#125;] &#125;, &quot;style&quot;: &quot;v2&quot;, &quot;sitemapLocation&quot;: &quot;sitemap.json&quot;&#125; 3:æ•°æ®ç»‘å®š1&lt;view&gt; &#123;&#123;msg&#125;&#125;&lt;/view&gt; 12345Page(&#123; data:&#123; msg:&quot;hello world&quot; &#125;&#125;) 4ï¼šæ•°ç»„å’Œå¯¹è±¡å¾ªç¯ 12345678Page(&#123; data:&#123; list:&#123; id:0, name:&quot;çŒªå…«æˆ’&quot; &#125; &#125;&#125;) 12345&lt;view&gt; &lt;view wx:for=&quot;&#123;&#123;list&#125;&#125;&quot; wx:for-item=&quot;item&quot; wx:for-index=&quot;index&quot; wx:key=&quot;id&quot;&gt; ç´¢å¼•ï¼š&#123;&#123;index&#125;&#125;--&#123;&#123;item.name&#125;&#125; &lt;/view&gt;&lt;/view&gt; wx:keyå¯ä»¥æé«˜å¾ªç¯æ£€ç´¢æ•ˆç‡ã€‚ keyå¿…é¡»æ˜¯å”¯ä¸€çš„å€¼ wx:key =â€*thisâ€ è¡¨ç¤ºæ•°ç»„æ˜¯ä¸€ä¸ªæ™®é€šæ•°ç»„ wx:for-item=&quot;item&quot; wx:for-index=&quot;index&quot;å¯ä»¥çœç•¥ å¯¹è±¡å¾ªç¯wx:for=&quot;&#123;&#123;å¯¹è±¡&#125;&#125;&quot; wx:for-item=&quot;å¯¹è±¡çš„å€¼ï¼ˆé”®å€¼ï¼‰&quot; wx:for-index=&quot;å¯¹è±¡çš„å±æ€§ï¼ˆé”®åï¼‰&quot; 12345Person&#123; name:&quot;èµ·é£&quot;, age:22, height:174&#125; 5ï¼šblockæ ‡ç­¾ å ä½ç¬¦çš„æ ‡ç­¾ å†™ä»£ç çš„æ—¶å€™å¯ä»¥çœ‹åˆ°è¿™ä¸ªå­˜åœ¨ æ¸²æŸ“æ—¶ä¼šç§»é™¤æ‰ å°†viewæ¢æˆblockï¼Œå¯å°†æ ‡ç­¾å»æ‰ï¼Œæœ€ç»ˆå¾ªç¯å˜é‡å¯åœ¨ä¸€è¡Œå±•ç¤º 6ï¼šæ¡ä»¶æ¸²æŸ“ wx:if=&quot;&#123;&#123;ture/false&#125;&#125;&quot; hidden åº”ç”¨åœºæ™¯ï¼š å½“æ ‡ç­¾ä¸æ˜¯é¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºï¼Œä¼˜å…ˆä½¿ç”¨wx:if ç›´æ¥æŠŠæ ‡ç­¾ä»é¡µé¢ç»“æ„ä¸­åˆ é™¤ é¢‘ç¹åˆ‡æ¢ç”¨hidden ä½¿ç”¨display:noneå±æ€§ã€‚ 1234567891011&lt;view&gt; &lt;view&gt;æ¡ä»¶&lt;/view&gt; &lt;view wx:if=&quot;&#123;&#123;true&#125;&#125;&quot;&gt;display&lt;/view&gt; &lt;view wx:if=&quot;&#123;&#123;true&#125;&#125;&quot;&gt;if&lt;/view&gt; &lt;view wx:elis=&quot;&#123;&#123;false&#125;&#125;&quot;&gt;elif&lt;/view&gt; &lt;view wx:else&gt;else&lt;/view&gt; &lt;view hidden&gt;hidden&lt;/view&gt; &lt;view hidden=&quot;&quot;&#123;&#123;true&#125;&#125;&quot;&quot;&gt;&lt;/view&gt;&lt;/view&gt; 7ï¼šäº‹ä»¶ç»‘å®š 12345678&lt;input type=&quot;text&quot; bindinput=&quot;handelInput&quot;/&gt;&lt;button bindtap=&quot;handletap&quot; data-opt=&quot;&#123;&#123;1&#125;&#125;&quot;&gt; +&lt;/button&gt;&lt;button bindtap=&quot;handletap&quot; data-opt=&quot;&#123;&#123;-1&#125;&#125;&quot;&gt; -&lt;/button&gt;&lt;view&gt;&#123;&#123;num&#125;&#125;&lt;/view&gt; 1234567891011Pages(&#123; data:&#123; num:0; &#125;, handelInput(e)&#123; this.setDate(&#123;num:e.detail.value&#125;) &#125;, handletap(e)&#123; e.currentTaget.opt &#125;&#125;) 8ï¼šæ ·å¼ åœ¨750xå±å¹•ä¸­ 750px=750rpx æŠŠå±å¹•æ”¹ä¸º375 375px=750rpx 1rpx=0.5px. æ ·å¼å¯¼å…¥ utilsä¸‹æ–°å»ºæ–‡ä»¶å¤¹stylesï¼Œæ–‡ä»¶å¤¹é‡Œæ–°å»ºcommon.wxss å¼•ç”¨ï¼š@import &quot;../../styles/common.wxss&quot; é€‰æ‹©å™¨ å°ç¨‹åºä¸æ”¯æŒé€šé…ç¬¦ 9ï¼šå¸¸è§ç»„ä»¶ view text æ–‡æœ¬æ ‡ç­¾ åªæœ‰æ­¤æ ‡ç­¾å¯é•¿æŒ‰å¤åˆ¶ è§£ç decode 1&lt;text selectable&gt;é•¿æŒ‰å¤åˆ¶ &amp;nbsp(è¿™æ˜¯ç©ºæ ¼)&lt;/text&gt; å›¾ç‰‡ æœ¬åœ°å›¾ç‰‡ä¸èƒ½è¶…è¿‡2Mï¼Œæ‰€ä»¥éƒ½ä½¿ç”¨å¤–é“¾å›¾ç‰‡ srcï¼šæ¥æº modeï¼šå›¾ç‰‡è£å‰ªç¼©æ”¾æ ¼å¼//scaleToFill lazy-loadï¼šæ‡’åŠ è½½ï¼Œå½“å›¾ç‰‡åœ¨ä¸Šä¸‹ä¸‰å±èŒƒå›´ç±»ï¼Œå›¾ç‰‡ä¼šé¢„åŠ è½½ swiper è½®æ’­å›¾ autoplay:è‡ªåŠ¨æ’­æ”¾ circularï¼šè½®æ’­ intervaï¼šé—´éš”æ—¶é—´ã€‚å•ä½ms indicator-dotsï¼šæ˜¾ç¤ºåˆ†é¡µæŒ‡ç¤ºå™¨ 12345&lt;swiper autoplay&gt; &lt;swiper-item&gt;&lt;image src=&quot;&quot;&gt;&lt;/image&gt;&lt;/swiper-item&gt; &lt;swiper-item&gt;&lt;image src=&quot;&quot;&gt;&lt;/image&gt;&lt;/swiper-item&gt; &lt;swiper-item&gt;&lt;image src=&quot;&quot;&gt;&lt;/image&gt;&lt;/swiper-item&gt;&lt;/swiper&gt; navigator å¯¼èˆªæ  å—çº§å…ƒç´  urlï¼šè·³è½¬æŸä¸ªé¡µé¢ targetï¼šè·³è½¬åˆ°å…¶ä»–å°ç¨‹åº open-typeï¼šnavigateï¼Œä¿ç•™å½“å‰é¡µé¢ï¼Œä¸èƒ½è·³è½¬tabbaré‡Œçš„é¡µé¢ï¼Œé»˜è®¤å€¼ï¼›redirectï¼Œä¸ä¿ç•™å½“å‰é¡µé¢ï¼›switchTabï¼šè·³è½¬tabbarï¼Œå…³é—­å…¶ä»–é¡µé¢ï¼›reLauchï¼šå…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åº”ç”¨æŸä¸ªé¡µé¢ 1&lt;navigator url=&quot;&quot;&gt;&lt;/navigator&gt; rich-text å¯Œæ–‡æœ¬æ ‡ç­¾ 1&lt;rich-text nodes=&quot;&#123;&#123;html&#125;&#125;&quot;&gt;&lt;/rich-text&gt; 12345678910111213141516171819Page(&#123; data:&#123; html:[ name:&quot;div&quot;, attr:&#123; class:&quot;my_div&quot;, style:&quot;color:red&quot; &#125;, children:[&#123; name:&quot;p&quot;, attr:&#123;&#125;, children:[&#123; type:&quot;text&quot;, text:&quot;hellp&quot; &#125;] &#125;] ] &#125;&#125;) button æŒ‰é’® open-type:contactï¼šæ‰“å¼€å®¢æœï¼Œåœ¨å°ç¨‹åºå®˜ç½‘ï¼ŒåŠŸèƒ½-å®¢æœã€‚æ·»åŠ ï¼›shareï¼šåˆ†äº«å°ç¨‹åºï¼Œä¸èƒ½åˆ†äº«æœ‹å‹åœˆï¼›getPhonNumberï¼šè·å–ç”¨æˆ·æ‰‹æœºå·ç ï¼Œéœ€è¦ç»“åˆäº‹ä»¶ä½¿ç”¨ï¼Œåªæœ‰ä¼ä¸šå°ç¨‹åºæœ‰æƒé™ä½¿ç”¨ï¼Œç»‘å®šäº‹ä»¶bindgetphonenumberï¼Œè·å–å›è°ƒå‡½æ•°ï¼›getUserInofï¼šè·å–ç”¨æˆ·ä¿¡æ¯ï¼Œéœ€ç»‘å®šäº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ï¼›openSettingï¼šç”¨æˆ·æŸ¥çœ‹æ›´æ”¹å°ç¨‹åºèƒ½è·å¾—çš„æƒé™ icon å›¾æ ‡ typeï¼šå›¾æ ‡ç±»å‹ï¼Œsucessã€warningç­‰å‚æ•° sizeï¼šå¤§å° colorï¼šé¢œè‰² radio å•é€‰æ¡† å¿…é¡»å’Œçˆ¶å…ƒç´ radio-groupä¸€èµ·ä½¿ç”¨ valueé€‰ä¸­çš„å•é€‰æ¡†å€¼ 12345&lt;radio-group bindchange=&quot;handelchange&quot;&gt; &lt;radio value=&quot;male&quot;&gt;ç”·&lt;/radio&gt; &lt;radio value=&quot;female&quot;&gt;å¥³&lt;/radio&gt;&lt;/radio-group&gt;&lt;view&gt;ä½ é€‰ä¸­çš„å€¼æ˜¯ï¼š&#123;&#123;gender&#125;&#125;&lt;/view&gt; 12345678910Page(&#123; data:&#123; gender:&quot;&quot; &#125;, handleChange(e)&#123; let gender=e.detail.value; this.setData(&#123;gender&#125;) &#125; &#125;) checkbox å¤é€‰æ¡† éœ€å’Œcheckbox-groupä¸€èµ·ä½¿ç”¨ 10ï¼šè‡ªå®šä¹‰ç»„ä»¶ slotæ ‡ç­¾ï¼Œå ä½æ ‡ç­¾ï¼Œå†…å®¹ä¼ é€’è¿‡æ¥æ—¶ï¼Œæ›¿ä»£ è‡ªå®šä¹‰ç»„ä»¶ä¸­ï¼š 12345&lt;tabs&gt; &lt;slot&gt; &lt;/slot&gt;&lt;/tabs&gt; çˆ¶ç»„ä»¶ä¸­ï¼š 123&lt;tabs&gt; ä½ å¥½å•Š&lt;/tabs&gt;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://sci.ci/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"}]},{"title":"å¾®ä¿¡å…¬ä¼—å·å¼€å‘","slug":"å¾®ä¿¡å…¬ä¼—å·å¼€å‘","date":"2020-04-01T13:01:15.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/04/01/å¾®ä¿¡å…¬ä¼—å·å¼€å‘/","link":"","permalink":"https://sci.ci/2020/04/01/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91/","excerpt":"","text":"1ï¼šå¾®ä¿¡å…¬ä¼—å·ç®€ä»‹ç»™ä¸ªäººã€ä¼ä¸šå’Œç»„ç»‡æä¾›æœåŠ¡å’Œç”¨æˆ·ç®¡ç†çš„å…¨æ–°æœåŠ¡å¹³å°ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å¾®ä¿¡å…¬ä¼—å·","slug":"å¾®ä¿¡å…¬ä¼—å·","permalink":"https://sci.ci/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"}]},{"title":"Bootstrapå­¦ä¹ ç¬”è®°","slug":"Bootstrapå­¦ä¹ ç¬”è®°","date":"2020-03-01T08:34:13.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/03/01/Bootstrapå­¦ä¹ ç¬”è®°/","link":"","permalink":"https://sci.ci/2020/03/01/Bootstrap%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"0ï¼šå…¥é—¨ä¾‹å­12345678910111213141516&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh-CN&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt; &lt;title&gt;Bootstrap&lt;/title&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;css/bootstrap.min.css&quot;&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;container&quot;&gt; &lt;h1&gt;ç½‘ç«™å¤©ä¸‹&lt;/h1&gt; &lt;p&gt;hello-world&lt;/p&gt; &lt;/div&gt;&lt;/body&gt;&lt;/html&gt; lang=&quot;zh-CN&quot;ä¿®æ”¹ç½‘ç«™æ–‡å­—ä¸ºä¸­æ–‡æ–‡å­—ã€‚ &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;&gt;è®¾ç½®ç½‘ç«™ä¸ºè‡ªé€‚åº”å±å¹•å°ºå¯¸ç½‘ç«™ï¼Œç¼©æ”¾æ¯”ä¾‹ä¸ºä¸ç¼©æ”¾ã€‚ &lt;link rel=&quot;stylesheet&quot; href=&quot;css/bootstrap.min.css&quot;&gt;å¯¼å…¥æœ¬åœ°bootstrap.cssæ ·å¼ã€‚ 1ï¼šå®¹å™¨.container+tab=&lt;div class=&quot;container&quot;&gt;&lt;/div&gt;å›ºå®šå®½åº¦å±…ä¸­æ˜¾ç¤º .container-fluidå…¨å®½å®¹å™¨ å˜åŒ–å®¹å™¨ä¸­ä¸€è¡Œä¸€å…±åŒ…å«12ä¸ªæ ¼å­ã€‚å»ºç«‹ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸‰ä¸ªå°æ ¼ï¼ˆcol-xl-3ï¼‰ä¸ºä¸€å¤§æ ¼ï¼Œéœ€è¦ä¸€å…±4ä¸ªå¤§æ ¼å¯å°†å…¶å¡«æ»¡ã€‚ 12345678&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;row&quot;&gt; &lt;div class=&quot;col-xl-3&quot; style=&quot;background-color: #0c5460&quot;&gt;111&lt;/div&gt; &lt;div class=&quot;col-xl-3&quot; style=&quot;background-color: #005cbf&quot;&gt;222&lt;/div&gt; &lt;div class=&quot;col-xl-3&quot; style=&quot;background-color: #1e7e34&quot;&gt;333&lt;/div&gt; &lt;div class=&quot;col-xl-3&quot; style=&quot;background-color: #6c757d&quot;&gt;444&lt;/div&gt; &lt;/div&gt;&lt;/div&gt; æ …æ ¼ç­‰çº§ï¼šcolç‰¹å°ã€col-sm-*å°ã€col=md-*ä¸­ã€col-lg-*å¤§ã€col-xl-*è¶…å®½ã€‚ å„å°ºå¯¸è¡¨ç¤ºåœ¨ä¸åŒå°ºå¯¸å±å¹•ä¸Šçš„æ˜¾ç¤ºæ–¹å¼ï¼Œæ¯”å¦‚ä½¿ç”¨ï¼Œcol-xlåˆ™åœ¨å±å¹•å®½åº¦å˜ä¸º1000åƒç´ å·¦å³æ—¶ï¼ŒåŸæ¥çš„æ …æ ¼å°±æ¢è¡Œæ˜¾ç¤ºï¼Œæ¯ä¸ªæ …æ ¼å æ®ä¸€è¡Œã€‚ è‹¥ç›´æ¥ä½¿ç”¨colæ¥ä¿®é¥°ï¼Œé‚£ä¹ˆï¼Œå³ä¾¿åœ¨å¾ˆå°çš„å±å¹•ä¸Šï¼Œæ …æ ¼ä¹Ÿä¸ä¼šæ¢è¡Œã€‚ç›¸å½“äºç½‘é¡µç›´æ¥ç¼©æ”¾ã€‚ä¸æ¨èä½¿ç”¨ã€‚ æ …æ ¼åçš„æ•°å­—éå¿…é¡»ã€‚ä¸æ·»åŠ æ•°å­—åˆ™é‡‡ç”¨flexboxå¸ƒå±€ è®¾ç½®ä¸€åˆ—å®½åº¦ col-6å 6/12 col-autoå¯å˜å®½åº¦ï¼Œéšå†…å®¹å˜åŒ–ï¼Œå˜åŒ–çš„å•ä½ä¸º1å°æ ¼ æ··åˆå¸ƒå±€ col-sm-6 col-lg-3å¤§å±æ—¶æ¯è¡Œå››ä¸ªï¼Œä¸­å±æ¯è¡Œ2ä¸ªï¼Œå°å±æ¯è¡Œä¸€ä¸ªã€‚ å¯¹é½ å‚ç›´å¯¹é½align-items-centerã€align-items-xl-end æ°´å¹³å¯¹é½justify-content-start/center/end/around/between æ¶ˆé™¤å†…è¾¹è· &lt;div class=&quot;row no-gutters&quot;&gt; æ’åº order-**å€¼è¶Šå°æ’åºè¶Šå‰ã€‚é»˜è®¤ä¸º0 åç§» offset-*åç§»*ä¸ªæ ¼å­ï¼Œä¹Ÿå¯åŠ æ–­ç‚¹ marginç§»åŠ¨ mr-auto``ml-auto 2ï¼šæ’ç‰ˆ12345678910111213141516171819202122232425262728293031323334&lt;h1&gt; ä¸»æ ‡é¢˜&lt;small&gt; å°å·å­—ä½“&lt;/small&gt;&lt;/h1&gt;&lt;div class=&quot;display-1&quot;&gt;æ¯”æ ‡é¢˜å­—ä½“å¤§&lt;/div&gt;&lt;div class=&quot;leader&quot;&gt;å˜å¤§å¼ºè°ƒ&lt;/div&gt;&lt;p&gt;&lt;mark&gt;é«˜äº®&lt;/mark&gt;&lt;/p&gt;&lt;p&gt;æ™®é€š&lt;span class=&quot;mark&quot;&gt;é«˜äº®&lt;/span&gt;æ–‡æœ¬&lt;/p&gt;&lt;p&gt;&lt;del&gt;åˆ é™¤çº¿&lt;/del&gt;&lt;/p&gt;&lt;p&gt;&lt;s&gt;åˆ é™¤çº¿&lt;/s&gt;&lt;/p&gt;&lt;p&gt;&lt;ins&gt;ä¸‹åˆ’çº¿&lt;/ins&gt;&lt;/p&gt;&lt;p&gt;&lt;u&gt;ä¸‹åˆ’çº¿&lt;/u&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;ç²—ä½“&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;ç²—ä½“&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;æ–œä½“&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;i&gt;æ–œä½“&lt;/i&gt;&lt;/p&gt;&lt;p&gt;&lt;abbr title=&quot;è¯·è¾“å…¥ä½ çš„é‚®ç®±&quot; class=&quot;initialism&quot;&gt;email&lt;/abbr&gt;&lt;/p&gt;&lt;blockquote class=&quot;blockquote&quot;&gt; å¼•ç”¨åœ¨æ­¤&lt;/blockquote&gt;&lt;code&gt;ä»£ç å—&lt;/code&gt;&lt;var&gt;å˜é‡æ–œä½“&lt;/var&gt;&lt;kbd&gt;ç”¨æˆ·è¾“å…¥ï¼Œé»‘è‰²èƒŒæ™¯ç™½è‰²å­—ä½“&lt;/kbd&gt; 3ï¼šå›¾ç‰‡å’Œå›¾ç‰‡æ¡†1234567891011121314&lt;img src=&quot;../img/lg.img&quot; alt=&quot;&quot; class=&quot;img-fluid img-thumbnail w-100&quot;&gt;&lt;div&gt; &lt;img src=&quot;&quot; class=&quot;rounded float-left&quot;&gt;//åœ†è§’ &lt;img src=&quot;&quot; class=&quot;rounded float-right&quot;&gt; &lt;img src=&quot;&quot; class=&quot;rounded d-block mx-auto&quot;&gt;//è½¬ä¸ºå—çº§å…ƒç´ ï¼Œç„¶åå±…ä¸­å¯¹é½&lt;/div&gt;&lt;picture&gt; &lt;source srcset=&quot;../images/lg.jpg&quot; media=&quot;(min-width:992px)&quot;&gt; &lt;source srcset=&quot;../images/md.jpg&quot; media=&quot;(min-width:576px)&quot;&gt; &lt;img src=&quot;../images/sm.jpg&quot; alt=&quot;&quot;&gt;&lt;/picture&gt;&lt;!--è®¾ç½®ä¸åŒå±å¹•æ˜¾ç¤ºä¸åŒå°ºå¯¸å›¾ç‰‡--&gt; 4ï¼šè¡¨æ ¼12345678910111213141516171819202122&lt;body&gt; &lt;div class=&quot;container&quot;&gt;&lt;br&gt; &lt;div class=&quot;table-responsive&quot;&gt; &lt;table class=&quot;table&quot;&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;HeadingHeadingHeading&lt;/th&gt; &lt;th&gt;HeadingHeadingHeading&lt;/th&gt; &lt;th&gt;HeadingHeadingHeading&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;CellCellCell&lt;/td&gt; &lt;td&gt;CellCellCell&lt;/td&gt; &lt;td&gt;CellCellCell&lt;/td&gt; &lt;/tr&gt; &lt;/tbody&gt; &lt;/table&gt; &lt;/div&gt; &lt;/div&gt;&lt;/body&gt; æ¡çº¹çŠ¶è¡¨æ ¼ï¼šä½¿ç”¨.table-stripedæ ·å¼å®šä¹‰&lt;tbody&gt;å¯ä»¥äº§ç”Ÿé€è¡Œäº¤æ›¿å˜åŒ–çš„èƒŒæ™¯è‰²ã€‚åŒ.table-darkç»“åˆä½¿ç”¨æ”¹å˜å˜åŒ–èƒŒæ™¯è‰²ä¸ºé»‘å¤œä¸»é¢˜ã€‚ è¡¨æ ¼è¾¹æ¡†ï¼šä½¿ç”¨ã€‚table-borderedäº§ç”Ÿè¡¨æ ¼è¾¹æ¡†ä¸é—´éš™ã€‚table-borderlessæ— è¾¹ç•Œè¡¨æ ¼ã€‚ æ‚¬åœæ•ˆæœï¼štable-hoveræ‚¬åœæ—¶ï¼ŒèƒŒæ™¯é«˜äº®ã€‚ ç¼©ç´§è¡¨æ ¼ï¼štableâ€”små¯ä»¥å°†è¡¨æ ¼paddingå€¼ç¼©å‡ä¸ºåŸæ¥çš„ä¸€èˆ¬ã€‚ Captionè¡¨æ ¼è¾…åŠ©æ ‡é¢˜ï¼š&lt;caption&gt;é»˜è®¤æ˜¯éšè—çš„ï¼ŒååŠ©å±å¹•é˜…è¯»ç”¨æˆ·æ‰¾åˆ°è¡¨æ ¼ï¼Œäº†è§£è¡¨æ ¼å†…å®¹ï¼Œå¹¶å†³å®šæ˜¯å¦é˜…è¯»å®ƒã€‚ å­—ä½“å’ŒèƒŒæ™¯è‰²ï¼štable-darkã€table-primaryã€table-secondaryã€table-warnungã€table-successã€table-dangerã€table-infoä¸ºæµ…è‰²å­—ä½“è‰²ï¼Œå°†tableæ›¿æ¢ä¸ºbgåˆ™æ”¹ä¸ºèƒŒæ™¯è‰²ã€‚èƒ½åŠ åœ¨træˆ–tdä¸Šã€‚ å“åº”å¼æ»šåŠ¨æ¡ï¼šåœ¨tableä¸Šå±‚æ·»åŠ &lt;div class=&quot;table-responsive&quot;&gt; 5ï¼šè¾¹æ¡†123&lt;span class=&quot;border-top border-secondary rounded-top&quot;&gt;&lt;/span&gt;&lt;span class=&quot;rounded-circle&quot;&gt;åœ†å½¢æˆ–æ¤­åœ†è¾¹æ¡†&lt;/span&gt;&lt;span class=&quot;rounded-pill&quot;&gt;åœ†å½¢æˆ–èƒ¶å›Šå‹&lt;/span&gt; border-top-0æ¸…é™¤è¾¹æ¡†ã€‚ 6ï¼šé¢œè‰²â€”Displayæ˜¾ç¤ºå±æ€§12&lt;div class=&quot;d-inline&quot;&gt;&lt;/div&gt;&lt;div class=&quot;d-xl-none&quot;&gt;æ–­ç‚¹ï¼Œå½“å±å¹•è¿‡å¤§æ—¶ä¸æ˜¾ç¤º&lt;/div&gt;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Bootstrap","slug":"Bootstrap","permalink":"https://sci.ci/tags/Bootstrap/"}]},{"title":"Linuxæ“ä½œç³»ç»Ÿ","slug":"Linuxæ“ä½œç³»ç»Ÿå­¦ä¹ ç¬”è®°","date":"2020-02-20T09:40:28.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/02/20/Linuxæ“ä½œç³»ç»Ÿå­¦ä¹ ç¬”è®°/","link":"","permalink":"https://sci.ci/2020/02/20/Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/","excerpt":"","text":"1ï¼šLinuxç®€ä»‹å¼€æºè½¯ä»¶ï¼š ä½¿ç”¨è‡ªç”± ç ”ç©¶è‡ªç”± æ•£å¸ƒåŠæ”¹è‰¯çš„è‡ªç”± LAMPï¼šLinux+Apache+Mysql+PHP ç½‘ç»œé…ç½®ï¼š æ¡¥æ¥ï¼šåƒä¸€å°çœŸå®ç”µè„‘ä¸€æ ·ç›´æ¥è¿æ¥äº’è”ç½‘ NATï¼šç±»ä¼¼äºä½¿ç”¨çœŸå®ç”µè„‘çš„çƒ­ç‚¹ host onlyï¼šåªå…è®¸å’ŒçœŸå®æœºé€šè¡Œ ifconfig eth0 192.168.118.2//é…ç½®ç½‘å¡å’Œipï¼Œå¦‚æœé…ç½®ä¸ºæ¡¥æ¥ï¼Œéœ€è¦è®¾ç½®ä¸ºå±€åŸŸç½‘ç›¸åŒç½‘æ®µã€‚æ­¤è®¾ç½®é‡å¯åå¤±æ•ˆã€‚ æ³¨æ„äº‹é¡¹ï¼š Linuxä¸¥æ ¼åŒºåˆ†å¤§å°å†™ Linuxæ‰€æœ‰å†…å®¹ä»¥æ–‡ä»¶å½¢å¼ä¿å­˜ï¼ŒåŒ…æ‹¬ç¡¬ä»¶ã€‚ Linuxç›®å½•çš„ä½œç”¨ ç›®å½•å ç›®å½•çš„ä½œç”¨ /bin/ å­˜æ”¾ç³»ç»Ÿå‘½ä»¤çš„ç›®å½•ï¼Œæ™®é€šå’Œè¶…çº§ç”¨æˆ·éƒ½å¯ä»¥æ‰§è¡Œ /sbin/ ä¿å­˜å’Œç³»ç»Ÿç¯å¢ƒè®¾ç½®ç›¸å…³çš„æŒ‡ä»¤ï¼Œåªæœ‰è¶…çº§ç”¨æˆ·rootèƒ½ä½¿ç”¨ï¼Œä½†æ™®é€šç”¨æˆ·å¯ä»¥æŸ¥çœ‹ /usr/bin/ å•ç”¨æˆ·æ¨¡å¼ä¸‹ä¸èƒ½ä½¿ç”¨ï¼Œç±»ä¼¼äºwinçš„å®‰å…¨æ¨¡å¼ /usr/sbin/ è¶…çº§ç”¨æˆ·æ‰èƒ½ä½¿ç”¨ /boot/ ç³»ç»Ÿå¯åŠ¨ç›®å½•ï¼Œä¿å­˜ç³»ç»Ÿå¯åŠ¨ç›¸å…³æ–‡ä»¶ï¼Œå¦‚å†…æ ¸æ–‡ä»¶å’Œå¯åŠ¨å¼•å¯¼ç¨‹åº /dev/ è®¾å¤‡æ–‡ä»¶ä¿å­˜ä½ç½®ï¼Œ /etc/ é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¿å­˜åœ¨è¿™ /home/ æ™®é€šç”¨æˆ·çš„å®¶ç›®å½• /lib/ ç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°åº“ /lost+found/ å½“ç³»ç»Ÿæ„å¤–å´©æºƒæˆ–å…³æœºï¼Œäº§ç”Ÿä¸€äº›æ–‡ä»¶ç¢ç‰‡æ”¾åœ¨è¿™é‡Œã€‚ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œfsckå·¥å…·ä¼šæ£€æµ‹è¿™é‡Œã€‚æ¯ä¸ªåˆ†åŒºä¸‹éƒ½æœ‰è‡ªå·±çš„æ­¤æ–‡ä»¶ /media/ æŒ‚è½½ç›®å½•ï¼Œåª’ä½“è®¾å¤‡ /mnt/ æŒ‚åœ¨å¦‚ä¼˜ç›˜ã€ç§»åŠ¨ç¡¬ç›˜ /misc/ æŒ‚åœ¨NFSæœåŠ¡çš„å…±äº«ç›®å½• /opt/ ç¬¬ä¸‰æ–¹å®‰è£…çš„è½¯ä»¶ä¿å­˜ä½ç½®ã€‚ç°åœ¨çš„ä¹ æƒ¯æ˜¯ï¼Œæ”¾åœ¨/usr/local/ï¼Œç±»ä¼¼äºwinä¸­çš„Program Filesæ–‡ä»¶å¤¹ã€‚ /proc/ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚å­˜æ”¾åœ¨å†…å­˜ä¸­ï¼Œä¿å­˜ç³»ç»Ÿçš„å†…æ ¸ã€ä»Šåæ›¾ã€å¤–éƒ¨è®¾å¤‡çŠ¶æ€ã€ç½‘ç»œçŠ¶æ€ã€‚ä¸è¦å†è¿™é‡Œé¢å†™ä¸œè¥¿ /sys/ è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿã€‚å†…å­˜ä¸­ï¼Œä¿å­˜å†…æ ¸ç›¸å…³ /root/ è¶…çº§ç”¨æˆ·çš„å®¶ç›®å½•ã€‚æ™®é€šç”¨æˆ·åœ¨/home/ /srv/ æœåŠ¡æ•°æ®ç›®å½•ã€‚ /tmp/ ä¸´æ—¶ç›®å½•ã€‚å¯ä»¥æ¸…ç©º /usr/ ç³»ç»Ÿè½¯ä»¶èµ„æºç›®å½•ã€‚unix software resource /var/ åŠ¨æ€æ•°æ®ä¿å­˜ç›®å½•ã€‚ä¿å­˜ç¼“å­˜ã€æ—¥å¿—ä»¥åŠè½¯ä»¶è¿è¡Œäº§ç”Ÿçš„æ–‡ä»¶ã€‚ 2ï¼šLinuxå¸¸ç”¨å‘½ä»¤å‘½ä»¤æ ¼å¼ å‘½ä»¤ [-é€‰é¡¹] [å‚æ•°] ä¾‹ï¼š ls -la /etc è¯´æ˜ï¼š ä¸ªåˆ«å‘½ä»¤ä¸éµå®ˆæ­¤æ ¼å¼ å½“æœ‰å¤šä¸ªé€‰é¡¹æ—¶ï¼Œå¯ä»¥å†™åœ¨ä¸€èµ· ç®€å†™é€‰é¡¹ä¸å®Œæ•´é€‰é¡¹ -a ç­‰äº â€“all 2.1 ç›®å½•å¤„ç†å‘½ä»¤2.1.1 å±•ç¤ºå­ç›®å½•ï¼šlså‘½ä»¤åç§°ï¼šls å‘½ä»¤åŸæ„ï¼šlist 1234567ls #æ˜¾ç¤ºå½“å‰ç›®å½•çš„ééšè—æ–‡ä»¶ls -a #allï¼Œæ˜¾ç¤ºéšè—æ–‡ä»¶å’Œééšè—æ–‡ä»¶ï¼Œéšè—æ–‡ä»¶æ–‡ä»¶åæ ¼å¼ï¼š.abcls / #æŸ¥çœ‹æ ¹ç›®å½•ï¼Œ/+æ–‡ä»¶è·¯å¾„å¯ä»¥æŸ¥çœ‹ä»»æ„ä½ç½®ls -l #longï¼Œé•¿æ ¼å¼æ˜¾ç¤ºï¼Œæ˜¾ç¤ºæ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯ls -h #human,æ¯”å¦‚å°†æ–‡ä»¶å¤§å°å•ä½åˆ—å‡ºæ¥ï¼Œäººæ€§åŒ–æ˜¾ç¤ºls -d #directï¼Œåªæ˜¾ç¤ºç›®å½•æœ¬èº«ls -i #inodeï¼Œå±•ç¤ºièŠ‚ç‚¹ï¼Œæ–‡ä»¶çš„å”¯ä¸€èº«ä»½æ ‡è¯† ls -lçš„ç»“æœï¼š 123total 31056-rwxr-xr-x 1 root root 3612 Jun 23 19:17 Aria2Drive.shæƒé™ å¼•ç”¨æ¬¡æ•° æ–‡ä»¶æ‰€æœ‰è€… æ–‡ä»¶æ‰€å±ç»„ æ–‡ä»¶å¤§å°(å•ä½å­—èŠ‚) æ–‡ä»¶æœ€è¿‘ä¿®æ”¹æ—¶é—´ æ–‡ä»¶å æƒé™ï¼š-rw-râ€“râ€“ æƒé™ç¬¬ä¸€ä¸ªå‚æ•°ï¼š - d l æ–‡ä»¶ æ–‡ä»¶å¤¹ è½¯è¿æ¥ å‰©ä½™ä¹ä¸ªå‚æ•°ï¼š rw- râ€“ râ€“ uæ‰€æœ‰è€…æƒé™ gæ‰€å±ç»„æƒé™ oå…¶ä»–äºº rè¯» wå†™ xæ‰§è¡Œ 2.1.2 æ–°å»ºç›®å½•ï¼šmkdirå‘½ä»¤åç§°ï¼šmkdir å‘½ä»¤åŸæ„ï¼šåˆ›å»ºæ–‡ä»¶ç›®å½• 123mkdir /tmp/123mkdir -p /tmp/japan/123 #é€’å½’åˆ›å»ºç›®å½•ï¼Œjapanç›®å½•åŸæ¥ä¹Ÿæ²¡æœ‰mkdir -p /tmp/japan/123 /temp/japan/456 #åˆ›å»ºå¤šä¸ªç›®å½• 2.1.3 åˆ‡æ¢ç›®å½•ï¼šcd123cd /tmp/japan/123 #åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•cd . #è¡¨ç¤ºå½“å‰ç›®å½•cd .. #å›åˆ°ä¸Šçº§ç›®å½• 2.1.4 å±•ç¤ºå½“å‰å®Œæ•´è·¯å¾„ï¼špwd1pwd #æ˜¾ç¤ºå½“å‰ä½ç½®çš„å®Œæ•´è·¯å¾„ 2.1.5 åˆ é™¤ç©ºç›®å½•ï¼šrmdir1rmdir /tmp/japan/123 2.1.6 å¤åˆ¶ï¼šcp12345cp /etc/grab.conf /root #å¤åˆ¶æ–‡ä»¶cp -r /tmp/japan/123 /root #å¤åˆ¶ç›®å½•cp /tmp/japan/123.log /tmp/japan/456.log /tmp #å¤åˆ¶å¤šä¸ªæ–‡ä»¶cp -p /tmp/abc.log /tmp #ä¿å­˜æ–‡ä»¶çš„å±æ€§ä¸å˜ï¼Œæ¯”å¦‚æœ€è¿‘ä¿®æ”¹çš„æ—¶é—´ã€‚cp /tmp/japan/abc.log /tmp/gaiming.log #æ‹·è´å¹¶æ”¹å 2.1.7 ç§»åŠ¨ã€å‰ªåˆ‡ï¼šmv123mv /tmp/japan/123 /tmp #æŠŠ123ç§»åŠ¨åˆ°/tmpç›®å½•ä¸‹mv /tmp/japan/123 /tmp/us #ç§»åŠ¨å¹¶æ”¹åmv 123 456 #å½“å‰ç›®å½•ä¸‹ç§»åŠ¨å¹¶æ”¹åï¼Œåˆ™æ˜¯é‡å‘½å 2.1.8 åˆ é™¤ï¼šrm123rm grab.conf #åˆ é™¤æ–‡ä»¶rm -f grab.conf #å¼ºåˆ¶åˆ é™¤æ–‡ä»¶ï¼Œä¸ä¼šè¯¢é—®æ˜¯å¦ç¡®è®¤ã€‚rm -r /tmp/japan #åˆ é™¤ç›®å½• 2.2 æ–‡ä»¶å¤„ç†å‘½ä»¤2.2.1 æ–°å»ºæ–‡ä»¶ï¼štouch12touch japanlovestory.list #æ–°å»ºæ–‡ä»¶touch &quot;program files&quot; #åˆ›å»ºå¸¦ç©ºæ ¼æ–‡ä»¶ï¼Œä¸æ¨èå¸¦ç©ºæ ¼æ–‡ä»¶å 2.2.2 æµè§ˆçŸ­æ–‡ä»¶ï¼šcat12cat /etc/issue #æ˜¾ç¤ºå†…å®¹cat -n /etc/issue #æ˜¾ç¤ºè¡Œå· 2.2.3 æŒ‰è¡Œåå‘æ˜¾ç¤ºæµè§ˆï¼štac2.2.4 åˆ†é¡µæµè§ˆé•¿æ–‡ä»¶ï¼šmore1more /etc/services #ç©ºæ ¼æˆ–få‘ä¸‹ç¿»é¡µï¼ŒæŒ‰è¡Œå‘ä¸‹ç¿»ï¼ŒæŒ‰qé€€å‡ºï¼Œå¸®åŠ©ä¿¡æ¯éƒ½æ˜¯è°ƒç”¨moreå‘½ä»¤ã€‚ ä¸èƒ½å¾€ä¸Šç¿»ã€‚ 2.2.5 å¯å‘ä¸Šåˆ†é¡µæµè§ˆï¼šless123less /etc/services #å‘ä¸‹ç¿»é¡µå’Œmoreç›¸åŒï¼ŒæŒ‰pgupå‘ä¸Šç¿»é¡µï¼Œä¸Šç®­å¤´å‘ä¸Šä¸€è¡Œã€‚#æœç´¢åŠŸèƒ½ï¼Œæµè§ˆçŠ¶æ€ï¼Œè¾“å…¥â€œ/serviceâ€ï¼ŒæŒ‰â€œnâ€å‘ä¸‹æ‰¾æœç´¢ç»“æœã€‚ 2.2.6 æµè§ˆæ–‡ä»¶å‰å‡ è¡Œï¼šhead12head /etc/services #é»˜è®¤æ˜¾ç¤ºå‰åè¡Œhead -n 7 /etc/services #æ˜¾ç¤ºå‰ä¸ƒè¡Œ 2.2.7 æµè§ˆæ–‡ä»¶æœ«å°¾å‡ è¡Œï¼štail123tail /etc/services #æ˜¾ç¤ºæœ«å°¾å‡ è¡Œtail -n 7 /etc/services #æ˜¾ç¤ºæŒ‡å®šè¡Œtail -f /var/log/messages #åŠ¨æ€æ˜¾ç¤ºæ–‡ä»¶æœ«å°¾å‡ è¡Œ 2.3 é“¾æ¥å‘½ä»¤ç”Ÿæˆé“¾æ¥æ–‡ä»¶ï¼šln 12ln -s /etc/issue /tmp/issue.soft #åˆ›å»ºæ–‡ä»¶çš„è½¯è¿æ¥ln /etc/issue /tmp/issue.hard #åˆ›å»ºæ–‡ä»¶çš„ç¡¬é“¾æ¥ è½¯è¿æ¥ï¼šç±»ä¼¼windowsçš„å¿«æ·æ–¹å¼ ç¡¬é“¾æ¥ï¼šç¡¬é“¾æ¥å’Œæºæ–‡ä»¶å±æ€§ç›¸åŒï¼Œä¸”åŒæ­¥æ›´æ–°ï¼Œå¯ä»¥å‘ç¡¬é“¾æ¥ä¸­å†™å…¥å†…å®¹ï¼Œåˆ é™¤æºæ–‡ä»¶åï¼Œç¡¬é“¾æ¥ä»»ç„¶å­˜åœ¨ã€‚ç¡¬é“¾æ¥çš„ièŠ‚ç‚¹ä¸æºæ–‡ä»¶ç›¸åŒã€‚ ç¡¬é“¾æ¥ä¸èƒ½è·¨åˆ†åŒºï¼Œç”Ÿæˆå¯¹è±¡ä¸èƒ½æ˜¯ç›®å½• 2.4 æƒé™ç®¡ç†å‘½ä»¤2.4.1 æ–‡ä»¶æƒé™å˜æ›´ï¼šchmodå‘½ä»¤åç§°ï¼šchmodï¼ˆchange the permissions mode of a fileï¼‰ è¯­æ³•ï¼š chmod [{ugoa}]{+-=}[æ–‡ä»¶æˆ–ç›®å½•] â€‹ [mode=421][æ–‡ä»¶æˆ–ç›®å½•] â€‹ -R é€’å½’ä¿®æ”¹ æƒé™åªæœ‰ç®¡ç†å‘˜rootå’Œæ‰€æœ‰è€…å¯ä»¥ä¿®æ”¹ã€‚ 12chmod g+w,o-r japan.list #æ‰€å±ç»„åŠ è¯»æƒé™ï¼Œå…¶ä»–äººå‡å°‘è¯»æƒé™chmod g=rwx japn.list æ•°å­—è¡¨è¿°æ³•ï¼š r w x 4 2 1 rwxrw-râ€“å¯¹åº”æƒé™ï¼š(4+2+1)(4+2)(4)=764 1chmod -R 777 /tmp/abc #ä¿®æ”¹/tmp/abcåŠå…¶ä¸‹é¢çš„çš„æ‰€æœ‰æ–‡ä»¶çš„æƒé™ä¸º777 rootç”¨æˆ·åˆ›å»ºçš„644æƒé™æ–‡ä»¶ï¼Œå…¶ä»–ç”¨æˆ·èƒ½å¦åˆ é™¤ï¼Ÿ ç­”æ¡ˆå–å†³äºç”¨æˆ·æ˜¯å¦å…·æœ‰æ–‡ä»¶æ‰€å±çš„ç›®å½•çš„å†™æƒé™ã€‚ æ¯”å¦‚ï¼šä¸€ä¸ªç›®å½•/tempæƒé™ä¸º777 æ–‡ä»¶/temp/testfileçš„æƒé™ä¸º644ã€‚ é‚£ä¹ˆæ™®é€šç”¨æˆ·ä»»ç„¶å¯ä»¥åˆ é™¤/temp/testfileï¼Œå› ä¸ºæ‰€æœ‰äººéƒ½æœ‰/tmpç›®å½•çš„å†™æƒé™ï¼Œæ‰€ä»¥å¯ä»¥å†/tempç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ã€ç›®å½•ã€åˆ é™¤ç›®å½•å’Œåˆ é™¤æ–‡ä»¶ã€‚ rè¯»æƒé™ wå†™æƒé™ xæ‰§è¡Œæƒé™ file cat/more/less/head/tail vim script command directory ls touch/mkdir/rmdir/rm cd 2.4.2 æ–‡ä»¶æ‰€æœ‰è€…å˜æ›´ï¼šchownè¯­æ³•ï¼š chown [ç”¨æˆ·] [æ–‡ä»¶æˆ–ç›®å½•] 12useradd shenchao #æ·»åŠ ä¸€ä¸ªç”¨æˆ·chown shenchao /tmp/japan #æ”¹å˜æ‰€æœ‰è€… 2.4.3 æ–‡ä»¶æ‰€å±ç»„å˜æ›´ï¼šchgrp12groupadd lampbrother #æ–°å»ºç»„chgrp lampbrother /tmp/japan #æ›´æ”¹æ‰€å±ç»„ 2.4.4 æ˜¾ç¤ºæ–°å»ºæ–‡ä»¶çš„ç¼ºçœæƒé™ï¼šumask123umask -S #æ˜¾ç¤ºæ–°å»ºç›®å½•ç¼ºçœæƒé™umask #æ˜¾ç¤ºæ–°å»ºç›®å½•ç¼ºçœæƒé™çš„ä¸å€¼umask 077 #ä¿®æ”¹æ–°å»ºæ–‡ä»¶çš„ç¼ºçœæƒé™ä¸º700.åŸç†ä¸ºï¼Œ777ä¸077å¾—700 0022 0ï¼šç‰¹æ®Šæƒé™ 022ï¼šâ€” -w- -w- åˆ™ç›®å½•çš„æƒé™ä¸ºï¼š777å’Œ022é€»è¾‘ä¸çš„ç»“æœï¼Œç­‰äº755 2.5 æ–‡ä»¶æœç´¢å‘½ä»¤2.5.1 æ–‡ä»¶æœç´¢å‘½ä»¤ï¼šfindè¯­æ³•ï¼šfind [æœç´¢èŒƒå›´] [åŒ¹é…æ¡ä»¶] 1234find /etc -name init #åœ¨/etcç›®å½•ä¸‹æœç´¢åä¸ºinitçš„æ–‡ä»¶ï¼Œinitabä¸èƒ½è¢«æœç´¢åˆ°ã€‚find /etc -name *init* #åå­—åŒ…å«initå°±ä¼šè¢«æœç´¢ï¼Œ*ä½œä¸ºé€šé…ç¬¦find /etc -name int??? #?find /etc -iname init??? #æœç´¢åå­—ä¸åŒºåˆ†å¤§å°å†™ã€‚ 1find / -size +204800 #æŸ¥æ‰¾å¤§äº100MBæ–‡ä»¶ï¼ŒæŒ‰æ•°æ®å—ç®—ï¼Œä¸€ä¸ªæ•°æ®å—=0.5Kã€‚204800ä¸ªæ•°æ®å—=100MB 1find / -user shenchao #æ ¹æ®æ‰€æœ‰è€…æŸ¥æ‰¾ 123find /etc -cmin -5 #æ ¹æ®æ–‡ä»¶å±æ€§5åˆ†é’Ÿå†…è¢«æ”¹çš„æ–‡ä»¶æŸ¥æ‰¾ changefind /etc -amin -5 #æ ¹æ®è®¿é—®æ—¶é—´ accessfind /etc -mmin -5 #æ ¹æ®æ–‡ä»¶å†…å®¹è¢«æ”¹å˜ modify 12find /etc -size +163840 -a -size -204800 #æŸ¥æ‰¾å¤§äº80MBå¹¶ä¸”å°äº100MBçš„æ–‡ä»¶find /etc -size +163840 -o -size -204800 #æŸ¥æ‰¾å¤§äº80MBæˆ–è€…å°äº100MBçš„æ–‡ä»¶ 1find /etc -name init* -a -type f #æŸ¥æ‰¾ç±»å‹ä¸ºæ–‡ä»¶çš„init*å¯¹è±¡ -exec/-ok å¯¹æœç´¢ç»“æœè¿›è¡Œå¤„ç†ã€‚-okæ¯”-execå¤šäº†è¯¢é—®æ˜¯å¦æ“ä½œè¿‡ç¨‹ 1find /etc -name inittab -exec ls -l &#123;&#125; \\; #-exec å‘½ä»¤ &#123;&#125; \\;ä¸ºå›ºå®šæ ¼å¼ 12find /etc -inum 3442 #æ ¹æ®ièŠ‚ç‚¹æŸ¥æ‰¾æ–‡ä»¶find /etc -inum 3442 -exec rm &#123;&#125; \\; #åˆ é™¤ièŠ‚ç‚¹ä¸º3442çš„æ–‡ä»¶ã€‚å¯ç”¨äºåå­—å¥‡æ€ªçš„æ–‡ä»¶ 2.5.2 å…¶ä»–æ–‡ä»¶æœç´¢å‘½ä»¤ï¼šlocateåœ¨æ–‡ä»¶èµ„æ–™åº“ä¸­æŸ¥æ‰¾æ–‡ä»¶ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚ä½†æ˜¯ä¸èƒ½åŠæ—¶æ›´æ–°ã€‚ 12locate inittab #æŸ¥æ‰¾inittabçš„ä½ç½®locate -i inittab #æŸ¥æ‰¾æ—¶ä¸åŒºåˆ†å¤§å°å†™ æ›´æ–°èµ„æ–™åº“ 1updatedb locateæ— æ³•æ”¶å½•/tmpç›®å½•ä¸‹çš„æ–‡ä»¶ 2.5.3 å‘½ä»¤æ–‡ä»¶æœç´¢å‘½ä»¤ï¼šwhichå¯¹å‘½ä»¤ä½¿ç”¨ 1which cp #æŸ¥æ‰¾å‘½ä»¤ç»å¯¹è·¯å¾„çš„ä½ç½®ï¼Œå¹¶ä¸”å¾—åˆ°å‘½ä»¤æ˜¯å¦æœ‰åˆ«å‘½ 2.5.4 å‘½ä»¤æ–‡ä»¶æœç´¢å‘½ä»¤ï¼šwhereis1whereis rm #æ‰¾åˆ°å‘½ä»¤ç»å¯¹è·¯å¾„ï¼Œå’Œå‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£æ‰€åœ¨ä½ç½® 2.5.5 æ–‡ä»¶å†…å®¹æœç´¢å‘½ä»¤ï¼šgrep å‚æ•° ä½œç”¨ -i ä¸åŒºåˆ†å¤§å°å†™ -v æ’é™¤æŒ‡å®šå­—ä¸² 12grep multiuser /etc/inittab #æŸ¥æ‰¾æ–‡ä»¶ä¸­multiuseræ‰€åœ¨çš„è¡Œã€‚grep -v ^# /etc/inittab #æ’é™¤æŒ‡å®šå­—ä¸²æ‰€åœ¨çš„è¡Œï¼Œå³ä»¥#å¼€å¤´çš„è¡Œï¼Œä¸å¸Œæ˜¾ç¤ºã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/tags/Linux/"}]},{"title":"Kali Linuxçš„å­¦ä¹ å’Œä½¿ç”¨","slug":"Kali-Linuxçš„å­¦ä¹ å’Œä½¿ç”¨","date":"2020-02-19T04:05:29.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/02/19/Kali-Linuxçš„å­¦ä¹ å’Œä½¿ç”¨/","link":"","permalink":"https://sci.ci/2020/02/19/Kali-Linux%E7%9A%84%E5%AD%A6%E4%B9%A0%E5%92%8C%E4%BD%BF%E7%94%A8/","excerpt":"","text":"0ï¼šKaliç®€ä»‹Kaliä½œä¸ºæœ€å¸¸ç”¨çš„ç½‘ç»œæ¸—é€ç³»ç»Ÿï¼Œå†…ç½®äº†ç½‘ç»œå®‰å…¨äººå‘˜å’Œé»‘å®¢æœ€å¸¸ç”¨çš„å„ç±»å·¥å…·ã€‚ 1ï¼šKaliå®‰è£…å®‰è£…é€”å¾„ï¼š åœ¨VMWareè™šæ‹Ÿæœºä¸Šå®‰è£…Kaliï¼ŒKali Linux ç³»ç»Ÿå®‰è£…è¯¦ç»†æ•™ç¨‹ åœ¨Vulträ¸Šä¸Šä¼ è‡ªå®šä¹‰çš„IOSã€‚å°†Kaliéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šã€‚ å¸¸è§é—®é¢˜ï¼š åˆ‡æ¢å›¾å½¢ç•Œé¢å’Œå‘½ä»¤ç•Œé¢ï¼Œå½“ä¸»æœºå†…å­˜å°äº2gæ—¶ï¼Œä½¿ç”¨å›¾å½¢ç•Œé¢ä½“éªŒæ›´å¥½ã€‚ åˆ‡æ¢å‘½ä»¤ç•Œé¢ï¼šCtrl+Alt+F3 åˆ‡æ¢å›¾å½¢ç•Œé¢ï¼šCtrl+Alt+F1 åœ¨æ–°ç‰ˆæœ¬Kali Linux2020ä¸­é»˜è®¤ç³»ç»Ÿç™»é™†ä¸ºéè¶…çº§ç®¡ç†å‘˜æƒé™ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸æ˜¯rootæƒé™ã€‚åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œåªæœ‰æ™®é€šç”¨æˆ·çš„ç”¨æˆ·åå’Œå¯†ç è®¾ç½®ã€‚ä¸ä¼šæ¶‰åŠrootå¯†ç çš„è®¾ç½®ã€‚ç°åœ¨ä¸ºrootè®¾ç½®å¯†ç ã€‚ å‘½ä»¤ç•Œé¢è¾“å…¥sudo passwd root è¾“å…¥æ–°å¯†ç ï¼Œé‡å¤è¾“å…¥æ–°å¯†ç ã€‚å¯†ç è®¾ç½®å®Œæˆã€‚ å¼€å¯SSHï¼Œå¦‚æœä½ åœ¨æœåŠ¡å™¨ä¸­å®‰è£…äº†Kaliï¼Œè¿™ä¸ªæ“ä½œæ˜¯å¿…é¡»çš„ï¼Œä»–èƒ½è®©ä½ ä½¿ç”¨å…¶ä»–ç»ˆç«¯ï¼Œç™»é™†Kaliã€‚ å‘½ä»¤ç•Œé¢è¾“å…¥sudo vim /etc/ssh/sshd_configã€‚ ä¿®æ”¹éƒ¨åˆ†å†…å®¹ä¸ºå¦‚ä¸‹ï¼š 123456#AuthenticationLoginGraceTime 2mPermitRoootLogin yesStrictModes yesMaxAuthTries 0MaxSessions 10 ä¿å­˜é€€å‡º é‡å¯ssh service ssh restart æŸ¥çœ‹sshæ˜¯å¦å¯åŠ¨ï¼Œservice ssh status å¦‚æœæ˜¾ç¤ºactiveåˆ™å·²ç”Ÿæ•ˆï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨sshç™»é™†äº†ã€‚ 3ï¼šè¢«åŠ¨ä¿¡æ¯æ”¶é›†3.1 å¸¸ç”¨æŸ¥è¯¢æŒ‡ä»¤å’Œå·¥å…·Ctrl+L:æ¸…å± ping sci.ci:æŸ¥çœ‹åŸŸåçš„è®¿é—®é€Ÿåº¦ nslookup baidu.com:åŸŸåæœåŠ¡å™¨æŸ¥è¯¢ã€‚ dig @8.8.8.8 baidu.com any:æŸ¥è¯¢ï¼Œ@8.8.8.8åŸŸåæœåŠ¡å™¨è®°å½•çš„baidu.comåŸŸåè§£æè®°å½•ã€‚any:æŸ¥è¯¢æ‰€æœ‰è®°å½•ã€‚ä¸åŠ åªæŸ¥Aè®°å½•ã€‚+noall +answeråªè¾“å‡ºåŸŸåè®°å½•ç»“æœã€‚ dig -x 35.201.203.235ï¼šæŸ¥è¯¢åå‘è§£æï¼Œptrè®°å½•ï¼Œéœ€è¦æœ‰è§£æè®°å½•æ‰è¡Œ dig txt chaos VERSION.BIND @ns3.dnsv4.com:æŸ¥è¯¢DnsæœåŠ¡å™¨ç‰ˆæœ¬ã€‚é€šè¿‡ç‰ˆæœ¬ä¿¡æ¯æŸ¥æ‰¾æ¼æ´ whois baidu.com:æŸ¥è¯¢æ³¨å†Œä¿¡æ¯ æŸ¥è¯¢æ¥å£ï¼š å¤‡æ¡ˆä¿¡æ¯ï¼šhttp://www.beianbeian.com å¤©çœ¼æŸ¥ï¼šhttps://www.tianyancha.com 3.2 å­åŸŸåæŒ–æ˜ å­åŸŸåæŒ–æ˜å·¥å…·ï¼šMaltegoå­åŸŸåæŒ–æ˜æœº æœç´¢å¼•æ“ï¼šsite:qq.com ç¬¬ä¸‰æ–¹ç½‘ç«™ï¼šhttp://tool.chinaz.com/subdomainã€https://dnsdumpster.com 3.3 Maltegoä½¿ç”¨3.4 Shodanæœç´¢æŠ€å·§https://www.shodan.io æœç´¢æŠ€å·§ï¼š webcam//ç½‘ç»œæ‘„åƒå¤´ city:beijing webcam//ä½äºåŒ—äº¬çš„æ‘„åƒå¤´ net:35.201.203.235//æŸ¥è¯¢åˆ°ipç»‘å®šçš„åŸŸåç­‰ä¿¡æ¯ port:9200//æœç´¢å¼€å¯9200ç«¯å£çš„æœåŠ¡å™¨ 3.5 Googleæœç´¢å¼•æ“çš„ä½¿ç”¨æŠ€å·§ inurl:qq.txtæ–‡ä»¶ inurl:admin_login.aspç™»é™†ç•Œé¢ intitle:index.of .bash_historyè¡¨ç¤ºç½‘ç«™ç›®å½•å¯¹æˆ‘ä»¬å¼€æ”¾ï¼Œæˆ‘iä»¬å¯ä»¥çœ‹åˆ°è¯¥ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„ä¿¡æ¯ã€‚.æ–‡ä»¶åè¡¨ç¤ºéšè—ç›®å½•ã€‚ æŸ¥æ‰¾mysqlçš„é…ç½®æ–‡ä»¶ï¼Œmy.cnf æŸ¥æ‰¾discuzè®ºå›ä¸­å‚¨å­˜mysqlå¯†ç çš„é…ç½®æ–‡ä»¶confg_global.php cache:baidu.comæœç´¢ç¼“å­˜çš„é¡µé¢ï¼Œè™½ç„¶æŸäº›é¡µé¢è¢«åˆ äº† Kali filetype:torrentKaliæ—¶å…³é”®è¯ï¼Œæœç´¢Kaliç›¸å…³çš„æŒ‡å®šæ–‡ä»¶ç±»å‹ apache site:baidu.com æŸç½‘ç«™ä¸‹çš„å…³é”®è¯ intext:user.sql intitle:index.ofæŸ¥è¯¢åŒ…å«user.sqlç”¨æˆ·ä¿¡æ¯æ•°æ®çš„ç½‘ç«™ï¼Œå¹¶ä¸”ç½‘ç«™ç›®å½•å¯è§ s3 site:amazonaws.com filetype:xls passwords3å…³é”®å­—ï¼Œäºšé©¬é€Šçš„ä¸€ç§æœåŠ¡å™¨ç±»å‹ã€‚ æ€»ç»“ï¼šè°·æ­Œé»‘å®¢æ•°æ®åº“ï¼šhttps://www.exploit-db.com/google-hacking-database 4: ä¿¡æ¯æ”¶é›†4.1 ä¸»åŠ¨é‡‡é›† ping 192.168.1. -c 1-c 1å‘ä¸€ä¸ªpingåŒ…å°±åœæ­¢ï¼Œé»˜è®¤ä¸€ç›´å‘ traceroute baidu.comæ£€æµ‹è·¯ç”± ARPï¼šå°†ipè§£æä¸ºMACç‰©ç†åœ°å€ ä½¿ç”¨apringå‘½ä»¤æŸ¥çœ‹å±€åŸŸç½‘ä¸­çš„IPæ˜¯å¦æœ‰å†²çª å¦‚ä½•åœ¨Kaliä¸­æ’æŸ¥é»‘å®¢æ˜¯å¦å†’å……ç½‘å…³è¿›è¡Œä¸­é—´æ”»å‡»ï¼Ÿ ä¼ªè£…æœºé…ç½®ï¼šifconfig ens33 192.168.1.1 Kaliæ¢æµ‹ï¼šarping 192.168.1.1 -c 1//æŸ¥çœ‹å±€åŸŸç½‘ä¸­æ˜¯å¦å­˜åœ¨arpæ”»å‡»ï¼Œå‡ºç°ä¸¤ä¸ªMACåœ°å€å¯¹åº”IPåœ°å€ï¼Œå°±æœ‰ARPæ”»å‡»äº†ã€‚ netdiscover -i eth0 -r 192.168.1.0/27æŸ¥çœ‹å±€åŸŸç½‘ä¸­å­˜æ´»çš„è®¾å¤‡ã€‚ -i æ˜¯ç½‘ç»œè®¾å¤‡ï¼Œç½‘å¡ã€‚-r è¡¨ç¤ºæ‰«æèŒƒå›´ 4.2 è¢«åŠ¨é‡‡é›†netdiscover -pæ‰«æå±€åŸŸç½‘ä¸­çš„è®¾å¤‡ï¼Œä¸å®¹æ˜“è¢«ç®¡ç†å‘˜å‘ç° 4.3 ç”¨Hping3å¯¹æœåŠ¡å™¨è¿›è¡ŒDOSæ”»å‡»hping3 -c 1000 -d 120 -s -w 64 -p 80 --flood --rand-source baidu.com -c å‘é€åŒ…çš„æ•°é‡ -d å‘é€åˆ°ç›®æ ‡æœºå™¨çš„æ¯ä¸ªæ•°æ®åŒ…çš„å¤§å°ã€‚å•ä½æ˜¯å­—èŠ‚ -s åªå‘é€SYNæ•°æ®åŒ… -w TCPçª—å£å¤§å° -p ç›®çš„åœ°ç«¯å£ï¼ˆ80æ˜¯webç«¯å£ï¼‰ â€“flood æ´ªæ°´æ”»å‡»æ¨¡å¼ï¼Œå°½å¯èƒ½å¿«åœ°å‘é€æ•°æ®åŒ… â€“rand-source ä½¿ç”¨éšæœºæ€§çš„æºå¤´ipåœ°å€ã€‚åªæ˜¯åœ¨å±€åŸŸä¸­ä¼ªé€  4.4 ä½¿ç”¨Nmapè¿›è¡ŒåŠè¿æ¥æ‰«ænmap -sS 101.200.128.35 -p 80,81,21,25,110,443çœ‹æŸä¸ªç«¯å£æ˜¯å¦å¼€å¯ nmap -sS 101.200.128.35æŸ¥çœ‹å…¶æ‰“å¼€çš„ç«¯å£ï¼Œä½†ä¸ä¼šå®Œå…¨æ‰«æ65535ä¸ªç«¯å£ nmap -sS 101.200.128.35 -p 1-1024æŒ‡å®šç«¯å£èŒƒå›´ 4.5ä½¿ç”¨ncæ‰«æç«¯å£nc -nv -w 1 -z 192.168.1.1 1-100 å®ç°ä»»æ„TCP/UDPç«¯å£çš„ç›‘å¬ï¼Œncå¯ä»¥ä½œä¸ºserverä»¥TCPæˆ–UDPæ–¹å¼ç›‘å¬æŒ‡å®šç«¯å£ã€‚ ç«¯å£çš„æ‰«æï¼Œncå¯ä»¥ä½œä¸ºclientå‘èµ·TCOPæˆ–UDPè¿æ¥ã€‚ æœºå™¨ä¹‹é—´ä¼ è¾“æ–‡ä»¶ã€‚ æœºå™¨ä¹‹é—´ç½‘ç»œæµ‹é€Ÿ ncå‚æ•°ï¼š -nv è¡¨ç¤ºæ‰«æçš„ç›®æ ‡æ˜¯ä¸ªIPåœ°å€ä¸åšåŸŸåè§£æ -w è¡¨ç¤ºè¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡æ—¶é—´åˆ™ä¸å†æ‰«æ -z è¡¨ç¤ºè¿›è¡Œç«¯å£æ‰«æ 4.6 Scapyå®šåˆ¶ARPå’ŒICMPåè®®æ•°æ®åŒ…ä¼ªè£…ç½‘ç»œæŠ¥æ–‡ scapyå¦‚æœæŠ¥é”™å¼¹å‡ºï¼šWont be able to plot apt install python-matplotlib exti()//é€€å‡ºScapy ARP().display()//åˆ—å‡ºarpç›¸å…³å‚æ•°","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Kali Linux","slug":"Kali-Linux","permalink":"https://sci.ci/tags/Kali-Linux/"}]},{"title":"Flutterå­¦ä¹ è®°å½•","slug":"Flutterå­¦ä¹ è®°å½•","date":"2020-02-15T09:32:32.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/02/15/Flutterå­¦ä¹ è®°å½•/","link":"","permalink":"https://sci.ci/2020/02/15/Flutter%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","excerpt":"","text":"1ï¼šFlutterä»‹ç» å¸‚é¢ä¸Šæœ‰å¾ˆå¤šæ··åˆå¼€å‘æ¡†æ¶ï¼Œæ¯”å¦‚ReactNativeã€lonicï¼Œä½†éƒ½æ˜¯é’ˆå¯¹å‰ç«¯å¼€å‘ã€‚ Flutteré’ˆå¯¹å…¨éƒ¨å¼€å‘è€…çš„æ··åˆæ¡†æ¶ã€‚ éœ€è¦Dartè¯­è¨€åŸºç¡€ã€‚ 2ï¼šFlutterç›®å½•ç»“æ„ã€å…¥å£ã€è‡ªå®šä¹‰Widgetã€Centerç­‰ç»„ä»¶ ç›®å½•ï¼šiosï¼Œandroidï¼Œbuildï¼Œlibï¼Œtextï¼Œpubspec.yamlï¼ˆé…ç½®ä¾èµ–ï¼‰ï¼Œmain.dart å…¥å£æ–‡ä»¶ã€æ–¹æ³•ï¼šå†main.dartä¸­ 12345678910111213141516171819202122232425262728293031323334353637383940import &#x27;package:flutter/material.dart&#x27;;void main()&#123; runApp(new MyApp())//new å†Dartä¸­å¯ä»¥çœç•¥&#125;//void main()=&gt;runApp(MyApp());//è‡ªå®šä¹‰ç»„ä»¶class MyApp extends StatelessWidget&#123; @override Widget build(BuildContext context)&#123; return MaterialApp( home:Scaffold( appBar:AppBar( title:Text(&#x27;Flutter Demo&#x27;) ), body:HomeContent(), ), theme:ThemeData( primarySwatch:Colors.blue ), ) &#125;&#125;class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context)&#123; return Center(//å†…å®¹å±…ä¸­çš„LinearLayout child:Text( &#x27;Hello Flutter&#x27;ï¼Œ textDirection:TextDirection.ltr,//æ–‡å­—æ–¹å‘ä»å·¦åˆ°å³ style:TextStyle( fontSize:40.0, color:Colors.yellow, //color:Color.formRGBO(244,233,121,0.5), ), ) ); &#125;&#125; 3ï¼šContainerç»„ä»¶ã€Textç»„ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263import &#x27;package:flutter/material.dart&#x27;;void main() =&gt; runApp(MyApp());class MyApp extends StatelessWidget &#123; // This widget is the root of your application. @override Widget build(BuildContext context) &#123; return MaterialApp( home:Scaffold( appBar: AppBar( title: Text(&quot;flutter demo&quot;), ), body: HomeContent(), ) ); &#125;&#125;class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Center( child: Container( child: Text(&#x27;å„ä½åŒå­¦å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç æ±Ÿè€å¸ˆé˜¿å‘æ˜¯å¦ä½ å¥½å—&#x27;, textAlign: TextAlign.left, style: TextStyle( fontSize: 16, color: Colors.red, fontWeight: FontWeight.w800,//åŠ ç²— fontStyle: FontStyle.italic,//æ–œçº¿ decoration: TextDecoration.lineThrough, decorationColor: Colors.white, decorationStyle: TextDecorationStyle.dashed, letterSpacing: 5 ), overflow: TextOverflow.ellipsis, maxLines: 2, textScaleFactor: 1.2,//size scale 2 times ), height: 300, width: 300, decoration: BoxDecoration( color: Colors.yellow, border: Border.all( color: Colors.blue, width: 2 ), borderRadius: BorderRadius.all( Radius.circular(20) ) ), padding: EdgeInsets.all(10), margin: EdgeInsets.all(10), //transform: Matrix4.translationValues(100, 0, 0), transform: Matrix4.rotationZ(0.3), alignment: Alignment.bottomLeft, ), ); &#125; &#125; 4ï¼šå›¾ç‰‡ç»„ä»¶Imageã€æœ¬åœ°å›¾ç‰‡ã€è¿œç¨‹å›¾ç‰‡ã€å›¾ç‰‡è£å‰ª4.1 ç½‘ç»œå›¾ç‰‡å’Œæ ·å¼ ç½‘ç»œå›¾ç‰‡ï¼š 123456789101112131415161718192021class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Center( child: Container( child: Image.network(&quot;https://i0.hdslb.com/bfs/archive/9377fda78c8a873085bd133e4fc54699ab56746d.jpg@336w_190h.webp&quot;, alignment: Alignment.center, //color: Colors.yellow, //colorBlendMode: BlendMode.screen, fit: BoxFit.cover,//coverï¼šæ‹‰ä¼¸å‰ªåˆ‡ï¼Œä½†ä¸å˜å½¢ã€‚æœ€å¸¸ç”¨ //repeat: ImageRepeat.repeatX,//Xè½´å¹³é“º ), width: 300, height: 300, decoration: BoxDecoration( color: Colors.lightBlue ), ), ); &#125; å®¹å™¨è£…é¥°å›¾ç‰‡ 12345678910111213141516171819class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Center( child: Container( width: 300, height: 300, decoration: BoxDecoration( color: Colors.lightBlue, borderRadius: BorderRadius.circular(150), image: DecorationImage( image: NetworkImage(&quot;https://i0.hdslb.com/bfs/archive/b13bfd82fdea672001554eca19c6bf7135e2f692.jpg@336w_190h.webp&quot;), fit: BoxFit.cover ) ), ), ); &#125; ClipOval 123456789101112131415161718class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Center( child: Container( child: ClipOval( child: Image.network(&quot;https://i0.hdslb.com/bfs/archive/b13bfd82fdea672001554eca19c6bf7135e2f692.jpg@336w_190h.webp&quot;, height: 100, width: 100, fit: BoxFit.cover, ), ), ), ); &#125; &#125; 4.2 å¼•å…¥æœ¬åœ°å›¾ç‰‡ åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹images build images 2.0x 3.0x 4.0x åœ¨æ–‡ä»¶å¤¹é‡Œæ”¾å…¥å›¾ç‰‡ï¼Œä¼šæ ¹æ®å±å¹•åˆ†è¾¨ç‡é…ç½®ä¸åŒå›¾ç‰‡ åœ¨pubspec.yamlä¸­é…ç½® 123assets:- images/2.0x/a.jpeg- images/3.0x/a.jpeg åœ¨ä»£ç ä¸­ä½¿ç”¨ 12345678910class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Center( child: Container( child: Image.asset(&#x27;images/a.jpeg&#x27;), ), ); &#125; 5ï¼šListViewç»„ä»¶5.1 åŸºæœ¬åˆ—è¡¨ å‚ç›´åˆ—è¡¨ ListTileç»„ä»¶ 123456789101112131415161718192021222324252627282930class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return ListView( padding: EdgeInsets.all(10), children: &lt;Widget&gt;[ ListTile( leading: Icon(Icons.settings,color: Colors.red,),//å‰ç½®å›¾æ ‡ title: Text(&quot;1ä½ å¥½åˆ—è¡¨ç»„ä»¶&quot;,style: TextStyle( fontSize: 24 ),), subtitle: Text(&quot;1ä½ å¥½æˆ‘æ˜¯äºŒçº§æ ‡é¢˜&quot;), ), ListTile( title: Text(&quot;1ä½ å¥½åˆ—è¡¨ç»„ä»¶&quot;), subtitle: Text(&quot;1ä½ å¥½æˆ‘æ˜¯äºŒçº§æ ‡é¢˜&quot;), trailing: Icon(Icons.home,size: 30,),//åç½®å›¾æ ‡ ), ListTile( leading: Image.network(&quot;https://i0.hdslb.com/bfs/sycp/creative_img/202002/849753c8234f501092c0b8ae6af5b679.jpg&quot;), title: Text(&quot;ä½ å¥½åˆ—è¡¨ç»„ä»¶&quot;), subtitle: Text(&quot;ä½ å¥½æˆ‘æ˜¯äºŒçº§æ ‡é¢˜&quot;), ), ], ); &#125; &#125; å‚ç›´å›¾æ–‡åˆ—è¡¨ 1234567891011121314151617181920212223class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return ListView( padding: EdgeInsets.all(10), children: &lt;Widget&gt;[ Image.network(&quot;https://i0.hdslb.com/bfs/sycp/creative_img/202002/849753c8234f501092c0b8ae6af5b679.jpg&quot;), Container( child: Text(&quot;i am title&quot;,textAlign: TextAlign.center,style: TextStyle(fontSize: 18),), height: 40, padding: EdgeInsets.fromLTRB(0, 10, 0, 10), ), Image.network(&quot;https://i0.hdslb.com/bfs/sycp/creative_img/202002/849753c8234f501092c0b8ae6af5b679.jpg&quot;), Container( child: Text(&quot;i am title&quot;,textAlign: TextAlign.center,style: TextStyle(fontSize: 18),), height: 40, padding: EdgeInsets.fromLTRB(0, 10, 0, 10), ), ], ); &#125;&#125; æ°´å¹³åˆ—è¡¨ 1234567891011121314151617181920212223242526272829303132333435363738class HomeContent extends StatelessWidget&#123; @override Widget build(BuildContext context) &#123; // TODO: implement build return Container( height: 180, child: ListView( padding: EdgeInsets.all(10), scrollDirection: Axis.horizontal, children: &lt;Widget&gt;[ Container( width: 180, height: 180, color: Colors.red, ), Container( width: 180, height: 180, color: Colors.orange, child: ListView( children: &lt;Widget&gt;[ Image.network(&quot;https://i0.hdslb.com/bfs/sycp/creative_img/202002/849753c8234f501092c0b8ae6af5b679.jpg&quot;), Text(&quot;i am text&quot;) ], ), ), Container( width: 180, height: 180, color: Colors.blue, ), ], ), ); &#125; &#125; scrollDirection 5.2 ListViewåˆ—è¡¨ç»„ä»¶ã€åŠ¨æ€åˆ—è¡¨ å±•ç¤ºä¸€ä¸ªåˆ—è¡¨ä¸­çš„æ•°æ® 1234567891011121314151617181920class HomeContent extends StatelessWidget&#123; //è‡ªå®šä¹‰æ–¹æ³• List&lt;Widget&gt; _getData()&#123; List&lt;Widget&gt; list=new List(); for(var i=0;i&lt;20;i++)&#123; list.add(ListTile( title: Text(&quot;iam $i list&quot;), )); &#125; return list; &#125; @override Widget build(BuildContext context) &#123; // TODO: implement build return ListView( children: _getData() ); &#125; &#125; ListView.builder 1234567891011121314151617181920212223class HomeContent extends StatelessWidget&#123; List list=new List(); HomeContent()&#123; for(var i=0;i&lt;20;i++) &#123; list.add(ListTile( title: Text(&quot;iam $i list&quot;), )); &#125; &#125; @override Widget build(BuildContext context) &#123; // TODO: implement build return ListView.builder( itemCount: this.list.length, itemBuilder: (context,index)&#123; return ListTile( title: Text(this.list[index]), ); &#125; ); &#125;&#125;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Flutter","slug":"Flutter","permalink":"https://sci.ci/tags/Flutter/"}]},{"title":"Vueã€Vuejså­¦ä¹ è®°å½•","slug":"Vueã€Vuejså­¦ä¹ è®°å½•","date":"2020-02-15T09:31:51.000Z","updated":"2023-12-02T00:05:56.277Z","comments":true,"path":"2020/02/15/Vueã€Vuejså­¦ä¹ è®°å½•/","link":"","permalink":"https://sci.ci/2020/02/15/Vue%E3%80%81Vuejs%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/","excerpt":"","text":"0ï¼šES6è¡¥å……0.1 å—çº§ä½œç”¨åŸŸ12345678910111213141516171819202122232425&lt;script&gt; //å˜é‡ä½œç”¨åŸŸï¼šå˜é‡åœ¨ä»€ä¹ˆèŒƒå›´å†…å¯ç”¨ &#123; var name = &#x27;why&#x27;; console.log(name); &#125; console.log(name);//åœ¨å¤§æ‹¬å·å¤–ä¹Ÿèƒ½æ‰“å¼€ã€‚ //æ²¡æœ‰å—çº§ä½œç”¨åŸŸä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜ var btns = document.getElementsByTagName(&#x27;button&#x27;); for(var i = 0; i&lt;btns.length;i++)&#123; btns[i].addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;ç¬¬&#x27;+i+&#x27;ä¸ªæŒ‰é’®è¢«ç‚¹å‡»&#x27;) &#125;) &#125; //æ˜¾ç¤ºçš„æŒ‰é’®è¢«ç‚¹å‡»ä¸å‡†ç¡®ã€‚ä½¿ç”¨é—­åŒ…è§£å†³æ­¤é—®é¢˜ for(var i = 0; i&lt;btns.length;i++)&#123; (function(num)&#123; btns[num].addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;ç¬¬&#x27;+num+&#x27;ä¸ªæŒ‰é’®è¢«ç‚¹å‡»&#x27;) &#125;) &#125;)(i) &#125;&lt;/script&gt; 1ï¼šVueåˆä½“éªŒ1.1 è®¤è¯†Vuejsä½œä¸ºæ—¶ä¸‹æµè¡Œçš„å‰ç«¯æ¡†æ¶ï¼ŒVuejsæ˜¯å¾ˆå¤šä¸­å°å‹ä¼ä¸šå¼€å‘é¡¹ç›®çš„é¦–é€‰æ¡†æ¶ã€‚ Vueæ˜¯ä¸€ä¸ªæ¸è¿›å¼çš„æ¡†æ¶ã€‚ æ¸è¿›å¼æ„å‘³ç€å¯ä»¥å°†Vueä½œä¸ºåº”ç”¨çš„ä¸€éƒ¨åˆ†åµŒå…¥è¿›å»ï¼Œå¸¦æ¥æ›´ä¸°å¯Œçš„äº¤äº’ä½“éªŒã€‚ Vueç‰¹ç‚¹å’ŒWebå¼€å‘ä¸­çš„é«˜çº§åŠŸèƒ½ è§£è€¦è§†å›¾å’Œæ•°æ® å¯å¤ç”¨çš„ç»„ä»¶ å‰ç«¯è·¯ç”± çŠ¶æ€ç®¡ç† è™šæ‹ŸDOM å­¦ä¹ å‰æ ä¸éœ€è¦Angularã€Reactã€jQuery éœ€è¦HTMLã€CSSã€JavaScriptåŸºç¡€ 1.2 Vue.jså®‰è£…æ–¹å¼ä¸€ï¼šç›´æ¥CDNå¼•å…¥ æ–¹å¼äºŒï¼šä¸‹è½½å’Œå¼•å…¥ å®‰è£…æ•™ç¨‹ https://cn.vuejs.org å¼€å‘ç¯å¢ƒ https://vuejs.org/js/vue.js ç”Ÿäº§ç¯å¢ƒ https://vuejs.org/js/vue.min.js æ–¹å¼ä¸‰ï¼šNPMå®‰è£… é€šè¿‡webpackå’ŒCLI 1.3 Hello VuejsVueçš„å“åº”å¼ 12345678910111213141516171819202122232425262728&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;h1&gt; &#123;&#123;name&#125;&#125; &lt;/h1&gt; &#123;&#123;message&#125;&#125; &lt;/div&gt; &lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt; &lt;script&gt; //let(å˜é‡)/const(å¸¸é‡) //ç¼–ç¨‹èŒƒå¼ï¼šå£°æ˜å¼ç¼–ç¨‹ const app = new Vue(&#123; el:&#x27;#app&#x27;,//ç”¨äºæŒ‚åœ¨è¦ç®¡ç†çš„å…ƒç´  data:&#123;//å®šä¹‰æ•°æ® message:&#x27;ä½ å¥½å•Šï¼&#x27;,//åœ¨divä¸­æ˜¾ç¤ºmessageå†…å®¹ name:&#x27;coderwhy&#x27; &#125; &#125;) //åŸå§‹jsçš„åšæ³•ï¼ˆç¼–ç¨‹èŒƒå¼ï¼šå‘½ä»¤å¼ç¼–ç¨‹ï¼‰ //1.åˆ›å»ºdivå…ƒç´ ï¼Œè®¾ç½®idå±æ€§ //2.å®šä¹‰ä¸€ä¸ªå˜é‡å«message //3.å°†messageå˜é‡æ”¾åœ¨divå…ƒç´ ä¸­æ˜¾ç¤º //4.ä¿®æ”¹messgeçš„æ•°æ® //5.å°†ä¿®æ”¹åçš„æ•°æ®æ›¿æ¢åˆ°divå…ƒç´  &lt;/script&gt; &lt;/body&gt; 1.4 Vueåˆ—è¡¨æ˜¾ç¤º1234567891011121314151617&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;ul&gt; &lt;li v-for=&quot;item in movies&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; &lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt; &lt;script&gt; const app = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; message:&#x27;ä½ å¥½å•Š&#x27;ï¼Œ movies:[&#x27;æµ·ç‹&#x27;,&#x27;å¤§è¯è¥¿æ¸¸&#x27;,&#x27;æ˜Ÿé™…ç©¿è¶Š&#x27;,&#x27;å°‘å¹´æ´¾&#x27;] &#125; &#125;) &lt;/script&gt;&lt;/body&gt; app.movies.push(&#39;ç›—æ¢¦ç©ºé—´&#39;)//æ·»åŠ æ•°æ® ä½¿ç”¨v-foræŒ‡ä»¤éå†æ•°ç»„å…ƒç´  æ¡ˆä¾‹å±•ç¤ºï¼šè®¡æ•°å™¨ å½“å‰è®¡æ•°ï¼š0 + - //è¯­æ³•ç³–ï¼šç®€å†™ const app = new Vue({ el:'#app', data:{ counter:0 } }) 1234567891011121314151617181920212223242526272829303132333435&lt;body&gt; &lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt; &lt;div id=&quot;app&quot;&gt; &lt;h2&gt; å½“å‰è®¡æ•°ï¼š&#123;&#123;counter&#125;&#125; &lt;/h2&gt; &lt;!--&lt;button v-on:click=&quot;counter++&quot;&gt;+&lt;/button&gt;--&gt; &lt;!--&lt;button v-on:click=&quot;counter--&quot;&gt;-&lt;/button&gt;--&gt; &lt;button v-on:click=&quot;add&quot;&gt;+&lt;/button&gt; &lt;button @click=&quot;min&quot;&gt;-&lt;/button&gt; &lt;/div&gt; &lt;script&gt; //è¯­æ³•ç³–ï¼šç®€å†™ const app = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; counter:0 &#125;, methods:&#123; add:function()&#123; console.log(&#x27;addè¢«æ‰§è¡Œ&#x27;)ï¼› this.counter++; &#125;, min:function()&#123; console.log(&#x27;minè¢«æ‰§è¡Œ&#x27;)ï¼› this.counter--; &#125; &#125; &#125;) //åŸå§‹js //1.æ‹¿buttomå…ƒç´  //2.æ·»åŠ ç›‘å¬æ—¶é—´ &lt;/script&gt;&lt;/body&gt; æ–°å±æ€§ï¼šmethodsï¼Œè¯¥å±æ€§ç”¨äºVueå¯¹è±¡ä¸­å®šä¹‰æ–¹æ³•ã€‚ æ–°æŒ‡ä»¤ï¼š@clickï¼Œè¯¥æŒ‡ä»¤ç”¨äºç›‘å¬æŸä¸ªå…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ã€‚ 1.5 Vueä¸­çš„MVVMä»€ä¹ˆæ˜¯MVVMï¼Ÿ Model View ViewModel 1.6 åˆ›å»ºVueå®ä¾‹ä¼ å…¥çš„optionsç›®å‰æŒæ¡çš„é€‰é¡¹ elï¼š å­—ç¬¦å‹String|HTMLElement å†³å®šVueç®¡ç†å“ªä¸€ä¸ªDOM dataï¼š Object|Funtion()ï¼ˆç»„ä»¶å½“ä¸­å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ Vueå®ä¾‹å¯¹åº”çš„æ•°æ®å¯¹è±¡ã€‚ methodsï¼š {[key:string] Function} å®šä¹‰å±äºVueçš„ä¸€äº›æ–¹æ³•ï¼Œå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨æŒ‡ä»¤ä¸­ä½¿ç”¨ 1.7 Vueçš„ç”Ÿå‘½å‘¨æœŸç”Ÿå‘½å‘¨æœŸï¼šäº‹ç‰©ä»è¯ç”Ÿåˆ°æ¶ˆäº¡çš„æ•´ä¸ªè¿‡ç¨‹ 123456789&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:obj, methods:&#123;&#125;, created:function()&#123;&#125;, mounted:function()&#123;&#125; &#125;)&lt;/script&gt; 1.8 Vueçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°12345678910&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:obj, methods:&#123;&#125;, beforeCreate:function()&#123;&#125;,//Hook:é’©å­å‡½æ•° created:function()&#123;&#125;, mounted:function()&#123;&#125; &#125;)&lt;/script&gt; ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼šbeforeCreate,create,beforeMounte,mounted,beforeUpdate,updated,beforDestroy,destroyed 2ï¼šæ’å€¼çš„æ“ä½œ2.1 Mustacheè¯­æ³•ï¼Œæ’å€¼çš„æ“ä½œMustacheè¯­æ³•ï¼šåŒå¤§æ‹¬å·//mustacheèƒ¡é¡» 123456789101112131415161718192021222324&lt;div&gt; &lt;h2&gt; &#123;&#123;message&#125;&#125; &lt;/h2&gt; &lt;h2&gt; &#123;&#123;firstName+&#x27; &#x27;+lastName&#125;&#125; &lt;/h2&gt; &lt;h2&gt; &#123;&#123;firstName&#125;&#125; &#123;&#123;lastName&#125;&#125; &lt;/h2&gt; &lt;h2&gt;&#123;&#123;counter*2&#125;&#125;&lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; message:&#x27;nihao&#x27;, firstName:&#x27;kobe&#x27;, lastName:&#x27;bryant&#x27;, counter:100 &#125;, &#125;)&lt;/script&gt; mustacheè¯­æ³•ä¸ä»…å¯ä»¥ç›´æ¥å†™å˜é‡ï¼Œè¿˜å¯ä»¥å†™è¯­æ³•ã€‚ 2.2 æ’å€¼æ“ä½œâ€“å…¶ä»–æŒ‡ä»¤ä½¿ç”¨ v-once: ä¸æƒ³æ”¹å˜DOMå€¼ï¼Œä½¿DOMå˜æˆéå“åº”å¼ã€‚ 123&lt;h2 v-once&gt; &#123;&#123;message&#125;&#125;&lt;!--messageä¸ä¼šéšæ•°æ®æ›´æ–°è€Œæ”¹å˜--&gt;&lt;/h2&gt; v-html:ç›´æ¥å±•ç¤ºhtmlä»£ç ï¼Œè€Œä¸æ˜¯å±•ç¤ºå…¶å­—ç¬¦ä¸² 1234567891011&lt;div&gt; &lt;h2 v-html=&quot;url&quot;&gt;&lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; url=&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;ç™¾åº¦ä¸€ä¸‹&lt;/a&gt;&#x27; &#125; &#125;)&lt;/script&gt; è¾“å‡ºç»“æœï¼šç™¾åº¦ä¸€ä¸‹ v-textï¼šå’Œä½œç”¨ç›¸åŒï¼Œä½†ä¼šè¦†ç›–&lt;h2&gt;ä»£ç å—ä¸­çš„å­—ç¬¦ä¼šè¢«è¦†ç›–æ‰ï¼Œä¸çµæ´»ã€‚ 12345678910111213141516&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;h2 v-text=&quot;message&quot;&gt;&lt;/h2&gt; &lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt; &lt;/div&gt; &lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt; &lt;script&gt; const app = new Vue(&#123; el:&#x27;#app&#x27;,//ç”¨äºæŒ‚åœ¨è¦ç®¡ç†çš„å…ƒç´  data:&#123;//å®šä¹‰æ•°æ® message:&#x27;ä½ å¥½å•Šï¼&#x27; &#125; &#125;) &lt;/script&gt; &lt;/body&gt; v-preï¼šå°†ä¾‹å¦‚å¤§æ‹¬å·æ˜¾ç¤ºå‡ºæ¥ï¼Œä¸æ¸²æŸ“æ•°æ® 123&lt;h2 v-pre&gt; &#123;&#123;message&#125;&#125;&lt;/h2&gt; è¾“å‡ºç»“æœï¼š v-cloakï¼šå½“jså»¶è¿ŸåŠ è½½å‡ºæ¥æ—¶ï¼Œä¸æ˜¾ç¤ºdomæ¸²æŸ“ä¹‹å‰çš„å€¼ã€‚ä¸ä¼šåœ¨æ¸²æŸ“ä¹‹å‰å‡ºç°//cloakæ–—ç¯· 12345678910111213&lt;!--&lt;head&gt; &lt;style&gt; [v-cloak]&#123; display:none; &#125; &lt;/style&gt;&lt;/head&gt;--&gt;&lt;div id=&quot;app&quot; v-cloak&gt; &#123;&#123;message&#125;&#125;&lt;/div&gt;&lt;script&gt; ...&lt;/script&gt; 3ï¼šåŠ¨æ€ç»‘å®šå±æ€§3.1 v-bindï¼ŒåŠ¨æ€ç»‘å®šDOMå±æ€§ v-bindçš„åŸºæœ¬ä½¿ç”¨ 123456789101112131415161718192021&lt;body&gt; &lt;div id=&quot;app&quot;&gt; &lt;img v-bind:src=&quot;imgURL&quot; alt=&quot;&quot;&gt; &lt;a v-bind:href=&quot;aHref&quot;&gt;&lt;/a&gt; &lt;!--è¯­æ³•ç³–çš„å†™æ³•--&gt; &lt;img :src=&quot;imgURL&quot; alt=&quot;&quot;&gt; &lt;a :href=&quot;aHref&quot;&gt;&lt;/a&gt; &lt;/div&gt; &lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt; &lt;script&gt; const app = new Vue(&#123; el:&#x27;#app&#x27;,//ç”¨äºæŒ‚åœ¨è¦ç®¡ç†çš„å…ƒç´  data:&#123; aHref=&quot;https://www.baidu.com&quot;, imgURL:&#x27;https://i0.hdslb.com/bfs/sycp/creative_img/202002/1e9bfa663a93374c8e10c3933cfc78f8.jpg&#x27; &#125; &#125;) &lt;/script&gt; &lt;/body&gt; v-bindç®€å†™/è¯­æ³•ç³–ï¼š: v-bindå¯¹è±¡ç”¨æ³•ï¼š 123456789101112&lt;div&gt; &lt;h2 class=&quot;title&quot; :class=&quot;&#123;class1:isClass1,class2:isClass2&#125;&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; data:&#123; message:&quot;showClassExample&quot; isClass1:true, isClass2:false &#125; &#125;)&lt;/script&gt; //titleç±»å›ºå®šï¼ŒåŠ¨æ€æ›´æ”¹class1å’Œclass2 &#123;ç±»å:å¸ƒå°”å€¼,ç±»åï¼šå¸ƒå°”å€¼&#125; v-bindæ•°ç»„è¯­æ³• 1234567891011121314151617&lt;div&gt; &lt;h2 class=&quot;title&quot; :class=&quot;getClasses()&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; data:&#123; message:&quot;showClassExample&quot;, isClass1:true, isClass2:false &#125; methods:&#123; getClasses:function()&#123; return&#123;class1:this.isClass1,class2:this.isClass2&#125; &#125; &#125; &#125;)&lt;/script&gt; æ³¨æ„ï¼šv-onä¸­å‡½æ•°çœç•¥äº†()ï¼Œä½†v-bindéœ€è¦æ·»åŠ () 123456789101112&lt;div&gt; &lt;h2 class=&quot;title&quot; :class=&quot;[class1,class2]&quot;&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; data:&#123; message:&quot;showClassExample&quot;, class1:&#x27;class1&#x27;, class2:&#x27;class2&#x27; &#125; &#125;)&lt;/script&gt; 3.2 ä½œä¸šï¼Œç»“åˆv-forå’Œv-bindä½œä¸šï¼šä½¿ç”¨v-foræ˜¾ç¤ºä¸€ä¸ªç”µå½±åç§°åˆ—è¡¨ï¼Œè®¾ç½®ç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œå½“æŸä¸ªç”µå½±è¢«ç‚¹å‡»ï¼Œæ”¹å˜æ­¤ç”µå½±åç§°å­—ä½“é¢œè‰²ä¸ºçº¢è‰²ã€‚ ç­”æ¡ˆï¼š 12345678910111213141516171819202122232425262728&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt; &lt;style&gt; .red&#123;color:red&#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;script src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&lt;div id=&quot;app&quot;&gt; &lt;ul&gt; &lt;li v-for=&quot;(m, index) in movies&quot; @click=&quot;clickItem=index&quot; :class=&quot;&#123;red:clickItem==index&#125;&quot;&gt;&#123;&#123;m&#125;&#125;&lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script&gt; const app = new Vue(&#123; el:&#x27;#app&#x27;, data: &#123; movies: [&#x27;å¤ä»‡è€…è”ç›Ÿ&#x27;, &#x27;ç”ŸåŒ–å±æœº&#x27;, &#x27;æ˜Ÿé™…å¤§æˆ˜&#x27;, &#x27;é’¢é“ä¾ &#x27;], clickItem:99, &#125; &#125;)&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.3 v-bindåŠ¨æ€ç»‘å®šæ ·å¼ æ ·å¼çš„å¯¹è±¡ç”¨æ³• 12345678910111213&lt;div&gt; &lt;h2 :style=&quot;&#123;fontSize:&#x27;50px&#x27;,color:finalColor&#125;&quot;&gt; &#123;&#123;message&#125;&#125; &lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; data:&#123; message:&#x27;abc&#x27;, finalColor:&#x27;red&#x27; &#125; &#125;)&lt;/script&gt; æ³¨æ„ï¼š{fontSize:50px}ä¸ºé”™è¯¯è¡¨è¾¾ï¼Œ50pxä¼šè¢«è§£æä¸ºä¸€ä¸ªå˜é‡ï¼Œ50pxå¿…é¡»åŠ å•å¼•å· æ ·å¼çš„æ•°ç»„ç”¨æ³• 123456789101112131415&lt;div&gt; &lt;h2 :style=&quot;[style1,style2]&quot;&gt; &#123;&#123;message&#125;&#125; &lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; message:&#x27;abc&#x27;, style1:&#123;fontSize:&#x27;100px&#x27;&#125;, style2:&#123;color:&#x27;red&#x27;&#125; &#125; &#125;)&lt;/script&gt; 4ï¼šè®¡ç®—å±æ€§4.1 è®¡ç®—å±æ€§çš„åŸºæœ¬ç”¨æ³•123456789101112131415161718192021222324252627282930&lt;div id=&quot;app&quot;&gt; &lt;h2&gt; &#123;&#123;firstName+&quot; &quot;+lastName&#125;&#125; &lt;/h2&gt; &lt;h2&gt; &#123;&#123;getFullName()&#125;&#125; &lt;/h2&gt; &lt;h2&gt; &#123;&#123;fullName&#125;&#125; &lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; firstName:&#x27;Lebron&#x27;, lastName:&#x27;James&#x27; &#125;, computed:&#123; fullName:function()&#123; return this.fistName+&#x27; &#x27;+this.lastName; &#125; &#125;,//è®¡ç®—å±æ€§ methods:&#123; getFullName()&#123; return this.fistName+&#x27; &#x27;+this.lastName; &#125; &#125; &#125;)&lt;/script&gt; computed:è®¡ç®—å±æ€§çš„ä½¿ç”¨ 4.2 è®¡ç®—å±æ€§çš„å¤æ‚ä½¿ç”¨1234567891011121314151617181920212223242526272829303132333435&lt;div id=&quot;app&quot;&gt; &lt;h2&gt; æ€»ä»·æ ¼ï¼š&#123;&#123;totalPrice&#125;&#125; &lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; books:&#123; &#123;id:110,name:&#x27;Unixç¼–ç¨‹&#x27;,price:119&#125;, &#123;id:111,name:&#x27;ä»£ç å¤§å…¨&#x27;,price:89&#125;, &#123;id:112,name:&#x27;ç°ä»£æ“ä½œç³»ç»Ÿ&#x27;,price:81&#125; &#125; &#125;, computed:&#123; totalPrice:function()&#123; for(let i=0;i&lt;this.books.length;i++)&#123; result += this.books[i].price; &#125; /* for(let i in this.books)&#123; result += this.books[i].price; &#125; for(let book of this.books)&#123; result += book.price; &#125; */ return result; &#125; &#125;,//è®¡ç®—å±æ€§ &#125;)&lt;/script&gt; 4.3 è®¡ç®—å±æ€§setterå’Œgetter1234567891011121314151617181920212223242526272829&lt;div id=&quot;app&quot;&gt; &lt;h2&gt; &#123;&#123;fullName&#125;&#125; &lt;/h2&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; firstName:&#x27;Kobe&#x27;, lastName:&#x27;Bryant&#x27; &#125;, computed:&#123; /* fullName:&#123;//fullNameä¸ºä¸€ä¸ªå¯¹è±¡ //ä¸€èˆ¬å±æ€§æ²¡æœ‰setæ–¹æ³•ï¼Œä¸ºåªè¯»å±æ€§ set:function()&#123;&#125;,//é€šè¿‡æ§åˆ¶æ¿ï¼Œapp.fullName=&#x27;ABC&#x27;ä¼šè°ƒç”¨æ­¤æ–¹æ³• get:function()&#123; return this.firstName+&#x27; &#x27;+this.lastName; &#125; &#125; */ //ä¸Šè¿°æ–¹æ³•ç®€å†™ä¸º fullName:function()&#123; return this.firstName+&#x27; &#x27;+this.lastName; &#125; &#125;,//è®¡ç®—å±æ€§ &#125;)&lt;/script&gt; 4.4 è®¡ç®—å±æ€§å’Œmethodså¯¹æ¯”æ–¹æ³•æ¯æ¬¡è°ƒç”¨ï¼Œç¨‹åºéƒ½ä¼šé‡å¤æ‰§è¡Œï¼›è®¡ç®—å±æ€§ç¬¬ä¸€æ¬¡è®¡ç®—å‡ºæ¥ï¼Œç»“æœå°±ä¿å­˜åœ¨å†…å­˜ä¸­ã€‚ä¸‹æ¬¡å†è°ƒç”¨ï¼Œç¨‹åºä¸ä¼šé‡å¤æ‰§è¡Œã€‚ éœ€è¦å¤šæ¬¡è°ƒç”¨çš„è®¡ç®—ç»“æœï¼Œé‡‡ç”¨è®¡ç®—å±æ€§æ€§èƒ½ä¼šæ›´ä½ã€‚ 4.5 è·‘é©¬ç¯é¡¹ç›®ä¸€å¥æ–‡å­—å®ç°ï¼Œç‚¹å‡»æŒ‰é’®ï¼Œæ–‡å­—æ»šåŠ¨æ’­æ”¾ï¼Œå†ç‚¹å‡»æ–‡å­—åœæ­¢æ»šåŠ¨ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;script src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&lt;div id=&quot;app&quot;&gt; &lt;button @click=&quot;lang&quot;&gt;æµªèµ·æ¥&lt;/button&gt; &lt;button @click=&quot;di&quot;&gt;ä½è°ƒ&lt;/button&gt; &lt;h4&gt;&#123;&#123;msg&#125;&#125;&lt;/h4&gt;&lt;/div&gt;&lt;script&gt; //è¯­æ³•ç³–ï¼šç®€å†™ const app = new Vue(&#123; el:&#x27;#app&#x27;, data: &#123; msg:&#x27;çŒ¥çå‘è‚²ã€‚åˆ«æµª~~ï¼&#x27;, intervalId:null &#125;, methods:&#123; lang()&#123; //å‡½æ•°é‡Œçš„this.å˜é‡æ— æ³•æŒ‡å‘å‡½æ•°å¤–éƒ¨çš„å˜é‡ /* setInterval(function()&#123; let start = this.msg.substring(0,1);//è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦ let end = this.msg.substring(1);//è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦åçš„æ‰€æœ‰å­—ç¬¦ this.msg=end+start;//å°†ç¬¬ä¸€ä¸ªå­—ç¬¦æ”¾åˆ°æœ€åï¼Œå®ç°è·‘é©¬ç¯æ•ˆæœ &#125;,400) */ //ä½¿ç”¨ç®­å¤´å‡½æ•°è§£å†³å‡½æ•°å†…éƒ¨thisé—®é¢˜ if(this.intervalId!=null) return; this.intervalId = setInterval(()=&gt; &#123; let start = this.msg.substring(0,1);//è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦ let end = this.msg.substring(1);//è·å–ç¬¬ä¸€ä¸ªå­—ç¬¦åçš„æ‰€æœ‰å­—ç¬¦ this.msg=end+start;//å°†ç¬¬ä¸€ä¸ªå­—ç¬¦æ”¾åˆ°æœ€åï¼Œå®ç°è·‘é©¬ç¯æ•ˆæœ &#125;,400) &#125;, di()&#123; clearInterval(this.intervalId); this.intervalId=null;//æ¸…æ¥šå®šæ—¶å™¨åéœ€è¦é‡æ–°æŠŠinternalIdè®¾ä¸ºnull &#125; &#125; &#125;)&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 5: å¸¸ç”¨æŒ‡ä»¤5.1 v-forçš„å››ç§ä½¿ç”¨æ–¹å¼ å¾ªç¯æ•°ç»„ 1234567891011121314151617&lt;div id=&quot;app&quot;&gt; &lt;p v-for=&quot;item in list&quot;&gt; &#123;&#123;item&#125;&#125; &lt;/p&gt; &lt;p v-for=&quot;(item,index) in list&quot;&gt; &#123;&#123;item+&quot;-----&quot;+index&#125;&#125; &lt;/p&gt;&lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; list:[1,2,3,4,5] &#125;, &#125;)&lt;/script&gt; å¾ªç¯å¯¹è±¡æ•°ç»„ 1234567891011121314151617181920&lt;div id=&quot;app&quot;&gt; &lt;p v-for=&quot;item in list&quot;&gt; &#123;&#123;item.id&#125;&#125;--&#123;&#123;item.name&#125;&#125; &lt;/p&gt; &lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; list:[ &#123;id: 1, name :&#x27;zs1&#x27;&#125;, &#123;id: 2, name :&#x27;zs2&#x27;&#125;, &#123;id: 3, name :&#x27;zs3&#x27;&#125;, &#123;id: 4, name :&#x27;zs4&#x27;&#125;, ] &#125;, &#125;)&lt;/script&gt; å¾ªç¯å¯¹è±¡ 12345678910111213141516171819&lt;div id=&quot;app&quot;&gt; &lt;p v-for=&quot;(val,key,index) in user&quot;&gt; &#123;&#123;val&#125;&#125;--&#123;&#123;key&#125;&#125;--&#123;&#123;index&#125;&#125; &lt;/p&gt; &lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; user:&#123; id:1, name:&#x27;tuoni&#x27;, gender:&#x27;nan&#x27; &#125; &#125;, &#125;)&lt;/script&gt; è¿­ä»£æ•°å­— 12345678910111213&lt;div id=&quot;app&quot;&gt; &lt;!--inåé¢å¯ä»¥ä½¿æ•°ç»„ï¼Œå¯¹è±¡æ•°ç»„ï¼Œå¯¹è±¡ï¼Œè¿˜å¯ä»¥ä½¿æ•°å­—ã€‚è‹¥ä¸ºæ•°å­—ï¼Œcountä»1å¼€å§‹--&gt; &lt;p v-for=&quot;count in 10&quot;&gt; ç¬¬&#123;&#123;count&#125;&#125;æ¬¡å¾ªç¯ &lt;/p&gt; &lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123;&#125;, &#125;)&lt;/script&gt; æ³¨æ„ï¼šcountä»1å¼€å§‹è®¡æ•° v-forå¾ªç¯ä¸­keyå±æ€§çš„ä½¿ç”¨ 1234567891011121314151617181920212223242526272829303132333435363738&lt;div id=&quot;app&quot;&gt; &lt;div&gt; &lt;label&gt;Id: &lt;input type=&quot;text&quot; v-model=&quot;id&quot;&gt; &lt;/label&gt; &lt;label&gt;Name: &lt;input type=&quot;text&quot; v-model=&quot;name&quot;&gt; &lt;/label&gt; &lt;button @click=&quot;add&quot;&gt;æ·»åŠ &lt;/button&gt; &lt;/div&gt; &lt;p v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt; &lt;input type = &quot;checkbox&quot; &gt; &#123;&#123;item.id&#125;&#125;--&#123;&#123;item.name&#125;&#125; &lt;/p&gt; &lt;/div&gt;&lt;script&gt; new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; id:&#x27;&#x27;, name:&#x27;&#x27;, list:[ &#123;id:1,name:&#x27;lisi&#x27;&#125;, &#123;id:2,name:&#x27;yinzheng&#x27;&#125;, &#123;id:3,name:&#x27;zhaogao&#x27;&#125;, &#123;id:4,name:&#x27;hanfei&#x27;&#125;, &#123;id:5,name:&#x27;kongzi&#x27;&#125;, ] &#125;, methods:&#123; add()&#123; this.list.push(&#123;id:this.id,name:this.name&#125;); //this.list.unshift(&#123;id:this.id,name:this.name&#125;); &#125; &#125; &#125;)&lt;/script&gt; 5.2 v-onæŒ‡ä»¤123456789101112131415161718192021222324&lt;body&gt; &lt;script src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt; &lt;div id=&quot;app&quot;&gt; &lt;button v-on:click=&quot;show&quot;&gt;æŒ‰é’®&lt;/button&gt; &lt;/div&gt; &lt;script&gt; //è¯­æ³•ç³–ï¼šç®€å†™ const app = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; counter:0 &#125;, methods:&#123; show()&#123; alert(&#x27;Hello&#x27;); &#125; &#125; &#125;) //åŸå§‹js //1.æ‹¿buttomå…ƒç´  //2.æ·»åŠ ç›‘å¬æ—¶é—´ &lt;/script&gt;&lt;/body&gt; äº‹ä»¶ä¿®é¥°ç¬¦ .stop é˜»æ­¢å†’æ³¡//@click.stopè®¾ç½®å†å†…éƒ¨DOMã€‚ä¸ä¼šè§¦å‘@click.stopå¤–éƒ¨DOMçš„ç‚¹å‡»äº‹ä»¶ .prevent é˜»æ­¢é»˜è®¤è¡Œä¸º//@click.preventã€‚æ¯”å¦‚é˜»æ­¢aæ ‡ç­¾è·³è½¬åˆ°hrefåœ°å€ .capture æ·»åŠ äº‹ä»¶å€¾å¬å™¨å®ç°æ•è·æ¨¡å¼//ç»™å¤–å±‚DOM æ·»åŠ @click.captureï¼Œä¼šå…ˆå¤„ç†å¤–éƒ¨ç‚¹å‡»äº‹ä»¶ã€‚ .self åªå½“è‡ªèº«è¢«ç‚¹å‡»æ‰è§¦å‘äº‹ä»¶//ç»™å¤–éƒ¨DOMæ·»åŠ @click.selfï¼Œåªæœ‰ç‚¹å‡»å¤–éƒ¨DOMæ—¶æ‰èƒ½è§¦å‘å®ƒã€‚ä¹Ÿå¯é˜»æ­¢å†’æ³¡ .once åªè§¦å‘ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°ã€‚ äº‹ä»¶ä¿®é¥°ç¬¦å¯ä»¥å åŠ ä½¿ç”¨ @click.prevent.onceå…ˆåé¡ºåºæ— åŒºåˆ«ã€‚ 5.3 v-modelå¯ä»¥å®ç°è¡¨å•å…ƒç´ çš„modelä¸­çš„æ•°æ®åŒå‘ç»‘å®šã€‚v-modelåªèƒ½ç”¨åœ¨è¡¨å•å…ƒç´ ä¸­ï¼Œinput(redio, text, address, emailâ€¦),select , checkbox, textarea 1&lt;input type=&quot;text&quot; v-model=&quot;msg&quot;&gt; ç®€æ˜“è®¡ç®—å™¨æ¡ˆä¾‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;div id=&quot;app&quot;&gt; &lt;input type=&quot;text&quot; v-model=&quot;n1&quot;&gt; &lt;select v-model=&quot;opt&quot;&gt; &lt;option value=&quot;+&quot;&gt;+&lt;/option&gt; &lt;option value=&quot;-&quot;&gt;-&lt;/option&gt; &lt;option value=&quot;*&quot;&gt;*&lt;/option&gt; &lt;option value=&quot;/&quot;&gt;/&lt;/option&gt; &lt;/select&gt; &lt;input type=&quot;text&quot; v-model=&quot;n2&quot;&gt; &lt;button @click=&quot;calculate&quot;&gt;=&lt;/button&gt; &lt;input type=&quot;text&quot; v-model=&quot;result&quot;&gt;&lt;/div&gt;&lt;script&gt; const vm = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; n1:0, n2:0, result:0, opt:&#x27;+&#x27; &#125; methods:&#123; calculate()&#123; switch(this.opt)&#123; case &#x27;+&#x27;: this.result = parseInt(this.n1) + parseInt(this.n2); break; case &#x27;-&#x27;: this.result = parseInt(this.n1) - parseInt(this.n2); break; case &#x27;*&#x27;: this.result = parseInt(this.n1) * parseInt(this.n2); break; case &#x27;/&#x27;: this.result = parseInt(this.n1) / parseInt(this.n2); break; //this.result = eval(this.n1+this.opt+this.n2) //evalä¼šè§£æå­—ç¬¦ä¸²å¹¶æ‰§è¡Œ &#125; &#125; &#125; &#125;)&lt;/script&gt; 5.4 v-ifå’Œv-showçš„ä½¿ç”¨123456789101112131415161718192021222324252627282930&lt;body&gt; &lt;script src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt; &lt;div id=&quot;app&quot;&gt; &lt;button @click=&quot;flag=!flag&quot;&gt; åˆ‡æ¢ &lt;/button&gt; &lt;h3 v-if=&quot;flag&quot;&gt; è¿™æ˜¯v-ifæ§åˆ¶çš„å…ƒç´  &lt;/h3&gt; &lt;h3 v-show=&quot;flag&quot;&gt; è¿™æ˜¯v-showæ§åˆ¶çš„å…ƒç´  &lt;/h3&gt; &lt;/div&gt; &lt;script&gt; //è¯­æ³•ç³–ï¼šç®€å†™ const app = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; flag:true &#125;, methods:&#123; &#125; &#125;) //åŸå§‹js //1.æ‹¿buttomå…ƒç´  //2.æ·»åŠ ç›‘å¬æ—¶é—´ &lt;/script&gt;&lt;/body&gt; v-if:ä¼šåˆ é™¤æˆ–åˆ›å»ºå…ƒç´  //v-ifæ¶ˆè€—åˆ‡æ¢æ€§èƒ½ï¼Œå¦‚æœå…ƒç´ è®¾è®¡é¢‘ç¹çš„åˆ‡æ¢ä¸è¦ä½¿ç”¨ã€‚ v-showï¼šä¸ä¼šåˆ é™¤DOMï¼Œè€Œæ˜¯ä¿®æ”¹å…¶å¯è§å±æ€§dispaly:none //å¦‚æœå…ƒç´ å¯èƒ½æ°¸è¿œä¹Ÿä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œæœ€å¥½ä½¿ç”¨v-if 6ï¼šè¿‡æ»¤å™¨æ¦‚å¿µï¼šVue.jsä¸­å…è®¸è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œå¯ä»¥ç”¨ä½œä¸€äº›å¸¸è§çš„æ–‡æœ¬æ ¼å¼åŒ–ã€‚è¿‡æ»¤å™¨å¯ä»¥ç”¨åœ¨ä¸¤ä¸ªåœ°æ–¹ï¼šmustacheæ’å€¼å’Œv-bind 123456&lt;!--è¿‡æ»¤å™¨è°ƒç”¨æ ¼å¼ &#123;&#123;name | nameope&#125;&#125;--&gt;&lt;script&gt; //è¿‡æ»¤å™¨å®šä¹‰è¯­æ³• //è¿‡æ»¤å™¨ä¸­çš„functionï¼Œç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ°¸è¿œæ˜¯è¿‡æ»¤å™¨ç®¡é“ç¬¦ï¼ˆ|ï¼‰å‰é¢ä¼ è¿‡æ¥çš„å‚æ•° Vue.filter(&#x27;è¿‡æ»¤å™¨åç§°&#x27;,function(data)&#123;&#125;)&lt;/script&gt; æ³¨æ„:å½“å…¨å±€å’Œç§æœ‰è¿‡æ»¤å™¨ï¼Œä½¿ç”¨ç›¸åŒåç§°æ—¶ï¼Œä¼˜å…ˆè°ƒç”¨ç§æœ‰è¿‡æ»¤å™¨ 6.1 å®šä¹‰å…¨å±€è¿‡æ»¤å™¨å…¨å±€è¿‡æ»¤å™¨ï¼Œå°±æ˜¯æ‰€æœ‰çš„vmå®ä¾‹éƒ½èƒ½ç”¨ è¿‡æ»¤å™¨çš„åŸºæœ¬ä½¿ç”¨ 123456789101112131415161718192021222324252627282930&lt;body&gt;&lt;script src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&lt;div id=&quot;app&quot;&gt; &lt;p&gt; &#123;&#123; msg | msgFormat(&#x27;ç‰›é€¼&#x27;) | test&#125;&#125; &lt;/p&gt;&lt;/div&gt;&lt;script&gt; //å®šä¹‰ä¸€ä¸ªVueå…¨å±€è¿‡æ»¤å™¨ Vue.filter(&#x27;msgFormat&#x27;,function(msg, arg)&#123;//argæ˜¯msgFormatè¾“å…¥çš„å‚æ•°ã€‚ç¬¬ä¸€ä¸ªä¸ºå‚æ•°msgä¸ºé»˜è®¤çš„æ’å€¼ return msg.replace(/å‚»å­/g,arg)//æ­£åˆ™æ›¿æ¢ï¼Œgè¡¨ç¤ºå…¨éƒ¨æ›¿æ¢ &#125;) //å®šä¹‰å¤šä¸ªè¿‡æ»¤å™¨ Vue.filter(&#x27;test&#x27;,function(msg)&#123; return msg+&quot;è¿™æ˜¯ç¬¬äºŒä¸ªè¿‡æ»¤å™¨&quot; &#125;) //è¯­æ³•ç³–ï¼šç®€å†™ const app = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; msg:&#x27;ä½ æ˜¯çœŸçš„å‚»å­å“¦,äººæ˜¯å‚»å­ï¼Œè„‘è¢‹ç¬¨&#x27; &#125;, methods:&#123; &#125; &#125;)&lt;/script&gt;&lt;/body&gt; 6.2 å®šä¹‰ç§æœ‰è¿‡æ»¤å™¨123456789101112131415161718192021222324&lt;body&gt;&lt;script src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt;&lt;div id=&quot;app&quot;&gt; &lt;p&gt; &#123;&#123; msg | msgFormat(&#x27;ç‰›é€¼&#x27;) | test&#125;&#125; &lt;/p&gt;&lt;/div&gt;&lt;script&gt; //è¯­æ³•ç³–ï¼šç®€å†™ const app = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; msg:&#x27;ä½ æ˜¯çœŸçš„å‚»å­å“¦,äººæ˜¯å‚»å­ï¼Œè„‘è¢‹ç¬¨&#x27; &#125;, methods:&#123;&#125;, filters:&#123; msgFormat:function(msg, arg)&#123; return msg.replace(/å‚»å­/g,arg)//æ­£åˆ™æ›¿æ¢ï¼Œgè¡¨ç¤ºå…¨éƒ¨æ›¿æ¢ &#125; &#125; &#125;)&lt;/script&gt;&lt;/body&gt; 7ï¼šè‡ªå®šä¹‰7.1 è‡ªå®šä¹‰æŒ‰é”®ä¿®é¥°ç¬¦123&lt;label&gt;Nameï¼š&lt;input type=&quot;text&quot; v-model=&quot;name&quot; @keyup.enter=&quot;add&quot;&gt;&lt;/label&gt; @keyup:ç»‘å®šé”®ç›˜ å†…ç½®ä¿®é¥°ç¬¦.enter .tab .delete .esc .space .up .down .left .right å…¶ä»–çš„é”®å¯ä½¿ç”¨jså®šä¹‰çš„é”®ç›˜ç ã€‚æ¯”å¦‚**@keyup.113**è¡¨ç¤ºF12 ã€‚ 12345678&lt;label&gt;Nameï¼š&lt;input type=&quot;text&quot; v-model=&quot;name&quot; @keyup.f12=&quot;add&quot;&gt;&lt;/label&gt;&lt;script&gt; //è‡ªå®šä¹‰å…¨å±€æŒ‰é”®ä¿®é¥°ç¬¦ Vue.config.keyCode.f12 = 113&lt;/script&gt; 7.2 è‡ªå®šä¹‰æŒ‡ä»¤ å®šä¹‰å…¨å±€æŒ‡ä»¤ æ¯”å¦‚è‡ªå®šä¸€ä¸ªæŒ‡ä»¤v-focus 12345678910111213141516171819&lt;script&gt; //ä½¿ç”¨Vue.directive()å®šä¹‰å…¨å±€çš„æŒ‡ä»¤ //å…¶ä¸­ï¼šå‚æ•°1ï¼šæŒ‡ä»¤çš„åç§°ï¼Œå®šä¹‰çš„æ—¶å€™ï¼Œä¸è¦åŠ v-å‰ç¼€ã€‚ä½†åœ¨è°ƒç”¨çš„æ—¶å€™å¿…é¡»åœ¨æŒ‡ä»¤åç§°å‰åŠ v-å‰ç¼€ //å‚æ•°2æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡èº«ä¸Šæœ‰ä¸€äº›æŒ‡ä»¤ç›¸å…³çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥åœ¨ç‰¹å®šçš„é˜¶æ®µæ‰§è¡Œç›¸å…³æ“ä½œ Vue.directive(&#x27;focus&#x27;,&#123; bind:function(el)&#123; //æ¯å½“æŒ‡ä»¤è¢«ç»‘å®šåˆ°å…ƒç´ ä¸Šæ—¶ï¼Œä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚åªæ‰§è¡Œä¸€æ¬¡ //ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ—¶elï¼Œè¡¨ç¤ºè¢«ç»‘å®šäº†æŒ‡ä»¤çš„é‚£ä¸ªå…ƒç´ ï¼Œelæ˜¯ä¸€ä¸ªåŸç”Ÿçš„JSå¯¹è±¡ã€‚ //åœ¨å…ƒç´ åˆšç»‘å®šäº†æŒ‡ä»¤çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰æ’å…¥åˆ°DOMä¸­å»ï¼Œè¿™æ—¶è°ƒç”¨focusæ–¹æ³•æ²¡æœ‰ä½œç”¨ã€‚ //el.focus &#125;, inserted:function(el)&#123; //insertedè¡¨ç¤ºå…ƒç´ æ’å…¥åˆ°domä¸­æ—¶æ‰§è¡Œï¼Œåªæ‰§è¡Œä¸€æ¬¡ el.focus &#125;, updated:function()&#123;&#125;,//å½“vNodeæ›´æ–°çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œã€‚å¯èƒ½å¤šæ¬¡è§¦å‘ &#125;)&lt;/script&gt; .focusï¼šJSæ–¹æ³•ï¼Œå¯ä»¥å°†ç„¦ç‚¹é›†ä¸­åˆ°DOMå¯¹è±¡ä¸Šï¼Œç±»ä¼¼äºï¼Œé¼ æ ‡å•å‡»ä¸€æ¬¡è¾“å…¥æ¡†ã€‚ ä½¿ç”¨é’©å­å‡½æ•°å‚æ•° elï¼šæŒ‡ä»¤ç»‘å®šçš„å…ƒç´ ï¼Œç”¨æ¥ç›´æ¥æ“ä½œDOM bindingï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š name:æŒ‡ä»¤åç§°â€”â€”color value:æŒ‡ä»¤çš„ç»‘å®šå€¼ã€‚ä¼šè®¡ç®—æ¯”å¦‚v-color=â€1+1â€ï¼Œbinding.value=2 expression:æŒ‡ä»¤ç»‘å®šå€¼ï¼Œä¸ä¼šè®¡ç®—, binding.expression=â€™1+1â€™ 12345678910&lt;div v-color=&quot;&#x27;red&#x27;&quot;&gt; &lt;/div&gt;&lt;script&gt; Vue.directive(&#x27;color&#x27;,&#123; bind:function(el,binding)&#123; el.style.color = binding.value &#125; &#125;)&lt;/script&gt; å®šä¹‰ç§æœ‰æŒ‡ä»¤ 123456789101112131415161718&lt;script&gt; const app = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; msg:&#x27;ä½ æ˜¯çœŸçš„å‚»å­å“¦,äººæ˜¯å‚»å­ï¼Œè„‘è¢‹ç¬¨&#x27; &#125;, methods:&#123;&#125;, filters:&#123;&#125;, directives:&#123; &#x27;color&#x27;:&#123; bind:function(el,binding)&#123; el.style.color = binding.value &#125; &#125; &#125; &#125;)&lt;/script&gt; ç®€å†™ï¼š å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ—¨åœ¨bindå’Œupdateé’©å­ä¸Šåšé‡å¤åŠ¨ä½œï¼Œå¯ä»¥ç®€å†™ 1234567&lt;script&gt; directives:&#123; &#x27;color&#x27;:function(el,binding)&#123;//ç­‰åŒäºæŠŠæ–¹æ³•åŒæ—¶å†™åˆ°bindå’Œupdateä¸­ el.style.color = binding.value &#125; &#125;&lt;/script&gt; 8ï¼švue-resourceå®ç°getï¼Œpostï¼Œjsonpè¯·æ±‚vue-resourceä¾èµ–äºvueï¼Œéœ€è¦åœ¨vue.jsåå¯¼å…¥vue-resource.jsåŒ…ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;body&gt; &lt;script src=&quot;./js/vue.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;./js/vue-resource.js&quot;&gt;&lt;/script&gt; &lt;div&gt; &lt;button @click=&quot;getInfo&quot;&gt; getInfo &lt;/button&gt; &lt;button @click=&quot;postInfo&quot;&gt; getInfo &lt;/button&gt; &lt;button @click=&quot;jsonpInfo&quot;&gt; getInfo &lt;/button&gt; &lt;/div&gt; &lt;script&gt; const app = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; msg:&#x27;ä½ æ˜¯çœŸçš„å‚»å­å“¦,äººæ˜¯å‚»å­ï¼Œè„‘è¢‹ç¬¨&#x27; &#125;, methods:&#123; getInfo()&#123; this.$http.get(&#x27;http://vue.studyit.io/api/getlunbo&#x27;).then(function(result)&#123; //resultæ˜¯è¿”å›çš„ç»“æœï¼ŒåŒ…æ‹¬å¤´éƒ¨ã€æ•°æ®ç­‰ console.log(result.body) &#125;), postInfo()&#123; //æ‰‹åŠ¨å‘èµ·çš„postè¯·æ±‚æ²¡æœ‰è¡¨å•æ•°æ® //é€šè¿‡postæ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œè®¾ç½®æäº¤å†…å®¹ç±»å‹ä¸ºæ™®é€šè¡¨å•æ ¼å¼ã€‚ this.$http.post(&#x27;http://vue.studyit.io/api/post&#x27;,&#123;&#125;,&#123;emulateJSON:true&#125;).then(result=&gt;&#123; console.log(result.body) &#125;), jsonpInfo()&#123; this.$http.jsonp(&#x27;http://vue.studyit.io/api/jsonp&#x27;).then(result=&gt;&#123; console.log(result.body) &#125;) &#125; &#125; &#125; &#125; &#125;) &lt;/script&gt;&lt;/body&gt;","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"Vuejs","slug":"Vuejs","permalink":"https://sci.ci/tags/Vuejs/"}]},{"title":"ä¸ªäººæ¨èçš„ä¸€äº›ä¼˜ç§€çš„å®‰å“å¼€æºåº“","slug":"æ”¶é›†ä¸€äº›ä¼˜ç§€çš„å®‰å“å¼€æºåº“","date":"2020-02-01T14:54:53.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/02/01/æ”¶é›†ä¸€äº›ä¼˜ç§€çš„å®‰å“å¼€æºåº“/","link":"","permalink":"https://sci.ci/2020/02/01/%E6%94%B6%E9%9B%86%E4%B8%80%E4%BA%9B%E4%BC%98%E7%A7%80%E7%9A%84%E5%AE%89%E5%8D%93%E5%BC%80%E6%BA%90%E5%BA%93/","excerpt":"","text":"0ï¼šå¼•è¨€æœ€è¿‘è‡ªå·±åœ¨å†™ä¸€ä¸ªå®‰å“è½¯ä»¶ï¼ŒæŠŠæˆ‘åšçš„sci.ciè¿™ä¸ªç½‘ç«™æ¥å…¥åˆ°ç§»åŠ¨ç«¯æ¥ã€‚åœ¨å†™è¿™ä¸ªè½¯ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†éå¸¸å¤šä¼˜ç§€çš„å¼€æºåº“ï¼Œè¿™äº›åº“ç®€åŒ–äº†æˆ‘å¾ˆå¤šå·¥ä½œï¼Œåœ¨æ­¤å°†ä»–ä»¬åˆ†äº«å‡ºæ¥ã€‚ 1ï¼šKongzue Dialog V3è‡ªå®šä¹‰Toastå¯¹è¯æ¡†ï¼Œä»¿IOSè®¾è®¡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/kongzue/DialogV3 1.1 å¼•å…¥1.1.1Support ç‰ˆæœ¬Mavenä»“åº“ï¼š 123456&lt;dependency&gt; &lt;groupId&gt;com.kongzue.dialog_v3&lt;&#x2F;groupId&gt; &lt;artifactId&gt;dialog&lt;&#x2F;artifactId&gt; &lt;version&gt;3.1.8&lt;&#x2F;version&gt; &lt;type&gt;pom&lt;&#x2F;type&gt;&lt;&#x2F;dependency&gt; Gradleï¼š åœ¨dependencies{}ä¸­æ·»åŠ å¼•ç”¨ï¼š 1implementation &#39;com.kongzue.dialog_v3:dialog:3.1.8&#39; 1.2 åŠŸèƒ½1.2.1 åŸºæœ¬å¯¹è¯æ¡† 1.2.2 è¾“å…¥å¯¹è¯æ¡† 1.2.3ç­‰å¾…æç¤ºå¯¹è¯æ¡† 1.2.4åº•éƒ¨èœå• 1.2.5é€šçŸ¥ 1.2.6åˆ†äº«å¯¹è¯æ¡† 1.2.7å…¨å± 2ï¼šYCVideoPlayerè§†é¢‘æ’­æ”¾å™¨å°è£…åº“ï¼Œä»¿çˆ±å¥‡è‰ºã€ä¼˜é…·ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/yangchong211/YCVideoPlayer 2.1 å¼•ç”¨åº”ç”¨build.gradleä¸­å¼•å…¥ 1compile &#39;cn.yc:YCVideoPlayerLib:2.4.9&#39; 2.2 åŠŸèƒ½AåŸºç¡€åŠŸèƒ½ A.1.1 èƒ½å¤Ÿè‡ªå®šä¹‰è§†é¢‘åŠ è½½loadingç±»å‹ï¼Œè®¾ç½®è§†é¢‘æ ‡é¢˜ï¼Œè®¾ç½®è§†é¢‘åº•éƒ¨å›¾ç‰‡ï¼Œè®¾ç½®æ’­æ”¾æ—¶é•¿ç­‰åŸºç¡€åŠŸèƒ½ A.1.2 å¯ä»¥åˆ‡æ¢æ’­æ”¾å™¨çš„è§†é¢‘æ’­æ”¾çŠ¶æ€ï¼Œæ’­æ”¾é”™è¯¯ï¼Œæ’­æ”¾æœªå¼€å§‹ï¼Œæ’­æ”¾å¼€å§‹ï¼Œæ’­æ”¾å‡†å¤‡ä¸­ï¼Œæ­£åœ¨æ’­æ”¾ï¼Œæš‚åœæ’­æ”¾ï¼Œæ­£åœ¨ç¼“å†²ç­‰ç­‰çŠ¶æ€ A.1.3 å¯ä»¥è‡ªç”±è®¾ç½®æ’­æ”¾å™¨çš„æ’­æ”¾æ¨¡å¼ï¼Œæ¯”å¦‚ï¼Œæ­£å¸¸æ’­æ”¾ï¼Œå…¨å±æ’­æ”¾ï¼Œå’Œå°å±å¹•æ’­æ”¾ã€‚å…¶ä¸­å…¨å±æ’­æ”¾æ”¯æŒæ—‹è½¬å±å¹•ã€‚ A.1.4 å¯ä»¥æ”¯æŒå¤šç§è§†é¢‘æ’­æ”¾ç±»å‹ï¼Œæ¯”å¦‚ï¼ŒåŸç”Ÿå°è£…è§†é¢‘æ’­æ”¾å™¨ï¼Œè¿˜æœ‰åŸºäºijkPlayerå°è£…çš„æ’­æ”¾å™¨ã€‚ A.1.5 å¯ä»¥è®¾ç½®æ˜¯å¦éšè—æ’­æ”¾éŸ³é‡ï¼Œæ’­æ”¾è¿›åº¦ï¼Œæ’­æ”¾äº®åº¦ç­‰ï¼Œå¯ä»¥é€šè¿‡æ‹–åŠ¨seekBaræ”¹å˜è§†é¢‘è¿›åº¦ã€‚è¿˜æ”¯æŒè®¾ç½®nç§’åä¸æ“ä½œåˆ™éšè—å¤´éƒ¨å’Œé¡¶éƒ¨å¸ƒå±€åŠŸèƒ½ A.1.6 å¯ä»¥è®¾ç½®ç«–å±æ¨¡å¼ä¸‹å…¨å±æ¨¡å¼å’Œæ¨ªå±æ¨¡å¼ä¸‹çš„å…¨å±æ¨¡å¼ï¼Œæ–¹ä¾¿å¤šç§ä½¿ç”¨åœºæ™¯ A.1.7 topå’Œbottomé¢ç‰ˆæ¶ˆå¤±å’Œæ˜¾ç¤ºï¼šç‚¹å‡»è§†é¢‘ç”»é¢ä¼šæ˜¾ç¤ºã€éšè—æ“ä½œé¢æ¿ï¼›æ˜¾ç¤ºåä¸æ“ä½œä¼š5ç§’åè‡ªåŠ¨æ¶ˆå¤±ã€ä¹Ÿå¯ä»¥è®¾ç½®ã€‘ Bé«˜çº§åŠŸèƒ½ B.1.1 æ”¯æŒä¸€éæ’­æ”¾ä¸€éç¼“å†²çš„åŠŸèƒ½ï¼Œå…¶ä¸­ç¼“å†²åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€ç§æ˜¯æ’­æ”¾è¿‡ç¨‹ä¸­ç¼“å†²ï¼Œç¬¬äºŒç§æ˜¯æš‚åœè¿‡ç¨‹ä¸­ç¼“å†² B.1.2 åŸºäºijkPlayerçš„å°è£…æ’­æ”¾å™¨ï¼Œæ”¯æŒå¤šç§æ ¼å¼è§†é¢‘æ’­æ”¾ B.1.3 å¯ä»¥è®¾ç½®æ˜¯å¦è®°å½•æ’­æ”¾ä½ç½®ï¼Œè®¾ç½®æ’­æ”¾é€Ÿåº¦ï¼Œè®¾ç½®å±å¹•æ¯”ä¾‹ B.1.4 æ”¯æŒæ»‘åŠ¨æ”¹å˜éŸ³é‡ã€å±å¹•å³è¾¹ã€‘ï¼Œæ”¹å˜å±å¹•äº®åº¦ã€å±å¹•å·¦è¾¹ã€‘ï¼Œå±å¹•åº•æµ‹å·¦å³æ»‘åŠ¨è°ƒèŠ‚è¿›åº¦ B.1.5 æ”¯æŒlisté¡µé¢ä¸­è§†é¢‘æ’­æ”¾ï¼Œæ»šåŠ¨åæš‚åœæ’­æ”¾ï¼Œæ’­æ”¾å¯ä»¥è‡ªç”±è®¾ç½®æ˜¯å¦è®°å½•çŠ¶æ€ã€‚å¹¶ä¸”è¿˜æ”¯æŒåˆ é™¤è§†é¢‘æ’­æ”¾ä½ç½®çŠ¶æ€ã€‚ B.1.6 åˆ‡æ¢æ¨ªç«–å±ï¼šåˆ‡æ¢å…¨å±æ—¶ï¼Œéšè—çŠ¶æ€æ ï¼Œæ˜¾ç¤ºè‡ªå®šä¹‰top(æ˜¾ç¤ºç”µé‡)ï¼›ç«–å±æ—¶æ¢å¤åŸæœ‰çŠ¶æ€ B.1.7 æ”¯æŒåˆ‡æ¢è§†é¢‘æ¸…æ™°åº¦æ¨¡å¼ B.1.8 æ·»åŠ é”å±åŠŸèƒ½ï¼Œç«–å±ä¸æä¾›é”å±æŒ‰é’®ï¼Œæ¨ªå±å…¨å±æ—¶æ˜¾ç¤ºï¼Œå¹¶ä¸”é”å±æ—¶ï¼Œå±è”½æ‰‹åŠ¿å¤„ç† Cæ‹“å±•åŠŸèƒ½ã€è¿™å—æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©æ˜¯å¦éœ€è¦ä½¿ç”¨ï¼Œä¸€èˆ¬è§†é¢‘ä»˜è´¹Appä¼šæœ‰è¿™ä¸ªå·¥é¥ã€‘ C1äº§å“éœ€æ±‚ï¼šç±»ä¼¼ä¼˜é…·ï¼Œçˆ±å¥‡è‰ºè§†é¢‘æ’­æ”¾å™¨éƒ¨åˆ†é€»è¾‘ã€‚æ¯”å¦‚å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ä¹Ÿæ²¡æœ‰çœ‹è§†é¢‘æƒé™ï¼Œåˆ™æç¤ºè¯•çœ‹è§†é¢‘[è‡ªå®šä¹‰å¸ƒå±€]ï¼›å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ä½†æ˜¯æœ‰çœ‹è§†é¢‘æƒé™ï¼Œåˆ™æ­£å¸¸è§‚çœ‹ï¼›å¦‚æœç”¨æˆ·ç™»å½•ï¼Œä½†æ˜¯æ²¡æœ‰å……å€¼ä¼šå‘˜ï¼Œéƒ¨åˆ†éœ€è¦æƒé™è§†é¢‘åˆ™è¿›å…¥è¯•çœ‹æ¨¡å¼ï¼Œè¯•çœ‹ç»“æŸåå¼¹å‡ºå……å€¼ä¼šå‘˜ç•Œé¢ï¼›å¦‚æœç”¨æˆ·ä½™é¢ä¸è¶³ï¼Œæ¯”å¦‚ä½™é¢åªæœ‰99å…ƒï¼Œä½†æ˜¯è§†é¢‘è§‚çœ‹è¦199å…ƒï¼Œåˆ™åˆæœ‰å…¶ä»–æç¤ºã€‚ C2è‡ªèº«éœ€æ±‚ï¼šæ¯”å¦‚å°è£…å¥½äº†è§†é¢‘æ’­æ”¾åº“ï¼Œé‚£ä¹ˆç‚¹å‡»è§†é¢‘ä¸Šç™»å½•æŒ‰é’®åˆ™è·³åˆ°ç™»å½•é¡µé¢ï¼›ç‚¹å‡»å……å€¼ä¼šå‘˜é¡µé¢ä¹Ÿè·³åˆ°å……å€¼é¡µé¢ã€‚è¿™ä¸ªé€šè¿‡å®šä¹‰æ¥å£ï¼Œå¯ä»¥è®©ä½¿ç”¨è€…é€šè¿‡æ–¹æ³•è°ƒç”¨ï¼Œçµæ´»å¤„ç†ç‚¹å‡»äº‹ä»¶ã€‚ C.1.1 å¯ä»¥è®¾ç½®è¯•çœ‹æ¨¡å¼ï¼Œè®¾ç½®è¯•çœ‹æ—¶é•¿ã€‚è¯•çœ‹ç»“æŸåå°±æç¤ºç™»å½•æˆ–è€…å……å€¼â€¦â€¦ C.1.2 å¯¹äºè®¾ç½®è§†é¢‘çš„å®½é«˜ï¼Œå»ºè®®è®¾ç½®æˆ4ï¼š3æˆ–è€…16ï¼š9æˆ–è€…å¸¸ç”¨æ¯”ä¾‹ï¼Œå¦‚æœä¸æ˜¯å¸¸ç”¨æ¯”ä¾‹ï¼Œåˆ™å¯èƒ½ä¼šæœ‰é»‘è¾¹ã€‚å…¶ä¸­é»‘è¾¹çš„èƒŒæ™¯å¯ä»¥è®¾ç½® C.1.3 å¯ä»¥è®¾ç½®æ’­æ”¾æœ‰æƒé™çš„è§†é¢‘æ—¶çš„å„ç§æ–‡å­—æè¿°ï¼Œè€Œæ²¡æœ‰æŠŠå®ƒå†™åœ¨å°è£…åº“ä¸­ï¼Œä½¿ç”¨è€…è‡ªå·±è®¾å®š C.1.4 é”å®šå±å¹•åŠŸèƒ½ Då¾…æ·»åŠ åŠŸèƒ½ D.1.1 å¯ä»¥æ”¯æŒå±å¹•æˆªå›¾åŠŸèƒ½ï¼Œè§†é¢‘æ·»åŠ æ°´å°æ•ˆæœ D.1.2 æ”¯æŒå¼¹å¹•åŠŸèƒ½ D.1.3 åæœŸå¾…å®šï¼Œè§†é¢‘æ‹–æ‹½ 3ï¼šAndroid-SpinKitåŠ è½½ä¸­æ ·å¼ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://ybq.github.io/Android-SpinKit å¦‚æœç¬¬ä¸€ç« çš„kongzueç­‰å¾…å¯¹è¯æ¡†è¿˜ä¸è¶³ä»¥æ»¡è¶³ä¸ªæ€§åŒ–éœ€æ±‚ï¼Œé‚£è¿™ä¸ªåŠ è½½åº“åº”è¯¥è¶³å¤Ÿäº†ã€‚ 3.1 å¼•ç”¨123dependencies &#123; implementation &#39;com.github.ybq:Android-SpinKit:1.4.0&#39;&#125; 3.2 æ ·å¼ 4ï¼šAgentWebåŸºäºå®‰å“åŸç”ŸWebviewçš„æµè§ˆå™¨ï¼Œè‡ªåŠ¨å®ç°è§†é¢‘å…¨å±æ’­æ”¾ï¼ŒåŠ å…¥äº†ç½‘é¡µåŠ è½½è¿›åº¦æ¡ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Justson/AgentWeb å¼•å…¥Gradle 123api &#39;com.just.agentweb:agentweb:4.1.2&#39; &#x2F;&#x2F; (å¿…é€‰)api &#39;com.just.agentweb:filechooser:4.1.2&#39;&#x2F;&#x2F; (å¯é€‰)api &#39;com.download.library:Downloader:4.1.2&#39;&#x2F;&#x2F; (å¯é€‰) æ•ˆæœå›¾","categories":[{"name":"å®‰å“ç¼–ç¨‹","slug":"å®‰å“ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E5%AE%89%E5%8D%93%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"å®‰å“å¼€æºåº“","slug":"å®‰å“å¼€æºåº“","permalink":"https://sci.ci/tags/%E5%AE%89%E5%8D%93%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"åˆ›å»ºä¸€ä¸ªç®€å•çš„APIé¡¹ç›®","slug":"åˆ›å»ºä¸€ä¸ªç®€å•çš„APIé¡¹ç›®","date":"2020-01-26T14:01:17.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/01/26/åˆ›å»ºä¸€ä¸ªç®€å•çš„APIé¡¹ç›®/","link":"","permalink":"https://sci.ci/2020/01/26/%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84API%E9%A1%B9%E7%9B%AE/","excerpt":"","text":"0ï¼šç®€ä»‹APIï¼ˆåº”ç”¨ç¨‹åºæ¥å£ï¼‰ï¼Œæˆ‘ç°åœ¨æ­£åœ¨åšä¸€ä¸ªå®‰å“é¡¹ç›®ï¼Œéœ€è¦å°†mysqlæ•°æ®åº“é‡Œçš„æ•°æ®ï¼Œé€šè¿‡apiæ¥å£ä»¥jsonæ ¼å¼å¯¼å‡ºï¼Œç„¶åå†å®‰å“ä¸Šè§£æå’Œä½¿ç”¨ã€‚ APIé¡¹ç›®åŸºäºphpæœåŠ¡å™¨å’Œlaravelæ¡†æ¶ï¼Œè¿™ä¸ªæ¡†æ¶å¬è¯´æ¯”è¾ƒé€‚åˆåšapiï¼Œå½“ç„¶ç”±äºé¡¹ç›®ç®€å•ï¼Œæˆ‘åšçš„APIçœå»äº†å¾ˆå¤šéªŒè¯ç›¸å…³çš„å†…å®¹ï¼Œæ™®é€šçš„æ¡†æ¶ç±»ä¼¼thinkphpä¹Ÿèƒ½åšï¼Œè¿™é‡Œç”¨laravelä¸ºäº†æ–¹ä¾¿åæœŸè¡¥è¶³APIçš„ç›¸å…³å†…å®¹ã€‚ 1ï¼šåŸŸåå’ŒLAMPä¸“ç”¨äºapiçš„åŸŸåå»ºè®®é‡‡ç”¨ç±»ä¼¼äºapi.example.comè¿™æ ·çš„ä¸‰çº§åŸŸåï¼ŒLAMPè¿™å››ä¸ªç½‘ç«™æœåŠ¡å™¨æ˜¯å¿…é¡»çš„ã€‚ 2ï¼šlaravelå®‰è£…ä½¿ç”¨å®å¡”é¢æ¿å®‰è£…å¥½çš„phpï¼Œå·²ç»è‡ªå¸¦composerï¼Œè‹¥æ²¡æœ‰composeréœ€è¦å…ˆå®‰è£…ã€‚ æ²¡æœ‰æ•°æ®åº“éœ€è¦å…ˆåˆ›å»ºæ•°æ®åº“ã€‚ ç„¶ååœ¨ç½‘ç«™ç›®å½•ä¸‹ä¾‹å¦‚/var/wwwï¼Œè¿è¡ŒæŒ‡ä»¤ composer create-project laravel/laravel MyProject &quot;5.1.*&quot; å®‰è£…laravelã€‚æ ¹æ®æç¤ºè¿æ¥æ•°æ®åº“ã€‚ 3ï¼šæ–°å»ºlaravelæ§åˆ¶å™¨æ§åˆ¶å™¨å°±æ˜¯å½“æˆ‘ä»¬è®¿é—®urlæ—¶ï¼ŒæœåŠ¡å™¨å°†è¿è¡Œæ§åˆ¶å™¨å†…çš„ç¨‹åºï¼Œç„¶åè¿”å›ç»™æµè§ˆå™¨ä¸€ä¸ªå†…å®¹ï¼Œè¿™ä¸ªå†…å®¹å¯ä»¥æ˜¯htmlä»£ç ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ—¶xmlæˆ–è€…jsonã€‚ åœ¨laravelå®‰è£…ç›®å½•è¿è¡Œphp artisan make:controller Api/LinkController æ–°å»ºä¸€ä¸ªåå«LinkControlleræ§åˆ¶å™¨ï¼Œæ­¤æ—¶åœ¨å°†åœ¨app/Http/Controllers/Apiç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªLinkController.php`æ–‡ä»¶ã€‚æ‰“å¼€æ–‡ä»¶ç¼–è¾‘æˆ‘ä»¬æƒ³è¦çš„ç¨‹åºã€‚ 123456789101112131415161718192021222324252627&lt;?php]()namespace App\\Http\\Controllers\\Api;use Illuminate\\Http\\Request;use App\\Http\\Controllers\\Controller;use DB;class LinkController extends Controller&#123; //æ–¹æ³•ä¸€ï¼Œä»æ•°æ®åº“è·å–æŸä¸€æ•°æ® //urlä¸­æœ‰å‚æ•°æƒ…å†µï¼Œä¾‹å¦‚https://api.example.com/linkcontroller/searchlinks?type=ç”µå½±&amp;kw=ä¸­å›½æœºé•¿ public function searchlinks(Request $request)&#123; $type=$request-&gt;input(&#x27;type&#x27;);//ä½¿ç”¨requestè·å–urlä¸­å‚æ•° $kw=$request-&gt;input(&#x27;kw&#x27;); $linksresult = DB::table(&#x27;my_zhlinks&#x27;)-&gt;where(&#x27;type&#x27;, $type)-&gt;get();//ä»å·²è¿æ¥çš„æ•°æ®åº“ï¼Œæ‰¾åˆ°è¡¨å•â€œmy_zhlinksâ€ï¼Œè·å–typeå’Œå¸¦å…¥å‚æ•°typeç›¸åŒçš„é¡¹ã€‚å°†è¿™äº›æ•°æ®ä¿å­˜åˆ°linkresultå˜é‡ä¸­ã€‚ //æ•°æ®åº“è¡¨å•my_zhlinksæ˜¯æˆ‘è‡ªå·±åˆ›å»ºçš„ã€‚ return json_encode($linksresult);//è¿”å›ä¸€ä¸ªjsonæ•°ç»„ï¼Œä¸æ˜¯jsonå¯¹è±¡ã€‚ &#125; //æ–¹æ³•äºŒï¼Œurlä¸­ä¸å¸¦å‚æ•° public function alltype()&#123; $alltypes=DB::table(&#x27;my_zhpreg&#x27;)-&gt;select(&#x27;type&#x27;)-&gt;get(); return json_encode($alltypes); &#125;&#125; 4ï¼šä¿®æ”¹è·¯ç”±åœ¨ä¸Šé¢æ³¨é‡Šä¸­æˆ‘ä»¬çœ‹åˆ°ï¼Œè¦é€šè¿‡searchlinksæ–¹æ³•è¿”å›ä¸€ä¸ªjsonæ•°ç»„ï¼Œurlä¸ºhttps://api.example.com/linkcontroller/searchlinks?type=ç”µå½±&amp;kw=ä¸­å›½æœºé•¿éå¸¸çš„é•¿ï¼Œè€Œä¸”ä¸åˆ©äºæˆ‘ä»¬åæœŸç®¡ç†apiç‰ˆæœ¬ã€‚ åœ¨routesç›®å½•ä¸‹çš„api.phpæ˜¯ä¸“é—¨ç”¨æ¥å†™Apiæ¥å£çš„è·¯ç”±ï¼Œæ‰“å¼€å®ƒ 123456789101112131415161718&lt;?php]()use Illuminate\\Http\\Request;/*|--------------------------------------------------------------------------| API Routes|--------------------------------------------------------------------------|| Here is where you can register API routes for your application. These| routes are loaded by the RouteServiceProvider within a group which| is assigned the &quot;api&quot; middleware group. Enjoy building your API!|*/Route::namespace(&#x27;Api&#x27;)-&gt;prefix(&#x27;v1&#x27;)-&gt;group(function()&#123; Route::get(&#x27;search&#x27;,&#x27;LinkController@searchlinks&#x27;)-&gt;name(&#x27;search.links&#x27;); Route::get(&#x27;type&#x27;,&#x27;LinkController@alltype&#x27;)-&gt;name(&#x27;type.all&#x27;);&#125;); namespace(&#39;Api&#39;)æŒ‡å®šäº†å‘½åç©ºé—´ï¼Œæ§åˆ¶å™¨å‘½åç©ºé—´åªè¦ä¸æ˜¯åœ¨App\\Http\\Controllersä¸‹ï¼Œéƒ½éœ€è¦è¿›ä¸€æ­¥æŒ‡æ˜å…¶å‘½åç©ºé—´ï¼Œæ¯”å¦‚LinkControllerå‘½åç©ºé—´ä¸ºApp\\Http\\Controllers\\Apiã€‚prefixä¸ºå‰ç¼€ï¼Œæˆ‘ä»¬ç”¨æ¥æ§åˆ¶ç‰ˆæœ¬ï¼Œgroupè¡¨ç¤ºï¼Œåé¢çš„åœ°å€æ‹¥æœ‰ç›¸åŒçš„å‘½åç©ºé—´å’Œå‰ç¼€ã€‚ä¿®æ”¹åçš„å¸¦å‚æ•°urlå˜ä¸ºhttps://api.example.com/api/v1/search?type=ç”µå½±&amp;kw=ä¸­å›½æœºé•¿ ä¸å¸¦å‚æ•°çš„urlå˜ä¸ºhttps://api.example.com/api/v1/type 5ï¼šæ€»ç»“ä¿®æ”¹è·¯ç”±åï¼Œé€šè¿‡è®¿é—®é“¾æ¥https://api.example.com/api/v1/search?type=ç”µå½±&amp;kw=ä¸­å›½æœºé•¿å°±å¯ä»¥è·å¾—ä»æ•°æ®åº“è·å–çš„å€¼äº†ã€‚ ä¸‹ç¯‡è®²è§£ä½¿ç”¨okhttpå’Œgsonè·å–å¹¶è§£æapié‡Œçš„jsonæ•°ç»„ã€‚","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"API","slug":"API","permalink":"https://sci.ci/tags/API/"}]},{"title":"ä½¿ç”¨Magentoåˆ›å»ºç”µå•†ç½‘ç«™è®°å½•","slug":"ä½¿ç”¨Magentoåˆ›å»ºç”µå•†ç½‘ç«™è®°å½•","date":"2020-01-24T15:00:48.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2020/01/24/ä½¿ç”¨Magentoåˆ›å»ºç”µå•†ç½‘ç«™è®°å½•/","link":"","permalink":"https://sci.ci/2020/01/24/%E4%BD%BF%E7%94%A8Magento%E5%88%9B%E5%BB%BA%E7%94%B5%E5%95%86%E7%BD%91%E7%AB%99%E8%AE%B0%E5%BD%95/","excerpt":"","text":"0ï¼šç»ªè®ºå®‰è£…æ•™ç¨‹ä½¿ç”¨magentoä¸­å›½å®˜ç½‘çš„æç¤ºï¼Œæ•™ç¨‹åŸåœ°å€ä¸ºhttps://www.magentochina.org/blog/magento-guide/install-magento-2-1-with-composer.html æˆ‘æ˜¯ç”¨composerå®‰è£…magentoï¼Œcomposeråœ¨å®å¡”é¢æ¿å®‰è£…phpæ—¶å·²é»˜è®¤å®‰è£…äº†ï¼Œæ‰€ä»¥èƒ½ç›´æ¥ç”¨ã€‚è‹¥æœªä½¿ç”¨å®å¡”é¢æ¿éœ€ä¼˜å…ˆå®‰è£…composerã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸‹è½½è¿è¡Œcomposerã€‚è‹¥å·²æœ‰åˆ™è·³è¿‡ã€‚ curl -sS https://getcomposer.org/installer | php ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°†composeræ·»åŠ è‡³å…¨å±€ï¼Œä»¥ä¾¿åœ¨ä»»æ„ç›®å½•ä¸‹ä½¿ç”¨composeræŒ‡ä»¤ mv composer.phar /usr/local/bin/composer 1ï¼šphpç¯å¢ƒé…ç½®ä¸€ä¸‹å†…å®¹çš„æ“ä½œï¼Œåœ¨å®å¡”æ§åˆ¶é¢æ¿ï¼Œè½¯ä»¶å•†åº—ï¼Œè¿è¡Œç¯å¢ƒï¼Œphpè®¾ç½®é‡Œèƒ½æ‰¾åˆ° Magentoå®‰è£…æ—¶PHPç¯å¢ƒéœ€è¦æ£€æŸ¥ä»¥ä¸‹æ‰©å±•ï¼š PHP Extension curl. PHP Extension iconv. PHP Extension mbstring. PHP Extension dom. PHP Extension hash. PHP Extension openssl. PHP Extension xmlwriter. PHP Extension pcre. PHP Extension gd. PHP Extension bcmath. PHP Extension simplexml. PHP Extension spl. PHP Extension xsl. PHP Extension intl. PHP Extension ctype. PHP Extension pdo_mysql. PHP Extension soap. PHP Extension zip. PHP Extension phar. PHP Extension libxml. å–æ¶ˆå‡½æ•°ç¦ç”¨ openlogã€syslogã€symlinkã€execç­‰ è¿˜æœ‰äº›å‡½æ•°éœ€è¦å–æ¶ˆç¦ç”¨ï¼Œå¯æ ¹æ®å®‰è£…æ—¶çš„é”™è¯¯æç¤ºæ“ä½œ 2ï¼šå¼€å§‹å®‰è£…æ‰“å¼€xshellæˆ–å…¶ä»–sshé¢æ¿ï¼Œåœ¨ä½¿ç”¨cdæŒ‡ä»¤ï¼Œè¿›å…¥ç½‘ç«™æ ¹ç›®å½•ï¼Œä¾‹å¦‚/var/wwwï¼Œè¾“å…¥æŒ‡ä»¤ composer create-project --repository-url=https://repo.magento.com/ magento/project-community-edition magento2 å…¶ä¸­magento2æŒ‡ï¼Œç½‘ç«™å°†è¢«æ”¾åœ¨/var/www/magento2ç›®å½•ä¸‹ï¼Œåˆ é™¤æ­¤å­—æ®µï¼Œmagentoä¼šæ”¾åœ¨/var/wwwç›®å½•ä¸‹ã€‚ æç¤ºè¾“å…¥usernameå’Œpasswordã€‚ é¦–å…ˆæ‚¨å…ˆç™»å½•Magentoçš„å®˜æ–¹å•†åº—ã€‚ ç‚¹å‡»â€œSign Inâ€ç™»å½•åˆ°æ‚¨çš„è´¦å·ï¼Œå¦‚æœè¿˜æ²¡æœ‰è´¦å·,éœ€è¦å…ˆæ³¨å†Œã€‚ å½“ç™»å½•ä¹‹åï¼Œç‚¹å‡»â€My Access Keysâ€.å¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥ä½¿ç”¨CTRL+Fé”®è¿›è¡Œæœç´¢. ç‚¹å‡»â€œCreate a New Access Keyâ€åï¼Œæ‰¾åˆ°â€œGenerate Newâ€,ä¸ºè‡ªå·±çš„Magento2ç”Ÿæˆä¸€ä¸ªKey. è®°å½•ä¸‹ç”Ÿæˆçš„Public keyåŠPrivate key å…¶ä¸­public keyæ˜¯ç”¨æˆ·åï¼Œprivate keyæ˜¯å¯†ç ã€‚ å®Œæˆå®‰è£…ååœ¨ç½‘ç«™ç›®å½•ä¸‹å°±æ²¡èƒ½çœ‹åˆ°magento2ç›®å½•äº†ï¼Œç”±äºmagentoéœ€è¦æ–‡ä»¶å†™æƒé™ã€‚ä½¿ç”¨composerå®‰è£…æ—¶ï¼Œmagetnoæ–‡ä»¶çš„æ‰€æœ‰è€…æ˜¯è¿è¡ŒæŒ‡ä»¤æ—¶çš„ç”¨æˆ·ï¼Œä¹Ÿå°±æ˜¯è¯´é€šå¸¸æ˜¯rootã€‚é‚£ä¹ˆå‡å®šç½‘ç«™ç”¨æˆ·æ˜¯wwwï¼Œåˆ™åœ¨è¿è¡Œå®‰è£…ç¨‹åºæ—¶ï¼Œwwwå°†æ— æ³•å¯¹æ–‡ä»¶è¿›è¡Œå†™æ“ä½œï¼Œå› æ­¤ï¼Œéœ€è¦æ›´æ”¹æ–‡ä»¶æƒé™ï¼Œæˆ–è€…æ‰€æœ‰è€…ã€‚ã€‚ä¸å»ºè®®å°†æ–‡ä»¶æƒé™ä¿®æ”¹ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…å³å¯ã€‚ã€‚ ä½¿ç”¨å®å¡”é¢æ¿å¯ç›´æ¥åœ¨æ–‡ä»¶é‡Œä¿®æ”¹æ‰€æœ‰è€…ã€‚xshellä½¿ç”¨chmodæŒ‡ä»¤ï¼Œè¯¦ç»†æ–¹æ³•è¯·è‡ªè¡ŒæŸ¥é˜…ã€‚è¯·æ³¨æ„ï¼šæ–‡ä»¶æ‰€æœ‰è€…ä¸æ›´æ”¹ï¼Œæ‰“å¼€http://åŸŸå/magento2ï¼Œæ— æ³•è¿›å…¥å®‰è£…ç•Œé¢ ä¿®æ”¹å®Œæ¯•åå°±å¯ä»¥ç›´æ¥è¾“å…¥http://åŸŸå/magento2/setupè¿›è¡Œå®‰è£…äº†ã€‚å¦‚æœä½ é‡åˆ°è¿™ä¸ªé—®é¢˜ é•¿æ—¶é—´å®‰è£…ä¸ä¸Šï¼ŒæœåŠ¡å™¨cpuè¿‡è½½é—®é¢˜ è¯·å°è¯•ä½¿ç”¨æŒ‡ä»¤å®‰è£… é¦–å…ˆå°†magentoæ·»åŠ åˆ°ç¯å¢ƒå˜é‡,è¯·è‡ªè¡Œä¿®æ”¹è‡ªå·±çš„magento2æ–‡ä»¶å¤¹ä½ç½®ã€‚ export PATH=$PATH:/var/www/html/magento2/bin ç„¶åcdåˆ°magento2å®‰è£…ç›®å½•ä¸‹ 12345678910111213141516171819php setup&#x2F;index.php--db_host&#x3D;localhost \\--db_name&#x3D;magento2 \\--db_user&#x3D;root \\--db_pass&#x3D;canbempty \\--backend_frontname&#x3D;admin \\--admin_username&#x3D;username \\--admin_password&#x3D;password \\--admin_email&#x3D;admin@email.local \\--admin_firstname&#x3D;First \\--admin_lastname&#x3D;Last \\--base_url&#x3D;http:&#x2F;&#x2F;magento2.local&#x2F; \\--base_url_secure&#x3D;http:&#x2F;&#x2F;magento2.local&#x2F; \\--language&#x3D;en_US \\--currency&#x3D;USD \\--use_rewrites&#x3D;true \\--use_secure&#x3D;false \\--use_secure_admin&#x3D;false \\--cleanup_database ä¸Šé¢çš„å‚æ•°è¯·æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œä¿®æ”¹,æ¯”å¦‚base_urlå°±æ˜¯æ‚¨çš„ç½‘å€,admin_*å°†æ˜¯æ‚¨åå°ç®¡ç†å‘˜ç”¨æˆ·åæˆ–å¯†ç . ç­‰å¾…å®‰è£…å¦‚æœé‡åˆ°æç¤º 123ERROR 1419 (HY000): You do not have the SUPER privilege andbinary logging is enabled (you *might* want to use the less safelog_bin_trust_routine_creators variable) è¯·åœ¨ä½ çš„ç³»ç»Ÿä¸­æŸ¥æ‰¾my.cnfæ–‡ä»¶ï¼Œé€šå¸¸åœ¨/etc/my.cnfä¸‹ï¼Œæ–‡ä»¶ä¸­ [mysqld] æ ‡è®°ååŠ ä¸€è¡Œå†…å®¹ä¸ºlog-bin-trust-function-creators=1 ç„¶åè¿è¡Œ service mysql restart é‡å¯mysqlã€‚ç„¶åé‡æ–°php setup/index.phpä»¥åŠå…¶åæŒ‡ä»¤ã€‚å®Œæˆå®‰è£…ã€‚ 123[SUCCESS]: Magento installation complete.[SUCCESS]: Magento Admin URI: &#x2F;admin_xgswztNothing to import. å‡ºç°æ­¤æç¤ºï¼Œåˆ™å®Œæˆå®‰è£…ã€‚ ç„¶åä¿®æ”¹ç½‘ç«™ä¼ªé™æ€è§„åˆ™ï¼ŒNginxï¼š 12345678910111213141516171819202122location &#x2F; &#123; index index.html index.php; ## Allow a static html file to be shown first try_files $uri $uri&#x2F; @handler; expires 30d; &#125;location &#x2F;var&#x2F;export&#x2F; &#123; ## Allow admins only to view export folder auth_basic &quot;Restricted&quot;; ## Message shown in login window auth_basic_user_file htpasswd; ## See &#x2F;etc&#x2F;nginx&#x2F;htpassword autoindex on;&#125; location &#x2F;. &#123; ## Disable .htaccess and other hidden files return 404;&#125;location @handler &#123; ## Magento uses a common front handler rewrite &#x2F; &#x2F;index.php;&#125;location ~ .php&#x2F; &#123; ## Forward paths like &#x2F;js&#x2F;index.php&#x2F;x.js to relevant handler rewrite ^(.*.php)&#x2F; $1 last;&#125; 3ï¼š å®å¡”é¢æ¿å®‰è£…å¤±è´¥å»ºè®®ä¸è¦é‡‡ç”¨å®å¡”é¢æ¿å®‰è£…ï¼Œåœ¨ä½¿ç”¨å®å¡”é¢æ¿è¿›è¡Œå®‰è£…åï¼Œç½‘ç«™æ— æ³•è¿è¡Œï¼ŒæŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼Œæç¤ºhttp://åŸŸå/magento2/magento2æ–‡ä»¶ä¸å­˜åœ¨ ä¿®æ”¹ç½‘ç«™æ ¹ç›®å½•è¿˜æ˜¯æ— æ³•è¿›å…¥ï¼Œæç¤º An error has happened during application run. See exception log for details.","categories":[{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"Magento","slug":"Magento","permalink":"https://sci.ci/tags/Magento/"}]},{"title":"å¦‚ä½•è‡ªå·±å¼€å‘ä¸€ä¸ªVPN App","slug":"å¦‚ä½•è‡ªå·±å¼€å‘ä¸€ä¸ªVPNç¨‹åº","date":"2019-12-12T13:34:16.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2019/12/12/å¦‚ä½•è‡ªå·±å¼€å‘ä¸€ä¸ªVPNç¨‹åº/","link":"","permalink":"https://sci.ci/2019/12/12/%E5%A6%82%E4%BD%95%E8%87%AA%E5%B7%B1%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAVPN%E7%A8%8B%E5%BA%8F/","excerpt":"","text":"ç¬¬ä¸€ç«  ç®€ä»‹1.1 å­¦ä¹ æ¡ä»¶å’Œè¦æ±‚å­¦ä¹ æ¡ä»¶ï¼š ä½ ä¸ç”¨ä¸€å®šå­¦ä¹ è¿‡JAVAæˆ–å…¶ä»–ç¼–ç¨‹è¯­è¨€ã€‚ ä½ ä¸ç”¨ä¸€å®šäº†è§£æˆ–ç²¾é€šå®‰å“ç¼–ç¨‹ã€‚ ä½ ä¸ç”¨ä¸€å®šæ‡‚å¾—Linuxç¼–ç¨‹ã€‚ ä½ éœ€è¦è‡ªè´¹æ”¯ä»˜æœåŠ¡å™¨è´¹ç”¨ï¼Œå›½å¤–æœåŠ¡å™¨å¤§æ¦‚ä¸€ä¸ªæœˆ30å…ƒï¼Œä¹Ÿå¯èƒ½æœ‰ä¾¿å®œçš„æˆ–æ›´è´µä½†æ€§èƒ½æ›´å¥½çš„ï¼Œä½ å¯è‡ªè¡Œé€‰æ‹©ï¼Œå½“ç„¶å¦‚æœæ„¿æ„ç”¨å›½å†…æœåŠ¡å™¨ç»ƒæ‰‹ï¼Œè…¾è®¯é˜¿é‡Œçš„å­¦ç”ŸæœåŠ¡å™¨ä¸€å¹´åªè¦120ï¼Œå½“ç„¶è¿™ä¸ªæœåŠ¡å™¨åšå‡ºçš„VPNæ— æ³•ç¿»å¢™ã€‚ ä½ éœ€è¦æ¶ˆè€—ä¸€å®šçš„æ—¶é—´å’Œè€å¿ƒã€‚ å¦‚æœä½ å·²ç»æ»¡è¶³ä»¥ä¸Šæ¡ä»¶äº†ï¼Œé‚£ä¹ˆæˆ‘å¸Œæœ›ä½ åœ¨æµè§ˆä»¥ä¸‹æ–‡ç« æ—¶ï¼ŒåŒæ„æˆ‘çš„ä»¥ä¸‹è¦æ±‚ï¼š ä½ ä¿è¯ä¸ä½¿ç”¨æœ¬æ•™ç¨‹åˆ¶ä½œçš„VPNè¿›è¡Œç‰Ÿåˆ©ã€‚ ä½ ä¿è¯ä¸åœ¨ä¸­å›½å¤§é™†åœ°åŒºæ•£æ’­å’Œåˆ†äº«åˆ¶ä½œçš„VPNã€‚ ä½ ä¿è¯ä¸ä½¿ç”¨æ­¤VPNè¿›è¡Œå…¶ä»–è¿æ³•çŠ¯ç½ªæ´»åŠ¨æˆ–åœ¨å¤–ç½‘å‘è¡¨å¯¹å›½å®¶ä¸åˆ©çš„è¨€è®ºã€‚ è‹¥ä½ å·²åŒæ„ä»¥ä¸Šè¦æ±‚ï¼Œè¯·ç»§ç»­å‘ä¸‹æµè§ˆï¼Œè‹¥ä½ æ— æ³•åšåˆ°ä¸Šè¿°è¦æ±‚ï¼Œè¯·åœæ­¢ç»§ç»­æµè§ˆã€‚ 1.2 åŠŸèƒ½ä»‹ç»è½¯ä»¶çš„å®ç°åŸç†ï¼Œæˆ‘ä¸åšä»‹ç»ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯è‡ªè¡Œå­¦ä¹ ã€‚ è¿™é‡Œåªæ•™å¤§å®¶å¦‚ä½•åœ¨æˆ‘çš„è½¯ä»¶åŸºç¡€ä¸Šé€šè¿‡ç®€å•ä¿®æ”¹ï¼Œåˆ¶ä½œä¸€ä¸ªè‡ªç”¨VPNå®¢æˆ·ç«¯ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨SSã€SSRæˆ–V2rayç­‰ç°æˆè½¯ä»¶ï¼Œå¹¶é…ç½®æœåŠ¡å™¨åç¿»å¢™ã€‚ VPNåŠŸèƒ½ï¼š å¯é…ç½®å¤šæ¡çº¿è·¯ï¼Œä»¥é€‚ç”¨ä¸åŒçš„æœåŠ¡å™¨ï¼Œæˆ–åŒä¸€æœåŠ¡å™¨ä¸Šçš„ä¸åŒç”¨æˆ·ã€‚ å®¢æˆ·ç«¯ä¸»åŠ¨æ›´æ”¹ä¸»é¢˜é¢œè‰²ã€‚ æ¨é€æ›´æ–°é€šçŸ¥ï¼Œå’Œæ¨é€å¹¿å‘Šã€‚å¯åœ¨æœåŠ¡ç«¯æ›´æ”¹æ˜¯å¦æ¨é€å¹¿å‘Šã€‚ æœ¬è½¯ä»¶æ²¡æœ‰è´¦æˆ·ç™»é™†ç­‰é™å®šæ¡ä»¶ã€‚åªè¦å®‰è£…è½¯ä»¶ï¼Œå³å¯ç¿»å¢™ï¼Œå½“ç„¶å‰ææ¡ä»¶æ˜¯ï¼Œä½ é…ç½®å¥½äº†æœåŠ¡å™¨ã€‚ ä¸‹é¢å±•ç¤ºæˆ‘å·²ç»åˆ¶ä½œå¥½çš„VPNç¨‹åºæˆªå›¾ï¼Œæµ‹è¯•å·²èƒ½ç¿»å¢™ã€‚ å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¾¿å¼€å§‹åˆ¶ä½œè‡ªå·±çš„VPNå§ã€‚ ç¬¬äºŒç«  æœåŠ¡ç«¯é…ç½®2.1 VPSæœåŠ¡å™¨è´­ä¹°è¿™é‡Œæˆ‘æ¨èç»™å¤§å®¶çš„æ˜¯vultr.comã€‚ä¸ºä»€ä¹ˆè¿™å®¶æœåŠ¡å™¨å‘¢ï¼Ÿè¿™å®¶æœåŠ¡å™¨å¯ä»¥æŒ‰å°æ—¶æ”¶è´¹ï¼Œå¦‚æœä½ ä¸å«Œéº»çƒ¦ï¼Œå¯ä»¥åœ¨éœ€è¦çš„ä½¿ç”¨VPNçš„æ—¶å€™ï¼Œå†å¼€å¯ä¸€å°VPSã€‚ä¸éœ€è¦çš„æ—¶å€™å…³é—­ï¼Œå½“ç„¶é‡æ–°å¼€å¯éœ€è¦é‡æ–°é…ç½®æœåŠ¡å™¨ç­‰æ“ä½œã€‚åªæ˜¯æˆ‘è§‰å¾—æ€§ä»·æ¯”æŒºé«˜ã€‚æœ€é‡è¦çš„æ˜¯æ”¯æŒæ”¯ä»˜å®å¾®ä¿¡ä»˜æ¬¾ï¼ ä¸‹é¢æ•™å¤§å®¶è´­ä¹°VPSæœåŠ¡å™¨ã€‚ä¸»è¦æ˜¯æ²¡çœ‹åˆ°ä¸­æ–‡ç¿»è¯‘ï¼Œæ‰€ä»¥å†³å®šä¸€æ­¥æ­¥æ•™å¤§å®¶ï¼Œæ¯•ç«Ÿæœ‰çš„äººå¯èƒ½å¹¶ä¸ä¼šã€‚ ç‚¹å‡»é“¾æ¥æ‰“å¼€vultrç½‘ç«™ï¼Œwww.vultr.comé¢å¤–è¯´æ˜ä¸€å¥ï¼Œé€šè¿‡æˆ‘çš„é“¾æ¥æ‰“å¼€æ³¨å†Œï¼Œæˆ‘å’Œä½ éƒ½å¯ä»¥è·å¾—10ç¾å…ƒçš„å¥–åŠ±è´¹ç”¨ï¼Œå½“ç„¶è¿™ç¬”é’±ï¼Œéœ€è¦ä½ è´­ä¹°æœåŠ¡å™¨ä¹‹åæ‰ä¼šå‘æ”¾ã€‚åªæ˜¯ç»™å¤§å®¶è¯´æ˜è¿™ç‚¹ï¼Œå½“ç„¶å¦‚æœå¤§å®¶æœ‰å…¶ä»–é€‰æ‹©ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ åˆ›å»ºè´¦æˆ·ã€‚ å¡«å†™é‚®ç®±ï¼ŒæŒ‰è¦æ±‚è®¾ç½®å¯†ç ï¼Œå¯†ç è¦æ±‚è‡³å°‘ä¸€ä¸ªå¤§å†™å­—æ¯ï¼Œä¸€ä¸ªå°å†™å­—æ¯ï¼Œä¸€ä¸ªæ•°å­—ï¼Œå’Œè‡³å°‘åä¸ªå­—ç¬¦ã€‚ç‚¹å‡»â€œcreate acounntâ€å³å¯ã€‚ Vultrå……å€¼ã€‚ æ³¨å†Œç™»å½•åä¼šè¿›å…¥ä¸ªäººé¢æ¿ï¼Œå·¦è¾¹æ é€‰æ‹© â€œBillingâ€ ï¼Œé€‰æ‹©æ”¯ä»˜æ–¹å¼å’Œé‡‘é¢ï¼Œä»˜æ¬¾å³å¯ã€‚ Vultr æ”¯æŒæ”¯ä»˜å®ä»˜æ¬¾ï¼Œå¾ˆæ–¹ä¾¿ã€‚ä½†æ˜¯ä¸ªäººæ›´æ¨èæœ‰ Paypal çš„ä½¿ç”¨ Paypalã€‚ åˆ›å»ºVPS é€‰æ‹© â€œServersâ€ ï¼Œç‚¹å‡»å³è¾¹è“è‰²çš„ â€œ**+**â€ æ·»åŠ  VPSã€‚ a.é€‰æ‹©èŠ‚ç‚¹ æ—¥æœ¬è·ç¦»æœ€è¿‘ï¼Œå»¶è¿Ÿæœ€ä½ï¼Œä½†å¤ªçƒ­é—¨äº†ï¼Œç™½å¤©è¿˜å¥½ï¼Œæ™šä¸Šæœ‰æ—¶å¾ˆæ…¢ï¼›æ´›æ‰çŸ¶æ¯”æ—¥æœ¬ç¨³äº›ã€‚ b.é€‰æ‹©ç³»ç»Ÿ é€‰æ‹©ç³»ç»Ÿã€‚æ”¯æŒ Windows å’Œè‡ªå·±ä¸Šä¼  ISO ç³»ç»Ÿé•œåƒã€‚è¿™é‡Œè¯·å¤§å®¶é€‰æ‹©CentOSç³»ç»Ÿ7x64 c.é€‰æ‹©å¥—é¤ ä»·æ ¼ä» $2.5/mo åˆ° $640/moï¼Œå„ç§é…ç½®éƒ½æœ‰ï¼Œæœ€ä½ $2.5/mo çš„å¥—é¤ç°åœ¨åŸºæœ¬ä¹°ä¸åˆ°äº†ã€‚è¦æ±‚å¿…é¡»æœ‰IPv4åœ°å€ã€‚ d.å…¶ä»–é€‰é¡¹ æœ‰ IPv6ï¼Œç§å¯†ï¼Œä¸»æœºåã€æ ‡ç­¾ç­‰ï¼Œæ— ç‰¹æ®Šéœ€è¦å…¨éƒ¨é»˜è®¤å³å¯ã€‚ é€‰å¥½åç‚¹å‡»å³ä¸‹è§’çš„ â€œDeploy Nowâ€ ï¼Œå¼€å§‹å®‰è£… VPSã€‚ e.æŸ¥çœ‹VPS å·²è´­ä¹°çš„ VPS éƒ½ä¼šæ˜¾ç¤ºåœ¨ â€œServersâ€ é¢æ¿ä¸­ï¼Œå½“æ˜¾ç¤º â€œRunningâ€ æ—¶å³è¡¨ç¤ºå®‰è£…å®Œæˆã€‚ç‚¹å‡» â€œManageâ€ è¿›å…¥ VPS ç®¡ç†é¢æ¿ã€‚ VPS ç®¡ç†é¢æ¿ï¼Œè¿™é‡Œéœ€è¦è®°å½•ä¸‹ IP åœ°å€ï¼ˆIP Addressï¼‰ã€ç”¨æˆ·åï¼ˆUsernameï¼‰ã€å¯†ç ï¼ˆPasswordï¼‰ä¾›ç¨åè¿æ¥ VPS æ—¶ä½¿ç”¨ã€‚ è¿æ¥VPS ä½¿ç”¨ ssh å·¥å…·è¿æ¥æˆ‘ä»¬çš„ VPSï¼ŒWindows æ¨è xshellï¼ŒMac å¯ä½¿ç”¨è‡ªå¸¦çš„ç»ˆç«¯ã€‚ Xshell ç½‘ç›˜é“¾æ¥ï¼šhttps://pan.baidu.com/s/1pMbKLMb å¯†ç ï¼šlwir Windows å®‰è£… xshellï¼Œæ‰“å¼€è½¯ä»¶ã€‚ ç‚¹å‡» â€œæ–‡ä»¶â€ â€”&gt; â€œæ–°å»ºâ€ â€”&gt; â€œè¿æ¥â€ï¼Œè¾“å…¥ â€œåç§°â€ å’Œ â€œä¸»æœºâ€ ï¼ˆå³VPS ipï¼‰ã€‚ ç‚¹å‡» â€œç”¨æˆ·èº«ä»½éªŒè¯â€ï¼Œè¾“å…¥ç”¨æˆ·åï¼ˆé»˜è®¤rootï¼‰å’Œå¯†ç ã€‚ç¡®è®¤ã€‚ è¿æ¥ VPSï¼Œæ¥å—å¹¶ä¿å­˜å¯†åŒ™ã€‚ å‡ºç° root@vultr:~# å³è¿æ¥æˆåŠŸï¼Œå¯ä»¥è¾“å…¥ä»£ç äº†è¿›è¡Œæ“ä½œäº†ã€‚ å¾ˆé‡è¦çš„ä¸€ç‚¹ï¼Œå› ä¸ºä¸æ˜¯æ‰€æœ‰çš„VPSåœ¨å›½å†…éƒ½èƒ½pingé€šï¼Œæœ‰çš„IPåœ°å€å·²ç»è¢«å›½å†…ç½‘ç»œå±è”½äº†ï¼Œæ‰€ä»¥å¦‚æœVPSè¿æ¥ä¸ä¸Šï¼Œè¯·ä½ åˆ° [ping.chinaz.com]è¾“å…¥ä½ çš„IPåœ°å€æµ‹è¯•ï¼Œè‹¥å›½å†…è¿æ¥å‡æç¤ºè¶…æ—¶ä¸”ä¸ºçº¢è‰²ï¼Œè¯·ä½ åœ¨vulträ¸­åˆ é™¤vpså¹¶é‡æ–°åˆ›å»ºä¸€ä¸ªå¯ç”¨çš„ipåœ°å€ã€‚ Mac æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç ç™»å½• VPSï¼Œå…¶ä¸­ root å³ç”¨æˆ·åï¼Œå°† ip æ›´æ”¹ä¸º VPS çš„ IP åœ°å€ï¼Œå›è½¦ã€‚ 1ssh root@ip è¾“å…¥ yes ç¡®è®¤ï¼Œç²˜è´´å¯†ç ï¼Œå›è½¦ã€‚éœ€è¦æé†’çš„æ˜¯ï¼Œå¯†ç è¾“å…¥æ—¶å¹¶ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ï¼Œç›´æ¥å¤åˆ¶ç²˜è´´ï¼Œå›è½¦å³å¯ã€‚å‡ºç° root@vultr:~# å³è¿æ¥æˆåŠŸã€‚ æœ€è¿‘å¾ˆå¿™ï¼Œæ²¡æ—¶é—´æ›´æ–°äº† é¡¹ç›®åœ°å€ï¼šhttps://github.com/xieqifei/openvpnã€‚ç„¶åæœ‰è‹±è¯­ç‰ˆæœ¬çš„readmeã€‚","categories":[{"name":"å®‰å“ç¼–ç¨‹","slug":"å®‰å“ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E5%AE%89%E5%8D%93%E7%BC%96%E7%A8%8B/"}],"tags":[{"name":"VPN","slug":"VPN","permalink":"https://sci.ci/tags/VPN/"}]},{"title":"JAVAå®‰å“ç¼–ç¨‹ç¬”è®°","slug":"é‡æ¸©å®‰å“ç¼–ç¨‹","date":"2019-11-18T12:41:49.000Z","updated":"2023-12-02T00:05:56.281Z","comments":true,"path":"2019/11/18/é‡æ¸©å®‰å“ç¼–ç¨‹/","link":"","permalink":"https://sci.ci/2019/11/18/%E9%87%8D%E6%B8%A9%E5%AE%89%E5%8D%93%E7%BC%96%E7%A8%8B/","excerpt":"","text":"ç¬¬ä¸€ç«  å‰è¨€å¤§æ¦‚åœ¨ä¸¤å¹´å‰ï¼Œæˆ‘ç¬¬ä¸€æ¬¡å†³å®šå­¦ä¹ å®‰å“ç¼–ç¨‹ï¼Œåœ¨å¤§çº¦ä¸¤ä¸‰å‘¨çš„å­¦ä¹ ä¹‹åï¼Œç”±äºç¼ºä¹JAVAå¼€å‘åŸºç¡€å’Œç»éªŒï¼Œå•çº¯çš„è§†é¢‘æ•™ç¨‹çœ‹å¾—æˆ‘äº‘é‡Œé›¾é‡Œï¼Œä¸è¿‡åœ¨æ­¤æœŸé—´å­¦ä¼šäº†ä½¿ç”¨ä»£ç è¿›è¡Œé¡µé¢å¸ƒå±€ï¼Œè¿™ç»™æˆ‘æ­¤åå­¦ä¹ Webç¼–ç¨‹ï¼Œä½¿ç”¨htmlã€cssè¿›è¡Œé¡µé¢å¸ƒå±€æ‰“ä¸‹äº†åŸºç¡€ã€‚ ä¸¤å¹´å‰ï¼Œæˆ‘ä½¿ç”¨çš„è¿˜æ˜¯è”æƒ³çš„i5äº”ç³»åˆ—cpuã€æœºæ¢°ç¡¬ç›˜ã€4gå†…å­˜ï¼Œè¿™ä¸ªç”µè„‘é…ç½®ä½¿å¾—æˆ‘å½“æ—¶ç”¨epliseå¼€å‘å®‰å“ç¨‹åºéå¸¸éº»çƒ¦ï¼Œæ‰“å¼€ä¸€ä¸ªå®‰å“è™šæ‹Ÿæœºéœ€è¦èŠ±å¾ˆé•¿çš„æ—¶é—´ã€‚åŠå¹´å‰ï¼Œæˆ‘æ›´æ¢äº†Surfaceï¼Œç”¨ä¸Šäº†8+128Gå†…å­˜+å›ºæ€ç¡¬ç›˜ã€‚ä¹Ÿæ›´æ–°äº†æœ€æ–°çš„i5å…«ç³»åˆ—cpuï¼Œç”µè„‘é…ç½®æœ‰äº†æ˜¾è‘—æé«˜ï¼Œè¿è¡Œå®‰å“å¼€å‘ç¨‹åºä¹Ÿæ¸¸åˆƒæœ‰ä½™äº†ã€‚ è€Œè¿™æ¬¡é‡å¯å®‰å“å­¦ä¹ ä¹‹æ—…ï¼Œæˆ‘å°†ä½¿ç”¨ASè¿›è¡Œå®‰å“å¼€å‘ã€‚è™½ç„¶ASç›®å‰å·²æ”¯æŒC/C++åšç¨‹åºå¼€å‘ï¼Œä½†æˆ‘ä»å°†é€‰æ‹©JAVAä½œä¸ºå¼€å‘è¯­è¨€ï¼Œä»¥æé«˜æˆ‘çš„JAVAæ°´å¹³ã€‚ ç¬¬äºŒç«  å®‰è£…Android Studioä» https://developer.android.com/studio ä¸‹è½½IDEå’ŒSDKåï¼Œè¿›è¡Œç›¸åº”å®‰è£…å’Œé…ç½®ã€‚å®‰è£…æ•™ç¨‹ï¼Œä»ç½‘è¯¾å’ŒCDSNè®ºå›å‡å¯æ‰¾åˆ°ã€‚ä¸å†èµ˜è¿°ã€‚ æ­¤å¤„è¯´æ˜å®‰è£…æ—¶é‡åˆ°çš„å‘ã€‚ SDKå®‰è£…åï¼Œåœ¨SDKç®¡ç†å·¥å…·ä¸­æ·»åŠ SDKç›®å½•å³andriod-sdkæç¤ºandroid sdk location should not contain whitespace é—®é¢˜1è§£å†³åç´§æ¥ç€å‡ºç°æç¤ºTarget folder is neither empty nor does it point to an existing SDK installtion. é—®é¢˜åˆ†æå’Œè§£å†³åŠæ³•ï¼š æç¤ºæ„æ€ä¸ºSDKçš„ç›®å½•è·¯å¾„ä¸­å‡ºç°ç©ºæ ¼ã€‚åœ¨æˆ‘çš„é—®é¢˜ä¸­æ˜¯ï¼ŒProgram Filesæ–‡ä»¶å¤¹åç§°ä¸­é—´æœ‰ç©ºæ ¼ï¼Œäºæ˜¯æˆ‘åœ¨æ ¹è·¯å¾„é‡æ–°åˆ›å»ºäº†ä¸€ä¸ªä»¥Andriodä¸ºåçš„æ–‡ä»¶å¤¹ï¼Œå¹¶å°†andriod-sdkç§»åˆ°æ­¤è·¯å¾„ä¸‹ã€‚ æç¤ºä¸ºï¼Œé€‰æ‹©çš„æ–‡ä»¶å¤¹æ—¢ä¸æ˜¯ç©ºçš„ä¹Ÿä¸æ˜¯sdkçš„æ–‡ä»¶å¤¹ï¼ŒåŸå› æ˜¯æˆ‘å°†sdkç›®å½•æŒ‡å‘äº†Andriodä¸ºåçš„æ–‡ä»¶å¤¹ï¼Œæ­£ç¡®çš„è·¯å¾„æ˜¯ä¸Šæ­¥åˆ›å»ºAndriodæ–‡ä»¶ä¸‹çš„andriod-sdkã€‚ å®‰è£…å¥½SDKåï¼Œè¿˜è¦ç»™ASå®‰è£…è™šæ‹Ÿæœºï¼Œè¿è¡ŒASåï¼Œåœ¨Toolsèœå•ä¸‹æ‰¾åˆ°AVD Managerï¼ˆè™šæ‹Ÿæœºç®¡ç†å™¨ï¼‰ï¼Œæ·»åŠ åˆé€‚åˆ†è¾¨ç‡ã€Andriodç‰ˆæœ¬çš„è™šæ‹Ÿæœºå³å¯ã€‚ ç¬¬ä¸‰ç«  åº”ç”¨çš„èµ„æºè®¿é—®3.1 è®¤è¯†Androidç›®å½• resèµ„æº drawable-ï¼Ÿdpiï¼ˆl,h,m,xï¼‰ï¼šä¸åŒåˆ†è¾¨ç‡ä¸‹çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡çš„å¤§å°ã€‚ valuesï¼šå®‰å“åº”ç”¨ç•Œé¢ä¸Šéœ€è¦æ˜¾ç¤ºçš„å„ç±»æ–‡æœ¬æ ‡ç­¾æ–‡å­—ã€‚ layoutï¼šç•Œé¢å¸ƒå±€æ–‡ä»¶ã€‚ menuï¼šå­˜æ”¾èœå• genï¼ˆADTä¸­ï¼‰æˆ–JAVAï¼ˆASä¸­ï¼‰ ç”±IDEè‡ªåŠ¨ç”Ÿæˆçš„åŒ…æ–‡ä»¶ 3.2 é€šç”¨èµ„æºè®¿é—® åŸºäºJavaä»£ç è®¿é—®èµ„æº Javaä»£ç è®¿é—®æ–¹å¼: 12[\\&lt;packge-name&gt;.]R. //Rç±»æ‰€åœ¨åŒ…è·¯å¾„å¯çœç•¥&lt;resource_type&gt;.&lt;resource_name&gt; //resource_typeï¼šèµ„æºç±»å‹å¦‚colorç­‰ã€‚ Javaè®¿é—®ç¤ºä¾‹ //ä»drawableç›®å½•ä¸­åŠ è½½å›¾ç‰‡ï¼Œè®¾ç½®ä¸ºèƒŒæ™¯å›¾ç‰‡ 1getWindow().setBackgroundDrawableResource(R.drawable.back) //ä»stringè®¾ç½®å­—ç¬¦ä¸²èµ„æºï¼Œè®¾ç½®ä¸ºæ–‡æœ¬æ¡†çš„æ˜¾ç¤ºå†…å®¹ 12TextView title=(TextView)findViewById(R.id.title); title.setText(R.string.titleinfo); åœ¨XMLé…ç½®æ–‡ä»¶ä¸­è®¿é—®èµ„æº XMLèµ„æºè®¿é—®æ–¹å¼: 12@[&lt;package_name&gt;:]&lt;resource_type&gt;/&lt;resource_name&gt; XMLèµ„æºå®šä¹‰ç¤ºä¾‹ 12345&lt;resources&gt;&lt;color name=&quot; blue &quot; &gt;#ff00ff&lt;/color&gt;&lt;string name=&quot; title &quot; &gt;Confirmation&lt;/string&gt;&lt;/resources&gt; åœ¨XMLä¸­ä½¿ç”¨èµ„æºç¤ºä¾‹ XMLèµ„æºä½¿ç”¨å®ä¾‹ç‰‡æ®µ 123456&lt;EditText android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:text=&quot; @string/title&quot; android:textColor=&quot; @color/blue&quot; /&gt;&lt;/EditText&gt; 3.3 å®‰å“ä¸­å­—ç¬¦ä¸²ã€é¢œè‰²å’Œå°ºå¯¸åº”ç”¨ èµ„æºåˆ—è¡¨ å­—ç¬¦ä¸²ã€é¢œè‰²ã€å°ºå¯¸èµ„æºï¼Œå­˜æ”¾åœ¨XMLæ–‡ä»¶å†…ï¼Œä½äº/res/valuesç›®å½•ä¸‹ã€‚ å¦‚å­—ç¬¦ä¸²èµ„æºï¼š/res/values/strings.xmlã€‚Rç±»ä¸­åç§°ï¼šR.string é¢œè‰²è¡¨ç¤ºæ–¹æ³• ä½¿ç”¨Colorç±»çš„å¸¸é‡ å¦‚ï¼šint color = Color.BLUE;//åˆ›å»ºä¸€ä¸ªè“è‰² ä½¿ç”¨Colorç±»çš„é™æ€æ–¹æ³•argbåˆ›å»ºé¢œè‰² int color = Color.argb\\(127.255.0.255\\);//åŠé€æ˜ç´«è‰² åœ¨XMLèµ„æºæ–‡ä»¶å®šä¹‰é¢œè‰²å€¼ 12345&lt;resources&gt;&lt;color name=&quot; blue &quot; &gt;#ff00ff&lt;/color&gt;&lt;string name=&quot; title &quot; &gt;Confirmation&lt;/string&gt;&lt;/resources&gt; ä½¿ç”¨ç¤ºä¾‹ reså’ŒassetsåŒºåˆ« reså†…çš„æ–‡ä»¶è¢«æ˜ å°„åˆ°R.javaï¼ŒåŸºäºèµ„æºIDç›´æ¥è®¿é—®ã€‚ assetséœ€é€šè¿‡èµ„æºç®¡ç†å™¨è®¿é—®ã€‚ resä¸‹ä¸å¯ä»¥åˆ›å»ºå­ç›®å½•ï¼Œassetså¯ä»¥æœ‰ç›®å½•ç»“æ„ã€‚ è¯»å–æ–‡ä»¶èµ„æºçš„æ–¹å¼ä¸åŒ è¯»å–res/rawä¸‹çš„æ–‡ä»¶èµ„æºï¼Œé€šè¿‡å½“å‰Activityä¸­çš„getResources()æ–¹æ³•ï¼š 12InputStream is = getResources().openRawResource(R.id.filename); è¯»å–assetsä¸‹çš„æ–‡ä»¶èµ„æºï¼Œé€šè¿‡å½“å‰æ´»åŠ¨çš„èµ„æºç®¡ç†å™¨assetmanagerè¯»å–ç›¸åº”çš„èµ„æºæ–‡ä»¶ï¼š 12AssetManager am = getAssets();//é€šè¿‡å½“å‰çš„Activityçš„getAsset()æ–¹æ³•ã€‚InputStream is = am.open(&quot;filename&quot;);//åŸºäºæ–‡ä»¶åè¯»å–èµ„æºã€‚ 3.4 Drawableèµ„æº Drawableèµ„æº ä¸»è¦æ˜¯éœ€è¦ç»˜åˆ¶çš„èµ„æºï¼Œæ¯”å¦‚å›¾ç‰‡èµ„æºã€‚ ä¸»è¦æ ¼å¼æœ‰*.pngã€*.jpgç­‰ã€‚ å›¾ç‰‡æ”¾å…¥/res/drawable-xxxç›®å½•ä¸‹ã€‚ å®‰å“SDKä¼šåœ¨ç¼–è¯‘åº”ç”¨è‡ªåŠ¨åŠ è½½å›¾ç‰‡ã€‚ èµ„æºæ–‡ä»¶åœ¨R.javaèµ„æºç±»ä¸­ç”Ÿæˆè¯¥èµ„æºçš„ç´¢å¼•ã€‚ Drawableèµ„æºç±»å‹ StateListDrawableèµ„æºï¼ˆåŠ¨æ€åˆ‡æ¢èƒŒæ™¯ï¼‰ LayerDrawableèµ„æºï¼ˆå›¾å±‚å åŠ ï¼‰ ShapeDrawableèµ„æºï¼ˆç»˜å›¾ï¼‰ ClipDrawableèµ„æº AnimationDrawableèµ„æºï¼ˆåŠ¨ç”»ï¼‰ 3.5 å®‰å“é¡¹ç›®å¸ƒå±€æ–‡ä»¶ ä»€ä¹ˆæ˜¯å®‰å“å¸ƒå±€æ–‡ä»¶ï¼Ÿ å®šä¹‰ç”¨æˆ·ç•Œé¢ä¸Šå„ä¸ªç»„å»ºä¹‹é—´çš„ç»„ç»‡ç»“æ„ã€‚ XMLæ ¼å¼æ–‡ä»¶ï¼Œå®‰å“ç³»ç»Ÿè´Ÿè´£åˆå§‹åŒ–ã€‚ å®ç°ç•Œé¢å¸ƒå±€å’Œé€»è¾‘ä»£ç çš„åˆ†ç¦»ã€‚ ä¿®æ”¹å’Œæ›´æ–°ç•Œé¢éå¸¸ç®€ä¾¿ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚ å¸ƒå±€æ–‡ä»¶æ˜¯æ ‘å½¢ç»“æ„ï¼Œä½¿ç”¨æ ¹èŠ‚ç‚¹ã€‚ ä¸€èˆ¬åœ¨å¸ƒå±€æ§ä»¶ä¸­æ”¾ç½®ç•Œé¢æ˜¾ç¤ºç»„å»ºLinearLayoutä¸­æ”¾å…¥textviewæ–‡æœ¬æ ‡ç­¾ é€šè¿‡èŠ‚ç‚¹å±æ€§è®¾ç½®æ˜¾ç¤ºç•Œé¢ç»„å»ºçš„å±æ€§ï¼šå¤§å°ã€é¢œè‰²å’Œè¾¹è·ç­‰ã€‚ å¸ƒå±€ç¤ºä¾‹ å¸ƒå±€æ–‡ä»¶èŠ‚ç‚¹å±æ€§ç¤ºä¾‹ android:id=&quot;@+id/button_id&quot; @è¡¨ç¤ºXMLè§£æå™¨åº”è¯¥è§£æIDå­—ç¬¦ä¸²æŠŠå®ƒä½œä¸ºIDèµ„æºã€‚ +ç¬¦å·è¡¨ç¤ºä¸€ä¸ªæ–°çš„èµ„æºåå­—ï¼Œä¼šè¢«åˆ›å»ºä¸”åŠ å…¥åˆ°èµ„æºåˆ—è¡¨ä¸­ï¼ˆR.javaï¼‰ @string/@colorç­‰å¯ç”¨äºè®¿é—®å…¶ä»–èµ„æºã€‚ ç»„å»ºidåœ¨androidåº”ç”¨ä¸­æ˜¯å”¯ä¸€çš„ã€‚ ä¸»é¢˜ å†…å®¹ èµ„æºä½ç½® res/layout/my_layout.xml å¸ƒå±€XMLæ–‡ä»¶æ ¼å¼ ä½¿ç”¨&lt;?xml version= â€œ1.0â€encoding=â€utf-8â€ ?&gt;&lt;å¸ƒå±€ç±»xmlns:android=â€http://schemas.android.Com/apk/res/androidâ€ id= â€œ@id+/string_na&lt;br&gt;meâ€(å±æ€§)&gt;&lt;è§†å›¾ç»„ä»¶æˆ–è€…å…¶ä»–åµŒå¥—å¸ƒå±€ç±»&gt;&lt;requestFocus/&gt;&lt;/å¸ƒå±€ç±»&gt; è·å¾—XMLèµ„æºçš„æ–¹æ³• Activity.setContentView() å¼•ç”¨XMLèµ„æºçš„æ ¼å¼ Javaä»£ç ä¸­ï¼šR.layout.my_layoutã€‚XMLæ–‡ä»¶ä¸­ï¼š@[package:]layout/my_layout èµ„æºä½ç½® res/layout/my_layout.xml 3.6 AndroidManifest.xmlé¡¹ç›®é…ç½®æ–‡ä»¶ ä»€ä¹ˆæ˜¯AndroidManifest.xml ä½äºæ ¹ç›®å½•ä¸‹ï¼Œæ–‡ä»¶åä¸å¯ä¿®æ”¹ã€‚ è¯¥æ–‡ä»¶ä¸­ &lt;manifest&gt;å’Œ &lt;application&gt;æ˜¯å¿…éœ€çš„ä¸”åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ æè¿°Androidåº”ç”¨ä½¿ç”¨çš„ç»„å»ºå’Œç³»ç»Ÿé…ç½®ä¿¡æ¯ åº”ç”¨ä½¿ç”¨çš„ç»„å»ºåŠå…¶å®ç°ç±»ï¼ˆActivity/Serviceç­‰ï¼‰ éœ€è¦ä½¿ç”¨çš„å®‰å“ç³»ç»Ÿæƒé™ã€‚ å£°æ˜å…¶ä»–åº”ç”¨ç¨‹åºä¸è¯¥åº”ç”¨ç¨‹åºäº¤äº’éœ€è¦çš„æƒé™ è¯¥åº”ç”¨ç¨‹åºæ‰€éœ€çš„å®‰å“APIç‰ˆæœ¬ã€‚ åˆ—å‡ºè¯¥åº”ç”¨ç¨‹åºæ‰€éœ€ç±»åº“ã€‚ ç¬¬å››ç«  ç•Œé¢ç¼–ç¨‹ä»»åŠ¡åˆ†æä¸è®¾è®¡4.1 å¾ªåºæ¸è¿› Activityç®€ä»‹ å®‰å“çš„è§†å›¾ç»„ä»¶ï¼Œå››å¤§ç»„ä»¶ä¹‹ä¸€ã€‚ å®šä¹‰ç”¨æˆ·å¯ä»¥çœ‹åˆ°è§¦æ‘¸åˆ°çš„ç•Œé¢ã€‚ æ´»åŠ¨å†…ä½¿ç”¨å„ç§ç•Œé¢ç»„ä»¶ï¼Œå®ç°äº¤äº’åŠ¨ä½œã€‚ é€šè¿‡æ´»åŠ¨ï¼Œç”¨æˆ·ç•Œé¢ä¹‹é—´åˆ‡æ¢è·³è½¬ã€è¿›è¡Œæ•°æ®ä¼ é€’ã€‚ Activityæ¦‚å¿µ ç”¨æ¥åŒ…è£…ç”¨æˆ·ç•Œé¢ç»„ä»¶çš„å®¹å™¨ï¼Œå®ç°ç”¨æˆ·å’Œç•Œé¢ç»„ä»¶ä¹‹é—´çš„äº¤äº’ã€‚ æ¡ˆåˆ—åˆ†ææ•™å­¦ç‰¹ç‚¹å’Œæ³¨æ„äº‹é¡¹ ç•Œé¢ç¼–ç¨‹æ¡ˆä¾‹åˆ†ææ•™å­¦ç‰¹ç‚¹ æ¡ˆä¾‹ï¼šåŸºäºå®‰å“ç³»ç»Ÿçš„è®¡ç®—å™¨ ç‰¹ç‚¹ï¼šæ¡ˆä¾‹é©±åŠ¨ï¼Œå®è·µå…ˆè¡Œ ä¼˜åŠ¿ï¼šåœ¨å®è·µä¸­å­¦ä¹ æŠ½è±¡çš„æ¦‚å¿µ ç•Œé¢ç¼–ç¨‹æ¡ˆä¾‹åˆ†ææ³¨æ„äº‹é¡¹ çŸ¥è¯†è¦ç‚¹ï¼šæ´»åŠ¨çš„æ¦‚å¿µå’Œä½¿ç”¨ åˆ†ææŠ€å·§ï¼šå¦‚ä½•å°†å®é™…ä¸­çš„é—®é¢˜è¿›è¡Œåˆ†æï¼›åˆ†æé—®é¢˜å’Œè§£å†³é—®é¢˜çš„æ–¹æ³• ç¼–ç æŠ€å·§ï¼šåœ¨æ¡ˆä¾‹ä¸­å­¦ä¹ ç¼–ç æŠ€å·§ è®¡ç®—å™¨æ¡ˆä¾‹ æ“ä½œè¿‡ç¨‹ï¼š ç”¨æˆ·è¾“å…¥ä¸¤ä¸ªè®¡ç®—æ•°ï¼› é€‰æ‹©è®¡ç®—ç±»å‹ï¼› ç‚¹å‡»è®¡ç®—æŒ‰é’®ï¼Œè¿›è¡Œè®¡ç®— å°†ç»“æœå±•ç¤ºç»™ç”¨æˆ· 4.2 æ´»åŠ¨çš„åˆ›å»ºå’Œä½¿ç”¨ åˆ›å»ºæ´»åŠ¨åº”ç”¨ç¨‹åº åº”ç”¨ç¨‹åºé€šå¸¸ç”±å¤šä¸ªæ´»åŠ¨æ¾è€¦åˆçš„ç»„æˆ æ´»åŠ¨æ˜¯ç•Œé¢ä¸Šçš„ç»„ä»¶åœ¨å±å¹•ä¸Šå±•ç¤ºçš„å®¹å™¨ æ´»åŠ¨é€šè¿‡å¸ƒå±€æ–‡ä»¶å±•ç¤ºç•Œé¢å¸ƒå±€çš„å†…å®¹ æ´»åŠ¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆ©ç”¨å‘¨æœŸçš„æ–¹æ³•æ‰©å±• åˆ›å»ºæ´»åŠ¨æ­¥éª¤ å£°æ˜æ´»åŠ¨ç±»åï¼Œç»§æ‰¿äºæ´»åŠ¨ å®ç°onCreate(Bundle bundle)æ–¹æ³•ï¼Œåœ¨ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆæ´»åŠ¨å¯¹è±¡ä¹‹åï¼Œè¿›è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„åˆå§‹åŒ–æ´»åŠ¨ åœ¨onCreate(View view)è®¾ç½®ç”¨æˆ·ç•Œé¢çš„å¸ƒå±€æ–‡ä»¶ é€šè¿‡æ´»åŠ¨ä¸­çš„findViewById(int id)è·å–å„ä¸ªç•Œé¢ç»„ä»¶ï¼Œå¹¶åŸºäºå…¶å±æ€§å’Œæ–¹æ³•è¿›è¡Œç›¸åº”çš„æ“ä½œ å¦‚æœéœ€è¦åœ¨é”€æ¯æ´»åŠ¨è¿›è¡Œå¤„ç†ï¼Œå¯ä»¥å®ç°onDestroy()çš„æ–¹æ³•ã€‚ 4.3 æ´»åŠ¨çš„å£°æ˜å’Œé…ç½® æ´»åŠ¨çš„å£°æ˜å’Œé…ç½® æ´»åŠ¨å®šä¹‰åéœ€åœ¨AndroidManifest.xmlä¸­å£°æ˜ `&lt;applicationâ€¦/&gt;Â·èŠ‚ç‚¹å†…æ·»åŠ Â·&lt;activityâ€¦/&gt;Â·å­å…ƒç´  åœ¨&lt;activity&gt;å­èŠ‚ç‚¹å†…å®šä¹‰Activityçš„ç±»å‹ï¼ˆå…¥å£æ´»åŠ¨ï¼‰ 12345&lt;activity android:name=&quot;com.quck.android.calculator&quot;android:icon=&quot;@drawable/pic.png&quot;android:label=&quot;@string/app_name&quot; &gt;//ç•¥å»å…¶ä¸­å†…å®¹&lt;/activity&gt; é…ç½®æ´»åŠ¨â€”â€”ç¤ºä¾‹åˆ†æ æ´»åŠ¨çš„ä¸»è¦é…ç½®å±æ€§æœ‰å¦‚ä¸‹ä¸‰ä¸ªï¼š nameï¼šæŒ‡å®šè¯¥æ´»åŠ¨çš„ç±»å iconï¼šæ˜¯å®šè¯¥æ´»åŠ¨å¯¹è±¡çš„å›¾æ ‡ï¼ˆå¯é€‰ï¼‰ labelï¼šæŒ‡å®šè¯¥æ´»åŠ¨çš„æ ‡ç­¾ åœ¨&lt;activity&gt;èŠ‚ç‚¹ä¸­æŒ‡å®šä¸€ä¸ªæˆ–è€…å¤šä¸ª&lt;intent-filter.../&gt;å…ƒç´ Intentçš„ç±»å‹å’ŒActionå†³å®šæ´»åŠ¨æ˜¯å¦ä¼šæ¥æ”¶æ¶ˆæ¯ã€‚ 4.4 æ´»åŠ¨ä¹‹é—´çš„æ•°æ®äº¤æ¢å’Œè°ƒç”¨ æ´»åŠ¨ä¹‹é—´çš„æ•°æ®äº¤æ¢å’Œè°ƒç”¨ æ´»åŠ¨ä¹‹é—´è·³è½¬ï¼Œéœ€ä¼ é€’æ•°æ®ä¿¡æ¯ é€šè¿‡Intentæ¥è¿›è¡Œæ•°æ®ä¼ é€’ æ•°æ®éœ€è¦æ”¾å…¥Intentæˆ–è€…Bundleä¹‹å†… ä»€ä¹ˆæ˜¯Bundleï¼Ÿ Bundleç±»æ˜¯ä¸€ä¸ªkey-valueå¯¹ï¼Œä¸€ä¸ªæ˜ å°„ï¼ŒæŠŠå­—ç¬¦ä¸²æ˜ å°„ä¸ºå„ç§ç±»å‹ã€‚ æ•°æ®äº¤æ¢ å†™å…¥æ•°æ® putExtras(Bundle data)å‘Intentä¸­æ”¾å…¥éœ€è¦æºå¸¦çš„Bundleæ•°æ® putXXX(String key, Xxx data)å‘Bundleæ”¾å…¥Int,Long,Stringç­‰å„ç§ç±»å‹çš„æ•°æ® putSerializable(String key, Serialzable data):å‘Bundleä¸­æ”¾å…¥ä¸€ä»½å¯åºåˆ—åŒ–å¯¹è±¡ è¯»å–æ•°æ® getExtras()ä»Intentä¸­è¯»å–éœ€è¦æºå¸¦çš„Bundleæ•°æ® getXXX(String key)ä»Bundleï¼ŒIntentè¯»å–int,Long,Stringç­‰å„ç§ç±»å‹çš„æ•°æ® getSerializable(String key)ä»Bundleï¼ŒIntentä¸­è¯»å–ä¸€ä¸ªå¯åºåˆ—åŒ–çš„å¯¹è±¡ æ´»åŠ¨äº¤æ¢ç¤ºä¾‹ Intent vs Bundle ç›¸åŒç‚¹ï¼šä¼ é€’æ•°æ®æ—¶ï¼Œä½œç”¨ç›¸åŒ ä¸åŒç‚¹ï¼šåœ¨å¤šä¸ªæ´»åŠ¨ä¹‹é—´ä¼ é€’ç›¸åŒæ•°æ®æ—¶ï¼Œæ¨èä½¿ç”¨Bundleæ¥å‚¨å­˜å’Œä¼ é€’æ•°æ®ï¼Œå‡å°‘é‡å¤çš„è¯»å†™æ“ä½œ ä¾‹ï¼šæ´»åŠ¨è·³è½¬A-&gt;B-&gt;Cä¼ é€’ç›¸åŒæ•°æ® å¦‚æœä½¿ç”¨Intentï¼Œåˆ™éœ€è¦åœ¨Aã€Bã€Cçš„Intentä¹‹é—´è¿›è¡Œæ•°æ®çš„å¤åˆ¶ å¦‚æœä½¿ç”¨Bundleï¼Œåˆ™å¯ç›´æ¥ä¼ é€’Bundleå¯¹è±¡å³å¯ è¿”å›æ•°æ® startActivityForResult(Intent intent, int requestCode) è·³è½¬åˆ°æŒ‡å®šçš„æ´»åŠ¨ å‚æ•°intentï¼šæŒ‡å®šç›®çš„æ´»åŠ¨ç±»å å‚æ•°requestCodeï¼šç”±ç¨‹åºä¸­è‡ªå®šä¹‰çš„è¯†åˆ«ç ï¼Œç”¨ä»¥åŒºåˆ†ä¸åŒçš„ä¸ƒç‚¹æ´»åŠ¨ setResult(int resultCode, Intent data) è®¾ç½®resultCodeè¡¨ç¤ºç»“æœçš„Activityï¼Œç¬¬äºŒä¸ªå‚æ•°ä¿å­˜ä¼ é€’çš„ç»“æœæ•°æ® onActivityResult(int requestCode, int resultCode, Intent data) å‚æ•°requestCodeï¼šèµ·ç‚¹æ´»åŠ¨å®šä¹‰å”¯ä¸€å€¼ å‚æ•°resultCodeï¼šç›®çš„æ´»åŠ¨å®šä¹‰çš„å”¯ä¸€æ ‡è¯†å€¼ å‚æ•°dataï¼šä»å¢“åœ°æ´»åŠ¨è¿”å›çš„æ•°æ® æ•°æ®ä½¿ç”¨æ­¥éª¤ èµ·ç‚¹æ´»åŠ¨ï¼Œè°ƒç”¨startActivityForResult()è·³è½¬ç›®çš„æ´»åŠ¨ åœ¨ç›®çš„æ´»åŠ¨ä¸­è°ƒç”¨setResult() åœ¨èµ·ç‚¹æ´»åŠ¨è¦†å†™onActivityResult()åœ¨æ–¹æ³•å†…è·å–ç›®çš„æ´»åŠ¨è¿”å›çš„æ•°æ® ç¬¬äº”ç«  æœåŠ¡å¼€å‘å’Œå¹¿æ’­äº‹ä»¶5.1 å¾ªåºæ¸è¿› æ¡ˆåˆ—ï¼šéŸ³ä¹æ’­æ”¾å™¨ ä»»åŠ¡æ¦‚è¿° åŠŸèƒ½åˆ†æ ç•Œé¢è®¾è®¡ å®ç°æš‚åœã€æ’­æ”¾å’Œåœæ­¢ æ’­æ”¾åŒæ—¶ï¼Œæ˜¾ç¤ºæ­Œæ‰‹å’ŒéŸ³ä¹åç§° ç”¨æˆ·ç•Œé¢è®¾è®¡ ä¸»ç•Œé¢ æŠ€æœ¯è¦ç‚¹ æœåŠ¡çš„åˆ›å»ºã€è°ƒç”¨ æœåŠ¡å’Œæ´»åŠ¨ä¹‹é—´çš„é€šä¿¡ Intentå¯¹è±¡çš„ä½¿ç”¨ æ¡ˆä¾‹æ¼”ç¤º æ¡ˆä¾‹ä»»åŠ¡åˆ†æå’Œè®¾è®¡ éŸ³ä¹æ’­æ”¾å™¨ç•Œé¢åˆ†æ æ ¸å¿ƒä»£ç è®¾è®¡å’Œå®ç° æ ¸å¿ƒä»£ç ç¼–å†™æ­¥éª¤ï¼š åˆ›å»ºå®‰å“é¡¹ç›®MusicBox åœ¨res/loyoutç›®å½•ï¼Œåˆ›å»ºæ’­æ”¾å™¨çš„ä¸»ç•Œé¢å¸ƒå±€æ–‡ä»¶ å®šä¹‰ä¸€ä¸ªMusicBoxContantçš„å¸¸é‡ç±»å­˜æ”¾ç¨‹åºä¸­ç”¨åˆ°çš„é™æ€æˆ–ä¸å˜çš„ä¿¡æ¯ åˆ›å»ºéŸ³ä¹æ’­æ”¾å™¨çš„æœåŠ¡ç±» åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­ï¼Œå£°æ˜æœåŠ¡ç±» å®šä¹‰å®ç°éŸ³ä¹æ’­æ”¾å™¨çš„ä¸»ç•Œé¢ å®šä¹‰äº‹é¡¹ActicityReciveräº‹ä»¶æ¥æ”¶å™¨ï¼Œæ¥å—éŸ³ä¹æœåŠ¡çŠ¶æ€å˜åŒ–å¹¿æ’­äº‹ä»¶çš„æ¥æ”¶å™¨ å®šä¹‰å®ç°æŒ‰é’®äº‹ä»¶æ¥æ”¶å™¨ï¼Œæ’­æ”¾å’Œåœæ­¢æŒ‰é’®ï¼Œå‘é€å¹¿æ’­äº‹ä»¶ 5.2 å®‰å“ä¸­çš„ç³»ç»ŸæœåŠ¡ å®‰å“å°†è¯¸å¤šå¸¸ç”¨åŠŸèƒ½å†…ç½®ä¸ºç³»ç»ŸæœåŠ¡ æä¾›ç®€å•çš„è·å–ç³»ç»ŸæœåŠ¡çš„æ–¹å¼ ç³»ç»ŸæœåŠ¡æ¶µç›–äº†å®‰å“ç»å¤§éƒ¨åˆ†å¸¸ç”¨åŠŸèƒ½ï¼Œå¦‚ï¼Œæ‹¨æ‰“ç”µè¯ï¼Œå‘é€çŸ­ä¿¡ å®‰å“ä¸­è·å–ç³»ç»ŸæœåŠ¡ è·å–ç³»ç»ŸæœåŠ¡ä»£ç ç¤ºä¾‹ TelephonyManager phoneManager=(TelephonyManager)getSystemService(Context.TELEPHONY_SERVICE); å¼ºåˆ¶ç±»å‹è½¬åŒ– åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå°†çˆ¶ç±»å‹å¯¹è±¡è½¬åŒ–ä¸ºå­ç±»å‹å¯¹è±¡ã€‚ ç”±äºå­ç±»å‹ç›¸æ¯”çˆ¶ç±»å‹çš„å†…æ¶µä¸°å¯Œï¼Œå±æ€§æ–¹æ³•æ›´å¤šï¼Œæ‰€ä»¥è¦æŠŠçˆ¶ç±»å‹è½¬åŒ–ä¸ºå­ç±»å‹æ—¶ï¼Œéœ€è¦å¼ºåˆ¶è½¬åŒ–ï¼Œæˆä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚ å¹¶ä¸æ˜¯æ‰€æœ‰çˆ¶ç±»å‹éƒ½å¯ä»¥è½¬åŒ–ä¸ºå­ç±»å‹ï¼Œè¦æ ¹æ®å…·ä½“çš„ä½¿ç”¨æƒ…å†µæ¥åšå…·ä½“çš„åˆ¤æ–­ã€‚ 5.3 å¹¿æ’­æ¥æ”¶æœºåˆ¶ å¹¿æ’­æ¶ˆæ¯ å¹¿æ’­æ˜¯ä¸€ç§åœ¨åº”ç”¨ç¨‹åºä¹‹é—´ä¼ è¾“ä¿¡æ¯çš„è®¡æŒ‡ BroadcastReceiverå¹¿æ’­æ¥æ”¶è€… å¹¿æ’­æ¶ˆæ¯Intentï¼ˆæ¶ˆæ¯è½½ä½“ï¼‰ è¢«è®¢é˜…å¹¿æ’­çš„å¤šä¸ªå¹¿æ’­æ¥æ”¶è€…æ¥æ”¶ æ¶ˆæ¯è®¢é˜…è€…ä¸äº†è§£å‘é€è€… å¹¿æ’­æ¥æ”¶è€… BroadcastReceiverå¯¹å‘å‡ºçš„å¹¿æ’­äº‹ä»¶è¿›è¡Œè¿‡æ»¤ï¼Œåº”ç”¨ç¨‹åºé€šçŸ¥å…¶ä»–åº”ç”¨ç¨‹åºæŸäº›æ•°æ®å·²ç»ä¸‹è½½å®Œæ¯•ã€‚ å¹¿æ’­æ¥æ”¶è€…æ²¡æœ‰å›¾å½¢ç•Œé¢ å¹¿æ’­å¯ä»¥æœ‰å¤šä¸ªæ¥æ”¶è€…ï¼Œå½¼æ­¤ä¸çŸ¥æ™“ã€‚å¹¿æ’­æ¥æ”¶è€…ä¹‹é—´åŒ¿å ç›‘å¬å¹¿æ’­æœºåˆ¶ å¹¿æ’­å’Œäº‹ä»¶ç›‘å¬å™¨æ˜¯åˆ†ç¦»çš„ é€šè¿‡å®‰å“ç³»ç»Ÿè¿›è¡Œå¹¿æ’­ã€æ¥æ”¶å¹¿æ’­äº‹ä»¶ æ³¨å†Œå’Œç§»é™¤ç›‘å¬é€šè¿‡å®‰å“ç³»ç»Ÿæ¥å®Œæˆ å®‰å“ç³»ç»Ÿæä¾›å¾ˆå¤šå¹¿æ’­å®šä¹‰åœ¨android.content.Intentç±»ä¸­ å¹¿æ’­æ–¹æ³• sendBroadcast():æ™®é€šæ¨¡å¼ æ‰€æœ‰æ³¨å†Œäº†å¹¿æ’­çš„æ¥æ”¶è€…ä¼šè·å¾—äº‹ä»¶é€šçŸ¥ æ¥æ”¶è€…æ¥å—é¡ºåºä¸ç¡®å®šå¹¶å‘åœ°åœ¨å„è‡ªçš„åº”ç”¨è¿›ç¨‹ä¸­æ‰§è¡Œ æ¥æ”¶è€…å’Œå‘é€è€…ä¸çŸ¥æ™“ sendOrderedBroadcast():æœ‰åºå¹¿æ’­æ¨¡å¼ æ¥æ”¶è€…ä¾ç…§è®¾å®šçš„ä¼˜å…ˆçº§é«˜ä½ä¾æ¬¡æ¥å— é«˜ä¼˜å…ˆçº§æ¥æ”¶è€…å¯ä»¥ä¸­æ–­åç»­å¹¿æ’­çš„æ¥æ”¶ï¼ŒBroadcastReceiver.abortBroadcast()ç»ˆæ­¢è¿™ä¸ªå¹¿æ’­äº‹ä»¶çš„ä¼ æ’­ï¼Œä½ä¼˜å…ˆçº§çš„è§¦å‘å™¨ç»„ä»¶ä¸å†æœ‰æœºä¼šæ¥æ”¶ é«˜ä¼˜å…ˆçº§æ¥æ”¶è€…å¯æ·»åŠ é¢å¤–ä¿¡æ¯ç»™åç»­æ¥æ”¶è€… BroadcastReceiver.setResult() ç›‘å¬å¹¿æ’­å®ç° è·å–å¹¿æ’­äº‹ä»¶çš„æ¶ˆæ¯æ¥å£åç§° äº‹ä»¶å®šåˆ¶çš„å¹¿æ’­æ¥æ”¶å™¨ï¼Œæ·»åŠ ç›¸åº”çš„å¤„ç†é€»è¾‘ æ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨åˆ°å®‰å“ç³»ç»Ÿä¸­ ç›‘å¬å¹¿æ’­å®ç°ç¤ºä¾‹ 1234567891011public class MyBroadcastReceiver extends BroadcastReceiver&#123;//actionåç§°ï¼Œæ­¤ä¸ºå›ºå®šçš„å­—ç¬¦String SMS_RECEIVED=&quot;android.provider.Telephony.SMS_RECEIVED&quot;;@Overridepublic void onReceive(COntext context, Intent intent)&#123;//å¦‚äº‹ä»¶æœ‰çŸ­ä¿¡æ¥æ”¶ï¼Œåˆ™æ‰§è¡Œif(intent.getAction().quals(SMS_RECEIVED))&#123;//è¿›è¡ŒçŸ­ä¿¡æ¥æ”¶åˆ°ä¹‹åçš„é€»è¾‘å¤„ç†&#125;&#125;&#125; ç›‘å¬å¹¿æ’­æ³¨å†Œ åœ¨manifestä¸­æ³¨å†Œç›‘å¬å™¨ 1234567891011&lt;!--å£°æ˜æ¥æ”¶å™¨--&gt;&lt;receiver android:name = &quot;.MyBroadReceiver&quot;&gt; &lt;!--æ¥æ”¶äº‹ä»¶çš„è¿‡æ»¤æ¡ä»¶å£°æ˜å’Œä¼˜å…ˆçº§--&gt; &lt;intent-filter android:priority=&quot;1000&quot;&gt; &lt;!--æ”¯æŒæ¥æ”¶çš„äº‹ä»¶ç±»å‹--&gt; &lt;action android:name=&quot;android.provider.Telephony.SMS_RECEIVED&quot;/&gt; &lt;/intent-filter&gt;&lt;/receiver&gt;&lt;!--ç›‘å¬ç³»ç»Ÿçº§äº‹ä»¶ï¼Œéœ€è¦ç›¸åº”çš„æƒé™ï¼šæ¥æ”¶è€…å’Œå‘é€çŸ­ä¿¡çš„æƒé™--&gt;&lt;uses-permission android:name=&quot;android.permission.RECEIVE_SMS&quot;/&gt; &lt;uses-permission android:name=&quot;android.permission.SEND_SMS&quot;/&gt; åœ¨è¿è¡Œä»£ç ä¸­æ³¨å†Œå¹¿æ’­ç›‘å¬å™¨ 123456//åˆ›å»ºç›‘å¬å™¨å¯¹è±¡MyBroadcastReceiver myMsgInfoReceiver=new MyBroadcastReceiver();//å£°æ˜IntentFilterï¼Œæè¿°å¯ä»¥æ¥æ”¶çš„å¹¿æ’­æ¶ˆæ¯IntentFilter intentFilter=new IntentFilter(&quot;android.provider.Telephony.SMS_RECEIED&quot;);//è°ƒç”¨Activityçš„æ–¹æ³•ï¼Œæ³¨å†Œç›‘å¬å™¨registerReceiver(mBatteryInfoReceiver,intentFilter) å¹¿æ’­äº‹ä»¶ç”Ÿå‘½å‘¨æœŸ å¹¿æ’­æ¶ˆæ¯åˆ°æ¥ï¼Œæ–°å»ºBroadcastReceiverå¯¹è±¡ è°ƒç”¨onReceive()æ–¹æ³•ï¼Œæ‰§è¡Œæ“ä½œ æ“ä½œå®Œæˆåï¼Œå¯¹è±¡è¢«é”€æ¯ äº‹ä»¶å‡ºå‘â€”&gt;åˆ›å»ºäº‹ä»¶ç›‘å¬å™¨å¯¹è±¡â€”&gt;è°ƒç”¨ç›‘å¬å™¨çš„onReceiver()â€”&gt;é”€æ¯äº‹ä»¶ç›‘å¬å™¨çš„å¯¹è±¡â€”&gt;ç»“æŸæ“ä½œï¼Œè¿”å› å¹¿æ’­äº‹ä»¶æ³¨æ„äº‹é¡¹ åœ¨å¹¿æ’­æ¥æ”¶å™¨ä¸­å“åº”é€»è¾‘ä¸­ä¸èƒ½æ‰§è¡Œæ¯”è¾ƒè€—æ—¶çš„æ“ä½œ åœ¨onReceive()æ–¹æ³•ä¸­æ‰§è¡Œè¶…è¿‡10ç§’ï¼Œå°±ä¼šå¼¹å‡ºæ— å“åº”å¯¹è¯æ¡†ã€‚","categories":[{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"tags":[{"name":"å®‰å“ç¼–ç¨‹","slug":"å®‰å“ç¼–ç¨‹","permalink":"https://sci.ci/tags/%E5%AE%89%E5%8D%93%E7%BC%96%E7%A8%8B/"}]}],"categories":[{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/categories/Linux/"},{"name":"Machine Learning","slug":"Machine-Learning","permalink":"https://sci.ci/categories/Machine-Learning/"},{"name":"Python","slug":"Python","permalink":"https://sci.ci/categories/Python/"},{"name":"Nostr","slug":"Nostr","permalink":"https://sci.ci/categories/Nostr/"},{"name":"ç½‘ç«™ç¼–ç¨‹","slug":"ç½‘ç«™ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E7%BD%91%E7%AB%99%E7%BC%96%E7%A8%8B/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/categories/%E7%88%AC%E8%99%AB/"},{"name":"å­¦ä¹ ç¬”è®°","slug":"å­¦ä¹ ç¬”è®°","permalink":"https://sci.ci/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://sci.ci/categories/%E5%85%B6%E4%BB%96/"},{"name":"python","slug":"python","permalink":"https://sci.ci/categories/python/"},{"name":"æ„æƒ³","slug":"æ„æƒ³","permalink":"https://sci.ci/categories/%E6%9E%84%E6%83%B3/"},{"name":"åµŒå…¥å¼","slug":"åµŒå…¥å¼","permalink":"https://sci.ci/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/"},{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://sci.ci/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"å®‰å“ç¼–ç¨‹","slug":"å®‰å“ç¼–ç¨‹","permalink":"https://sci.ci/categories/%E5%AE%89%E5%8D%93%E7%BC%96%E7%A8%8B/"},{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://sci.ci/categories/%E6%A0%91%E8%8E%93%E6%B4%BE/"},{"name":"Windows","slug":"Windows","permalink":"https://sci.ci/categories/Windows/"}],"tags":[{"name":"Stunnel","slug":"Stunnel","permalink":"https://sci.ci/tags/Stunnel/"},{"name":"V2ray","slug":"V2ray","permalink":"https://sci.ci/tags/V2ray/"},{"name":"Data Science","slug":"Data-Science","permalink":"https://sci.ci/tags/Data-Science/"},{"name":"Machine Learning","slug":"Machine-Learning","permalink":"https://sci.ci/tags/Machine-Learning/"},{"name":"Matplotlib","slug":"Matplotlib","permalink":"https://sci.ci/tags/Matplotlib/"},{"name":"Bar3d","slug":"Bar3d","permalink":"https://sci.ci/tags/Bar3d/"},{"name":"Linux","slug":"Linux","permalink":"https://sci.ci/tags/Linux/"},{"name":"nohup","slug":"nohup","permalink":"https://sci.ci/tags/nohup/"},{"name":"Hexo","slug":"Hexo","permalink":"https://sci.ci/tags/Hexo/"},{"name":"Nostr","slug":"Nostr","permalink":"https://sci.ci/tags/Nostr/"},{"name":"NIP-05","slug":"NIP-05","permalink":"https://sci.ci/tags/NIP-05/"},{"name":"onedrive","slug":"onedrive","permalink":"https://sci.ci/tags/onedrive/"},{"name":"api","slug":"api","permalink":"https://sci.ci/tags/api/"},{"name":"åçˆ¬è™«","slug":"åçˆ¬è™«","permalink":"https://sci.ci/tags/%E5%8F%8D%E7%88%AC%E8%99%AB/"},{"name":"Puppeteer","slug":"Puppeteer","permalink":"https://sci.ci/tags/Puppeteer/"},{"name":"Vuejs","slug":"Vuejs","permalink":"https://sci.ci/tags/Vuejs/"},{"name":"Openoffice","slug":"Openoffice","permalink":"https://sci.ci/tags/Openoffice/"},{"name":"VPN","slug":"VPN","permalink":"https://sci.ci/tags/VPN/"},{"name":"JS","slug":"JS","permalink":"https://sci.ci/tags/JS/"},{"name":"python","slug":"python","permalink":"https://sci.ci/tags/python/"},{"name":"Selenium","slug":"Selenium","permalink":"https://sci.ci/tags/Selenium/"},{"name":"çˆ¬è™«","slug":"çˆ¬è™«","permalink":"https://sci.ci/tags/%E7%88%AC%E8%99%AB/"},{"name":"Content Length","slug":"Content-Length","permalink":"https://sci.ci/tags/Content-Length/"},{"name":"Serverless","slug":"Serverless","permalink":"https://sci.ci/tags/Serverless/"},{"name":"è·¨åŸŸ","slug":"è·¨åŸŸ","permalink":"https://sci.ci/tags/%E8%B7%A8%E5%9F%9F/"},{"name":"Youtube-dl","slug":"Youtube-dl","permalink":"https://sci.ci/tags/Youtube-dl/"},{"name":"m3u8","slug":"m3u8","permalink":"https://sci.ci/tags/m3u8/"},{"name":"è¯­é›€","slug":"è¯­é›€","permalink":"https://sci.ci/tags/%E8%AF%AD%E9%9B%80/"},{"name":"Javascript","slug":"Javascript","permalink":"https://sci.ci/tags/Javascript/"},{"name":"Python","slug":"Python","permalink":"https://sci.ci/tags/Python/"},{"name":"ESP8266","slug":"ESP8266","permalink":"https://sci.ci/tags/ESP8266/"},{"name":"Arduino","slug":"Arduino","permalink":"https://sci.ci/tags/Arduino/"},{"name":"MPU6050","slug":"MPU6050","permalink":"https://sci.ci/tags/MPU6050/"},{"name":"äººå·¥æ™ºèƒ½","slug":"äººå·¥æ™ºèƒ½","permalink":"https://sci.ci/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/"},{"name":"AI","slug":"AI","permalink":"https://sci.ci/tags/AI/"},{"name":"ADB","slug":"ADB","permalink":"https://sci.ci/tags/ADB/"},{"name":"Java","slug":"Java","permalink":"https://sci.ci/tags/Java/"},{"name":"-Python","slug":"Python","permalink":"https://sci.ci/tags/Python/"},{"name":"-TWRP","slug":"TWRP","permalink":"https://sci.ci/tags/TWRP/"},{"name":"Mitmproxy","slug":"Mitmproxy","permalink":"https://sci.ci/tags/Mitmproxy/"},{"name":"Pandas","slug":"Pandas","permalink":"https://sci.ci/tags/Pandas/"},{"name":"æ•°æ®å¤„ç†","slug":"æ•°æ®å¤„ç†","permalink":"https://sci.ci/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/"},{"name":"Volantis","slug":"Volantis","permalink":"https://sci.ci/tags/Volantis/"},{"name":"æ­£åˆ™è¡¨è¾¾å¼","slug":"æ­£åˆ™è¡¨è¾¾å¼","permalink":"https://sci.ci/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"name":"Numpy","slug":"Numpy","permalink":"https://sci.ci/tags/Numpy/"},{"name":"æ ‘è“æ´¾","slug":"æ ‘è“æ´¾","permalink":"https://sci.ci/tags/%E6%A0%91%E8%8E%93%E6%B4%BE/"},{"name":"Nginx","slug":"Nginx","permalink":"https://sci.ci/tags/Nginx/"},{"name":"åšå®¢","slug":"åšå®¢","permalink":"https://sci.ci/tags/%E5%8D%9A%E5%AE%A2/"},{"name":"Vlantis","slug":"Vlantis","permalink":"https://sci.ci/tags/Vlantis/"},{"name":"éŸ³ä¹æ’­æ”¾å™¨","slug":"éŸ³ä¹æ’­æ”¾å™¨","permalink":"https://sci.ci/tags/%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/"},{"name":"ç”µå•†","slug":"ç”µå•†","permalink":"https://sci.ci/tags/%E7%94%B5%E5%95%86/"},{"name":"ç”µå•†ç³»ç»Ÿ","slug":"ç”µå•†ç³»ç»Ÿ","permalink":"https://sci.ci/tags/%E7%94%B5%E5%95%86%E7%B3%BB%E7%BB%9F/"},{"name":"Cookie","slug":"Cookie","permalink":"https://sci.ci/tags/Cookie/"},{"name":"JSON","slug":"JSON","permalink":"https://sci.ci/tags/JSON/"},{"name":"Git","slug":"Git","permalink":"https://sci.ci/tags/Git/"},{"name":"JsDelivr","slug":"JsDelivr","permalink":"https://sci.ci/tags/JsDelivr/"},{"name":"YAAW","slug":"YAAW","permalink":"https://sci.ci/tags/YAAW/"},{"name":"Oneindex","slug":"Oneindex","permalink":"https://sci.ci/tags/Oneindex/"},{"name":"Rclone","slug":"Rclone","permalink":"https://sci.ci/tags/Rclone/"},{"name":"Aria2","slug":"Aria2","permalink":"https://sci.ci/tags/Aria2/"},{"name":"TensorFlow","slug":"TensorFlow","permalink":"https://sci.ci/tags/TensorFlow/"},{"name":"æ·±åº¦å­¦ä¹ ","slug":"æ·±åº¦å­¦ä¹ ","permalink":"https://sci.ci/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"},{"name":"PyTorch","slug":"PyTorch","permalink":"https://sci.ci/tags/PyTorch/"},{"name":"SSR","slug":"SSR","permalink":"https://sci.ci/tags/SSR/"},{"name":"haproxy","slug":"haproxy","permalink":"https://sci.ci/tags/haproxy/"},{"name":"è´Ÿè½½å‡è¡¡","slug":"è´Ÿè½½å‡è¡¡","permalink":"https://sci.ci/tags/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/"},{"name":"ç§»åŠ¨ç½‘ç»œ","slug":"ç§»åŠ¨ç½‘ç»œ","permalink":"https://sci.ci/tags/%E7%A7%BB%E5%8A%A8%E7%BD%91%E7%BB%9C/"},{"name":"ç½‘ç«™ä¼˜åŒ–","slug":"ç½‘ç«™ä¼˜åŒ–","permalink":"https://sci.ci/tags/%E7%BD%91%E7%AB%99%E4%BC%98%E5%8C%96/"},{"name":"Squid","slug":"Squid","permalink":"https://sci.ci/tags/Squid/"},{"name":"Mysql","slug":"Mysql","permalink":"https://sci.ci/tags/Mysql/"},{"name":"Stunnelä»£ç†","slug":"Stunnelä»£ç†","permalink":"https://sci.ci/tags/Stunnel%E4%BB%A3%E7%90%86/"},{"name":"æµè§ˆå™¨æ’ä»¶","slug":"æµè§ˆå™¨æ’ä»¶","permalink":"https://sci.ci/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E6%8F%92%E4%BB%B6/"},{"name":"ShopXO","slug":"ShopXO","permalink":"https://sci.ci/tags/ShopXO/"},{"name":"æœºå™¨å­¦ä¹ ","slug":"æœºå™¨å­¦ä¹ ","permalink":"https://sci.ci/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"},{"name":"ç½‘ç»œæŠ€æœ¯","slug":"ç½‘ç»œæŠ€æœ¯","permalink":"https://sci.ci/tags/%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/"},{"name":"å¾®ä¿¡å°ç¨‹åº","slug":"å¾®ä¿¡å°ç¨‹åº","permalink":"https://sci.ci/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"},{"name":"å¾®ä¿¡å…¬ä¼—å·","slug":"å¾®ä¿¡å…¬ä¼—å·","permalink":"https://sci.ci/tags/%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%8F%B7/"},{"name":"Bootstrap","slug":"Bootstrap","permalink":"https://sci.ci/tags/Bootstrap/"},{"name":"Kali Linux","slug":"Kali-Linux","permalink":"https://sci.ci/tags/Kali-Linux/"},{"name":"Flutter","slug":"Flutter","permalink":"https://sci.ci/tags/Flutter/"},{"name":"å®‰å“å¼€æºåº“","slug":"å®‰å“å¼€æºåº“","permalink":"https://sci.ci/tags/%E5%AE%89%E5%8D%93%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"API","slug":"API","permalink":"https://sci.ci/tags/API/"},{"name":"Magento","slug":"Magento","permalink":"https://sci.ci/tags/Magento/"},{"name":"å®‰å“ç¼–ç¨‹","slug":"å®‰å“ç¼–ç¨‹","permalink":"https://sci.ci/tags/%E5%AE%89%E5%8D%93%E7%BC%96%E7%A8%8B/"}]}